/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source visit the plugins github repository (https://github.com/denolehov/obsidian-git)
*/

var TD=Object.create;var oc=Object.defineProperty;var CD=Object.getOwnPropertyDescriptor;var PD=Object.getOwnPropertyNames;var RD=Object.getPrototypeOf,ID=Object.prototype.hasOwnProperty;var Pb=t=>{throw TypeError(t)};var FD=(t,e,r)=>e in t?oc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var $D=(t,e)=>()=>(t&&(e=t(t=0)),e);var I=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),OD=(t,e)=>{for(var r in e)oc(t,r,{get:e[r],enumerable:!0})},Rb=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of PD(e))!ID.call(t,i)&&i!==r&&oc(t,i,{get:()=>e[i],enumerable:!(n=CD(e,i))||n.enumerable});return t};var Ft=(t,e,r)=>(r=t!=null?TD(RD(t)):{},Rb(e||!t||!t.__esModule?oc(r,"default",{value:t,enumerable:!0}):r,t)),MD=t=>Rb(oc({},"__esModule",{value:!0}),t);var ze=(t,e,r)=>FD(t,typeof e!="symbol"?e+"":e,r),bm=(t,e,r)=>e.has(t)||Pb("Cannot "+r);var F=(t,e,r)=>(bm(t,e,"read from private field"),r?r.call(t):e.get(t)),ve=(t,e,r)=>e.has(t)?Pb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),me=(t,e,r,n)=>(bm(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),pt=(t,e,r)=>(bm(t,e,"access private method"),r);var $b=I(xf=>{"use strict";p();xf.byteLength=LD;xf.toByteArray=BD;xf.fromByteArray=GD;var Qn=[],fn=[],DD=typeof Uint8Array!="undefined"?Uint8Array:Array,_m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(is=0,Ib=_m.length;is<Ib;++is)Qn[is]=_m[is],fn[_m.charCodeAt(is)]=is;var is,Ib;fn[45]=62;fn[95]=63;function Fb(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function LD(t){var e=Fb(t),r=e[0],n=e[1];return(r+n)*3/4-n}function ND(t,e,r){return(e+r)*3/4-r}function BD(t){var e,r=Fb(t),n=r[0],i=r[1],a=new DD(ND(t,n,i)),s=0,o=i>0?n-4:n,l;for(l=0;l<o;l+=4)e=fn[t.charCodeAt(l)]<<18|fn[t.charCodeAt(l+1)]<<12|fn[t.charCodeAt(l+2)]<<6|fn[t.charCodeAt(l+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=e&255;return i===2&&(e=fn[t.charCodeAt(l)]<<2|fn[t.charCodeAt(l+1)]>>4,a[s++]=e&255),i===1&&(e=fn[t.charCodeAt(l)]<<10|fn[t.charCodeAt(l+1)]<<4|fn[t.charCodeAt(l+2)]>>2,a[s++]=e>>8&255,a[s++]=e&255),a}function HD(t){return Qn[t>>18&63]+Qn[t>>12&63]+Qn[t>>6&63]+Qn[t&63]}function UD(t,e,r){for(var n,i=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),i.push(HD(n));return i.join("")}function GD(t){for(var e,r=t.length,n=r%3,i=[],a=16383,s=0,o=r-n;s<o;s+=a)i.push(UD(t,s,s+a>o?o:s+a));return n===1?(e=t[r-1],i.push(Qn[e>>2]+Qn[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Qn[e>>10]+Qn[e>>4&63]+Qn[e<<2&63]+"=")),i.join("")}});var Ob=I(xm=>{p();xm.read=function(t,e,r,n,i){var a,s,o=i*8-n-1,l=(1<<o)-1,c=l>>1,u=-7,f=r?i-1:0,d=r?-1:1,h=t[e+f];for(f+=d,a=h&(1<<-u)-1,h>>=-u,u+=o;u>0;a=a*256+t[e+f],f+=d,u-=8);for(s=a&(1<<-u)-1,a>>=-u,u+=n;u>0;s=s*256+t[e+f],f+=d,u-=8);if(a===0)a=1-c;else{if(a===l)return s?NaN:(h?-1:1)*(1/0);s=s+Math.pow(2,n),a=a-c}return(h?-1:1)*s*Math.pow(2,a-n)};xm.write=function(t,e,r,n,i,a){var s,o,l,c=a*8-i-1,u=(1<<c)-1,f=u>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:a-1,m=n?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+f>=1?e+=d/l:e+=d*Math.pow(2,1-f),e*l>=2&&(s++,l/=2),s+f>=u?(o=0,s=u):s+f>=1?(o=(e*l-1)*Math.pow(2,i),s=s+f):(o=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[r+h]=o&255,h+=m,o/=256,i-=8);for(s=s<<i|o,c+=i;c>0;t[r+h]=s&255,h+=m,s/=256,c-=8);t[r+h-m]|=g*128}});var Im=I(_o=>{"use strict";p();var Sm=$b(),yo=Ob(),Mb=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;_o.Buffer=$;_o.SlowBuffer=YD;_o.INSPECT_MAX_BYTES=50;var Sf=2147483647;_o.kMaxLength=Sf;$.TYPED_ARRAY_SUPPORT=jD();!$.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function jD(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch(t){return!1}}Object.defineProperty($.prototype,"parent",{enumerable:!0,get:function(){if($.isBuffer(this))return this.buffer}});Object.defineProperty($.prototype,"offset",{enumerable:!0,get:function(){if($.isBuffer(this))return this.byteOffset}});function Di(t){if(t>Sf)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,$.prototype),e}function $(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Tm(t)}return Bb(t,e,r)}$.poolSize=8192;function Bb(t,e,r){if(typeof t=="string")return zD(t,e);if(ArrayBuffer.isView(t))return VD(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(ei(t,ArrayBuffer)||t&&ei(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(ei(t,SharedArrayBuffer)||t&&ei(t.buffer,SharedArrayBuffer)))return km(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return $.from(n,e,r);let i=WD(t);if(i)return i;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return $.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}$.from=function(t,e,r){return Bb(t,e,r)};Object.setPrototypeOf($.prototype,Uint8Array.prototype);Object.setPrototypeOf($,Uint8Array);function Hb(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function qD(t,e,r){return Hb(t),t<=0?Di(t):e!==void 0?typeof r=="string"?Di(t).fill(e,r):Di(t).fill(e):Di(t)}$.alloc=function(t,e,r){return qD(t,e,r)};function Tm(t){return Hb(t),Di(t<0?0:Cm(t)|0)}$.allocUnsafe=function(t){return Tm(t)};$.allocUnsafeSlow=function(t){return Tm(t)};function zD(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!$.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=Ub(t,e)|0,n=Di(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function Em(t){let e=t.length<0?0:Cm(t.length)|0,r=Di(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function VD(t){if(ei(t,Uint8Array)){let e=new Uint8Array(t);return km(e.buffer,e.byteOffset,e.byteLength)}return Em(t)}function km(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,$.prototype),n}function WD(t){if($.isBuffer(t)){let e=Cm(t.length)|0,r=Di(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||Rm(t.length)?Di(0):Em(t);if(t.type==="Buffer"&&Array.isArray(t.data))return Em(t.data)}function Cm(t){if(t>=Sf)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Sf.toString(16)+" bytes");return t|0}function YD(t){return+t!=t&&(t=0),$.alloc(+t)}$.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==$.prototype};$.compare=function(e,r){if(ei(e,Uint8Array)&&(e=$.from(e,e.offset,e.byteLength)),ei(r,Uint8Array)&&(r=$.from(r,r.offset,r.byteLength)),!$.isBuffer(e)||!$.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,i=r.length;for(let a=0,s=Math.min(n,i);a<s;++a)if(e[a]!==r[a]){n=e[a],i=r[a];break}return n<i?-1:i<n?1:0};$.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};$.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return $.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let i=$.allocUnsafe(r),a=0;for(n=0;n<e.length;++n){let s=e[n];if(ei(s,Uint8Array))a+s.length>i.length?($.isBuffer(s)||(s=$.from(s)),s.copy(i,a)):Uint8Array.prototype.set.call(i,s,a);else if($.isBuffer(s))s.copy(i,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=s.length}return i};function Ub(t,e){if($.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||ei(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Am(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Zb(t).length;default:if(i)return n?-1:Am(t).length;e=(""+e).toLowerCase(),i=!0}}$.byteLength=Ub;function XD(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return aL(this,e,r);case"utf8":case"utf-8":return jb(this,e,r);case"ascii":return nL(this,e,r);case"latin1":case"binary":return iL(this,e,r);case"base64":return tL(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return sL(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}$.prototype._isBuffer=!0;function as(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}$.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)as(this,r,r+1);return this};$.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)as(this,r,r+3),as(this,r+1,r+2);return this};$.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)as(this,r,r+7),as(this,r+1,r+6),as(this,r+2,r+5),as(this,r+3,r+4);return this};$.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?jb(this,0,e):XD.apply(this,arguments)};$.prototype.toLocaleString=$.prototype.toString;$.prototype.equals=function(e){if(!$.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:$.compare(this,e)===0};$.prototype.inspect=function(){let e="",r=_o.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};Mb&&($.prototype[Mb]=$.prototype.inspect);$.prototype.compare=function(e,r,n,i,a){if(ei(e,Uint8Array)&&(e=$.from(e,e.offset,e.byteLength)),!$.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),a===void 0&&(a=this.length),r<0||n>e.length||i<0||a>this.length)throw new RangeError("out of range index");if(i>=a&&r>=n)return 0;if(i>=a)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,a>>>=0,this===e)return 0;let s=a-i,o=n-r,l=Math.min(s,o),c=this.slice(i,a),u=e.slice(r,n);for(let f=0;f<l;++f)if(c[f]!==u[f]){s=c[f],o=u[f];break}return s<o?-1:o<s?1:0};function Gb(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Rm(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=$.from(e,n)),$.isBuffer(e))return e.length===0?-1:Db(t,e,r,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):Db(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function Db(t,e,r,n,i){let a=1,s=t.length,o=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;a=2,s/=2,o/=2,r/=2}function l(u,f){return a===1?u[f]:u.readUInt16BE(f*a)}let c;if(i){let u=-1;for(c=r;c<s;c++)if(l(t,c)===l(e,u===-1?0:c-u)){if(u===-1&&(u=c),c-u+1===o)return u*a}else u!==-1&&(c-=c-u),u=-1}else for(r+o>s&&(r=s-o),c=r;c>=0;c--){let u=!0;for(let f=0;f<o;f++)if(l(t,c+f)!==l(e,f)){u=!1;break}if(u)return c}return-1}$.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};$.prototype.indexOf=function(e,r,n){return Gb(this,e,r,n,!0)};$.prototype.lastIndexOf=function(e,r,n){return Gb(this,e,r,n,!1)};function ZD(t,e,r,n){r=Number(r)||0;let i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;let a=e.length;n>a/2&&(n=a/2);let s;for(s=0;s<n;++s){let o=parseInt(e.substr(s*2,2),16);if(Rm(o))return s;t[r+s]=o}return s}function KD(t,e,r,n){return Ef(Am(e,t.length-r),t,r,n)}function JD(t,e,r,n){return Ef(uL(e),t,r,n)}function QD(t,e,r,n){return Ef(Zb(e),t,r,n)}function eL(t,e,r,n){return Ef(fL(e,t.length-r),t,r,n)}$.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let a=this.length-r;if((n===void 0||n>a)&&(n=a),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return ZD(this,e,r,n);case"utf8":case"utf-8":return KD(this,e,r,n);case"ascii":case"latin1":case"binary":return JD(this,e,r,n);case"base64":return QD(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return eL(this,e,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};$.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function tL(t,e,r){return e===0&&r===t.length?Sm.fromByteArray(t):Sm.fromByteArray(t.slice(e,r))}function jb(t,e,r){r=Math.min(t.length,r);let n=[],i=e;for(;i<r;){let a=t[i],s=null,o=a>239?4:a>223?3:a>191?2:1;if(i+o<=r){let l,c,u,f;switch(o){case 1:a<128&&(s=a);break;case 2:l=t[i+1],(l&192)===128&&(f=(a&31)<<6|l&63,f>127&&(s=f));break;case 3:l=t[i+1],c=t[i+2],(l&192)===128&&(c&192)===128&&(f=(a&15)<<12|(l&63)<<6|c&63,f>2047&&(f<55296||f>57343)&&(s=f));break;case 4:l=t[i+1],c=t[i+2],u=t[i+3],(l&192)===128&&(c&192)===128&&(u&192)===128&&(f=(a&15)<<18|(l&63)<<12|(c&63)<<6|u&63,f>65535&&f<1114112&&(s=f))}}s===null?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=o}return rL(n)}var Lb=4096;function rL(t){let e=t.length;if(e<=Lb)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=Lb));return r}function nL(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function iL(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function aL(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let a=e;a<r;++a)i+=dL[t[a]];return i}function sL(t,e,r){let n=t.slice(e,r),i="";for(let a=0;a<n.length-1;a+=2)i+=String.fromCharCode(n[a]+n[a+1]*256);return i}$.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let i=this.subarray(e,r);return Object.setPrototypeOf(i,$.prototype),i};function $t(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}$.prototype.readUintLE=$.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||$t(e,r,this.length);let i=this[e],a=1,s=0;for(;++s<r&&(a*=256);)i+=this[e+s]*a;return i};$.prototype.readUintBE=$.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||$t(e,r,this.length);let i=this[e+--r],a=1;for(;r>0&&(a*=256);)i+=this[e+--r]*a;return i};$.prototype.readUint8=$.prototype.readUInt8=function(e,r){return e=e>>>0,r||$t(e,1,this.length),this[e]};$.prototype.readUint16LE=$.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||$t(e,2,this.length),this[e]|this[e+1]<<8};$.prototype.readUint16BE=$.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||$t(e,2,this.length),this[e]<<8|this[e+1]};$.prototype.readUint32LE=$.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||$t(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};$.prototype.readUint32BE=$.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||$t(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};$.prototype.readBigUInt64LE=ga(function(e){e=e>>>0,bo(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&lc(e,this.length-8);let i=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,a=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(a)<<BigInt(32))});$.prototype.readBigUInt64BE=ga(function(e){e=e>>>0,bo(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&lc(e,this.length-8);let i=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],a=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(a)});$.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||$t(e,r,this.length);let i=this[e],a=1,s=0;for(;++s<r&&(a*=256);)i+=this[e+s]*a;return a*=128,i>=a&&(i-=Math.pow(2,8*r)),i};$.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||$t(e,r,this.length);let i=r,a=1,s=this[e+--i];for(;i>0&&(a*=256);)s+=this[e+--i]*a;return a*=128,s>=a&&(s-=Math.pow(2,8*r)),s};$.prototype.readInt8=function(e,r){return e=e>>>0,r||$t(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};$.prototype.readInt16LE=function(e,r){e=e>>>0,r||$t(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};$.prototype.readInt16BE=function(e,r){e=e>>>0,r||$t(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};$.prototype.readInt32LE=function(e,r){return e=e>>>0,r||$t(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};$.prototype.readInt32BE=function(e,r){return e=e>>>0,r||$t(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};$.prototype.readBigInt64LE=ga(function(e){e=e>>>0,bo(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&lc(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});$.prototype.readBigInt64BE=ga(function(e){e=e>>>0,bo(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&lc(e,this.length-8);let i=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});$.prototype.readFloatLE=function(e,r){return e=e>>>0,r||$t(e,4,this.length),yo.read(this,e,!0,23,4)};$.prototype.readFloatBE=function(e,r){return e=e>>>0,r||$t(e,4,this.length),yo.read(this,e,!1,23,4)};$.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||$t(e,8,this.length),yo.read(this,e,!0,52,8)};$.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||$t(e,8,this.length),yo.read(this,e,!1,52,8)};function br(t,e,r,n,i,a){if(!$.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}$.prototype.writeUintLE=$.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let o=Math.pow(2,8*n)-1;br(this,e,r,n,o,0)}let a=1,s=0;for(this[r]=e&255;++s<n&&(a*=256);)this[r+s]=e/a&255;return r+n};$.prototype.writeUintBE=$.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let o=Math.pow(2,8*n)-1;br(this,e,r,n,o,0)}let a=n-1,s=1;for(this[r+a]=e&255;--a>=0&&(s*=256);)this[r+a]=e/s&255;return r+n};$.prototype.writeUint8=$.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||br(this,e,r,1,255,0),this[r]=e&255,r+1};$.prototype.writeUint16LE=$.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||br(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};$.prototype.writeUint16BE=$.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||br(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};$.prototype.writeUint32LE=$.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||br(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};$.prototype.writeUint32BE=$.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||br(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function qb(t,e,r,n,i){Xb(e,n,i,t,r,7);let a=Number(e&BigInt(4294967295));t[r++]=a,a=a>>8,t[r++]=a,a=a>>8,t[r++]=a,a=a>>8,t[r++]=a;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,r}function zb(t,e,r,n,i){Xb(e,n,i,t,r,7);let a=Number(e&BigInt(4294967295));t[r+7]=a,a=a>>8,t[r+6]=a,a=a>>8,t[r+5]=a,a=a>>8,t[r+4]=a;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s=s>>8,t[r+2]=s,s=s>>8,t[r+1]=s,s=s>>8,t[r]=s,r+8}$.prototype.writeBigUInt64LE=ga(function(e,r=0){return qb(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});$.prototype.writeBigUInt64BE=ga(function(e,r=0){return zb(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});$.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let l=Math.pow(2,8*n-1);br(this,e,r,n,l-1,-l)}let a=0,s=1,o=0;for(this[r]=e&255;++a<n&&(s*=256);)e<0&&o===0&&this[r+a-1]!==0&&(o=1),this[r+a]=(e/s>>0)-o&255;return r+n};$.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let l=Math.pow(2,8*n-1);br(this,e,r,n,l-1,-l)}let a=n-1,s=1,o=0;for(this[r+a]=e&255;--a>=0&&(s*=256);)e<0&&o===0&&this[r+a+1]!==0&&(o=1),this[r+a]=(e/s>>0)-o&255;return r+n};$.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||br(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};$.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||br(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};$.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||br(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};$.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||br(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};$.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||br(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};$.prototype.writeBigInt64LE=ga(function(e,r=0){return qb(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});$.prototype.writeBigInt64BE=ga(function(e,r=0){return zb(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Vb(t,e,r,n,i,a){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Wb(t,e,r,n,i){return e=+e,r=r>>>0,i||Vb(t,e,r,4,34028234663852886e22,-34028234663852886e22),yo.write(t,e,r,n,23,4),r+4}$.prototype.writeFloatLE=function(e,r,n){return Wb(this,e,r,!0,n)};$.prototype.writeFloatBE=function(e,r,n){return Wb(this,e,r,!1,n)};function Yb(t,e,r,n,i){return e=+e,r=r>>>0,i||Vb(t,e,r,8,17976931348623157e292,-17976931348623157e292),yo.write(t,e,r,n,52,8),r+8}$.prototype.writeDoubleLE=function(e,r,n){return Yb(this,e,r,!0,n)};$.prototype.writeDoubleBE=function(e,r,n){return Yb(this,e,r,!1,n)};$.prototype.copy=function(e,r,n,i){if(!$.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);let a=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),r),a};$.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!$.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let a;if(typeof e=="number")for(a=r;a<n;++a)this[a]=e;else{let s=$.isBuffer(e)?e:$.from(e,i),o=s.length;if(o===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-r;++a)this[a+r]=s[a%o]}return this};var wo={};function Pm(t,e,r){wo[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}Pm("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Pm("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);Pm("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=Nb(String(r)):typeof r=="bigint"&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=Nb(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function Nb(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function oL(t,e,r){bo(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&lc(e,t.length-(r+1))}function Xb(t,e,r,n,i,a){if(t>r||t<e){let s=typeof e=="bigint"?"n":"",o;throw a>3?e===0||e===BigInt(0)?o=`>= 0${s} and < 2${s} ** ${(a+1)*8}${s}`:o=`>= -(2${s} ** ${(a+1)*8-1}${s}) and < 2 ** ${(a+1)*8-1}${s}`:o=`>= ${e}${s} and <= ${r}${s}`,new wo.ERR_OUT_OF_RANGE("value",o,t)}oL(n,i,a)}function bo(t,e){if(typeof t!="number")throw new wo.ERR_INVALID_ARG_TYPE(e,"number",t)}function lc(t,e,r){throw Math.floor(t)!==t?(bo(t,r),new wo.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new wo.ERR_BUFFER_OUT_OF_BOUNDS:new wo.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var lL=/[^+/0-9A-Za-z-_]/g;function cL(t){if(t=t.split("=")[0],t=t.trim().replace(lL,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function Am(t,e){e=e||1/0;let r,n=t.length,i=null,a=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&a.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&a.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;a.push(r)}else if(r<2048){if((e-=2)<0)break;a.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;a.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return a}function uL(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function fL(t,e){let r,n,i,a=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,a.push(i),a.push(n);return a}function Zb(t){return Sm.toByteArray(cL(t))}function Ef(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function ei(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function Rm(t){return t!==t}var dL=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function ga(t){return typeof BigInt=="undefined"?hL:t}function hL(){throw new Error("BigInt not supported")}});var Kb,Fm,Buffer,p=$D(()=>{Kb=require("obsidian");Kb.Platform.isMobileApp?Fm=Im().Buffer:Fm=global.Buffer;Buffer=Fm});var Qb=I((a7,Jb)=>{"use strict";p();var Vr=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if(typeof process=="undefined"||typeof process.domain=="undefined")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||Vr.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||Vr.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||Vr.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=Vr.DEFAULT_MAX_PENDING};Vr.DEFAULT_TIMEOUT=0;Vr.DEFAULT_MAX_OCCUPATION_TIME=0;Vr.DEFAULT_MAX_EXECUTION_TIME=0;Vr.DEFAULT_MAX_PENDING=1e3;Vr.prototype.acquire=function(t,e,r,n){if(Array.isArray(t))return this._acquireBatch(t,e,r,n);if(typeof e!="function")throw new Error("You must pass a function to execute");var i=null,a=null,s=null;typeof r!="function"&&(n=r,r=null,s=new this.Promise(function(b,k){i=b,a=k})),n=n||{};var o=!1,l=null,c=null,u=null,f=this,d=function(b,k,E){c&&(clearTimeout(c),c=null),u&&(clearTimeout(u),u=null),b&&(f.queues[t]&&f.queues[t].length===0&&delete f.queues[t],f.domainReentrant&&delete f.domains[t]),o||(s?k?a(k):i(E):typeof r=="function"&&r(k,E),o=!0),b&&f.queues[t]&&f.queues[t].length>0&&f.queues[t].shift()()},h=function(b){if(o)return d(b);l&&(clearTimeout(l),l=null),f.domainReentrant&&b&&(f.domains[t]=process.domain);var k=n.maxExecutionTime||f.maxExecutionTime;if(k&&(u=setTimeout(function(){f.queues[t]&&d(b,new Error("Maximum execution time is exceeded "+t))},k)),e.length===1){var E=!1;try{e(function(S,A){E||(E=!0,d(b,S,A))})}catch(S){E||(E=!0,d(b,S))}}else f._promiseTry(function(){return e()}).then(function(S){d(b,void 0,S)},function(S){d(b,S)})};f.domainReentrant&&process.domain&&(h=process.domain.bind(h));var m=n.maxPending||f.maxPending;if(!f.queues[t])f.queues[t]=[],h(!0);else if(f.domainReentrant&&process.domain&&process.domain===f.domains[t])h(!1);else if(f.queues[t].length>=m)d(!1,new Error("Too many pending tasks in queue "+t));else{var g=function(){h(!0)};n.skipQueue?f.queues[t].unshift(g):f.queues[t].push(g);var v=n.timeout||f.timeout;v&&(l=setTimeout(function(){l=null,d(!1,new Error("async-lock timed out in queue "+t))},v))}var w=n.maxOccupationTime||f.maxOccupationTime;if(w&&(c=setTimeout(function(){f.queues[t]&&d(!1,new Error("Maximum occupation time is exceeded in queue "+t))},w)),s)return s};Vr.prototype._acquireBatch=function(t,e,r,n){typeof r!="function"&&(n=r,r=null);var i=this,a=function(o,l){return function(c){i.acquire(o,l,c,n)}},s=t.reduceRight(function(o,l){return a(l,o)},e);if(typeof r=="function")s(r);else return new this.Promise(function(o,l){s.length===1?s(function(c,u){c?l(c):o(u)}):o(s())})};Vr.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0};Vr.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(e){return this.Promise.reject(e)}};Jb.exports=Vr});var t_=I((o7,e_)=>{"use strict";p();e_.exports=Qb()});var r_=I((c7,$m)=>{p();typeof Object.create=="function"?$m.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:$m.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var Af=I((Om,i_)=>{p();var kf=Im(),ti=kf.Buffer;function n_(t,e){for(var r in t)e[r]=t[r]}ti.from&&ti.alloc&&ti.allocUnsafe&&ti.allocUnsafeSlow?i_.exports=kf:(n_(kf,Om),Om.Buffer=ss);function ss(t,e,r){return ti(t,e,r)}ss.prototype=Object.create(ti.prototype);n_(ti,ss);ss.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return ti(t,e,r)};ss.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=ti(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};ss.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return ti(t)};ss.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return kf.SlowBuffer(t)}});var Tf=I((d7,a_)=>{p();var pL={}.toString;a_.exports=Array.isArray||function(t){return pL.call(t)=="[object Array]"}});var _r=I((p7,s_)=>{"use strict";p();s_.exports=TypeError});var Cf=I((g7,o_)=>{"use strict";p();o_.exports=Object});var Mm=I((w7,l_)=>{"use strict";p();l_.exports=Error});var u_=I((b7,c_)=>{"use strict";p();c_.exports=EvalError});var d_=I((x7,f_)=>{"use strict";p();f_.exports=RangeError});var p_=I((E7,h_)=>{"use strict";p();h_.exports=ReferenceError});var Pf=I((A7,m_)=>{"use strict";p();m_.exports=SyntaxError});var v_=I((C7,g_)=>{"use strict";p();g_.exports=URIError});var y_=I((R7,w_)=>{"use strict";p();w_.exports=Math.abs});var __=I((F7,b_)=>{"use strict";p();b_.exports=Math.floor});var S_=I((O7,x_)=>{"use strict";p();x_.exports=Math.max});var k_=I((D7,E_)=>{"use strict";p();E_.exports=Math.min});var T_=I((N7,A_)=>{"use strict";p();A_.exports=Math.pow});var P_=I((H7,C_)=>{"use strict";p();C_.exports=Math.round});var I_=I((G7,R_)=>{"use strict";p();R_.exports=Number.isNaN||function(e){return e!==e}});var $_=I((q7,F_)=>{"use strict";p();var mL=I_();F_.exports=function(e){return mL(e)||e===0?e:e<0?-1:1}});var M_=I((V7,O_)=>{"use strict";p();O_.exports=Object.getOwnPropertyDescriptor});var va=I((Y7,D_)=>{"use strict";p();var Rf=M_();if(Rf)try{Rf([],"length")}catch(t){Rf=null}D_.exports=Rf});var cc=I((Z7,L_)=>{"use strict";p();var If=Object.defineProperty||!1;if(If)try{If({},"a",{value:1})}catch(t){If=!1}L_.exports=If});var uc=I((J7,N_)=>{"use strict";p();N_.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(var a in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==i||o.enumerable!==!0)return!1}return!0}});var Ff=I((eY,H_)=>{"use strict";p();var B_=typeof Symbol!="undefined"&&Symbol,gL=uc();H_.exports=function(){return typeof B_!="function"||typeof Symbol!="function"||typeof B_("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:gL()}});var Dm=I((rY,U_)=>{"use strict";p();U_.exports=typeof Reflect!="undefined"&&Reflect.getPrototypeOf||null});var Lm=I((iY,G_)=>{"use strict";p();var vL=Cf();G_.exports=vL.getPrototypeOf||null});var z_=I((sY,q_)=>{"use strict";p();var wL="Function.prototype.bind called on incompatible ",yL=Object.prototype.toString,bL=Math.max,_L="[object Function]",j_=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var a=0;a<r.length;a+=1)n[a+e.length]=r[a];return n},xL=function(e,r){for(var n=[],i=r||0,a=0;i<e.length;i+=1,a+=1)n[a]=e[i];return n},SL=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r};q_.exports=function(e){var r=this;if(typeof r!="function"||yL.apply(r)!==_L)throw new TypeError(wL+r);for(var n=xL(arguments,1),i,a=function(){if(this instanceof i){var u=r.apply(this,j_(n,arguments));return Object(u)===u?u:this}return r.apply(e,j_(n,arguments))},s=bL(0,r.length-n.length),o=[],l=0;l<s;l++)o[l]="$"+l;if(i=Function("binder","return function ("+SL(o,",")+"){ return binder.apply(this,arguments); }")(a),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i}});var xo=I((lY,V_)=>{"use strict";p();var EL=z_();V_.exports=Function.prototype.bind||EL});var $f=I((uY,W_)=>{"use strict";p();W_.exports=Function.prototype.call});var Of=I((dY,Y_)=>{"use strict";p();Y_.exports=Function.prototype.apply});var Z_=I((pY,X_)=>{"use strict";p();X_.exports=typeof Reflect!="undefined"&&Reflect&&Reflect.apply});var Nm=I((gY,K_)=>{"use strict";p();var kL=xo(),AL=Of(),TL=$f(),CL=Z_();K_.exports=CL||kL.call(TL,AL)});var Mf=I((wY,J_)=>{"use strict";p();var PL=xo(),RL=_r(),IL=$f(),FL=Nm();J_.exports=function(e){if(e.length<1||typeof e[0]!="function")throw new RL("a function is required");return FL(PL,IL,e)}});var ix=I((bY,nx)=>{"use strict";p();var $L=Mf(),Q_=va(),tx;try{tx=[].__proto__===Array.prototype}catch(t){if(!t||typeof t!="object"||!("code"in t)||t.code!=="ERR_PROTO_ACCESS")throw t}var Bm=!!tx&&Q_&&Q_(Object.prototype,"__proto__"),rx=Object,ex=rx.getPrototypeOf;nx.exports=Bm&&typeof Bm.get=="function"?$L([Bm.get]):typeof ex=="function"?function(e){return ex(e==null?e:rx(e))}:!1});var Df=I((xY,lx)=>{"use strict";p();var ax=Dm(),sx=Lm(),ox=ix();lx.exports=ax?function(e){return ax(e)}:sx?function(e){if(!e||typeof e!="object"&&typeof e!="function")throw new TypeError("getProto: not an object");return sx(e)}:ox?function(e){return ox(e)}:null});var Lf=I((EY,cx)=>{"use strict";p();var OL=Function.prototype.call,ML=Object.prototype.hasOwnProperty,DL=xo();cx.exports=DL.call(OL,ML)});var ri=I((AY,mx)=>{"use strict";p();var Se,LL=Cf(),NL=Mm(),BL=u_(),HL=d_(),UL=p_(),Ao=Pf(),ko=_r(),GL=v_(),jL=y_(),qL=__(),zL=S_(),VL=k_(),WL=T_(),YL=P_(),XL=$_(),hx=Function,Hm=function(t){try{return hx('"use strict"; return ('+t+").constructor;")()}catch(e){}},fc=va(),ZL=cc(),Um=function(){throw new ko},KL=fc?function(){try{return arguments.callee,Um}catch(t){try{return fc(arguments,"callee").get}catch(e){return Um}}}():Um,So=Ff()(),Ot=Df(),JL=Lm(),QL=Dm(),px=Of(),dc=$f(),Eo={},eN=typeof Uint8Array=="undefined"||!Ot?Se:Ot(Uint8Array),os={__proto__:null,"%AggregateError%":typeof AggregateError=="undefined"?Se:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?Se:ArrayBuffer,"%ArrayIteratorPrototype%":So&&Ot?Ot([][Symbol.iterator]()):Se,"%AsyncFromSyncIteratorPrototype%":Se,"%AsyncFunction%":Eo,"%AsyncGenerator%":Eo,"%AsyncGeneratorFunction%":Eo,"%AsyncIteratorPrototype%":Eo,"%Atomics%":typeof Atomics=="undefined"?Se:Atomics,"%BigInt%":typeof BigInt=="undefined"?Se:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?Se:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?Se:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?Se:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":NL,"%eval%":eval,"%EvalError%":BL,"%Float16Array%":typeof Float16Array=="undefined"?Se:Float16Array,"%Float32Array%":typeof Float32Array=="undefined"?Se:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?Se:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?Se:FinalizationRegistry,"%Function%":hx,"%GeneratorFunction%":Eo,"%Int8Array%":typeof Int8Array=="undefined"?Se:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?Se:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?Se:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":So&&Ot?Ot(Ot([][Symbol.iterator]())):Se,"%JSON%":typeof JSON=="object"?JSON:Se,"%Map%":typeof Map=="undefined"?Se:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!So||!Ot?Se:Ot(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":LL,"%Object.getOwnPropertyDescriptor%":fc,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?Se:Promise,"%Proxy%":typeof Proxy=="undefined"?Se:Proxy,"%RangeError%":HL,"%ReferenceError%":UL,"%Reflect%":typeof Reflect=="undefined"?Se:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?Se:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!So||!Ot?Se:Ot(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?Se:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":So&&Ot?Ot(""[Symbol.iterator]()):Se,"%Symbol%":So?Symbol:Se,"%SyntaxError%":Ao,"%ThrowTypeError%":KL,"%TypedArray%":eN,"%TypeError%":ko,"%Uint8Array%":typeof Uint8Array=="undefined"?Se:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?Se:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?Se:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?Se:Uint32Array,"%URIError%":GL,"%WeakMap%":typeof WeakMap=="undefined"?Se:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?Se:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?Se:WeakSet,"%Function.prototype.call%":dc,"%Function.prototype.apply%":px,"%Object.defineProperty%":ZL,"%Object.getPrototypeOf%":JL,"%Math.abs%":jL,"%Math.floor%":qL,"%Math.max%":zL,"%Math.min%":VL,"%Math.pow%":WL,"%Math.round%":YL,"%Math.sign%":XL,"%Reflect.getPrototypeOf%":QL};if(Ot)try{null.error}catch(t){ux=Ot(Ot(t)),os["%Error.prototype%"]=ux}var ux,tN=function t(e){var r;if(e==="%AsyncFunction%")r=Hm("async function () {}");else if(e==="%GeneratorFunction%")r=Hm("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Hm("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&Ot&&(r=Ot(i.prototype))}return os[e]=r,r},fx={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},hc=xo(),Nf=Lf(),rN=hc.call(dc,Array.prototype.concat),nN=hc.call(px,Array.prototype.splice),dx=hc.call(dc,String.prototype.replace),Bf=hc.call(dc,String.prototype.slice),iN=hc.call(dc,RegExp.prototype.exec),aN=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,sN=/\\(\\)?/g,oN=function(e){var r=Bf(e,0,1),n=Bf(e,-1);if(r==="%"&&n!=="%")throw new Ao("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Ao("invalid intrinsic syntax, expected opening `%`");var i=[];return dx(e,aN,function(a,s,o,l){i[i.length]=o?dx(l,sN,"$1"):s||a}),i},lN=function(e,r){var n=e,i;if(Nf(fx,n)&&(i=fx[n],n="%"+i[0]+"%"),Nf(os,n)){var a=os[n];if(a===Eo&&(a=tN(n)),typeof a=="undefined"&&!r)throw new ko("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:a}}throw new Ao("intrinsic "+e+" does not exist!")};mx.exports=function(e,r){if(typeof e!="string"||e.length===0)throw new ko("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new ko('"allowMissing" argument must be a boolean');if(iN(/^%?[^%]*%?$/,e)===null)throw new Ao("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=oN(e),i=n.length>0?n[0]:"",a=lN("%"+i+"%",r),s=a.name,o=a.value,l=!1,c=a.alias;c&&(i=c[0],nN(n,rN([0,1],c)));for(var u=1,f=!0;u<n.length;u+=1){var d=n[u],h=Bf(d,0,1),m=Bf(d,-1);if((h==='"'||h==="'"||h==="`"||m==='"'||m==="'"||m==="`")&&h!==m)throw new Ao("property names with quotes must have matching quotes");if((d==="constructor"||!f)&&(l=!0),i+="."+d,s="%"+i+"%",Nf(os,s))o=os[s];else if(o!=null){if(!(d in o)){if(!r)throw new ko("base intrinsic for "+e+" exists, but the property is not available.");return}if(fc&&u+1>=n.length){var g=fc(o,d);f=!!g,f&&"get"in g&&!("originalValue"in g.get)?o=g.get:o=o[d]}else f=Nf(o,d),o=o[d];f&&!l&&(os[s]=o)}}return o}});var Mt=I((CY,wx)=>{"use strict";p();var gx=ri(),vx=Mf(),cN=vx([gx("%String.prototype.indexOf%")]);wx.exports=function(e,r){var n=gx(e,!!r);return typeof n=="function"&&cN(e,".prototype.")>-1?vx([n]):n}});var xx=I((RY,_x)=>{"use strict";p();var bx=Function.prototype.toString,To=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,jm,Hf;if(typeof To=="function"&&typeof Object.defineProperty=="function")try{jm=Object.defineProperty({},"length",{get:function(){throw Hf}}),Hf={},To(function(){throw 42},null,jm)}catch(t){t!==Hf&&(To=null)}else To=null;var uN=/^\s*class\b/,qm=function(e){try{var r=bx.call(e);return uN.test(r)}catch(n){return!1}},Gm=function(e){try{return qm(e)?!1:(bx.call(e),!0)}catch(r){return!1}},Uf=Object.prototype.toString,fN="[object Object]",dN="[object Function]",hN="[object GeneratorFunction]",pN="[object HTMLAllCollection]",mN="[object HTML document.all class]",gN="[object HTMLCollection]",vN=typeof Symbol=="function"&&!!Symbol.toStringTag,wN=!(0 in[,]),zm=function(){return!1};typeof document=="object"&&(yx=document.all,Uf.call(yx)===Uf.call(document.all)&&(zm=function(e){if((wN||!e)&&(typeof e=="undefined"||typeof e=="object"))try{var r=Uf.call(e);return(r===pN||r===mN||r===gN||r===fN)&&e("")==null}catch(n){}return!1}));var yx;_x.exports=To?function(e){if(zm(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{To(e,null,jm)}catch(r){if(r!==Hf)return!1}return!qm(e)&&Gm(e)}:function(e){if(zm(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(vN)return Gm(e);if(qm(e))return!1;var r=Uf.call(e);return r!==dN&&r!==hN&&!/^\[object HTML/.test(r)?!1:Gm(e)}});var kx=I((FY,Ex)=>{"use strict";p();var yN=xx(),bN=Object.prototype.toString,Sx=Object.prototype.hasOwnProperty,_N=function(e,r,n){for(var i=0,a=e.length;i<a;i++)Sx.call(e,i)&&(n==null?r(e[i],i,e):r.call(n,e[i],i,e))},xN=function(e,r,n){for(var i=0,a=e.length;i<a;i++)n==null?r(e.charAt(i),i,e):r.call(n,e.charAt(i),i,e)},SN=function(e,r,n){for(var i in e)Sx.call(e,i)&&(n==null?r(e[i],i,e):r.call(n,e[i],i,e))};function EN(t){return bN.call(t)==="[object Array]"}Ex.exports=function(e,r,n){if(!yN(r))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),EN(e)?_N(e,r,i):typeof e=="string"?xN(e,r,i):SN(e,r,i)}});var Tx=I((OY,Ax)=>{"use strict";p();Ax.exports=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]});var Px=I((DY,Cx)=>{"use strict";p();var Vm=Tx(),kN=typeof globalThis=="undefined"?global:globalThis;Cx.exports=function(){for(var e=[],r=0;r<Vm.length;r++)typeof kN[Vm[r]]=="function"&&(e[e.length]=Vm[r]);return e}});var Gf=I((NY,Fx)=>{"use strict";p();var Rx=cc(),AN=Pf(),Co=_r(),Ix=va();Fx.exports=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new Co("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Co("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Co("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Co("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Co("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Co("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,a=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,o=arguments.length>6?arguments[6]:!1,l=!!Ix&&Ix(e,r);if(Rx)Rx(e,r,{configurable:s===null&&l?l.configurable:!s,enumerable:i===null&&l?l.enumerable:!i,value:n,writable:a===null&&l?l.writable:!a});else if(o||!i&&!a&&!s)e[r]=n;else throw new AN("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var jf=I((HY,Ox)=>{"use strict";p();var Wm=cc(),$x=function(){return!!Wm};$x.hasArrayLengthDefineBug=function(){if(!Wm)return null;try{return Wm([],"length",{value:1}).length!==1}catch(e){return!0}};Ox.exports=$x});var Bx=I((GY,Nx)=>{"use strict";p();var TN=ri(),Mx=Gf(),CN=jf()(),Dx=va(),Lx=_r(),PN=TN("%Math.floor%");Nx.exports=function(e,r){if(typeof e!="function")throw new Lx("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||PN(r)!==r)throw new Lx("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,a=!0;if("length"in e&&Dx){var s=Dx(e,"length");s&&!s.configurable&&(i=!1),s&&!s.writable&&(a=!1)}return(i||a||!n)&&(CN?Mx(e,"length",r,!0,!0):Mx(e,"length",r)),e}});var Ux=I((qY,Hx)=>{"use strict";p();var RN=xo(),IN=Of(),FN=Nm();Hx.exports=function(){return FN(RN,IN,arguments)}});var ls=I((VY,qf)=>{"use strict";p();var $N=Bx(),Gx=cc(),ON=Mf(),jx=Ux();qf.exports=function(e){var r=ON(arguments),n=e.length-(arguments.length-1);return $N(r,1+(n>0?n:0),!0)};Gx?Gx(qf.exports,"apply",{value:jx}):qf.exports.apply=jx});var wa=I((YY,qx)=>{"use strict";p();var MN=uc();qx.exports=function(){return MN()&&!!Symbol.toStringTag}});var Km=I((ZY,Yx)=>{"use strict";p();var Wf=kx(),DN=Px(),zx=ls(),Xm=Mt(),Vf=va(),zf=Df(),LN=Xm("Object.prototype.toString"),Wx=wa()(),Vx=typeof globalThis=="undefined"?global:globalThis,Ym=DN(),Zm=Xm("String.prototype.slice"),NN=Xm("Array.prototype.indexOf",!0)||function(e,r){for(var n=0;n<e.length;n+=1)if(e[n]===r)return n;return-1},Yf={__proto__:null};Wx&&Vf&&zf?Wf(Ym,function(t){var e=new Vx[t];if(Symbol.toStringTag in e&&zf){var r=zf(e),n=Vf(r,Symbol.toStringTag);if(!n&&r){var i=zf(r);n=Vf(i,Symbol.toStringTag)}if(n&&n.get){var a=zx(n.get);Yf["$"+t]=a}}}):Wf(Ym,function(t){var e=new Vx[t],r=e.slice||e.set;if(r){var n=zx(r);Yf["$"+t]=n}});var BN=function(e){var r=!1;return Wf(Yf,function(n,i){if(!r)try{"$"+n(e)===i&&(r=Zm(i,1))}catch(a){}}),r},HN=function(e){var r=!1;return Wf(Yf,function(n,i){if(!r)try{n(e),r=Zm(i,1)}catch(a){}}),r};Yx.exports=function(e){if(!e||typeof e!="object")return!1;if(!Wx){var r=Zm(LN(e),8,-1);return NN(Ym,r)>-1?r:r!=="Object"?!1:HN(e)}return Vf?BN(e):null}});var Zx=I((JY,Xx)=>{"use strict";p();var UN=Km();Xx.exports=function(e){return!!UN(e)}});var Jx=I((eX,Kx)=>{"use strict";p();var GN=_r(),jN=Mt(),qN=jN("TypedArray.prototype.buffer",!0),zN=Zx();Kx.exports=qN||function(e){if(!zN(e))throw new GN("Not a Typed Array");return e.buffer}});var t1=I((rX,e1)=>{"use strict";p();var Rn=Af().Buffer,VN=Tf(),WN=Jx(),YN=ArrayBuffer.isView||function(e){try{return WN(e),!0}catch(r){return!1}},XN=typeof Uint8Array!="undefined",Qx=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined",ZN=Qx&&(Rn.prototype instanceof Uint8Array||Rn.TYPED_ARRAY_SUPPORT);e1.exports=function(e,r){if(Rn.isBuffer(e))return e.constructor&&!("isBuffer"in e)?Rn.from(e):e;if(typeof e=="string")return Rn.from(e,r);if(Qx&&YN(e)){if(e.byteLength===0)return Rn.alloc(0);if(ZN){var n=Rn.from(e.buffer,e.byteOffset,e.byteLength);if(n.byteLength===e.byteLength)return n}var i=e instanceof Uint8Array?e:new Uint8Array(e.buffer,e.byteOffset,e.byteLength),a=Rn.from(i);if(a.length===e.byteLength)return a}if(XN&&e instanceof Uint8Array)return Rn.from(e);var s=VN(e);if(s)for(var o=0;o<e.length;o+=1){var l=e[o];if(typeof l!="number"||l<0||l>255||~~l!==l)throw new RangeError("Array items must be numbers in the range 0-255.")}if(s||Rn.isBuffer(e)&&e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e))return Rn.from(e);throw new TypeError('The "data" argument must be a string, an Array, a Buffer, a Uint8Array, or a DataView.')}});var n1=I((iX,r1)=>{"use strict";p();var KN=Af().Buffer,JN=t1();function Xf(t,e){this._block=KN.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}Xf.prototype.update=function(t,e){t=JN(t,e||"utf8");for(var r=this._block,n=this._blockSize,i=t.length,a=this._len,s=0;s<i;){for(var o=a%n,l=Math.min(i-s,n-o),c=0;c<l;c++)r[o+c]=t[s+c];a+=l,s+=l,a%n===0&&this._update(r)}return this._len+=i,this};Xf.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=this._len*8;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(r&4294967295)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var a=this._hash();return t?a.toString(t):a};Xf.prototype._update=function(){throw new Error("_update must be implemented by subclass")};r1.exports=Xf});var s1=I((sX,a1)=>{"use strict";p();var QN=r_(),i1=n1(),eB=Af().Buffer,tB=[1518500249,1859775393,-1894007588,-899497514],rB=new Array(80);function pc(){this.init(),this._w=rB,i1.call(this,64,56)}QN(pc,i1);pc.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function nB(t){return t<<1|t>>>31}function iB(t){return t<<5|t>>>27}function aB(t){return t<<30|t>>>2}function sB(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}pc.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,a=this._d|0,s=this._e|0,o=0;o<16;++o)e[o]=t.readInt32BE(o*4);for(;o<80;++o)e[o]=nB(e[o-3]^e[o-8]^e[o-14]^e[o-16]);for(var l=0;l<80;++l){var c=~~(l/20),u=iB(r)+sB(c,n,i,a)+s+e[l]+tB[c]|0;s=a,a=i,i=aB(n),n=r,r=u}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=a+this._d|0,this._e=s+this._e|0};pc.prototype._hash=function(){var t=eB.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};a1.exports=pc});var l1=I(Jm=>{p();var o1;(function(t){typeof DO_NOT_EXPORT_CRC=="undefined"?typeof Jm=="object"?t(Jm):typeof define=="function"&&define.amd?define(function(){var e={};return t(e),e}):t(o1={}):t(o1={})})(function(t){t.version="1.2.2";function e(){for(var y=0,x=new Array(256),_=0;_!=256;++_)y=_,y=y&1?-306674912^y>>>1:y>>>1,y=y&1?-306674912^y>>>1:y>>>1,y=y&1?-306674912^y>>>1:y>>>1,y=y&1?-306674912^y>>>1:y>>>1,y=y&1?-306674912^y>>>1:y>>>1,y=y&1?-306674912^y>>>1:y>>>1,y=y&1?-306674912^y>>>1:y>>>1,y=y&1?-306674912^y>>>1:y>>>1,x[_]=y;return typeof Int32Array!="undefined"?new Int32Array(x):x}var r=e();function n(y){var x=0,_=0,T=0,P=typeof Int32Array!="undefined"?new Int32Array(4096):new Array(4096);for(T=0;T!=256;++T)P[T]=y[T];for(T=0;T!=256;++T)for(_=y[T],x=256+T;x<4096;x+=256)_=P[x]=_>>>8^y[_&255];var D=[];for(T=1;T!=16;++T)D[T-1]=typeof Int32Array!="undefined"?P.subarray(T*256,T*256+256):P.slice(T*256,T*256+256);return D}var i=n(r),a=i[0],s=i[1],o=i[2],l=i[3],c=i[4],u=i[5],f=i[6],d=i[7],h=i[8],m=i[9],g=i[10],v=i[11],w=i[12],b=i[13],k=i[14];function E(y,x){for(var _=x^-1,T=0,P=y.length;T<P;)_=_>>>8^r[(_^y.charCodeAt(T++))&255];return~_}function S(y,x){for(var _=x^-1,T=y.length-15,P=0;P<T;)_=k[y[P++]^_&255]^b[y[P++]^_>>8&255]^w[y[P++]^_>>16&255]^v[y[P++]^_>>>24]^g[y[P++]]^m[y[P++]]^h[y[P++]]^d[y[P++]]^f[y[P++]]^u[y[P++]]^c[y[P++]]^l[y[P++]]^o[y[P++]]^s[y[P++]]^a[y[P++]]^r[y[P++]];for(T+=15;P<T;)_=_>>>8^r[(_^y[P++])&255];return~_}function A(y,x){for(var _=x^-1,T=0,P=y.length,D=0,B=0;T<P;)D=y.charCodeAt(T++),D<128?_=_>>>8^r[(_^D)&255]:D<2048?(_=_>>>8^r[(_^(192|D>>6&31))&255],_=_>>>8^r[(_^(128|D&63))&255]):D>=55296&&D<57344?(D=(D&1023)+64,B=y.charCodeAt(T++)&1023,_=_>>>8^r[(_^(240|D>>8&7))&255],_=_>>>8^r[(_^(128|D>>2&63))&255],_=_>>>8^r[(_^(128|B>>6&15|(D&3)<<4))&255],_=_>>>8^r[(_^(128|B&63))&255]):(_=_>>>8^r[(_^(224|D>>12&15))&255],_=_>>>8^r[(_^(128|D>>6&63))&255],_=_>>>8^r[(_^(128|D&63))&255]);return~_}t.table=r,t.bstr=E,t.buf=S,t.str=A})});var Li=I(ur=>{"use strict";p();var oB=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";function lB(t,e){return Object.prototype.hasOwnProperty.call(t,e)}ur.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(var n in r)lB(r,n)&&(t[n]=r[n])}}return t};ur.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var cB={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray){t.set(e.subarray(r,r+n),i);return}for(var a=0;a<n;a++)t[i+a]=e[r+a]},flattenChunks:function(t){var e,r,n,i,a,s;for(n=0,e=0,r=t.length;e<r;e++)n+=t[e].length;for(s=new Uint8Array(n),i=0,e=0,r=t.length;e<r;e++)a=t[e],s.set(a,i),i+=a.length;return s}},uB={arraySet:function(t,e,r,n,i){for(var a=0;a<n;a++)t[i+a]=e[r+a]},flattenChunks:function(t){return[].concat.apply([],t)}};ur.setTyped=function(t){t?(ur.Buf8=Uint8Array,ur.Buf16=Uint16Array,ur.Buf32=Int32Array,ur.assign(ur,cB)):(ur.Buf8=Array,ur.Buf16=Array,ur.Buf32=Array,ur.assign(ur,uB))};ur.setTyped(oB)});var I1=I(Io=>{"use strict";p();var fB=Li(),dB=4,c1=0,u1=1,hB=2;function Ro(t){for(var e=t.length;--e>=0;)t[e]=0}var pB=0,g1=1,mB=2,gB=3,vB=258,ag=29,bc=256,gc=bc+1+ag,Po=30,sg=19,v1=2*gc+1,cs=15,Qm=16,wB=7,og=256,w1=16,y1=17,b1=18,ng=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Zf=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],yB=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],_1=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],bB=512,Ni=new Array((gc+2)*2);Ro(Ni);var mc=new Array(Po*2);Ro(mc);var vc=new Array(bB);Ro(vc);var wc=new Array(vB-gB+1);Ro(wc);var lg=new Array(ag);Ro(lg);var Kf=new Array(Po);Ro(Kf);function eg(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}var x1,S1,E1;function tg(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function k1(t){return t<256?vc[t]:vc[256+(t>>>7)]}function yc(t,e){t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255}function xr(t,e,r){t.bi_valid>Qm-r?(t.bi_buf|=e<<t.bi_valid&65535,yc(t,t.bi_buf),t.bi_buf=e>>Qm-t.bi_valid,t.bi_valid+=r-Qm):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function ni(t,e,r){xr(t,r[e*2],r[e*2+1])}function A1(t,e){var r=0;do r|=t&1,t>>>=1,r<<=1;while(--e>0);return r>>>1}function _B(t){t.bi_valid===16?(yc(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)}function xB(t,e){var r=e.dyn_tree,n=e.max_code,i=e.stat_desc.static_tree,a=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,l=e.stat_desc.max_length,c,u,f,d,h,m,g=0;for(d=0;d<=cs;d++)t.bl_count[d]=0;for(r[t.heap[t.heap_max]*2+1]=0,c=t.heap_max+1;c<v1;c++)u=t.heap[c],d=r[r[u*2+1]*2+1]+1,d>l&&(d=l,g++),r[u*2+1]=d,!(u>n)&&(t.bl_count[d]++,h=0,u>=o&&(h=s[u-o]),m=r[u*2],t.opt_len+=m*(d+h),a&&(t.static_len+=m*(i[u*2+1]+h)));if(g!==0){do{for(d=l-1;t.bl_count[d]===0;)d--;t.bl_count[d]--,t.bl_count[d+1]+=2,t.bl_count[l]--,g-=2}while(g>0);for(d=l;d!==0;d--)for(u=t.bl_count[d];u!==0;)f=t.heap[--c],!(f>n)&&(r[f*2+1]!==d&&(t.opt_len+=(d-r[f*2+1])*r[f*2],r[f*2+1]=d),u--)}}function T1(t,e,r){var n=new Array(cs+1),i=0,a,s;for(a=1;a<=cs;a++)n[a]=i=i+r[a-1]<<1;for(s=0;s<=e;s++){var o=t[s*2+1];o!==0&&(t[s*2]=A1(n[o]++,o))}}function SB(){var t,e,r,n,i,a=new Array(cs+1);for(r=0,n=0;n<ag-1;n++)for(lg[n]=r,t=0;t<1<<ng[n];t++)wc[r++]=n;for(wc[r-1]=n,i=0,n=0;n<16;n++)for(Kf[n]=i,t=0;t<1<<Zf[n];t++)vc[i++]=n;for(i>>=7;n<Po;n++)for(Kf[n]=i<<7,t=0;t<1<<Zf[n]-7;t++)vc[256+i++]=n;for(e=0;e<=cs;e++)a[e]=0;for(t=0;t<=143;)Ni[t*2+1]=8,t++,a[8]++;for(;t<=255;)Ni[t*2+1]=9,t++,a[9]++;for(;t<=279;)Ni[t*2+1]=7,t++,a[7]++;for(;t<=287;)Ni[t*2+1]=8,t++,a[8]++;for(T1(Ni,gc+1,a),t=0;t<Po;t++)mc[t*2+1]=5,mc[t*2]=A1(t,5);x1=new eg(Ni,ng,bc+1,gc,cs),S1=new eg(mc,Zf,0,Po,cs),E1=new eg(new Array(0),yB,0,sg,wB)}function C1(t){var e;for(e=0;e<gc;e++)t.dyn_ltree[e*2]=0;for(e=0;e<Po;e++)t.dyn_dtree[e*2]=0;for(e=0;e<sg;e++)t.bl_tree[e*2]=0;t.dyn_ltree[og*2]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function P1(t){t.bi_valid>8?yc(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function EB(t,e,r,n){P1(t),n&&(yc(t,r),yc(t,~r)),fB.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}function f1(t,e,r,n){var i=e*2,a=r*2;return t[i]<t[a]||t[i]===t[a]&&n[e]<=n[r]}function rg(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&f1(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!f1(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function d1(t,e,r){var n,i,a=0,s,o;if(t.last_lit!==0)do n=t.pending_buf[t.d_buf+a*2]<<8|t.pending_buf[t.d_buf+a*2+1],i=t.pending_buf[t.l_buf+a],a++,n===0?ni(t,i,e):(s=wc[i],ni(t,s+bc+1,e),o=ng[s],o!==0&&(i-=lg[s],xr(t,i,o)),n--,s=k1(n),ni(t,s,r),o=Zf[s],o!==0&&(n-=Kf[s],xr(t,n,o)));while(a<t.last_lit);ni(t,og,e)}function ig(t,e){var r=e.dyn_tree,n=e.stat_desc.static_tree,i=e.stat_desc.has_stree,a=e.stat_desc.elems,s,o,l=-1,c;for(t.heap_len=0,t.heap_max=v1,s=0;s<a;s++)r[s*2]!==0?(t.heap[++t.heap_len]=l=s,t.depth[s]=0):r[s*2+1]=0;for(;t.heap_len<2;)c=t.heap[++t.heap_len]=l<2?++l:0,r[c*2]=1,t.depth[c]=0,t.opt_len--,i&&(t.static_len-=n[c*2+1]);for(e.max_code=l,s=t.heap_len>>1;s>=1;s--)rg(t,r,s);c=a;do s=t.heap[1],t.heap[1]=t.heap[t.heap_len--],rg(t,r,1),o=t.heap[1],t.heap[--t.heap_max]=s,t.heap[--t.heap_max]=o,r[c*2]=r[s*2]+r[o*2],t.depth[c]=(t.depth[s]>=t.depth[o]?t.depth[s]:t.depth[o])+1,r[s*2+1]=r[o*2+1]=c,t.heap[1]=c++,rg(t,r,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],xB(t,e),T1(r,l,t.bl_count)}function h1(t,e,r){var n,i=-1,a,s=e[0*2+1],o=0,l=7,c=4;for(s===0&&(l=138,c=3),e[(r+1)*2+1]=65535,n=0;n<=r;n++)a=s,s=e[(n+1)*2+1],!(++o<l&&a===s)&&(o<c?t.bl_tree[a*2]+=o:a!==0?(a!==i&&t.bl_tree[a*2]++,t.bl_tree[w1*2]++):o<=10?t.bl_tree[y1*2]++:t.bl_tree[b1*2]++,o=0,i=a,s===0?(l=138,c=3):a===s?(l=6,c=3):(l=7,c=4))}function p1(t,e,r){var n,i=-1,a,s=e[0*2+1],o=0,l=7,c=4;for(s===0&&(l=138,c=3),n=0;n<=r;n++)if(a=s,s=e[(n+1)*2+1],!(++o<l&&a===s)){if(o<c)do ni(t,a,t.bl_tree);while(--o!==0);else a!==0?(a!==i&&(ni(t,a,t.bl_tree),o--),ni(t,w1,t.bl_tree),xr(t,o-3,2)):o<=10?(ni(t,y1,t.bl_tree),xr(t,o-3,3)):(ni(t,b1,t.bl_tree),xr(t,o-11,7));o=0,i=a,s===0?(l=138,c=3):a===s?(l=6,c=3):(l=7,c=4)}}function kB(t){var e;for(h1(t,t.dyn_ltree,t.l_desc.max_code),h1(t,t.dyn_dtree,t.d_desc.max_code),ig(t,t.bl_desc),e=sg-1;e>=3&&t.bl_tree[_1[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e}function AB(t,e,r,n){var i;for(xr(t,e-257,5),xr(t,r-1,5),xr(t,n-4,4),i=0;i<n;i++)xr(t,t.bl_tree[_1[i]*2+1],3);p1(t,t.dyn_ltree,e-1),p1(t,t.dyn_dtree,r-1)}function TB(t){var e=4093624447,r;for(r=0;r<=31;r++,e>>>=1)if(e&1&&t.dyn_ltree[r*2]!==0)return c1;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return u1;for(r=32;r<bc;r++)if(t.dyn_ltree[r*2]!==0)return u1;return c1}var m1=!1;function CB(t){m1||(SB(),m1=!0),t.l_desc=new tg(t.dyn_ltree,x1),t.d_desc=new tg(t.dyn_dtree,S1),t.bl_desc=new tg(t.bl_tree,E1),t.bi_buf=0,t.bi_valid=0,C1(t)}function R1(t,e,r,n){xr(t,(pB<<1)+(n?1:0),3),EB(t,e,r,!0)}function PB(t){xr(t,g1<<1,3),ni(t,og,Ni),_B(t)}function RB(t,e,r,n){var i,a,s=0;t.level>0?(t.strm.data_type===hB&&(t.strm.data_type=TB(t)),ig(t,t.l_desc),ig(t,t.d_desc),s=kB(t),i=t.opt_len+3+7>>>3,a=t.static_len+3+7>>>3,a<=i&&(i=a)):i=a=r+5,r+4<=i&&e!==-1?R1(t,e,r,n):t.strategy===dB||a===i?(xr(t,(g1<<1)+(n?1:0),3),d1(t,Ni,mc)):(xr(t,(mB<<1)+(n?1:0),3),AB(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),d1(t,t.dyn_ltree,t.dyn_dtree)),C1(t),n&&P1(t)}function IB(t,e,r){return t.pending_buf[t.d_buf+t.last_lit*2]=e>>>8&255,t.pending_buf[t.d_buf+t.last_lit*2+1]=e&255,t.pending_buf[t.l_buf+t.last_lit]=r&255,t.last_lit++,e===0?t.dyn_ltree[r*2]++:(t.matches++,e--,t.dyn_ltree[(wc[r]+bc+1)*2]++,t.dyn_dtree[k1(e)*2]++),t.last_lit===t.lit_bufsize-1}Io._tr_init=CB;Io._tr_stored_block=R1;Io._tr_flush_block=RB;Io._tr_tally=IB;Io._tr_align=PB});var cg=I((pX,F1)=>{"use strict";p();function FB(t,e,r,n){for(var i=t&65535|0,a=t>>>16&65535|0,s=0;r!==0;){s=r>2e3?2e3:r,r-=s;do i=i+e[n++]|0,a=a+i|0;while(--s);i%=65521,a%=65521}return i|a<<16|0}F1.exports=FB});var ug=I((gX,$1)=>{"use strict";p();function $B(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e}var OB=$B();function MB(t,e,r,n){var i=OB,a=n+r;t^=-1;for(var s=n;s<a;s++)t=t>>>8^i[(t^e[s])&255];return t^-1}$1.exports=MB});var Jf=I((wX,O1)=>{"use strict";p();O1.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}});var j1=I(si=>{"use strict";p();var fr=Li(),dn=I1(),N1=cg(),ya=ug(),DB=Jf(),hs=0,LB=1,NB=3,Ea=4,M1=5,ai=0,D1=1,hn=-2,BB=-3,fg=-5,HB=-1,UB=1,Qf=2,GB=3,jB=4,qB=0,zB=2,id=8,VB=9,WB=15,YB=8,XB=29,ZB=256,hg=ZB+1+XB,KB=30,JB=19,QB=2*hg+1,eH=15,Ce=3,xa=258,In=xa+Ce+1,tH=32,ad=42,pg=69,td=73,rd=91,nd=103,us=113,xc=666,Tt=1,Sc=2,fs=3,Oo=4,rH=3;function Sa(t,e){return t.msg=DB[e],e}function L1(t){return(t<<1)-(t>4?9:0)}function _a(t){for(var e=t.length;--e>=0;)t[e]=0}function ba(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),r!==0&&(fr.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,e.pending===0&&(e.pending_out=0))}function Gt(t,e){dn._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,ba(t.strm)}function Me(t,e){t.pending_buf[t.pending++]=e}function _c(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255}function nH(t,e,r,n){var i=t.avail_in;return i>n&&(i=n),i===0?0:(t.avail_in-=i,fr.arraySet(e,t.input,t.next_in,i,r),t.state.wrap===1?t.adler=N1(t.adler,e,i,r):t.state.wrap===2&&(t.adler=ya(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)}function B1(t,e){var r=t.max_chain_length,n=t.strstart,i,a,s=t.prev_length,o=t.nice_match,l=t.strstart>t.w_size-In?t.strstart-(t.w_size-In):0,c=t.window,u=t.w_mask,f=t.prev,d=t.strstart+xa,h=c[n+s-1],m=c[n+s];t.prev_length>=t.good_match&&(r>>=2),o>t.lookahead&&(o=t.lookahead);do if(i=e,!(c[i+s]!==m||c[i+s-1]!==h||c[i]!==c[n]||c[++i]!==c[n+1])){n+=2,i++;do;while(c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&n<d);if(a=xa-(d-n),n=d-xa,a>s){if(t.match_start=e,s=a,a>=o)break;h=c[n+s-1],m=c[n+s]}}while((e=f[e&u])>l&&--r!==0);return s<=t.lookahead?s:t.lookahead}function ds(t){var e=t.w_size,r,n,i,a,s;do{if(a=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-In)){fr.arraySet(t.window,t.window,e,e,0),t.match_start-=e,t.strstart-=e,t.block_start-=e,n=t.hash_size,r=n;do i=t.head[--r],t.head[r]=i>=e?i-e:0;while(--n);n=e,r=n;do i=t.prev[--r],t.prev[r]=i>=e?i-e:0;while(--n);a+=e}if(t.strm.avail_in===0)break;if(n=nH(t.strm,t.window,t.strstart+t.lookahead,a),t.lookahead+=n,t.lookahead+t.insert>=Ce)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+Ce-1])&t.hash_mask,t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<Ce)););}while(t.lookahead<In&&t.strm.avail_in!==0)}function iH(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(ds(t),t.lookahead===0&&e===hs)return Tt;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((t.strstart===0||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,Gt(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-In&&(Gt(t,!1),t.strm.avail_out===0))return Tt}return t.insert=0,e===Ea?(Gt(t,!0),t.strm.avail_out===0?fs:Oo):(t.strstart>t.block_start&&(Gt(t,!1),t.strm.avail_out===0),Tt)}function dg(t,e){for(var r,n;;){if(t.lookahead<In){if(ds(t),t.lookahead<In&&e===hs)return Tt;if(t.lookahead===0)break}if(r=0,t.lookahead>=Ce&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Ce-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),r!==0&&t.strstart-r<=t.w_size-In&&(t.match_length=B1(t,r)),t.match_length>=Ce)if(n=dn._tr_tally(t,t.strstart-t.match_start,t.match_length-Ce),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=Ce){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Ce-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=dn._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(Gt(t,!1),t.strm.avail_out===0))return Tt}return t.insert=t.strstart<Ce-1?t.strstart:Ce-1,e===Ea?(Gt(t,!0),t.strm.avail_out===0?fs:Oo):t.last_lit&&(Gt(t,!1),t.strm.avail_out===0)?Tt:Sc}function Fo(t,e){for(var r,n,i;;){if(t.lookahead<In){if(ds(t),t.lookahead<In&&e===hs)return Tt;if(t.lookahead===0)break}if(r=0,t.lookahead>=Ce&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Ce-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=Ce-1,r!==0&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-In&&(t.match_length=B1(t,r),t.match_length<=5&&(t.strategy===UB||t.match_length===Ce&&t.strstart-t.match_start>4096)&&(t.match_length=Ce-1)),t.prev_length>=Ce&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-Ce,n=dn._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-Ce),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Ce-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=Ce-1,t.strstart++,n&&(Gt(t,!1),t.strm.avail_out===0))return Tt}else if(t.match_available){if(n=dn._tr_tally(t,0,t.window[t.strstart-1]),n&&Gt(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return Tt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=dn._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<Ce-1?t.strstart:Ce-1,e===Ea?(Gt(t,!0),t.strm.avail_out===0?fs:Oo):t.last_lit&&(Gt(t,!1),t.strm.avail_out===0)?Tt:Sc}function aH(t,e){for(var r,n,i,a,s=t.window;;){if(t.lookahead<=xa){if(ds(t),t.lookahead<=xa&&e===hs)return Tt;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=Ce&&t.strstart>0&&(i=t.strstart-1,n=s[i],n===s[++i]&&n===s[++i]&&n===s[++i])){a=t.strstart+xa;do;while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<a);t.match_length=xa-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=Ce?(r=dn._tr_tally(t,1,t.match_length-Ce),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=dn._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(Gt(t,!1),t.strm.avail_out===0))return Tt}return t.insert=0,e===Ea?(Gt(t,!0),t.strm.avail_out===0?fs:Oo):t.last_lit&&(Gt(t,!1),t.strm.avail_out===0)?Tt:Sc}function sH(t,e){for(var r;;){if(t.lookahead===0&&(ds(t),t.lookahead===0)){if(e===hs)return Tt;break}if(t.match_length=0,r=dn._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(Gt(t,!1),t.strm.avail_out===0))return Tt}return t.insert=0,e===Ea?(Gt(t,!0),t.strm.avail_out===0?fs:Oo):t.last_lit&&(Gt(t,!1),t.strm.avail_out===0)?Tt:Sc}function ii(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}var $o;$o=[new ii(0,0,0,0,iH),new ii(4,4,8,4,dg),new ii(4,5,16,8,dg),new ii(4,6,32,32,dg),new ii(4,4,16,16,Fo),new ii(8,16,32,32,Fo),new ii(8,16,128,128,Fo),new ii(8,32,128,256,Fo),new ii(32,128,258,1024,Fo),new ii(32,258,258,4096,Fo)];function oH(t){t.window_size=2*t.w_size,_a(t.head),t.max_lazy_match=$o[t.level].max_lazy,t.good_match=$o[t.level].good_length,t.nice_match=$o[t.level].nice_length,t.max_chain_length=$o[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=Ce-1,t.match_available=0,t.ins_h=0}function lH(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=id,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new fr.Buf16(QB*2),this.dyn_dtree=new fr.Buf16((2*KB+1)*2),this.bl_tree=new fr.Buf16((2*JB+1)*2),_a(this.dyn_ltree),_a(this.dyn_dtree),_a(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new fr.Buf16(eH+1),this.heap=new fr.Buf16(2*hg+1),_a(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new fr.Buf16(2*hg+1),_a(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function H1(t){var e;return!t||!t.state?Sa(t,hn):(t.total_in=t.total_out=0,t.data_type=zB,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?ad:us,t.adler=e.wrap===2?0:1,e.last_flush=hs,dn._tr_init(e),ai)}function U1(t){var e=H1(t);return e===ai&&oH(t.state),e}function cH(t,e){return!t||!t.state||t.state.wrap!==2?hn:(t.state.gzhead=e,ai)}function G1(t,e,r,n,i,a){if(!t)return hn;var s=1;if(e===HB&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),i<1||i>VB||r!==id||n<8||n>15||e<0||e>9||a<0||a>jB)return Sa(t,hn);n===8&&(n=9);var o=new lH;return t.state=o,o.strm=t,o.wrap=s,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+Ce-1)/Ce),o.window=new fr.Buf8(o.w_size*2),o.head=new fr.Buf16(o.hash_size),o.prev=new fr.Buf16(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=o.lit_bufsize*4,o.pending_buf=new fr.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=a,o.method=r,U1(t)}function uH(t,e){return G1(t,e,id,WB,YB,qB)}function fH(t,e){var r,n,i,a;if(!t||!t.state||e>M1||e<0)return t?Sa(t,hn):hn;if(n=t.state,!t.output||!t.input&&t.avail_in!==0||n.status===xc&&e!==Ea)return Sa(t,t.avail_out===0?fg:hn);if(n.strm=t,r=n.last_flush,n.last_flush=e,n.status===ad)if(n.wrap===2)t.adler=0,Me(n,31),Me(n,139),Me(n,8),n.gzhead?(Me(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Me(n,n.gzhead.time&255),Me(n,n.gzhead.time>>8&255),Me(n,n.gzhead.time>>16&255),Me(n,n.gzhead.time>>24&255),Me(n,n.level===9?2:n.strategy>=Qf||n.level<2?4:0),Me(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(Me(n,n.gzhead.extra.length&255),Me(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=ya(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=pg):(Me(n,0),Me(n,0),Me(n,0),Me(n,0),Me(n,0),Me(n,n.level===9?2:n.strategy>=Qf||n.level<2?4:0),Me(n,rH),n.status=us);else{var s=id+(n.w_bits-8<<4)<<8,o=-1;n.strategy>=Qf||n.level<2?o=0:n.level<6?o=1:n.level===6?o=2:o=3,s|=o<<6,n.strstart!==0&&(s|=tH),s+=31-s%31,n.status=us,_c(n,s),n.strstart!==0&&(_c(n,t.adler>>>16),_c(n,t.adler&65535)),t.adler=1}if(n.status===pg)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(n.gzhead.extra.length&65535)&&!(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(t.adler=ya(t.adler,n.pending_buf,n.pending-i,i)),ba(t),i=n.pending,n.pending===n.pending_buf_size));)Me(n,n.gzhead.extra[n.gzindex]&255),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(t.adler=ya(t.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=td)}else n.status=td;if(n.status===td)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(t.adler=ya(t.adler,n.pending_buf,n.pending-i,i)),ba(t),i=n.pending,n.pending===n.pending_buf_size)){a=1;break}n.gzindex<n.gzhead.name.length?a=n.gzhead.name.charCodeAt(n.gzindex++)&255:a=0,Me(n,a)}while(a!==0);n.gzhead.hcrc&&n.pending>i&&(t.adler=ya(t.adler,n.pending_buf,n.pending-i,i)),a===0&&(n.gzindex=0,n.status=rd)}else n.status=rd;if(n.status===rd)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(t.adler=ya(t.adler,n.pending_buf,n.pending-i,i)),ba(t),i=n.pending,n.pending===n.pending_buf_size)){a=1;break}n.gzindex<n.gzhead.comment.length?a=n.gzhead.comment.charCodeAt(n.gzindex++)&255:a=0,Me(n,a)}while(a!==0);n.gzhead.hcrc&&n.pending>i&&(t.adler=ya(t.adler,n.pending_buf,n.pending-i,i)),a===0&&(n.status=nd)}else n.status=nd;if(n.status===nd&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&ba(t),n.pending+2<=n.pending_buf_size&&(Me(n,t.adler&255),Me(n,t.adler>>8&255),t.adler=0,n.status=us)):n.status=us),n.pending!==0){if(ba(t),t.avail_out===0)return n.last_flush=-1,ai}else if(t.avail_in===0&&L1(e)<=L1(r)&&e!==Ea)return Sa(t,fg);if(n.status===xc&&t.avail_in!==0)return Sa(t,fg);if(t.avail_in!==0||n.lookahead!==0||e!==hs&&n.status!==xc){var l=n.strategy===Qf?sH(n,e):n.strategy===GB?aH(n,e):$o[n.level].func(n,e);if((l===fs||l===Oo)&&(n.status=xc),l===Tt||l===fs)return t.avail_out===0&&(n.last_flush=-1),ai;if(l===Sc&&(e===LB?dn._tr_align(n):e!==M1&&(dn._tr_stored_block(n,0,0,!1),e===NB&&(_a(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),ba(t),t.avail_out===0))return n.last_flush=-1,ai}return e!==Ea?ai:n.wrap<=0?D1:(n.wrap===2?(Me(n,t.adler&255),Me(n,t.adler>>8&255),Me(n,t.adler>>16&255),Me(n,t.adler>>24&255),Me(n,t.total_in&255),Me(n,t.total_in>>8&255),Me(n,t.total_in>>16&255),Me(n,t.total_in>>24&255)):(_c(n,t.adler>>>16),_c(n,t.adler&65535)),ba(t),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?ai:D1)}function dH(t){var e;return!t||!t.state?hn:(e=t.state.status,e!==ad&&e!==pg&&e!==td&&e!==rd&&e!==nd&&e!==us&&e!==xc?Sa(t,hn):(t.state=null,e===us?Sa(t,BB):ai))}function hH(t,e){var r=e.length,n,i,a,s,o,l,c,u;if(!t||!t.state||(n=t.state,s=n.wrap,s===2||s===1&&n.status!==ad||n.lookahead))return hn;for(s===1&&(t.adler=N1(t.adler,e,r,0)),n.wrap=0,r>=n.w_size&&(s===0&&(_a(n.head),n.strstart=0,n.block_start=0,n.insert=0),u=new fr.Buf8(n.w_size),fr.arraySet(u,e,r-n.w_size,n.w_size,0),e=u,r=n.w_size),o=t.avail_in,l=t.next_in,c=t.input,t.avail_in=r,t.next_in=0,t.input=e,ds(n);n.lookahead>=Ce;){i=n.strstart,a=n.lookahead-(Ce-1);do n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+Ce-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++;while(--a);n.strstart=i,n.lookahead=Ce-1,ds(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=Ce-1,n.match_available=0,t.next_in=l,t.input=c,t.avail_in=o,n.wrap=s,ai}si.deflateInit=uH;si.deflateInit2=G1;si.deflateReset=U1;si.deflateResetKeep=H1;si.deflateSetHeader=cH;si.deflate=fH;si.deflateEnd=dH;si.deflateSetDictionary=hH;si.deflateInfo="pako deflate (from Nodeca project)"});var mg=I(Mo=>{"use strict";p();var sd=Li(),q1=!0,z1=!0;try{String.fromCharCode.apply(null,[0])}catch(t){q1=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){z1=!1}var Ec=new sd.Buf8(256);for(Bi=0;Bi<256;Bi++)Ec[Bi]=Bi>=252?6:Bi>=248?5:Bi>=240?4:Bi>=224?3:Bi>=192?2:1;var Bi;Ec[254]=Ec[254]=1;Mo.string2buf=function(t){var e,r,n,i,a,s=t.length,o=0;for(i=0;i<s;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<s&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new sd.Buf8(o),a=0,i=0;a<o;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<s&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?e[a++]=r:r<2048?(e[a++]=192|r>>>6,e[a++]=128|r&63):r<65536?(e[a++]=224|r>>>12,e[a++]=128|r>>>6&63,e[a++]=128|r&63):(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63,e[a++]=128|r>>>6&63,e[a++]=128|r&63);return e};function V1(t,e){if(e<65534&&(t.subarray&&z1||!t.subarray&&q1))return String.fromCharCode.apply(null,sd.shrinkBuf(t,e));for(var r="",n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r}Mo.buf2binstring=function(t){return V1(t,t.length)};Mo.binstring2buf=function(t){for(var e=new sd.Buf8(t.length),r=0,n=e.length;r<n;r++)e[r]=t.charCodeAt(r);return e};Mo.buf2string=function(t,e){var r,n,i,a,s=e||t.length,o=new Array(s*2);for(n=0,r=0;r<s;){if(i=t[r++],i<128){o[n++]=i;continue}if(a=Ec[i],a>4){o[n++]=65533,r+=a-1;continue}for(i&=a===2?31:a===3?15:7;a>1&&r<s;)i=i<<6|t[r++]&63,a--;if(a>1){o[n++]=65533;continue}i<65536?o[n++]=i:(i-=65536,o[n++]=55296|i>>10&1023,o[n++]=56320|i&1023)}return V1(o,n)};Mo.utf8border=function(t,e){var r;for(e=e||t.length,e>t.length&&(e=t.length),r=e-1;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+Ec[t[r]]>e?r:e}});var gg=I((EX,W1)=>{"use strict";p();function pH(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}W1.exports=pH});var K1=I(Tc=>{"use strict";p();var kc=j1(),Ac=Li(),wg=mg(),yg=Jf(),mH=gg(),Z1=Object.prototype.toString,gH=0,vg=4,Do=0,Y1=1,X1=2,vH=-1,wH=0,yH=8;function ps(t){if(!(this instanceof ps))return new ps(t);this.options=Ac.assign({level:vH,method:yH,chunkSize:16384,windowBits:15,memLevel:8,strategy:wH,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new mH,this.strm.avail_out=0;var r=kc.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==Do)throw new Error(yg[r]);if(e.header&&kc.deflateSetHeader(this.strm,e.header),e.dictionary){var n;if(typeof e.dictionary=="string"?n=wg.string2buf(e.dictionary):Z1.call(e.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(e.dictionary):n=e.dictionary,r=kc.deflateSetDictionary(this.strm,n),r!==Do)throw new Error(yg[r]);this._dict_set=!0}}ps.prototype.push=function(t,e){var r=this.strm,n=this.options.chunkSize,i,a;if(this.ended)return!1;a=e===~~e?e:e===!0?vg:gH,typeof t=="string"?r.input=wg.string2buf(t):Z1.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new Ac.Buf8(n),r.next_out=0,r.avail_out=n),i=kc.deflate(r,a),i!==Y1&&i!==Do)return this.onEnd(i),this.ended=!0,!1;(r.avail_out===0||r.avail_in===0&&(a===vg||a===X1))&&(this.options.to==="string"?this.onData(wg.buf2binstring(Ac.shrinkBuf(r.output,r.next_out))):this.onData(Ac.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||r.avail_out===0)&&i!==Y1);return a===vg?(i=kc.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Do):(a===X1&&(this.onEnd(Do),r.avail_out=0),!0)};ps.prototype.onData=function(t){this.chunks.push(t)};ps.prototype.onEnd=function(t){t===Do&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ac.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function bg(t,e){var r=new ps(e);if(r.push(t,!0),r.err)throw r.msg||yg[r.err];return r.result}function bH(t,e){return e=e||{},e.raw=!0,bg(t,e)}function _H(t,e){return e=e||{},e.gzip=!0,bg(t,e)}Tc.Deflate=ps;Tc.deflate=bg;Tc.deflateRaw=bH;Tc.gzip=_H});var Q1=I((CX,J1)=>{"use strict";p();var od=30,xH=12;J1.exports=function(e,r){var n,i,a,s,o,l,c,u,f,d,h,m,g,v,w,b,k,E,S,A,y,x,_,T,P;n=e.state,i=e.next_in,T=e.input,a=i+(e.avail_in-5),s=e.next_out,P=e.output,o=s-(r-e.avail_out),l=s+(e.avail_out-257),c=n.dmax,u=n.wsize,f=n.whave,d=n.wnext,h=n.window,m=n.hold,g=n.bits,v=n.lencode,w=n.distcode,b=(1<<n.lenbits)-1,k=(1<<n.distbits)-1;e:do{g<15&&(m+=T[i++]<<g,g+=8,m+=T[i++]<<g,g+=8),E=v[m&b];t:for(;;){if(S=E>>>24,m>>>=S,g-=S,S=E>>>16&255,S===0)P[s++]=E&65535;else if(S&16){A=E&65535,S&=15,S&&(g<S&&(m+=T[i++]<<g,g+=8),A+=m&(1<<S)-1,m>>>=S,g-=S),g<15&&(m+=T[i++]<<g,g+=8,m+=T[i++]<<g,g+=8),E=w[m&k];r:for(;;){if(S=E>>>24,m>>>=S,g-=S,S=E>>>16&255,S&16){if(y=E&65535,S&=15,g<S&&(m+=T[i++]<<g,g+=8,g<S&&(m+=T[i++]<<g,g+=8)),y+=m&(1<<S)-1,y>c){e.msg="invalid distance too far back",n.mode=od;break e}if(m>>>=S,g-=S,S=s-o,y>S){if(S=y-S,S>f&&n.sane){e.msg="invalid distance too far back",n.mode=od;break e}if(x=0,_=h,d===0){if(x+=u-S,S<A){A-=S;do P[s++]=h[x++];while(--S);x=s-y,_=P}}else if(d<S){if(x+=u+d-S,S-=d,S<A){A-=S;do P[s++]=h[x++];while(--S);if(x=0,d<A){S=d,A-=S;do P[s++]=h[x++];while(--S);x=s-y,_=P}}}else if(x+=d-S,S<A){A-=S;do P[s++]=h[x++];while(--S);x=s-y,_=P}for(;A>2;)P[s++]=_[x++],P[s++]=_[x++],P[s++]=_[x++],A-=3;A&&(P[s++]=_[x++],A>1&&(P[s++]=_[x++]))}else{x=s-y;do P[s++]=P[x++],P[s++]=P[x++],P[s++]=P[x++],A-=3;while(A>2);A&&(P[s++]=P[x++],A>1&&(P[s++]=P[x++]))}}else if(S&64){e.msg="invalid distance code",n.mode=od;break e}else{E=w[(E&65535)+(m&(1<<S)-1)];continue r}break}}else if(S&64)if(S&32){n.mode=xH;break e}else{e.msg="invalid literal/length code",n.mode=od;break e}else{E=v[(E&65535)+(m&(1<<S)-1)];continue t}break}}while(i<a&&s<l);A=g>>3,i-=A,g-=A<<3,m&=(1<<g)-1,e.next_in=i,e.next_out=s,e.avail_in=i<a?5+(a-i):5-(i-a),e.avail_out=s<l?257+(l-s):257-(s-l),n.hold=m,n.bits=g}});var sS=I((RX,aS)=>{"use strict";p();var eS=Li(),Lo=15,tS=852,rS=592,nS=0,_g=1,iS=2,SH=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],EH=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],kH=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],AH=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];aS.exports=function(e,r,n,i,a,s,o,l){var c=l.bits,u=0,f=0,d=0,h=0,m=0,g=0,v=0,w=0,b=0,k=0,E,S,A,y,x,_=null,T=0,P,D=new eS.Buf16(Lo+1),B=new eS.Buf16(Lo+1),N=null,le=0,Ae,we,fe;for(u=0;u<=Lo;u++)D[u]=0;for(f=0;f<i;f++)D[r[n+f]]++;for(m=c,h=Lo;h>=1&&D[h]===0;h--);if(m>h&&(m=h),h===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,l.bits=1,0;for(d=1;d<h&&D[d]===0;d++);for(m<d&&(m=d),w=1,u=1;u<=Lo;u++)if(w<<=1,w-=D[u],w<0)return-1;if(w>0&&(e===nS||h!==1))return-1;for(B[1]=0,u=1;u<Lo;u++)B[u+1]=B[u]+D[u];for(f=0;f<i;f++)r[n+f]!==0&&(o[B[r[n+f]]++]=f);if(e===nS?(_=N=o,P=19):e===_g?(_=SH,T-=257,N=EH,le-=257,P=256):(_=kH,N=AH,P=-1),k=0,f=0,u=d,x=s,g=m,v=0,A=-1,b=1<<m,y=b-1,e===_g&&b>tS||e===iS&&b>rS)return 1;for(;;){Ae=u-v,o[f]<P?(we=0,fe=o[f]):o[f]>P?(we=N[le+o[f]],fe=_[T+o[f]]):(we=96,fe=0),E=1<<u-v,S=1<<g,d=S;do S-=E,a[x+(k>>v)+S]=Ae<<24|we<<16|fe|0;while(S!==0);for(E=1<<u-1;k&E;)E>>=1;if(E!==0?(k&=E-1,k+=E):k=0,f++,--D[u]===0){if(u===h)break;u=r[n+o[f]]}if(u>m&&(k&y)!==A){for(v===0&&(v=m),x+=d,g=u-v,w=1<<g;g+v<h&&(w-=D[g+v],!(w<=0));)g++,w<<=1;if(b+=1<<g,e===_g&&b>tS||e===iS&&b>rS)return 1;A=k&y,a[A]=m<<24|g<<16|x-s|0}}return k!==0&&(a[x+k]=u-v<<24|64<<16|0),l.bits=m,0}});var US=I(Fn=>{"use strict";p();var Wr=Li(),Tg=cg(),oi=ug(),TH=Q1(),Cc=sS(),CH=0,FS=1,$S=2,oS=4,PH=5,ld=6,ms=0,RH=1,IH=2,pn=-2,OS=-3,Cg=-4,FH=-5,lS=8,MS=1,cS=2,uS=3,fS=4,dS=5,hS=6,pS=7,mS=8,gS=9,vS=10,fd=11,Hi=12,xg=13,wS=14,Sg=15,yS=16,bS=17,_S=18,xS=19,cd=20,ud=21,SS=22,ES=23,kS=24,AS=25,TS=26,Eg=27,CS=28,PS=29,Qe=30,Pg=31,$H=32,OH=852,MH=592,DH=15,LH=DH;function RS(t){return(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24)}function NH(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Wr.Buf16(320),this.work=new Wr.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function DS(t){var e;return!t||!t.state?pn:(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=MS,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Wr.Buf32(OH),e.distcode=e.distdyn=new Wr.Buf32(MH),e.sane=1,e.back=-1,ms)}function LS(t){var e;return!t||!t.state?pn:(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,DS(t))}function NS(t,e){var r,n;return!t||!t.state||(n=t.state,e<0?(r=0,e=-e):(r=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?pn:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,LS(t))}function BS(t,e){var r,n;return t?(n=new NH,t.state=n,n.window=null,r=NS(t,e),r!==ms&&(t.state=null),r):pn}function BH(t){return BS(t,LH)}var IS=!0,kg,Ag;function HH(t){if(IS){var e;for(kg=new Wr.Buf32(512),Ag=new Wr.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Cc(FS,t.lens,0,288,kg,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Cc($S,t.lens,0,32,Ag,0,t.work,{bits:5}),IS=!1}t.lencode=kg,t.lenbits=9,t.distcode=Ag,t.distbits=5}function HS(t,e,r,n){var i,a=t.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Wr.Buf8(a.wsize)),n>=a.wsize?(Wr.arraySet(a.window,e,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),Wr.arraySet(a.window,e,r-n,i,a.wnext),n-=i,n?(Wr.arraySet(a.window,e,r-n,n,0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0}function UH(t,e){var r,n,i,a,s,o,l,c,u,f,d,h,m,g,v=0,w,b,k,E,S,A,y,x,_=new Wr.Buf8(4),T,P,D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&t.avail_in!==0)return pn;r=t.state,r.mode===Hi&&(r.mode=xg),s=t.next_out,i=t.output,l=t.avail_out,a=t.next_in,n=t.input,o=t.avail_in,c=r.hold,u=r.bits,f=o,d=l,x=ms;e:for(;;)switch(r.mode){case MS:if(r.wrap===0){r.mode=xg;break}for(;u<16;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if(r.wrap&2&&c===35615){r.check=0,_[0]=c&255,_[1]=c>>>8&255,r.check=oi(r.check,_,2,0),c=0,u=0,r.mode=cS;break}if(r.flags=0,r.head&&(r.head.done=!1),!(r.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",r.mode=Qe;break}if((c&15)!==lS){t.msg="unknown compression method",r.mode=Qe;break}if(c>>>=4,u-=4,y=(c&15)+8,r.wbits===0)r.wbits=y;else if(y>r.wbits){t.msg="invalid window size",r.mode=Qe;break}r.dmax=1<<y,t.adler=r.check=1,r.mode=c&512?vS:Hi,c=0,u=0;break;case cS:for(;u<16;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if(r.flags=c,(r.flags&255)!==lS){t.msg="unknown compression method",r.mode=Qe;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=Qe;break}r.head&&(r.head.text=c>>8&1),r.flags&512&&(_[0]=c&255,_[1]=c>>>8&255,r.check=oi(r.check,_,2,0)),c=0,u=0,r.mode=uS;case uS:for(;u<32;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}r.head&&(r.head.time=c),r.flags&512&&(_[0]=c&255,_[1]=c>>>8&255,_[2]=c>>>16&255,_[3]=c>>>24&255,r.check=oi(r.check,_,4,0)),c=0,u=0,r.mode=fS;case fS:for(;u<16;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}r.head&&(r.head.xflags=c&255,r.head.os=c>>8),r.flags&512&&(_[0]=c&255,_[1]=c>>>8&255,r.check=oi(r.check,_,2,0)),c=0,u=0,r.mode=dS;case dS:if(r.flags&1024){for(;u<16;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}r.length=c,r.head&&(r.head.extra_len=c),r.flags&512&&(_[0]=c&255,_[1]=c>>>8&255,r.check=oi(r.check,_,2,0)),c=0,u=0}else r.head&&(r.head.extra=null);r.mode=hS;case hS:if(r.flags&1024&&(h=r.length,h>o&&(h=o),h&&(r.head&&(y=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),Wr.arraySet(r.head.extra,n,a,h,y)),r.flags&512&&(r.check=oi(r.check,n,h,a)),o-=h,a+=h,r.length-=h),r.length))break e;r.length=0,r.mode=pS;case pS:if(r.flags&2048){if(o===0)break e;h=0;do y=n[a+h++],r.head&&y&&r.length<65536&&(r.head.name+=String.fromCharCode(y));while(y&&h<o);if(r.flags&512&&(r.check=oi(r.check,n,h,a)),o-=h,a+=h,y)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=mS;case mS:if(r.flags&4096){if(o===0)break e;h=0;do y=n[a+h++],r.head&&y&&r.length<65536&&(r.head.comment+=String.fromCharCode(y));while(y&&h<o);if(r.flags&512&&(r.check=oi(r.check,n,h,a)),o-=h,a+=h,y)break e}else r.head&&(r.head.comment=null);r.mode=gS;case gS:if(r.flags&512){for(;u<16;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if(c!==(r.check&65535)){t.msg="header crc mismatch",r.mode=Qe;break}c=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Hi;break;case vS:for(;u<32;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}t.adler=r.check=RS(c),c=0,u=0,r.mode=fd;case fd:if(r.havedict===0)return t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=o,r.hold=c,r.bits=u,IH;t.adler=r.check=1,r.mode=Hi;case Hi:if(e===PH||e===ld)break e;case xg:if(r.last){c>>>=u&7,u-=u&7,r.mode=Eg;break}for(;u<3;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}switch(r.last=c&1,c>>>=1,u-=1,c&3){case 0:r.mode=wS;break;case 1:if(HH(r),r.mode=cd,e===ld){c>>>=2,u-=2;break e}break;case 2:r.mode=bS;break;case 3:t.msg="invalid block type",r.mode=Qe}c>>>=2,u-=2;break;case wS:for(c>>>=u&7,u-=u&7;u<32;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Qe;break}if(r.length=c&65535,c=0,u=0,r.mode=Sg,e===ld)break e;case Sg:r.mode=yS;case yS:if(h=r.length,h){if(h>o&&(h=o),h>l&&(h=l),h===0)break e;Wr.arraySet(i,n,a,h,s),o-=h,a+=h,l-=h,s+=h,r.length-=h;break}r.mode=Hi;break;case bS:for(;u<14;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if(r.nlen=(c&31)+257,c>>>=5,u-=5,r.ndist=(c&31)+1,c>>>=5,u-=5,r.ncode=(c&15)+4,c>>>=4,u-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Qe;break}r.have=0,r.mode=_S;case _S:for(;r.have<r.ncode;){for(;u<3;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}r.lens[D[r.have++]]=c&7,c>>>=3,u-=3}for(;r.have<19;)r.lens[D[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,T={bits:r.lenbits},x=Cc(CH,r.lens,0,19,r.lencode,0,r.work,T),r.lenbits=T.bits,x){t.msg="invalid code lengths set",r.mode=Qe;break}r.have=0,r.mode=xS;case xS:for(;r.have<r.nlen+r.ndist;){for(;v=r.lencode[c&(1<<r.lenbits)-1],w=v>>>24,b=v>>>16&255,k=v&65535,!(w<=u);){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if(k<16)c>>>=w,u-=w,r.lens[r.have++]=k;else{if(k===16){for(P=w+2;u<P;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if(c>>>=w,u-=w,r.have===0){t.msg="invalid bit length repeat",r.mode=Qe;break}y=r.lens[r.have-1],h=3+(c&3),c>>>=2,u-=2}else if(k===17){for(P=w+3;u<P;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}c>>>=w,u-=w,y=0,h=3+(c&7),c>>>=3,u-=3}else{for(P=w+7;u<P;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}c>>>=w,u-=w,y=0,h=11+(c&127),c>>>=7,u-=7}if(r.have+h>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Qe;break}for(;h--;)r.lens[r.have++]=y}}if(r.mode===Qe)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=Qe;break}if(r.lenbits=9,T={bits:r.lenbits},x=Cc(FS,r.lens,0,r.nlen,r.lencode,0,r.work,T),r.lenbits=T.bits,x){t.msg="invalid literal/lengths set",r.mode=Qe;break}if(r.distbits=6,r.distcode=r.distdyn,T={bits:r.distbits},x=Cc($S,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,T),r.distbits=T.bits,x){t.msg="invalid distances set",r.mode=Qe;break}if(r.mode=cd,e===ld)break e;case cd:r.mode=ud;case ud:if(o>=6&&l>=258){t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=o,r.hold=c,r.bits=u,TH(t,d),s=t.next_out,i=t.output,l=t.avail_out,a=t.next_in,n=t.input,o=t.avail_in,c=r.hold,u=r.bits,r.mode===Hi&&(r.back=-1);break}for(r.back=0;v=r.lencode[c&(1<<r.lenbits)-1],w=v>>>24,b=v>>>16&255,k=v&65535,!(w<=u);){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if(b&&!(b&240)){for(E=w,S=b,A=k;v=r.lencode[A+((c&(1<<E+S)-1)>>E)],w=v>>>24,b=v>>>16&255,k=v&65535,!(E+w<=u);){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}c>>>=E,u-=E,r.back+=E}if(c>>>=w,u-=w,r.back+=w,r.length=k,b===0){r.mode=TS;break}if(b&32){r.back=-1,r.mode=Hi;break}if(b&64){t.msg="invalid literal/length code",r.mode=Qe;break}r.extra=b&15,r.mode=SS;case SS:if(r.extra){for(P=r.extra;u<P;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=ES;case ES:for(;v=r.distcode[c&(1<<r.distbits)-1],w=v>>>24,b=v>>>16&255,k=v&65535,!(w<=u);){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if(!(b&240)){for(E=w,S=b,A=k;v=r.distcode[A+((c&(1<<E+S)-1)>>E)],w=v>>>24,b=v>>>16&255,k=v&65535,!(E+w<=u);){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}c>>>=E,u-=E,r.back+=E}if(c>>>=w,u-=w,r.back+=w,b&64){t.msg="invalid distance code",r.mode=Qe;break}r.offset=k,r.extra=b&15,r.mode=kS;case kS:if(r.extra){for(P=r.extra;u<P;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Qe;break}r.mode=AS;case AS:if(l===0)break e;if(h=d-l,r.offset>h){if(h=r.offset-h,h>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Qe;break}h>r.wnext?(h-=r.wnext,m=r.wsize-h):m=r.wnext-h,h>r.length&&(h=r.length),g=r.window}else g=i,m=s-r.offset,h=r.length;h>l&&(h=l),l-=h,r.length-=h;do i[s++]=g[m++];while(--h);r.length===0&&(r.mode=ud);break;case TS:if(l===0)break e;i[s++]=r.length,l--,r.mode=ud;break;case Eg:if(r.wrap){for(;u<32;){if(o===0)break e;o--,c|=n[a++]<<u,u+=8}if(d-=l,t.total_out+=d,r.total+=d,d&&(t.adler=r.check=r.flags?oi(r.check,i,d,s-d):Tg(r.check,i,d,s-d)),d=l,(r.flags?c:RS(c))!==r.check){t.msg="incorrect data check",r.mode=Qe;break}c=0,u=0}r.mode=CS;case CS:if(r.wrap&&r.flags){for(;u<32;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if(c!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=Qe;break}c=0,u=0}r.mode=PS;case PS:x=RH;break e;case Qe:x=OS;break e;case Pg:return Cg;case $H:default:return pn}return t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=o,r.hold=c,r.bits=u,(r.wsize||d!==t.avail_out&&r.mode<Qe&&(r.mode<Eg||e!==oS))&&HS(t,t.output,t.next_out,d-t.avail_out)?(r.mode=Pg,Cg):(f-=t.avail_in,d-=t.avail_out,t.total_in+=f,t.total_out+=d,r.total+=d,r.wrap&&d&&(t.adler=r.check=r.flags?oi(r.check,i,d,t.next_out-d):Tg(r.check,i,d,t.next_out-d)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Hi?128:0)+(r.mode===cd||r.mode===Sg?256:0),(f===0&&d===0||e===oS)&&x===ms&&(x=FH),x)}function GH(t){if(!t||!t.state)return pn;var e=t.state;return e.window&&(e.window=null),t.state=null,ms}function jH(t,e){var r;return!t||!t.state||(r=t.state,!(r.wrap&2))?pn:(r.head=e,e.done=!1,ms)}function qH(t,e){var r=e.length,n,i,a;return!t||!t.state||(n=t.state,n.wrap!==0&&n.mode!==fd)?pn:n.mode===fd&&(i=1,i=Tg(i,e,r,0),i!==n.check)?OS:(a=HS(t,e,r,r),a?(n.mode=Pg,Cg):(n.havedict=1,ms))}Fn.inflateReset=LS;Fn.inflateReset2=NS;Fn.inflateResetKeep=DS;Fn.inflateInit=BH;Fn.inflateInit2=BS;Fn.inflate=UH;Fn.inflateEnd=GH;Fn.inflateGetHeader=jH;Fn.inflateSetDictionary=qH;Fn.inflateInfo="pako inflate (from Nodeca project)"});var Rg=I((OX,GS)=>{"use strict";p();GS.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}});var qS=I((DX,jS)=>{"use strict";p();function zH(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}jS.exports=zH});var VS=I(Rc=>{"use strict";p();var No=US(),Pc=Li(),dd=mg(),mt=Rg(),Ig=Jf(),VH=gg(),WH=qS(),zS=Object.prototype.toString;function gs(t){if(!(this instanceof gs))return new gs(t);this.options=Pc.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new VH,this.strm.avail_out=0;var r=No.inflateInit2(this.strm,e.windowBits);if(r!==mt.Z_OK)throw new Error(Ig[r]);if(this.header=new WH,No.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=dd.string2buf(e.dictionary):zS.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=No.inflateSetDictionary(this.strm,e.dictionary),r!==mt.Z_OK)))throw new Error(Ig[r])}gs.prototype.push=function(t,e){var r=this.strm,n=this.options.chunkSize,i=this.options.dictionary,a,s,o,l,c,u=!1;if(this.ended)return!1;s=e===~~e?e:e===!0?mt.Z_FINISH:mt.Z_NO_FLUSH,typeof t=="string"?r.input=dd.binstring2buf(t):zS.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new Pc.Buf8(n),r.next_out=0,r.avail_out=n),a=No.inflate(r,mt.Z_NO_FLUSH),a===mt.Z_NEED_DICT&&i&&(a=No.inflateSetDictionary(this.strm,i)),a===mt.Z_BUF_ERROR&&u===!0&&(a=mt.Z_OK,u=!1),a!==mt.Z_STREAM_END&&a!==mt.Z_OK)return this.onEnd(a),this.ended=!0,!1;r.next_out&&(r.avail_out===0||a===mt.Z_STREAM_END||r.avail_in===0&&(s===mt.Z_FINISH||s===mt.Z_SYNC_FLUSH))&&(this.options.to==="string"?(o=dd.utf8border(r.output,r.next_out),l=r.next_out-o,c=dd.buf2string(r.output,o),r.next_out=l,r.avail_out=n-l,l&&Pc.arraySet(r.output,r.output,o,l,0),this.onData(c)):this.onData(Pc.shrinkBuf(r.output,r.next_out))),r.avail_in===0&&r.avail_out===0&&(u=!0)}while((r.avail_in>0||r.avail_out===0)&&a!==mt.Z_STREAM_END);return a===mt.Z_STREAM_END&&(s=mt.Z_FINISH),s===mt.Z_FINISH?(a=No.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===mt.Z_OK):(s===mt.Z_SYNC_FLUSH&&(this.onEnd(mt.Z_OK),r.avail_out=0),!0)};gs.prototype.onData=function(t){this.chunks.push(t)};gs.prototype.onEnd=function(t){t===mt.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Pc.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function Fg(t,e){var r=new gs(e);if(r.push(t,!0),r.err)throw r.msg||Ig[r.err];return r.result}function YH(t,e){return e=e||{},e.raw=!0,Fg(t,e)}Rc.Inflate=gs;Rc.inflate=Fg;Rc.inflateRaw=YH;Rc.ungzip=Fg});var XS=I((HX,YS)=>{"use strict";p();var XH=Li().assign,ZH=K1(),KH=VS(),JH=Rg(),WS={};XH(WS,ZH,KH,JH);YS.exports=WS});var JS=I((GX,KS)=>{"use strict";p();var ZS=(t,e)=>function(...r){let n=e.promiseModule;return new n((i,a)=>{e.multiArgs?r.push((...s)=>{e.errorFirst?s[0]?a(s):(s.shift(),i(s)):i(s)}):e.errorFirst?r.push((s,o)=>{s?a(s):i(o)}):r.push(i),t.apply(this,r)})};KS.exports=(t,e)=>{e=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},e);let r=typeof t;if(!(t!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":r}\``);let n=a=>{let s=o=>typeof o=="string"?a===o:o.test(a);return e.include?e.include.some(s):!e.exclude.some(s)},i;r==="function"?i=function(...a){return e.excludeMain?t(...a):ZS(t,e).apply(this,a)}:i=Object.create(Object.getPrototypeOf(t));for(let a in t){let s=t[a];i[a]=typeof s=="function"&&n(a)?ZS(s,e):s}return i}});var oE=I((qX,sE)=>{p();function QS(t){return Array.isArray(t)?t:[t]}var Mg="",eE=" ",$g="\\",QH=/^\s+$/,e3=/(?:[^\\]|^)\\$/,t3=/^\\!/,r3=/^\\#/,n3=/\r?\n/g,i3=/^\.*\/|^\.+$/,Og="/",nE="node-ignore";typeof Symbol!="undefined"&&(nE=Symbol.for("node-ignore"));var tE=nE,a3=(t,e,r)=>Object.defineProperty(t,e,{value:r}),s3=/([0-z])-([0-z])/g,iE=()=>!1,o3=t=>t.replace(s3,(e,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?e:Mg),l3=t=>{let{length:e}=t;return t.slice(0,e-e%2)},c3=[[/^\uFEFF/,()=>Mg],[/((?:\\\\)*?)(\\?\s+)$/,(t,e,r)=>e+(r.indexOf("\\")===0?eE:Mg)],[/(\\+?)\s/g,(t,e)=>{let{length:r}=e;return e.slice(0,r-r%2)+eE}],[/[\\$.|*+(){^]/g,t=>`\\${t}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(t,e,r)=>e+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(t,e,r)=>{let n=r.replace(/\\\*/g,"[^\\/]*");return e+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>$g],[/\\\\/g,()=>$g],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(t,e,r,n,i)=>e===$g?`\\[${r}${l3(n)}${i}`:i==="]"&&n.length%2===0?`[${o3(r)}${n}]`:"[]"],[/(?:[^*])$/,t=>/\/$/.test(t)?`${t}$`:`${t}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(t,e)=>`${e?`${e}[^/]+`:"[^/]*"}(?=$|\\/$)`]],rE=Object.create(null),u3=(t,e)=>{let r=rE[t];return r||(r=c3.reduce((n,[i,a])=>n.replace(i,a.bind(t)),t),rE[t]=r),e?new RegExp(r,"i"):new RegExp(r)},Ng=t=>typeof t=="string",f3=t=>t&&Ng(t)&&!QH.test(t)&&!e3.test(t)&&t.indexOf("#")!==0,d3=t=>t.split(n3),Dg=class{constructor(e,r,n,i){this.origin=e,this.pattern=r,this.negative=n,this.regex=i}},h3=(t,e)=>{let r=t,n=!1;t.indexOf("!")===0&&(n=!0,t=t.substr(1)),t=t.replace(t3,"!").replace(r3,"#");let i=u3(t,e);return new Dg(r,t,n,i)},p3=(t,e)=>{throw new e(t)},Ui=(t,e,r)=>Ng(t)?t?Ui.isNotRelative(t)?r(`path should be a \`path.relative()\`d string, but got "${e}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${e}\``,TypeError),aE=t=>i3.test(t);Ui.isNotRelative=aE;Ui.convert=t=>t;var Lg=class{constructor({ignorecase:e=!0,ignoreCase:r=e,allowRelativePaths:n=!1}={}){a3(this,tE,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(e){if(e&&e[tE]){this._rules=this._rules.concat(e._rules),this._added=!0;return}if(f3(e)){let r=h3(e,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(e){return this._added=!1,QS(Ng(e)?d3(e):e).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(e){return this.add(e)}_testOne(e,r){let n=!1,i=!1;return this._rules.forEach(a=>{let{negative:s}=a;if(i===s&&n!==i||s&&!n&&!i&&!r)return;a.regex.test(e)&&(n=!s,i=s)}),{ignored:n,unignored:i}}_test(e,r,n,i){let a=e&&Ui.convert(e);return Ui(a,e,this._allowRelativePaths?iE:p3),this._t(a,r,n,i)}_t(e,r,n,i){if(e in r)return r[e];if(i||(i=e.split(Og)),i.pop(),!i.length)return r[e]=this._testOne(e,n);let a=this._t(i.join(Og)+Og,r,n,i);return r[e]=a.ignored?a:this._testOne(e,n)}ignores(e){return this._test(e,this._ignoreCache,!1).ignored}createFilter(){return e=>!this.ignores(e)}filter(e){return QS(e).filter(this.createFilter())}test(e){return this._test(e,this._testCache,!0)}},hd=t=>new Lg(t),m3=t=>Ui(t&&Ui.convert(t),t,iE);hd.isPathValid=m3;hd.default=hd;sE.exports=hd;if(typeof process!="undefined"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let t=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");Ui.convert=t;let e=/^[a-z]:\//i;Ui.isNotRelative=r=>e.test(r)||aE(r)}});var cE=I((VX,lE)=>{"use strict";p();function g3(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function li(t,e,r){return e=e instanceof RegExp?e:new RegExp(g3(e),"g"),t.replace(e,r)}var v3={clean:function(e){if(typeof e!="string")throw new Error("Expected a string, received: "+e);return e=li(e,"./","/"),e=li(e,"..","."),e=li(e," ","-"),e=li(e,/^[~^:?*\\\-]/g,""),e=li(e,/[~^:?*\\]/g,"-"),e=li(e,/[~^:?*\\\-]$/g,""),e=li(e,"@{","-"),e=li(e,/\.$/g,""),e=li(e,/\/$/g,""),e=li(e,/\.lock$/g,""),e}};lE.exports=v3});var fE=I((YX,uE)=>{p();uE.exports=function(t,e){var r=t,n=e,i=r.length,a=n.length,s=!1,o=null,l=i+1,c=[],u=[],f=[],d="",h=-1,m=0,g=1,v,w,b=function(){i>=a&&(v=r,w=i,r=n,n=v,i=a,a=w,s=!0,l=i+1)},k=function(y,x,_){return{x:y,y:x,k:_}},E=function(y,x){return{elem:y,t:x}},S=function(y,x,_){var T,P,D;for(x>_?T=c[y-1+l]:T=c[y+1+l],D=Math.max(x,_),P=D-y;P<i&&D<a&&r[P]===n[D];)++P,++D;return c[y+l]=u.length,u[u.length]=new k(P,D,T),D},A=function(y){var x,_,T,P,D;for(x=_=1,T=P=0,D=y.length-1;D>=0;--D)for(;T<y[D].x||P<y[D].y;)y[D].y-y[D].x>P-T?(s?f[f.length]=new E(n[P],h):f[f.length]=new E(n[P],g),++_,++P):y[D].y-y[D].x<P-T?(s?f[f.length]=new E(r[T],g):f[f.length]=new E(r[T],h),++x,++T):(f[f.length]=new E(r[T],m),d+=r[T],++x,++_,++T,++P)};return b(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return o},getlcs:function(){return d},getses:function(){return f},compose:function(){var y,x,_,T,P,D,B,N;for(y=a-i,x=i+a+3,_={},B=0;B<x;++B)_[B]=-1,c[B]=-1;T=-1;do{for(++T,N=-T;N<=y-1;++N)_[N+l]=S(N,_[N-1+l]+1,_[N+1+l]);for(N=y+T;N>=y+1;--N)_[N+l]=S(N,_[N-1+l]+1,_[N+1+l]);_[y+l]=S(y,_[y-1+l]+1,_[y+1+l])}while(_[y+l]!==a);for(o=y+2*T,P=c[y+l],D=[];P!==-1;)D[D.length]=new k(u[P].x,u[P].y,null),P=u[P].k;A(D)}}}});var pE=I((ZX,hE)=>{p();var w3=fE();function y3(t,e){var r=new w3(t,e);r.compose();for(var n=r.getses(),i,a,s=t.length-1,o=e.length-1,l=n.length-1;l>=0;--l)n[l].t===r.SES_COMMON?(a?(a.chain={file1index:s,file2index:o,chain:null},a=a.chain):(i={file1index:s,file2index:o,chain:null},a=i),s--,o--):n[l].t===r.SES_DELETE?s--:n[l].t===r.SES_ADD&&o--;var c={file1index:-1,file2index:-1,chain:null};return a?(a.chain=c,i):c}function dE(t,e){for(var r=[],n=t.length,i=e.length,a=y3(t,e);a!==null;a=a.chain){var s=n-a.file1index-1,o=i-a.file2index-1;n=a.file1index,i=a.file2index,(s||o)&&r.push({file1:[n+1,s],file2:[i+1,o]})}return r.reverse(),r}function b3(t,e,r){var n,i=dE(e,t),a=dE(e,r),s=[];function o(B,N){s.push([B.file1[0],N,B.file1[1],B.file2[0],B.file2[1]])}for(n=0;n<i.length;n++)o(i[n],0);for(n=0;n<a.length;n++)o(a[n],2);s.sort(function(B,N){return B[0]-N[0]});var l=[],c=0;function u(B){B>c&&(l.push([1,c,B-c]),c=B)}for(var f=0;f<s.length;f++){for(var d=f,h=s[f],m=h[0],g=m+h[2];f<s.length-1;){var v=s[f+1],w=v[0];if(w>g)break;g=Math.max(g,w+v[2]),f++}if(u(m),d==f)h[4]>0&&l.push([h[1],h[3],h[4]]);else{var b={0:[t.length,-1,e.length,-1],2:[r.length,-1,e.length,-1]};for(n=d;n<=f;n++){h=s[n];var k=h[1],E=b[k],S=h[0],A=S+h[2],y=h[3],x=y+h[4];E[0]=Math.min(y,E[0]),E[1]=Math.max(x,E[1]),E[2]=Math.min(S,E[2]),E[3]=Math.max(A,E[3])}var _=b[0][0]+(m-b[0][2]),T=b[0][1]+(g-b[0][3]),P=b[2][0]+(m-b[2][2]),D=b[2][1]+(g-b[2][3]);l.push([-1,_,T-_,m,g-m,P,D-P])}c=g}return u(e.length),l}function _3(t,e,r){var n=[],i=[t,e,r],a=b3(t,e,r),s=[];function o(){s.length&&n.push({ok:s}),s=[]}function l(h){for(var m=0;m<h.length;m++)s.push(h[m])}function c(h){if(h[2]!=h[6])return!0;for(var m=h[1],g=h[5],v=0;v<h[2];v++)if(t[v+m]!=r[v+g])return!0;return!1}for(var u=0;u<a.length;u++){var f=a[u],d=f[0];d==-1?c(f)?(o(),n.push({conflict:{a:t.slice(f[1],f[1]+f[2]),aIndex:f[1],o:e.slice(f[3],f[3]+f[4]),oIndex:f[3],b:r.slice(f[5],f[5]+f[6]),bIndex:f[5]}})):l(i[0].slice(f[1],f[1]+f[2])):l(i[d].slice(f[1],f[1]+f[2]))}return o(),n}hE.exports=_3});var gv=I(X=>{"use strict";p();Object.defineProperty(X,"__esModule",{value:!0});function $a(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var Fc=$a(t_()),LE=$a(s1()),x3=$a(l1()),cv=$a(XS()),pd=$a(JS()),S3=$a(oE()),$c=$a(cE()),E3=$a(pE()),Pe=class t extends Error{constructor(e){super(e),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(e){let r=new t(e.message);return r.code=e.code,r.data=e.data,r.caller=e.caller,r.stack=e.stack,r}get isIsomorphicGitError(){return!0}},Oc=class t extends Pe{constructor(e){super(`Modifying the index is not possible because you have unmerged files: ${e.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=t.code,this.data={filepaths:e}}};Oc.code="UnmergedPathsError";var he=class t extends Pe{constructor(e){super(`An internal error caused this command to fail.

If you're not a developer, report the bug to the developers of the application you're using. If this is a bug in isomorphic-git then you should create a proper bug yourselves. The bug should include a minimal reproduction and details about the version and environment.

Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${e}`),this.code=this.name=t.code,this.data={message:e}}};he.code="InternalError";var Ho=class t extends Pe{constructor(e){super(`The filepath "${e}" contains unsafe character sequences`),this.code=this.name=t.code,this.data={filepath:e}}};Ho.code="UnsafeFilepathError";var mn=class{constructor(e){this.buffer=e,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(e){this._start=e}slice(e){let r=this.buffer.slice(this._start,this._start+e);return this._start+=e,r}toString(e,r){let n=this.buffer.toString(e,this._start,this._start+r);return this._start+=r,n}write(e,r,n){let i=this.buffer.write(e,this._start,r,n);return this._start+=r,i}copy(e,r,n){let i=e.copy(this.buffer,this._start,r,n);return this._start+=i,i}readUInt8(){let e=this.buffer.readUInt8(this._start);return this._start+=1,e}writeUInt8(e){let r=this.buffer.writeUInt8(e,this._start);return this._start+=1,r}readUInt16BE(){let e=this.buffer.readUInt16BE(this._start);return this._start+=2,e}writeUInt16BE(e){let r=this.buffer.writeUInt16BE(e,this._start);return this._start+=2,r}readUInt32BE(){let e=this.buffer.readUInt32BE(this._start);return this._start+=4,e}writeUInt32BE(e){let r=this.buffer.writeUInt32BE(e,this._start);return this._start+=4,r}};function Td(t,e){return-(t<e)||+(t>e)}function NE(t,e){return Td(t.path,e.path)}function BE(t){let e=t>0?t>>12:0;e!==4&&e!==8&&e!==10&&e!==14&&(e=8);let r=t&511;return r&73?r=493:r=420,e!==8&&(r=0),(e<<12)+r}var ci=2**32;function mE(t,e,r,n){if(t!==void 0&&e!==void 0)return[t,e];r===void 0&&(r=n.valueOf());let i=Math.floor(r/1e3),a=(r-i*1e3)*1e6;return[i,a]}function Uo(t){let[e,r]=mE(t.ctimeSeconds,t.ctimeNanoseconds,t.ctimeMs,t.ctime),[n,i]=mE(t.mtimeSeconds,t.mtimeNanoseconds,t.mtimeMs,t.mtime);return{ctimeSeconds:e%ci,ctimeNanoseconds:r%ci,mtimeSeconds:n%ci,mtimeNanoseconds:i%ci,dev:t.dev%ci,ino:t.ino%ci,mode:BE(t.mode%ci),uid:t.uid%ci,gid:t.gid%ci,size:t.size>-1?t.size%ci:0}}function k3(t){let e="";for(let r of new Uint8Array(t))r<16&&(e+="0"),e+=r.toString(16);return e}var Bg=null;async function ji(t){return Bg===null&&(Bg=await T3()),Bg?HE(t):A3(t)}function A3(t){return new LE().update(t).digest("hex")}async function HE(t){let e=await crypto.subtle.digest("SHA-1",t);return k3(e)}async function T3(){try{return await HE(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709"}catch(t){}return!1}function C3(t){return{assumeValid:!!(t&32768),extended:!!(t&16384),stage:(t&12288)>>12,nameLength:t&4095}}function P3(t){let e=t.flags;return e.extended=!1,e.nameLength=Math.min(Buffer.from(t.path).length,4095),(e.assumeValid?32768:0)+(e.extended?16384:0)+((e.stage&3)<<12)+(e.nameLength&4095)}var Kg=class t{constructor(e,r){this._dirty=!1,this._unmergedPaths=r||new Set,this._entries=e||new Map}_addEntry(e){if(e.flags.stage===0)e.stages=[e],this._entries.set(e.path,e),this._unmergedPaths.delete(e.path);else{let r=this._entries.get(e.path);r||(this._entries.set(e.path,e),r=e),r.stages[e.flags.stage]=e,this._unmergedPaths.add(e.path)}}static async from(e){if(Buffer.isBuffer(e))return t.fromBuffer(e);if(e===null)return new t(null);throw new he("invalid type passed to GitIndex.from")}static async fromBuffer(e){if(e.length===0)throw new he("Index file is empty (.git/index)");let r=new t,n=new mn(e),i=n.toString("utf8",4);if(i!=="DIRC")throw new he(`Invalid dircache magic file number: ${i}`);let a=await ji(e.slice(0,-20)),s=e.slice(-20).toString("hex");if(s!==a)throw new he(`Invalid checksum in GitIndex buffer: expected ${s} but saw ${a}`);let o=n.readUInt32BE();if(o!==2)throw new he(`Unsupported dircache version: ${o}`);let l=n.readUInt32BE(),c=0;for(;!n.eof()&&c<l;){let u={};u.ctimeSeconds=n.readUInt32BE(),u.ctimeNanoseconds=n.readUInt32BE(),u.mtimeSeconds=n.readUInt32BE(),u.mtimeNanoseconds=n.readUInt32BE(),u.dev=n.readUInt32BE(),u.ino=n.readUInt32BE(),u.mode=n.readUInt32BE(),u.uid=n.readUInt32BE(),u.gid=n.readUInt32BE(),u.size=n.readUInt32BE(),u.oid=n.slice(20).toString("hex");let f=n.readUInt16BE();u.flags=C3(f);let d=e.indexOf(0,n.tell()+1)-n.tell();if(d<1)throw new he(`Got a path length of: ${d}`);if(u.path=n.toString("utf8",d),u.path.includes("..\\")||u.path.includes("../"))throw new Ho(u.path);let h=8-(n.tell()-12)%8;for(h===0&&(h=8);h--;){let m=n.readUInt8();if(m!==0)throw new he(`Expected 1-8 null characters but got '${m}' after ${u.path}`);if(n.eof())throw new he("Unexpected end of file")}u.stages=[],r._addEntry(u),c++}return r}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(NE)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(e=>e.stages.length>1?e.stages.filter(r=>r):e)}*[Symbol.iterator](){for(let e of this.entries)yield e}insert({filepath:e,stats:r,oid:n,stage:i=0}){r||(r={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),r=Uo(r);let a=Buffer.from(e),s={ctimeSeconds:r.ctimeSeconds,ctimeNanoseconds:r.ctimeNanoseconds,mtimeSeconds:r.mtimeSeconds,mtimeNanoseconds:r.mtimeNanoseconds,dev:r.dev,ino:r.ino,mode:r.mode||33188,uid:r.uid,gid:r.gid,size:r.size,path:e,oid:n,flags:{assumeValid:!1,extended:!1,stage:i,nameLength:a.length<4095?a.length:4095},stages:[]};this._addEntry(s),this._dirty=!0}delete({filepath:e}){if(this._entries.has(e))this._entries.delete(e);else for(let r of this._entries.keys())r.startsWith(e+"/")&&this._entries.delete(r);this._unmergedPaths.has(e)&&this._unmergedPaths.delete(e),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:e}){return this._entries.has(e)}render(){return this.entries.map(e=>`${e.mode.toString(8)} ${e.oid}    ${e.path}`).join(`
`)}static async _entryToBuffer(e){let r=Buffer.from(e.path),n=Math.ceil((62+r.length+1)/8)*8,i=Buffer.alloc(n),a=new mn(i),s=Uo(e);return a.writeUInt32BE(s.ctimeSeconds),a.writeUInt32BE(s.ctimeNanoseconds),a.writeUInt32BE(s.mtimeSeconds),a.writeUInt32BE(s.mtimeNanoseconds),a.writeUInt32BE(s.dev),a.writeUInt32BE(s.ino),a.writeUInt32BE(s.mode),a.writeUInt32BE(s.uid),a.writeUInt32BE(s.gid),a.writeUInt32BE(s.size),a.write(e.oid,20,"hex"),a.writeUInt16BE(P3(e)),a.write(e.path,r.length,"utf8"),i}async toObject(){let e=Buffer.alloc(12),r=new mn(e);r.write("DIRC",4,"utf8"),r.writeUInt32BE(2),r.writeUInt32BE(this.entriesFlat.length);let n=[];for(let o of this.entries)if(n.push(t._entryToBuffer(o)),o.stages.length>1)for(let l of o.stages)l&&l!==o&&n.push(t._entryToBuffer(l));n=await Promise.all(n);let i=Buffer.concat(n),a=Buffer.concat([e,i]),s=await ji(a);return Buffer.concat([a,Buffer.from(s,"hex")])}};function vd(t,e,r=!0,n=!0){let i=Uo(t),a=Uo(e);return r&&i.mode!==a.mode||i.mtimeSeconds!==a.mtimeSeconds||i.ctimeSeconds!==a.ctimeSeconds||i.uid!==a.uid||i.gid!==a.gid||n&&i.ino!==a.ino||i.size!==a.size}var Hg=null,Ug=Symbol("IndexCache");function R3(){return{map:new Map,stats:new Map}}async function I3(t,e,r){let[n,i]=await Promise.all([t.lstat(e),t.read(e)]),a=await Kg.from(i);r.map.set(e,a),r.stats.set(e,n)}async function F3(t,e,r){let n=r.stats.get(e);if(n===void 0)return!0;if(n===null)return!1;let i=await t.lstat(e);return i===null?!1:vd(n,i)}var gt=class{static async acquire({fs:e,gitdir:r,cache:n,allowUnmerged:i=!0},a){n[Ug]||(n[Ug]=R3());let s=`${r}/index`;Hg===null&&(Hg=new Fc({maxPending:1/0}));let o,l=[];return await Hg.acquire(s,async()=>{let c=n[Ug];await F3(e,s,c)&&await I3(e,s,c);let u=c.map.get(s);if(l=u.unmergedPaths,l.length&&!i)throw new Oc(l);if(o=await a(u),u._dirty){let f=await u.toObject();await e.write(s,f),c.stats.set(s,await e.lstat(s)),u._dirty=!1}}),o}};function wd(t){let e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return e>-1&&(t=t.slice(e+1)),t}function ys(t){let e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return e===-1?".":e===0?"/":t.slice(0,e)}function UE(t){let e=new Map,r=function(i){if(!e.has(i)){let a={type:"tree",fullpath:i,basename:wd(i),metadata:{},children:[]};e.set(i,a),a.parent=r(ys(i)),a.parent&&a.parent!==a&&a.parent.children.push(a)}return e.get(i)},n=function(i,a){if(!e.has(i)){let s={type:"blob",fullpath:i,basename:wd(i),metadata:a,parent:r(ys(i)),children:[]};s.parent&&s.parent.children.push(s),e.set(i,s)}return e.get(i)};r(".");for(let i of t)n(i.path,i);return e}function $3(t){switch(t){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new he(`Unexpected GitTree entry mode: ${t.toString(8)}`)}var Jg=class{constructor({fs:e,gitdir:r,cache:n}){this.treePromise=gt.acquire({fs:e,gitdir:r,cache:n},async function(a){return UE(a.entries)});let i=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(e){let r=e._fullpath,i=(await this.treePromise).get(r);if(!i||i.type==="blob")return null;if(i.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${r}'`);let a=i.children.map(s=>s.fullpath);return a.sort(Td),a}async type(e){return e._type===!1&&await e.stat(),e._type}async mode(e){return e._mode===!1&&await e.stat(),e._mode}async stat(e){if(e._stat===!1){let n=(await this.treePromise).get(e._fullpath);if(!n)throw new Error(`ENOENT: no such file or directory, lstat '${e._fullpath}'`);let i=n.type==="tree"?{}:Uo(n.metadata);e._type=n.type==="tree"?"tree":$3(i.mode),e._mode=i.mode,n.type==="tree"?e._stat=void 0:e._stat=i}return e._stat}async content(e){}async oid(e){if(e._oid===!1){let n=(await this.treePromise).get(e._fullpath);e._oid=n.metadata.oid}return e._oid}},Cd=Symbol("GitWalkSymbol");function Ss(){let t=Object.create(null);return Object.defineProperty(t,Cd,{value:function({fs:e,gitdir:r,cache:n}){return new Jg({fs:e,gitdir:r,cache:n})}}),Object.freeze(t),t}var Be=class t extends Pe{constructor(e){super(`Could not find ${e}.`),this.code=this.name=t.code,this.data={what:e}}};Be.code="NotFoundError";var dr=class t extends Pe{constructor(e,r,n,i){super(`Object ${e} ${i?`at ${i}`:""}was anticipated to be a ${n} but it is a ${r}.`),this.code=this.name=t.code,this.data={oid:e,actual:r,expected:n,filepath:i}}};dr.code="ObjectTypeError";var Ta=class t extends Pe{constructor(e){super(`Expected a 40-char hex object id but saw "${e}".`),this.code=this.name=t.code,this.data={value:e}}};Ta.code="InvalidOidError";var Mc=class t extends Pe{constructor(e){super(`Could not find a fetch refspec for remote "${e}". Make sure the config file has an entry like the following:
[remote "${e}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=t.code,this.data={remote:e}}};Mc.code="NoRefspecError";var yd=class t{constructor(e){if(this.refs=new Map,this.parsedConfig=[],e){let r=null;this.parsedConfig=e.trim().split(`
`).map(n=>{if(/^\s*#/.test(n))return{line:n,comment:!0};let i=n.indexOf(" ");if(n.startsWith("^")){let a=n.slice(1);return this.refs.set(r+"^{}",a),{line:n,ref:r,peeled:a}}else{let a=n.slice(0,i);return r=n.slice(i+1),this.refs.set(r,a),{line:n,ref:r,oid:a}}})}return this}static from(e){return new t(e)}delete(e){this.parsedConfig=this.parsedConfig.filter(r=>r.ref!==e),this.refs.delete(e)}toString(){return this.parsedConfig.map(({line:e})=>e).join(`
`)+`
`}},bd=class t{constructor({remotePath:e,localPath:r,force:n,matchPrefix:i}){Object.assign(this,{remotePath:e,localPath:r,force:n,matchPrefix:i})}static from(e){let[r,n,i,a,s]=e.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),o=r==="+",l=i==="*";if(l!==(s==="*"))throw new he("Invalid refspec");return new t({remotePath:n,localPath:a,force:o,matchPrefix:l})}translate(e){if(this.matchPrefix){if(e.startsWith(this.remotePath))return this.localPath+e.replace(this.remotePath,"")}else if(e===this.remotePath)return this.localPath;return null}reverseTranslate(e){if(this.matchPrefix){if(e.startsWith(this.localPath))return this.remotePath+e.replace(this.localPath,"")}else if(e===this.localPath)return this.remotePath;return null}},Qg=class t{constructor(e=[]){this.rules=e}static from(e){let r=[];for(let n of e)r.push(bd.from(n));return new t(r)}add(e){let r=bd.from(e);this.rules.push(r)}translate(e){let r=[];for(let n of this.rules)for(let i of e){let a=n.translate(i);a&&r.push([i,a])}return r}translateOne(e){let r=null;for(let n of this.rules){let i=n.translate(e);i&&(r=i)}return r}localNamespaces(){return this.rules.filter(e=>e.matchPrefix).map(e=>e.localPath.replace(/\/$/,""))}};function O3(t,e){let r=t.replace(/\^\{\}$/,""),n=e.replace(/\^\{\}$/,""),i=-(r<n)||+(r>n);return i===0?t.endsWith("^{}")?1:-1:i}function M3(t,e){let r="",n=0,i=-1,a=0,s="\0";for(let o=0;o<=t.length;++o){if(o<t.length)s=t[o];else{if(s==="/")break;s="/"}if(s==="/"){if(!(i===o-1||a===1))if(a===2){if(r.length<2||n!==2||r.at(-1)!=="."||r.at(-2)!=="."){if(r.length>2){let l=r.lastIndexOf("/");l===-1?(r="",n=0):(r=r.slice(0,l),n=r.length-1-r.lastIndexOf("/")),i=o,a=0;continue}else if(r.length!==0){r="",n=0,i=o,a=0;continue}}e&&(r+=r.length>0?"/..":"..",n=2)}else r.length>0?r+="/"+t.slice(i+1,o):r=t.slice(i+1,o),n=o-i-1;i=o,a=0}else s==="."&&a!==-1?++a:a=-1}return r}function D3(t){if(!t.length)return".";let e=t[0]==="/",r=t.at(-1)==="/";return t=M3(t,!e),t.length?(r&&(t+="/"),e?`/${t}`:t):e?"/":r?"./":"."}function O(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];n.length>0&&(e===void 0?e=n:e+="/"+n)}return e===void 0?".":D3(e)}var L3=t=>{if(typeof t=="number")return t;t=t.toLowerCase();let e=parseInt(t);return t.endsWith("k")&&(e*=1024),t.endsWith("m")&&(e*=1024*1024),t.endsWith("g")&&(e*=1024*1024*1024),e},Ic=t=>{if(typeof t=="boolean")return t;if(t=t.trim().toLowerCase(),t==="true"||t==="yes"||t==="on")return!0;if(t==="false"||t==="no"||t==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${t}`)},gE={core:{filemode:Ic,bare:Ic,logallrefupdates:Ic,symlinks:Ic,ignorecase:Ic,bigFileThreshold:L3}},N3=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,B3=/^[A-Za-z0-9-.]+$/,H3=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,U3=/^[A-Za-z][A-Za-z-]*$/,G3=/^(.*?)( *[#;].*)$/,j3=t=>{let e=N3.exec(t);if(e!=null){let[r,n]=e.slice(1);return[r,n]}return null},q3=t=>{let e=H3.exec(t);if(e!=null){let[r,n="true"]=e.slice(1),i=z3(n),a=V3(i);return[r,a]}return null},z3=t=>{let e=G3.exec(t);if(e==null)return t;let[r,n]=e.slice(1);return vE(r)&&vE(n)?`${r}${n}`:r},vE=t=>(t.match(/(?:^|[^\\])"/g)||[]).length%2!==0,V3=t=>t.split("").reduce((e,r,n,i)=>{let a=r==='"'&&i[n-1]!=="\\",s=r==="\\"&&i[n+1]==='"';return a||s?e:e+r},""),wE=t=>t!=null?t.toLowerCase():null,ev=(t,e,r)=>[wE(t),e,wE(r)].filter(n=>n!=null).join("."),yE=t=>{let e=t.split("."),r=e.shift(),n=e.pop(),i=e.length?e.join("."):void 0;return{section:r,subsection:i,name:n,path:ev(r,i,n),sectionPath:ev(r,i,null),isSection:!!r}},W3=(t,e)=>t.reduce((r,n,i)=>e(n)?i:r,-1),tv=class t{constructor(e){let r=null,n=null;this.parsedConfig=e?e.split(`
`).map(i=>{let a=null,s=null,o=i.trim(),l=j3(o),c=l!=null;if(c)[r,n]=l;else{let f=q3(o);f!=null&&([a,s]=f)}let u=ev(r,n,a);return{line:i,isSection:c,section:r,subsection:n,name:a,value:s,path:u}}):[]}static from(e){return new t(e)}async get(e,r=!1){let n=yE(e).path,i=this.parsedConfig.filter(a=>a.path===n).map(({section:a,name:s,value:o})=>{let l=gE[a]&&gE[a][s];return l?l(o):o});return r?i:i.pop()}async getall(e){return this.get(e,!0)}async getSubsections(e){return this.parsedConfig.filter(r=>r.isSection&&r.section===e).map(r=>r.subsection)}async deleteSection(e,r){this.parsedConfig=this.parsedConfig.filter(n=>!(n.section===e&&n.subsection===r))}async append(e,r){return this.set(e,r,!0)}async set(e,r,n=!1){let{section:i,subsection:a,name:s,path:o,sectionPath:l,isSection:c}=yE(e),u=W3(this.parsedConfig,f=>f.path===o);if(r==null)u!==-1&&this.parsedConfig.splice(u,1);else if(u!==-1){let f=this.parsedConfig[u],d=Object.assign({},f,{name:s,value:r,modified:!0});n?this.parsedConfig.splice(u+1,0,d):this.parsedConfig[u]=d}else{let f=this.parsedConfig.findIndex(h=>h.path===l),d={section:i,subsection:a,name:s,value:r,modified:!0,path:o};if(B3.test(i)&&U3.test(s))if(f>=0)this.parsedConfig.splice(f+1,0,d);else{let h={isSection:c,section:i,subsection:a,modified:!0,path:l};this.parsedConfig.push(h,d)}}}toString(){return this.parsedConfig.map(({line:e,section:r,subsection:n,name:i,value:a,modified:s=!1})=>s?i!=null&&a!=null?typeof a=="string"&&/[#;]/.test(a)?`	${i} = "${a}"`:`	${i} = ${a}`:n!=null?`[${r} "${n}"]`:`[${r}]`:e).join(`
`)}},ct=class{static async get({fs:e,gitdir:r}){let n=await e.read(`${r}/config`,{encoding:"utf8"});return tv.from(n)}static async save({fs:e,gitdir:r,config:n}){await e.write(`${r}/config`,n.toString(),{encoding:"utf8"})}},md=t=>[`${t}`,`refs/${t}`,`refs/tags/${t}`,`refs/heads/${t}`,`refs/remotes/${t}`,`refs/remotes/${t}/HEAD`],Y3=["config","description","index","shallow","commondir"],Gg;async function ka(t,e){return Gg===void 0&&(Gg=new Fc),Gg.acquire(t,e)}var W=class t{static async updateRemoteRefs({fs:e,gitdir:r,remote:n,refs:i,symrefs:a,tags:s,refspecs:o=void 0,prune:l=!1,pruneTags:c=!1}){for(let v of i.values())if(!v.match(/[0-9a-f]{40}/))throw new Ta(v);let u=await ct.get({fs:e,gitdir:r});if(!o){if(o=await u.getall(`remote.${n}.fetch`),o.length===0)throw new Mc(n);o.unshift(`+HEAD:refs/remotes/${n}/HEAD`)}let f=Qg.from(o),d=new Map;if(c){let v=await t.listRefs({fs:e,gitdir:r,filepath:"refs/tags"});await t.deleteRefs({fs:e,gitdir:r,refs:v.map(w=>`refs/tags/${w}`)})}if(s){for(let v of i.keys())if(v.startsWith("refs/tags")&&!v.endsWith("^{}")&&!await t.exists({fs:e,gitdir:r,ref:v})){let w=i.get(v);d.set(v,w)}}let h=f.translate([...i.keys()]);for(let[v,w]of h){let b=i.get(v);d.set(w,b)}let m=f.translate([...a.keys()]);for(let[v,w]of m){let b=a.get(v),k=f.translateOne(b);k&&d.set(w,`ref: ${k}`)}let g=[];if(l){for(let v of f.localNamespaces()){let w=(await t.listRefs({fs:e,gitdir:r,filepath:v})).map(b=>`${v}/${b}`);for(let b of w)d.has(b)||g.push(b)}g.length>0&&await t.deleteRefs({fs:e,gitdir:r,refs:g})}for(let[v,w]of d)await ka(v,async()=>e.write(O(r,v),`${w.trim()}
`,"utf8"));return{pruned:g}}static async writeRef({fs:e,gitdir:r,ref:n,value:i}){if(!i.match(/[0-9a-f]{40}/))throw new Ta(i);await ka(n,async()=>e.write(O(r,n),`${i.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:e,gitdir:r,ref:n,value:i}){await ka(n,async()=>e.write(O(r,n),`ref: ${i.trim()}
`,"utf8"))}static async deleteRef({fs:e,gitdir:r,ref:n}){return t.deleteRefs({fs:e,gitdir:r,refs:[n]})}static async deleteRefs({fs:e,gitdir:r,refs:n}){await Promise.all(n.map(o=>e.rm(O(r,o))));let i=await ka("packed-refs",async()=>e.read(`${r}/packed-refs`,{encoding:"utf8"})),a=yd.from(i),s=a.refs.size;for(let o of n)a.refs.has(o)&&a.delete(o);a.refs.size<s&&(i=a.toString(),await ka("packed-refs",async()=>e.write(`${r}/packed-refs`,i,{encoding:"utf8"})))}static async resolve({fs:e,gitdir:r,ref:n,depth:i=void 0}){if(i!==void 0&&(i--,i===-1))return n;if(n.startsWith("ref: "))return n=n.slice(5),t.resolve({fs:e,gitdir:r,ref:n,depth:i});if(n.length===40&&/[0-9a-f]{40}/.test(n))return n;let a=await t.packedRefs({fs:e,gitdir:r}),s=md(n).filter(o=>!Y3.includes(o));for(let o of s){let l=await ka(o,async()=>await e.read(`${r}/${o}`,{encoding:"utf8"})||a.get(o));if(l)return t.resolve({fs:e,gitdir:r,ref:l.trim(),depth:i})}throw new Be(n)}static async exists({fs:e,gitdir:r,ref:n}){try{return await t.expand({fs:e,gitdir:r,ref:n}),!0}catch(i){return!1}}static async expand({fs:e,gitdir:r,ref:n}){if(n.length===40&&/[0-9a-f]{40}/.test(n))return n;let i=await t.packedRefs({fs:e,gitdir:r}),a=md(n);for(let s of a)if(await ka(s,async()=>e.exists(`${r}/${s}`))||i.has(s))return s;throw new Be(n)}static async expandAgainstMap({ref:e,map:r}){let n=md(e);for(let i of n)if(await r.has(i))return i;throw new Be(e)}static resolveAgainstMap({ref:e,fullref:r=e,depth:n=void 0,map:i}){if(n!==void 0&&(n--,n===-1))return{fullref:r,oid:e};if(e.startsWith("ref: "))return e=e.slice(5),t.resolveAgainstMap({ref:e,fullref:r,depth:n,map:i});if(e.length===40&&/[0-9a-f]{40}/.test(e))return{fullref:r,oid:e};let a=md(e);for(let s of a){let o=i.get(s);if(o)return t.resolveAgainstMap({ref:o.trim(),fullref:s,depth:n,map:i})}throw new Be(e)}static async packedRefs({fs:e,gitdir:r}){let n=await ka("packed-refs",async()=>e.read(`${r}/packed-refs`,{encoding:"utf8"}));return yd.from(n).refs}static async listRefs({fs:e,gitdir:r,filepath:n}){let i=t.packedRefs({fs:e,gitdir:r}),a=null;try{a=await e.readdirDeep(`${r}/${n}`),a=a.map(s=>s.replace(`${r}/${n}/`,""))}catch(s){a=[]}for(let s of(await i).keys())s.startsWith(n)&&(s=s.replace(n+"/",""),a.includes(s)||a.push(s));return a.sort(O3),a}static async listBranches({fs:e,gitdir:r,remote:n}){return n?t.listRefs({fs:e,gitdir:r,filepath:`refs/remotes/${n}`}):t.listRefs({fs:e,gitdir:r,filepath:"refs/heads"})}static async listTags({fs:e,gitdir:r}){return(await t.listRefs({fs:e,gitdir:r,filepath:"refs/tags"})).filter(i=>!i.endsWith("^{}"))}};function X3(t,e){return Td(bE(t),bE(e))}function bE(t){return t.mode==="040000"?t.path+"/":t.path}function GE(t){switch(t){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new he(`Unexpected GitTree entry mode: ${t}`)}function Z3(t){let e=[],r=0;for(;r<t.length;){let n=t.indexOf(32,r);if(n===-1)throw new he(`GitTree: Error parsing buffer at byte location ${r}: Could not find the next space character.`);let i=t.indexOf(0,r);if(i===-1)throw new he(`GitTree: Error parsing buffer at byte location ${r}: Could not find the next null character.`);let a=t.slice(r,n).toString("utf8");a==="40000"&&(a="040000");let s=GE(a),o=t.slice(n+1,i).toString("utf8");if(o.includes("\\")||o.includes("/"))throw new Ho(o);let l=t.slice(i+1,i+21).toString("hex");r=i+21,e.push({mode:a,path:o,oid:l,type:s})}return e}function K3(t){if(typeof t=="number"&&(t=t.toString(8)),t.match(/^0?4.*/))return"040000";if(t.match(/^1006.*/))return"100644";if(t.match(/^1007.*/))return"100755";if(t.match(/^120.*/))return"120000";if(t.match(/^160.*/))return"160000";throw new he(`Could not understand file mode: ${t}`)}function J3(t){return!t.oid&&t.sha&&(t.oid=t.sha),t.mode=K3(t.mode),t.type||(t.type=GE(t.mode)),t}var Er=class t{constructor(e){if(Buffer.isBuffer(e))this._entries=Z3(e);else if(Array.isArray(e))this._entries=e.map(J3);else throw new he("invalid type passed to GitTree constructor");this._entries.sort(NE)}static from(e){return new t(e)}render(){return this._entries.map(e=>`${e.mode} ${e.type} ${e.oid}    ${e.path}`).join(`
`)}toObject(){let e=[...this._entries];return e.sort(X3),Buffer.concat(e.map(r=>{let n=Buffer.from(r.mode.replace(/^0/,"")),i=Buffer.from(" "),a=Buffer.from(r.path,"utf8"),s=Buffer.from([0]),o=Buffer.from(r.oid,"hex");return Buffer.concat([n,i,a,s,o])}))}entries(){return this._entries}*[Symbol.iterator](){for(let e of this._entries)yield e}},Ca=class{static wrap({type:e,object:r}){let n=`${e} ${r.length}\0`,i=n.length,a=i+r.length,s=new Uint8Array(a);for(let o=0;o<i;o++)s[o]=n.charCodeAt(o);return s.set(r,i),s}static unwrap(e){let r=e.indexOf(32),n=e.indexOf(0),i=e.slice(0,r).toString("utf8"),a=e.slice(r+1,n).toString("utf8"),s=e.length-(n+1);if(parseInt(a)!==s)throw new he(`Length mismatch: expected ${a} bytes but got ${s} instead.`);return{type:i,object:Buffer.from(e.slice(n+1))}}};async function jE({fs:t,gitdir:e,oid:r}){let n=`objects/${r.slice(0,2)}/${r.slice(2)}`,i=await t.read(`${e}/${n}`);return i?{object:i,format:"deflated",source:n}:null}function Q3(t,e){let r=new mn(t),n=_E(r);if(n!==e.byteLength)throw new he(`applyDelta expected source buffer to be ${n} bytes but the provided buffer was ${e.length} bytes`);let i=_E(r),a,s=SE(r,e);if(s.byteLength===i)a=s;else{a=Buffer.alloc(i);let o=new mn(a);for(o.copy(s);!r.eof();)o.copy(SE(r,e));let l=o.tell();if(i!==l)throw new he(`applyDelta expected target buffer to be ${i} bytes but the resulting buffer was ${l} bytes`)}return a}function _E(t){let e=0,r=0,n=null;do n=t.readUInt8(),e|=(n&127)<<r,r+=7;while(n&128);return e}function xE(t,e,r){let n=0,i=0;for(;r--;)e&1&&(n|=t.readUInt8()<<i),e>>=1,i+=8;return n}function SE(t,e){let r=t.readUInt8(),n=128,i=15,a=112;if(r&n){let s=xE(t,r&i,4),o=xE(t,(r&a)>>4,3);return o===0&&(o=65536),e.slice(s,s+o)}else return t.slice(r)}function e8(t){let e=[t];return{next(){return Promise.resolve({done:e.length===0,value:e.pop()})},return(){return e=[],{}},[Symbol.asyncIterator](){return this}}}function qE(t){return t[Symbol.asyncIterator]?t[Symbol.asyncIterator]():t[Symbol.iterator]?t[Symbol.iterator]():t.next?t:e8(t)}var _d=class{constructor(e){if(typeof Buffer=="undefined")throw new Error("Missing Buffer dependency");this.stream=qE(e),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(e){if(!this.eof())return this.started||await this._init(),this.cursor+e>this.buffer.length&&(this._trim(),await this._accumulate(e)),this._moveCursor(e),this.buffer.slice(this.undoCursor,this.cursor)}async skip(e){this.eof()||(this.started||await this._init(),this.cursor+e>this.buffer.length&&(this._trim(),await this._accumulate(e)),this._moveCursor(e))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:e,value:r}=await this.stream.next();return e&&(this._ended=!0,!r)?Buffer.alloc(0):(r&&(r=Buffer.from(r)),r)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(e){this.undoCursor=this.cursor,this.cursor+=e,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(e){if(this._ended)return;let r=[this.buffer];for(;this.cursor+e>t8(r);){let n=await this._next();if(this._ended)break;r.push(n)}this.buffer=Buffer.concat(r)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}};function t8(t){return t.reduce((e,r)=>e+r.length,0)}async function r8(t,e){let r=new _d(t),n=await r.read(4);if(n=n.toString("utf8"),n!=="PACK")throw new he(`Invalid PACK header '${n}'`);let i=await r.read(4);if(i=i.readUInt32BE(0),i!==2)throw new he(`Invalid packfile version: ${i}`);let a=await r.read(4);if(a=a.readUInt32BE(0),!(a<1))for(;!r.eof()&&a--;){let s=r.tell(),{type:o,length:l,ofs:c,reference:u}=await n8(r),f=new cv.Inflate;for(;!f.result;){let d=await r.chunk();if(!d)break;if(f.push(d,!1),f.err)throw new he(`Pako error: ${f.msg}`);if(f.result){if(f.result.length!==l)throw new he("Inflated object size is different from that stated in packfile.");await r.undo(),await r.read(d.length-f.strm.avail_in);let h=r.tell();await e({data:f.result,type:o,num:a,offset:s,end:h,reference:u,ofs:c})}}}}async function n8(t){let e=await t.byte(),r=e>>4&7,n=e&15;if(e&128){let s=4;do e=await t.byte(),n|=(e&127)<<s,s+=7;while(e&128)}let i,a;if(r===6){let s=0;i=0;let o=[];do e=await t.byte(),i|=(e&127)<<s,s+=7,o.push(e);while(e&128);a=Buffer.from(o)}return r===7&&(a=await t.read(20)),{type:r,length:n,ofs:i,reference:a}}var jg=!1;async function zE(t){return jg===null&&(jg=a8()),jg?i8(t):cv.inflate(t)}async function i8(t){let e=new DecompressionStream("deflate"),r=new Blob([t]).stream().pipeThrough(e);return new Uint8Array(await new Response(r).arrayBuffer())}function a8(){try{if(new DecompressionStream("deflate"))return!0}catch(t){}return!1}function s8(t){let e=[],r=0,n=0;do{r=t.readUInt8();let i=r&127;e.push(i),n=r&128}while(n);return e.reduce((i,a)=>i+1<<7|a,-1)}function o8(t,e){let r=e,n=4,i=null;do i=t.readUInt8(),r|=(i&127)<<n,n+=7;while(i&128);return r}var Dc=class t{constructor(e){Object.assign(this,e),this.offsetCache={}}static async fromIdx({idx:e,getExternalRefDelta:r}){let n=new mn(e);if(n.slice(4).toString("hex")!=="ff744f63")return;let a=n.readUInt32BE();if(a!==2)throw new he(`Unable to read version ${a} packfile IDX. (Only version 2 supported)`);if(e.byteLength>2048*1024*1024)throw new he("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");n.seek(n.tell()+4*255);let s=n.readUInt32BE(),o=[];for(let u=0;u<s;u++){let f=n.slice(20).toString("hex");o[u]=f}n.seek(n.tell()+4*s);let l=new Map;for(let u=0;u<s;u++)l.set(o[u],n.readUInt32BE());let c=n.slice(20).toString("hex");return new t({hashes:o,crcs:{},offsets:l,packfileSha:c,getExternalRefDelta:r})}static async fromPack({pack:e,getExternalRefDelta:r,onProgress:n}){let i={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},a={},s=e.slice(-20).toString("hex"),o=[],l={},c=new Map,u=null,f=null;await r8([e],async({data:v,type:w,reference:b,offset:k,num:E})=>{u===null&&(u=E);let S=Math.floor((u-E)*100/u);S!==f&&n&&await n({phase:"Receiving objects",loaded:u-E,total:u}),f=S,w=i[w],["commit","tree","blob","tag"].includes(w)?a[k]={type:w,offset:k}:w==="ofs-delta"?a[k]={type:w,offset:k}:w==="ref-delta"&&(a[k]={type:w,offset:k})});let d=Object.keys(a).map(Number);for(let[v,w]of d.entries()){let b=v+1===d.length?e.byteLength-20:d[v+1],k=a[w],E=x3.buf(e.slice(w,b))>>>0;k.end=b,k.crc=E}let h=new t({pack:Promise.resolve(e),packfileSha:s,crcs:l,hashes:o,offsets:c,getExternalRefDelta:r});f=null;let m=0,g=[0,0,0,0,0,0,0,0,0,0,0,0];for(let v in a){v=Number(v);let w=Math.floor(m*100/u);w!==f&&n&&await n({phase:"Resolving deltas",loaded:m,total:u}),m++,f=w;let b=a[v];if(!b.oid)try{h.readDepth=0,h.externalReadDepth=0;let{type:k,object:E}=await h.readSlice({start:v});g[h.readDepth]+=1;let S=await ji(Ca.wrap({type:k,object:E}));b.oid=S,o.push(S),c.set(S,v),l[S]=b.crc}catch(k){continue}}return o.sort(),h}async toBuffer(){let e=[],r=(c,u)=>{e.push(Buffer.from(c,u))};r("ff744f63","hex"),r("00000002","hex");let n=new mn(Buffer.alloc(256*4));for(let c=0;c<256;c++){let u=0;for(let f of this.hashes)parseInt(f.slice(0,2),16)<=c&&u++;n.writeUInt32BE(u)}e.push(n.buffer);for(let c of this.hashes)r(c,"hex");let i=new mn(Buffer.alloc(this.hashes.length*4));for(let c of this.hashes)i.writeUInt32BE(this.crcs[c]);e.push(i.buffer);let a=new mn(Buffer.alloc(this.hashes.length*4));for(let c of this.hashes)a.writeUInt32BE(this.offsets.get(c));e.push(a.buffer),r(this.packfileSha,"hex");let s=Buffer.concat(e),o=await ji(s),l=Buffer.alloc(20);return l.write(o,"hex"),Buffer.concat([s,l])}async load({pack:e}){this.pack=e}async unload(){this.pack=null}async read({oid:e}){if(!this.offsets.get(e)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(e);throw new he(`Could not read object ${e} from packfile`)}let r=this.offsets.get(e);return this.readSlice({start:r})}async readSlice({start:e}){if(this.offsetCache[e])return Object.assign({},this.offsetCache[e]);this.readDepth++;let r={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new he("Tried to read from a GitPackIndex with no packfile loaded into memory");let n=(await this.pack).slice(e),i=new mn(n),a=i.readUInt8(),s=a&112,o=r[s];if(o===void 0)throw new he("Unrecognized type: 0b"+s.toString(2));let l=a&15,c=l;a&128&&(c=o8(i,l));let f=null,d=null;if(o==="ofs_delta"){let m=s8(i),g=e-m;({object:f,type:o}=await this.readSlice({start:g}))}if(o==="ref_delta"){let m=i.slice(20).toString("hex");({object:f,type:o}=await this.read({oid:m}))}let h=n.slice(i.tell());if(d=Buffer.from(await zE(h)),d.byteLength!==c)throw new he(`Packfile told us object would have length ${c} but it had length ${d.byteLength}`);return f&&(d=Buffer.from(Q3(d,f))),this.readDepth>3&&(this.offsetCache[e]={type:o,object:d}),{type:o,format:"content",object:d}}},gd=Symbol("PackfileCache");async function l8({fs:t,filename:e,getExternalRefDelta:r,emitter:n,emitterPrefix:i}){let a=await t.read(e);return Dc.fromIdx({idx:a,getExternalRefDelta:r})}function uv({fs:t,cache:e,filename:r,getExternalRefDelta:n,emitter:i,emitterPrefix:a}){e[gd]||(e[gd]=new Map);let s=e[gd].get(r);return s||(s=l8({fs:t,filename:r,getExternalRefDelta:n,emitter:i,emitterPrefix:a}),e[gd].set(r,s)),s}async function c8({fs:t,cache:e,gitdir:r,oid:n,format:i="content",getExternalRefDelta:a}){let s=await t.readdir(O(r,"objects/pack"));s=s.filter(o=>o.endsWith(".idx"));for(let o of s){let l=`${r}/objects/pack/${o}`,c=await uv({fs:t,cache:e,filename:l,getExternalRefDelta:a});if(c.error)throw new he(c.error);if(c.offsets.has(n)){if(!c.pack){let f=l.replace(/idx$/,"pack");c.pack=t.read(f)}let u=await c.read({oid:n,getExternalRefDelta:a});return u.format="content",u.source=`objects/pack/${o.replace(/idx$/,"pack")}`,u}}return null}async function Ze({fs:t,cache:e,gitdir:r,oid:n,format:i="content"}){let a=u=>Ze({fs:t,cache:e,gitdir:r,oid:u}),s;if(n==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(s={format:"wrapped",object:Buffer.from("tree 0\0")}),s||(s=await jE({fs:t,gitdir:r,oid:n})),!s){if(s=await c8({fs:t,cache:e,gitdir:r,oid:n,getExternalRefDelta:a}),!s)throw new Be(n);return s}if(i==="deflated"||(s.format==="deflated"&&(s.object=Buffer.from(await zE(s.object)),s.format="wrapped"),i==="wrapped"))return s;let o=await ji(s.object);if(o!==n)throw new he(`SHA check failed! Expected ${n}, computed ${o}`);let{object:l,type:c}=Ca.unwrap(s.object);if(s.type=c,s.object=l,s.format="content",i==="content")return s;throw new he(`invalid requested format "${i}"`)}var $n=class t extends Pe{constructor(e,r,n=!0){super(`Failed to create ${e} at ${r} because it already exists.${n?` (Hint: use 'force: true' parameter to overwrite existing ${e}.)`:""}`),this.code=this.name=t.code,this.data={noun:e,where:r,canForce:n}}};$n.code="AlreadyExistsError";var Lc=class t extends Pe{constructor(e,r,n){super(`Found multiple ${e} matching "${r}" (${n.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=t.code,this.data={nouns:e,short:r,matches:n}}};Lc.code="AmbiguousError";var Nc=class t extends Pe{constructor(e){super(`Your local changes to the following files would be overwritten by checkout: ${e.join(", ")}`),this.code=this.name=t.code,this.data={filepaths:e}}};Nc.code="CheckoutConflictError";var Bc=class t extends Pe{constructor(e,r){super(`Failed to checkout "${e}" because commit ${r} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=t.code,this.data={ref:e,oid:r}}};Bc.code="CommitNotFetchedError";var Hc=class t extends Pe{constructor(){super("Empty response from git server."),this.code=this.name=t.code,this.data={}}};Hc.code="EmptyServerResponseError";var Uc=class t extends Pe{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=t.code,this.data={}}};Uc.code="FastForwardError";var Gc=class t extends Pe{constructor(e,r){super(`One or more branches were not updated: ${e}`),this.code=this.name=t.code,this.data={prettyDetails:e,result:r}}};Gc.code="GitPushError";var Go=class t extends Pe{constructor(e,r,n){super(`HTTP Error: ${e} ${r}`),this.code=this.name=t.code,this.data={statusCode:e,statusMessage:r,response:n}}};Go.code="HttpError";var Pa=class t extends Pe{constructor(e){let r="invalid filepath";e==="leading-slash"||e==="trailing-slash"?r='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':e==="directory"&&(r='"filepath" should not be a directory.'),super(r),this.code=this.name=t.code,this.data={reason:e}}};Pa.code="InvalidFilepathError";var On=class t extends Pe{constructor(e,r){super(`"${e}" would be an invalid git reference. (Hint: a valid alternative would be "${r}".)`),this.code=this.name=t.code,this.data={ref:e,suggestion:r}}};On.code="InvalidRefNameError";var jc=class t extends Pe{constructor(e){super(`Maximum search depth of ${e} exceeded.`),this.code=this.name=t.code,this.data={depth:e}}};jc.code="MaxDepthError";var jo=class t extends Pe{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=t.code,this.data={}}};jo.code="MergeNotSupportedError";var qo=class t extends Pe{constructor(e,r,n,i){super(`Automatic merge failed with one or more merge conflicts in the following files: ${e.toString()}. Fix conflicts then commit the result.`),this.code=this.name=t.code,this.data={filepaths:e,bothModified:r,deleteByUs:n,deleteByTheirs:i}}};qo.code="MergeConflictError";var Jt=class t extends Pe{constructor(e){super(`No name was provided for ${e} in the argument or in the .git/config file.`),this.code=this.name=t.code,this.data={role:e}}};Jt.code="MissingNameError";var Sr=class t extends Pe{constructor(e){super(`The function requires a "${e}" parameter but none was provided.`),this.code=this.name=t.code,this.data={parameter:e}}};Sr.code="MissingParameterError";var qc=class t extends Pe{constructor(e){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=t.code,this.data={errors:e},this.errors=e}};qc.code="MultipleGitError";var bs=class t extends Pe{constructor(e,r){super(`Expected "${e}" but received "${r}".`),this.code=this.name=t.code,this.data={expected:e,actual:r}}};bs.code="ParseError";var zo=class t extends Pe{constructor(e){let r="";e==="not-fast-forward"?r=" because it was not a simple fast-forward":e==="tag-exists"&&(r=" because tag already exists"),super(`Push rejected${r}. Use "force: true" to override.`),this.code=this.name=t.code,this.data={reason:e}}};zo.code="PushRejectedError";var Aa=class t extends Pe{constructor(e,r){super(`Remote does not support the "${e}" so the "${r}" parameter cannot be used.`),this.code=this.name=t.code,this.data={capability:e,parameter:r}}};Aa.code="RemoteCapabilityError";var zc=class t extends Pe{constructor(e,r){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${e}`),this.code=this.name=t.code,this.data={preview:e,response:r}}};zc.code="SmartHttpError";var Vc=class t extends Pe{constructor(e,r,n){super(`Git remote "${e}" uses an unrecognized transport protocol: "${r}"`),this.code=this.name=t.code,this.data={url:e,transport:r,suggestion:n}}};Vc.code="UnknownTransportError";var Wc=class t extends Pe{constructor(e){super(`Cannot parse remote URL: "${e}"`),this.code=this.name=t.code,this.data={url:e}}};Wc.code="UrlParseError";var Vo=class t extends Pe{constructor(){super("The operation was canceled."),this.code=this.name=t.code,this.data={}}};Vo.code="UserCanceledError";var Yc=class t extends Pe{constructor(e){super(`Could not merge index: Entry for '${e}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=t.code,this.data={filepath:e}}};Yc.code="IndexResetError";var Xc=class t extends Pe{constructor(e){super(`"${e}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=t.code,this.data={ref:e}}};Xc.code="NoCommitError";var VE=Object.freeze({__proto__:null,AlreadyExistsError:$n,AmbiguousError:Lc,CheckoutConflictError:Nc,CommitNotFetchedError:Bc,EmptyServerResponseError:Hc,FastForwardError:Uc,GitPushError:Gc,HttpError:Go,InternalError:he,InvalidFilepathError:Pa,InvalidOidError:Ta,InvalidRefNameError:On,MaxDepthError:jc,MergeNotSupportedError:jo,MergeConflictError:qo,MissingNameError:Jt,MissingParameterError:Sr,MultipleGitError:qc,NoRefspecError:Mc,NotFoundError:Be,ObjectTypeError:dr,ParseError:bs,PushRejectedError:zo,RemoteCapabilityError:Aa,SmartHttpError:zc,UnknownTransportError:Vc,UnsafeFilepathError:Ho,UrlParseError:Wc,UserCanceledError:Vo,UnmergedPathsError:Oc,IndexResetError:Yc,NoCommitError:Xc});function rv({name:t,email:e,timestamp:r,timezoneOffset:n}){return n=u8(n),`${t} <${e}> ${r} ${n}`}function u8(t){let e=f8(d8(t));t=Math.abs(t);let r=Math.floor(t/60);t-=r*60;let n=String(r),i=String(t);return n.length<2&&(n="0"+n),i.length<2&&(i="0"+i),(e===-1?"-":"+")+n+i}function f8(t){return Math.sign(t)||(Object.is(t,-0)?-1:1)}function d8(t){return t===0?t:-t}function Gi(t){return t=t.replace(/\r/g,""),t=t.replace(/^\n+/,""),t=t.replace(/\n+$/,"")+`
`,t}function xd(t){let[,e,r,n,i]=t.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:e,email:r,timestamp:Number(n),timezoneOffset:h8(i)}}function h8(t){let[,e,r,n]=t.match(/(\+|-)(\d\d)(\d\d)/);return n=(e==="+"?1:-1)*(Number(r)*60+Number(n)),p8(n)}function p8(t){return t===0?t:-t}var Xr=class t{constructor(e){if(typeof e=="string")this._tag=e;else if(Buffer.isBuffer(e))this._tag=e.toString("utf8");else if(typeof e=="object")this._tag=t.render(e);else throw new he("invalid type passed to GitAnnotatedTag constructor")}static from(e){return new t(e)}static render(e){return`object ${e.object}
type ${e.type}
tag ${e.tag}
tagger ${rv(e.tagger)}

${e.message}
${e.gpgsig?e.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){let e=this.withoutSignature();return e.slice(e.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){let e=this.justHeaders().split(`
`),r=[];for(let i of e)i[0]===" "?r[r.length-1]+=`
`+i.slice(1):r.push(i);let n={};for(let i of r){let a=i.slice(0,i.indexOf(" ")),s=i.slice(i.indexOf(" ")+1);Array.isArray(n[a])?n[a].push(s):n[a]=s}return n.tagger&&(n.tagger=xd(n.tagger)),n.committer&&(n.committer=xd(n.committer)),n}withoutSignature(){let e=Gi(this._tag);return e.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?e:e.slice(0,e.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;let e=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return Gi(e)}payload(){return this.withoutSignature()+`
`}toObject(){return Buffer.from(this._tag,"utf8")}static async sign(e,r,n){let i=e.payload(),{signature:a}=await r({payload:i,secretKey:n});a=Gi(a);let s=i+a;return t.from(s)}};function qg(t){return t.trim().split(`
`).map(e=>" "+e).join(`
`)+`
`}function m8(t){return t.split(`
`).map(e=>e.replace(/^ /,"")).join(`
`)}var kr=class t{constructor(e){if(typeof e=="string")this._commit=e;else if(Buffer.isBuffer(e))this._commit=e.toString("utf8");else if(typeof e=="object")this._commit=t.render(e);else throw new he("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:e,signature:r}){let n=t.justHeaders(e),i=t.justMessage(e),a=Gi(n+`
gpgsig`+qg(r)+`
`+i);return new t(a)}static from(e){return new t(e)}toObject(){return Buffer.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return t.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(e){return Gi(e.slice(e.indexOf(`

`)+2))}static justHeaders(e){return e.slice(0,e.indexOf(`

`))}parseHeaders(){let e=t.justHeaders(this._commit).split(`
`),r=[];for(let i of e)i[0]===" "?r[r.length-1]+=`
`+i.slice(1):r.push(i);let n={parent:[]};for(let i of r){let a=i.slice(0,i.indexOf(" ")),s=i.slice(i.indexOf(" ")+1);Array.isArray(n[a])?n[a].push(s):n[a]=s}return n.author&&(n.author=xd(n.author)),n.committer&&(n.committer=xd(n.committer)),n}static renderHeaders(e){let r="";if(e.tree?r+=`tree ${e.tree}
`:r+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,e.parent){if(e.parent.length===void 0)throw new he("commit 'parent' property should be an array");for(let a of e.parent)r+=`parent ${a}
`}let n=e.author;r+=`author ${rv(n)}
`;let i=e.committer||e.author;return r+=`committer ${rv(i)}
`,e.gpgsig&&(r+="gpgsig"+qg(e.gpgsig)),r}static render(e){return t.renderHeaders(e)+`
`+Gi(e.message)}render(){return this._commit}withoutSignature(){let e=Gi(this._commit);if(e.indexOf(`
gpgsig`)===-1)return e;let r=e.slice(0,e.indexOf(`
gpgsig`)),n=e.slice(e.indexOf(`-----END PGP SIGNATURE-----
`)+28);return Gi(r+`
`+n)}isolateSignature(){let e=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return m8(e)}static async sign(e,r,n){let i=e.withoutSignature(),a=t.justMessage(e._commit),{signature:s}=await r({payload:i,secretKey:n});s=Gi(s);let l=t.justHeaders(e._commit)+`
gpgsig`+qg(s)+`
`+a;return t.from(l)}};async function Wo({fs:t,cache:e,gitdir:r,oid:n}){if(n==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:Er.from([]),oid:n};let{type:i,object:a}=await Ze({fs:t,cache:e,gitdir:r,oid:n});if(i==="tag")return n=Xr.from(a).parse().object,Wo({fs:t,cache:e,gitdir:r,oid:n});if(i==="commit")return n=kr.from(a).parse().tree,Wo({fs:t,cache:e,gitdir:r,oid:n});if(i!=="tree")throw new dr(n,i,"tree");return{tree:Er.from(a),oid:n}}var nv=class{constructor({fs:e,gitdir:r,ref:n,cache:i}){this.fs=e,this.cache=i,this.gitdir=r,this.mapPromise=(async()=>{let s=new Map,o;try{o=await W.resolve({fs:e,gitdir:r,ref:n})}catch(c){c instanceof Be&&(o="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}let l=await Wo({fs:e,cache:this.cache,gitdir:r,oid:o});return l.type="tree",l.mode="40000",s.set(".",l),s})();let a=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return a.type(this)}async mode(){return a.mode(this)}async stat(){return a.stat(this)}async content(){return a.content(this)}async oid(){return a.oid(this)}}}async readdir(e){let r=e._fullpath,{fs:n,cache:i,gitdir:a}=this,s=await this.mapPromise,o=s.get(r);if(!o)throw new Error(`No obj for ${r}`);let l=o.oid;if(!l)throw new Error(`No oid for obj ${JSON.stringify(o)}`);if(o.type!=="tree")return null;let{type:c,object:u}=await Ze({fs:n,cache:i,gitdir:a,oid:l});if(c!==o.type)throw new dr(l,c,o.type);let f=Er.from(u);for(let d of f)s.set(O(r,d.path),d);return f.entries().map(d=>O(r,d.path))}async type(e){if(e._type===!1){let r=await this.mapPromise,{type:n}=r.get(e._fullpath);e._type=n}return e._type}async mode(e){if(e._mode===!1){let r=await this.mapPromise,{mode:n}=r.get(e._fullpath);e._mode=BE(parseInt(n,8))}return e._mode}async stat(e){}async content(e){if(e._content===!1){let r=await this.mapPromise,{fs:n,cache:i,gitdir:a}=this,o=r.get(e._fullpath).oid,{type:l,object:c}=await Ze({fs:n,cache:i,gitdir:a,oid:o});l!=="blob"?e._content=void 0:e._content=new Uint8Array(c)}return e._content}async oid(e){if(e._oid===!1){let n=(await this.mapPromise).get(e._fullpath);e._oid=n.oid}return e._oid}};function Yr({ref:t="HEAD"}={}){let e=Object.create(null);return Object.defineProperty(e,Cd,{value:function({fs:r,gitdir:n,cache:i}){return new nv({fs:r,gitdir:n,ref:t,cache:i})}}),Object.freeze(e),e}var iv=class{constructor({fs:e,dir:r,gitdir:n,cache:i}){this.fs=e,this.cache=i,this.dir=r,this.gitdir=n,this.config=null;let a=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return a.type(this)}async mode(){return a.mode(this)}async stat(){return a.stat(this)}async content(){return a.content(this)}async oid(){return a.oid(this)}}}async readdir(e){let r=e._fullpath,{fs:n,dir:i}=this,a=await n.readdir(O(i,r));return a===null?null:a.map(s=>O(r,s))}async type(e){return e._type===!1&&await e.stat(),e._type}async mode(e){return e._mode===!1&&await e.stat(),e._mode}async stat(e){if(e._stat===!1){let{fs:r,dir:n}=this,i=await r.lstat(`${n}/${e._fullpath}`);if(!i)throw new Error(`ENOENT: no such file or directory, lstat '${e._fullpath}'`);let a=i.isDirectory()?"tree":"blob";a==="blob"&&!i.isFile()&&!i.isSymbolicLink()&&(a="special"),e._type=a,i=Uo(i),e._mode=i.mode,i.size===-1&&e._actualSize&&(i.size=e._actualSize),e._stat=i}return e._stat}async content(e){if(e._content===!1){let{fs:r,dir:n,gitdir:i}=this;if(await e.type()==="tree")e._content=void 0;else{let s=await(await this._getGitConfig(r,i)).get("core.autocrlf"),o=await r.read(`${n}/${e._fullpath}`,{autocrlf:s});e._actualSize=o.length,e._stat&&e._stat.size===-1&&(e._stat.size=e._actualSize),e._content=new Uint8Array(o)}}return e._content}async oid(e){if(e._oid===!1){let r=this,{fs:n,gitdir:i,cache:a}=this,s;await gt.acquire({fs:n,gitdir:i,cache:a},async function(o){let l=o.entriesMap.get(e._fullpath),c=await e.stat(),f=await(await r._getGitConfig(n,i)).get("core.filemode"),d=typeof process!="undefined"?process.platform!=="win32":!0;if(!l||vd(c,l,f,d)){let h=await e.content();h===void 0?s=void 0:(s=await ji(Ca.wrap({type:"blob",object:h})),l&&s===l.oid&&(!f||c.mode===l.mode)&&vd(c,l,f,d)&&o.insert({filepath:e._fullpath,stats:c,oid:s}))}else s=l.oid}),e._oid=s}return e._oid}async _getGitConfig(e,r){return this.config?this.config:(this.config=await ct.get({fs:e,gitdir:r}),this.config)}};function Qo(){let t=Object.create(null);return Object.defineProperty(t,Cd,{value:function({fs:e,dir:r,gitdir:n,cache:i}){return new iv({fs:e,dir:r,gitdir:n,cache:i})}}),Object.freeze(t),t}function g8(t,e){let r=e-t;return Array.from({length:r},(n,i)=>t+i)}var WE=typeof Array.prototype.flat=="undefined"?t=>t.reduce((e,r)=>e.concat(r),[]):t=>t.flat(),av=class{constructor(){this.value=null}consider(e){e!=null&&(this.value===null?this.value=e:e<this.value&&(this.value=e))}reset(){this.value=null}};function*v8(t){let e=new av,r,n=[],i=t.length;for(let a=0;a<i;a++)n[a]=t[a].next().value,n[a]!==void 0&&e.consider(n[a]);if(e.value!==null)for(;;){let a=[];r=e.value,e.reset();for(let s=0;s<i;s++)n[s]!==void 0&&n[s]===r?(a[s]=n[s],n[s]=t[s].next().value):a[s]=null,n[s]!==void 0&&e.consider(n[s]);if(yield a,e.value===null)return}}async function Ra({fs:t,cache:e,dir:r,gitdir:n,trees:i,map:a=async(l,c)=>c,reduce:s=async(l,c)=>{let u=WE(c);return l!==void 0&&u.unshift(l),u},iterate:o=(l,c)=>Promise.all([...c].map(l))}){let l=i.map(h=>h[Cd]({fs:t,dir:r,gitdir:n,cache:e})),c=new Array(l.length).fill("."),u=g8(0,l.length),f=async h=>{u.forEach(v=>{let w=h[v];h[v]=w&&new l[v].ConstructEntry(w)});let g=(await Promise.all(u.map(v=>{let w=h[v];return w?l[v].readdir(w):[]}))).map(v=>(v===null?[]:v)[Symbol.iterator]());return{entries:h,children:v8(g)}},d=async h=>{let{entries:m,children:g}=await f(h),v=m.find(b=>b&&b._fullpath)._fullpath,w=await a(v,m);if(w!==null){let b=await o(d,g);return b=b.filter(k=>k!==void 0),s(w,b)}};return d(c)}async function sv(t,e){let r=await t.readdir(e);r==null?await t.rm(e):r.length?await Promise.all(r.map(n=>{let i=O(e,n);return t.lstat(i).then(a=>{if(a)return a.isDirectory()?sv(t,i):t.rm(i)})})).then(()=>t.rmdir(e)):await t.rmdir(e)}function w8(t){return y8(t)&&EE(t.then)&&EE(t.catch)}function y8(t){return t&&typeof t=="object"}function EE(t){return typeof t=="function"}function kE(t){return w8((r=>{try{return r.readFile().catch(n=>n)}catch(n){return n}})(t))}var AE=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function TE(t,e){if(kE(e))for(let r of AE)t[`_${r}`]=e[r].bind(e);else for(let r of AE)t[`_${r}`]=pd(e[r].bind(e));kE(e)?(e.cp&&(t._cp=e.cp.bind(e)),e.rm?t._rm=e.rm.bind(e):e.rmdir.length>1?t._rm=e.rmdir.bind(e):t._rm=sv.bind(null,t)):(e.cp&&(t._cp=pd(e.cp.bind(e))),e.rm?t._rm=pd(e.rm.bind(e)):e.rmdir.length>2?t._rm=pd(e.rmdir.bind(e)):t._rm=sv.bind(null,t))}var Q=class{constructor(e){if(typeof e._original_unwrapped_fs!="undefined")return e;let r=Object.getOwnPropertyDescriptor(e,"promises");r&&r.enumerable?TE(this,e.promises):TE(this,e),this._original_unwrapped_fs=e}async exists(e,r={}){try{return await this._stat(e),!0}catch(n){if(n.code==="ENOENT"||n.code==="ENOTDIR"||(n.code||"").includes("ENS"))return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',n),n}}async read(e,r={}){try{let n=await this._readFile(e,r);if(r.autocrlf==="true")try{n=new TextDecoder("utf8",{fatal:!0}).decode(n),n=n.replace(/\r\n/g,`
`),n=new TextEncoder().encode(n)}catch(i){}return typeof n!="string"&&(n=Buffer.from(n)),n}catch(n){return null}}async write(e,r,n={}){try{await this._writeFile(e,r,n)}catch(i){await this.mkdir(ys(e)),await this._writeFile(e,r,n)}}async mkdir(e,r=!1){try{await this._mkdir(e)}catch(n){if(n===null||n.code==="EEXIST")return;if(r)throw n;if(n.code==="ENOENT"){let i=ys(e);if(i==="."||i==="/"||i===e)throw n;await this.mkdir(i),await this.mkdir(e,!0)}}}async rm(e){try{await this._unlink(e)}catch(r){if(r.code!=="ENOENT")throw r}}async rmdir(e,r){try{r&&r.recursive?await this._rm(e,r):await this._rmdir(e)}catch(n){if(n.code!=="ENOENT")throw n}}async readdir(e){try{let r=await this._readdir(e);return r.sort(Td),r}catch(r){return r.code==="ENOTDIR"?null:[]}}async readdirDeep(e){let r=await this._readdir(e);return(await Promise.all(r.map(async i=>{let a=e+"/"+i;return(await this._stat(a)).isDirectory()?this.readdirDeep(a):a}))).reduce((i,a)=>i.concat(a),[])}async lstat(e){try{return await this._lstat(e)}catch(r){if(r.code==="ENOENT"||(r.code||"").includes("ENS"))return null;throw r}}async readlink(e,r={encoding:"buffer"}){try{let n=await this._readlink(e,r);return Buffer.isBuffer(n)?n:Buffer.from(n)}catch(n){if(n.code==="ENOENT"||(n.code||"").includes("ENS"))return null;throw n}}async writelink(e,r){return this._symlink(r.toString("utf8"),e)}};function C(t,e){if(e===void 0)throw new Sr(t)}async function ee({fsp:t,dotgit:e}){C("fsp",t),C("dotgit",e);let r=await t._stat(e).catch(()=>({isFile:()=>!1,isDirectory:()=>!1}));return r.isDirectory()?e:r.isFile()?t._readFile(e,"utf8").then(n=>n.trimRight().substr(8)).then(n=>O(ys(e),n)):e}async function Sd(t,e){return!t&&!e?!1:t&&!e||!t&&e?!0:!(await t.type()==="tree"&&await e.type()==="tree"||await t.type()===await e.type()&&await t.mode()===await e.mode()&&await t.oid()===await e.oid())}async function YE({fs:t,dir:e,gitdir:r=O(e,".git"),commit:n="HEAD",cache:i={}}){try{C("fs",t),C("dir",e),C("gitdir",r);let a=new Q(t),s=[Yr({ref:n}),Qo(),Ss()],o=[],l=await ee({fsp:a,dotgit:r});await gt.acquire({fs:a,gitdir:l,cache:i},async function(u){o=u.unmergedPaths});let c=await Ra({fs:a,cache:i,dir:e,gitdir:l,trees:s,map:async function(u,[f,d,h]){let m=!await Sd(d,h),g=o.includes(u),v=!await Sd(h,f);if(m||g)return f?{path:u,mode:await f.mode(),oid:await f.oid(),type:await f.type(),content:await f.content()}:void 0;if(v)return!1;throw new Yc(u)}});await gt.acquire({fs:a,gitdir:l,cache:i},async function(u){for(let f of c)if(f!==!1){if(!f){await a.rmdir(`${e}/${f.path}`,{recursive:!0}),u.delete({filepath:f.path});continue}if(f.type==="blob"){let d=new TextDecoder().decode(f.content);await a.write(`${e}/${f.path}`,d,{mode:f.mode}),u.insert({filepath:f.path,oid:f.oid,stage:0})}}})}catch(a){throw a.caller="git.abortMerge",a}}var Ia=class{static async isIgnored({fs:e,dir:r,gitdir:n=O(r,".git"),filepath:i}){if(wd(i)===".git")return!0;if(i===".")return!1;let a="",s=O(n,"info","exclude");await e.exists(s)&&(a=await e.read(s,"utf8"));let o=[{gitignore:O(r,".gitignore"),filepath:i}],l=i.split("/").filter(Boolean);for(let u=1;u<l.length;u++){let f=l.slice(0,u).join("/"),d=l.slice(u).join("/");o.push({gitignore:O(r,f,".gitignore"),filepath:d})}let c=!1;for(let u of o){let f;try{f=await e.read(u.gitignore,"utf8")}catch(m){if(m.code==="NOENT")continue}let d=S3().add(a);d.add(f);let h=ys(u.filepath);if(h!=="."&&d.ignores(h))return!0;c?c=!d.test(u.filepath).unignored:c=d.test(u.filepath).ignored}return c}};async function b8({fs:t,gitdir:e,object:r,format:n,oid:i}){if(n!=="deflated")throw new he("GitObjectStoreLoose expects objects to write to be in deflated format");let a=`objects/${i.slice(0,2)}/${i.slice(2)}`,s=`${e}/${a}`;await t.exists(s)||await t.write(s,r)}var zg=null;async function XE(t){return zg===null&&(zg=x8()),zg?_8(t):cv.deflate(t)}async function _8(t){let e=new CompressionStream("deflate"),r=new Blob([t]).stream().pipeThrough(e);return new Uint8Array(await new Response(r).arrayBuffer())}function x8(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch(t){return!1}}async function Ar({fs:t,gitdir:e,type:r,object:n,format:i="content",oid:a=void 0,dryRun:s=!1}){return i!=="deflated"&&(i!=="wrapped"&&(n=Ca.wrap({type:r,object:n})),a=await ji(n),n=Buffer.from(await XE(n))),s||await b8({fs:t,gitdir:e,object:n,format:"deflated",oid:a}),a}function ZE(t){let e;for(;~(e=t.indexOf(92));)t[e]=47;return t}async function KE({fs:t,dir:e,gitdir:r=O(e,".git"),filepath:n,cache:i={},force:a=!1,parallel:s=!0}){try{C("fs",t),C("dir",e),C("gitdir",r),C("filepath",n);let o=new Q(t),l=await ee({fsp:o,dotgit:r});await gt.acquire({fs:o,gitdir:l,cache:i},async c=>{let f=await(await ct.get({fs:o,gitdir:l})).get("core.autocrlf");return ov({dir:e,gitdir:l,fs:o,filepath:n,index:c,force:a,parallel:s,autocrlf:f})})}catch(o){throw o.caller="git.add",o}}async function ov({dir:t,gitdir:e,fs:r,filepath:n,index:i,force:a,parallel:s,autocrlf:o}){n=Array.isArray(n)?n:[n];let l=n.map(async d=>{if(!a&&await Ia.isIgnored({fs:r,dir:t,gitdir:e,filepath:d}))return;let h=await r.lstat(O(t,d));if(!h)throw new Be(d);if(h.isDirectory()){let m=await r.readdir(O(t,d));if(s){let g=m.map(v=>ov({dir:t,gitdir:e,fs:r,filepath:[O(d,v)],index:i,force:a,parallel:s,autocrlf:o}));await Promise.all(g)}else for(let g of m)await ov({dir:t,gitdir:e,fs:r,filepath:[O(d,g)],index:i,force:a,parallel:s,autocrlf:o})}else{let m=h.isSymbolicLink()?await r.readlink(O(t,d)).then(ZE):await r.read(O(t,d),{autocrlf:o});if(m===null)throw new Be(d);let g=await Ar({fs:r,gitdir:e,type:"blob",object:m});i.insert({filepath:d,stats:h,oid:g})}}),c=await Promise.allSettled(l),u=c.filter(d=>d.status==="rejected").map(d=>d.reason);if(u.length>1)throw new qc(u);if(u.length===1)throw u[0];return c.filter(d=>d.status==="fulfilled"&&d.value).map(d=>d.value)}async function Zc({fs:t,gitdir:e,path:r}){return(await ct.get({fs:t,gitdir:e})).get(r)}function JE(t,...e){for(let r of e)if(r)for(let n of Object.keys(r)){let i=r[n];i!==void 0&&(t[n]=i)}return t}async function Fa({fs:t,gitdir:e,author:r,commit:n}){let i=Math.floor(Date.now()/1e3),a={name:await Zc({fs:t,gitdir:e,path:"user.name"}),email:await Zc({fs:t,gitdir:e,path:"user.email"})||"",timestamp:i,timezoneOffset:new Date(i*1e3).getTimezoneOffset()},s=JE({},a,n?n.author:void 0,r);if(s.name!==void 0)return s}async function Yo({fs:t,gitdir:e,author:r,committer:n,commit:i}){let a=Math.floor(Date.now()/1e3),s={name:await Zc({fs:t,gitdir:e,path:"user.name"}),email:await Zc({fs:t,gitdir:e,path:"user.email"})||"",timestamp:a,timezoneOffset:new Date(a*1e3).getTimezoneOffset()},o=JE({},s,i?i.committer:void 0,r,n);if(o.name!==void 0)return o}async function QE({fs:t,cache:e,gitdir:r,oid:n}){let{type:i,object:a}=await Ze({fs:t,cache:e,gitdir:r,oid:n});if(i==="tag")return n=Xr.from(a).parse().object,QE({fs:t,cache:e,gitdir:r,oid:n});if(i!=="commit")throw new dr(n,i,"commit");return{commit:kr.from(a),oid:n}}async function Xo({fs:t,cache:e,gitdir:r,oid:n}){let{commit:i,oid:a}=await QE({fs:t,cache:e,gitdir:r,oid:n});return{oid:a,commit:i.parse(),payload:i.withoutSignature()}}async function Pd({fs:t,cache:e,onSign:r,gitdir:n,message:i,author:a,committer:s,signingKey:o,amend:l=!1,dryRun:c=!1,noUpdateBranch:u=!1,ref:f,parent:d,tree:h}){let m=!1;f||(f=await W.resolve({fs:t,gitdir:n,ref:"HEAD",depth:2}));let g,v;try{g=await W.resolve({fs:t,gitdir:n,ref:f}),v=await Xo({fs:t,gitdir:n,oid:g,cache:{}})}catch(k){m=!0}if(l&&m)throw new Xc(f);let w=l?await Fa({fs:t,gitdir:n,author:a,commit:v.commit}):await Fa({fs:t,gitdir:n,author:a});if(!w)throw new Jt("author");let b=l?await Yo({fs:t,gitdir:n,author:w,committer:s,commit:v.commit}):await Yo({fs:t,gitdir:n,author:w,committer:s});if(!b)throw new Jt("committer");return gt.acquire({fs:t,gitdir:n,cache:e,allowUnmerged:!1},async function(k){let S=UE(k.entries).get(".");if(h||(h=await ek({fs:t,gitdir:n,inode:S,dryRun:c})),d?d=await Promise.all(d.map(x=>W.resolve({fs:t,gitdir:n,ref:x}))):l?d=v.commit.parent:d=g?[g]:[],!i)if(l)i=v.commit.message;else throw new Sr("message");let A=kr.from({tree:h,parent:d,author:w,committer:b,message:i});o&&(A=await kr.sign(A,r,o));let y=await Ar({fs:t,gitdir:n,type:"commit",object:A.toObject(),dryRun:c});return!u&&!c&&await W.writeRef({fs:t,gitdir:n,ref:f,value:y}),y})}async function ek({fs:t,gitdir:e,inode:r,dryRun:n}){let i=r.children;for(let l of i)l.type==="tree"&&(l.metadata.mode="040000",l.metadata.oid=await ek({fs:t,gitdir:e,inode:l,dryRun:n}));let a=i.map(l=>({mode:l.metadata.mode,path:l.basename,oid:l.metadata.oid,type:l.type})),s=Er.from(a);return await Ar({fs:t,gitdir:e,type:"tree",object:s.toObject(),dryRun:n})}async function Jc({fs:t,cache:e,gitdir:r,oid:n,filepath:i}){if(i.startsWith("/"))throw new Pa("leading-slash");if(i.endsWith("/"))throw new Pa("trailing-slash");let a=n,s=await Wo({fs:t,cache:e,gitdir:r,oid:n}),o=s.tree;if(i==="")n=s.oid;else{let l=i.split("/");n=await tk({fs:t,cache:e,gitdir:r,tree:o,pathArray:l,oid:a,filepath:i})}return n}async function tk({fs:t,cache:e,gitdir:r,tree:n,pathArray:i,oid:a,filepath:s}){let o=i.shift();for(let l of n)if(l.path===o){if(i.length===0)return l.oid;{let{type:c,object:u}=await Ze({fs:t,cache:e,gitdir:r,oid:l.oid});if(c!=="tree")throw new dr(a,c,"tree",s);return n=Er.from(u),tk({fs:t,cache:e,gitdir:r,tree:n,pathArray:i,oid:a,filepath:s})}}throw new Be(`file or directory found at "${a}:${s}"`)}async function el({fs:t,cache:e,gitdir:r,oid:n,filepath:i=void 0}){i!==void 0&&(n=await Jc({fs:t,cache:e,gitdir:r,oid:n,filepath:i}));let{tree:a,oid:s}=await Wo({fs:t,cache:e,gitdir:r,oid:n});return{oid:s,tree:a.entries()}}async function Qc({fs:t,gitdir:e,tree:r}){let n=Er.from(r).toObject();return await Ar({fs:t,gitdir:e,type:"tree",object:n,format:"content"})}async function S8({fs:t,cache:e,onSign:r,gitdir:n,ref:i,oid:a,note:s,force:o,author:l,committer:c,signingKey:u}){let f;try{f=await W.resolve({gitdir:n,fs:t,ref:i})}catch(w){if(!(w instanceof Be))throw w}let h=(await el({fs:t,cache:e,gitdir:n,oid:f||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(o)h=h.filter(w=>w.path!==a);else for(let w of h)if(w.path===a)throw new $n("note",a);typeof s=="string"&&(s=Buffer.from(s,"utf8"));let m=await Ar({fs:t,gitdir:n,type:"blob",object:s,format:"content"});h.push({mode:"100644",path:a,oid:m,type:"blob"});let g=await Qc({fs:t,gitdir:n,tree:h});return await Pd({fs:t,cache:e,onSign:r,gitdir:n,ref:i,tree:g,parent:f&&[f],message:`Note added by 'isomorphic-git addNote'
`,author:l,committer:c,signingKey:u})}async function rk({fs:t,onSign:e,dir:r,gitdir:n=O(r,".git"),ref:i="refs/notes/commits",oid:a,note:s,force:o,author:l,committer:c,signingKey:u,cache:f={}}){try{C("fs",t),C("gitdir",n),C("oid",a),C("note",s),u&&C("onSign",e);let d=new Q(t),h=await Fa({fs:d,gitdir:n,author:l});if(!h)throw new Jt("author");let m=await Yo({fs:d,gitdir:n,author:h,committer:c});if(!m)throw new Jt("committer");let g=await ee({fsp:d,dotgit:n});return await S8({fs:d,cache:f,onSign:e,gitdir:g,ref:i,oid:a,note:s,force:o,author:h,committer:m,signingKey:u})}catch(d){throw d.caller="git.addNote",d}}var E8=/(^|[/.])([/.]|$)|^@$|@{|[\x00-\x20\x7f~^:?*[\\]|\.lock(\/|$)/;function Kc(t,e){if(typeof t!="string")throw new TypeError("Reference name must be a string");return!E8.test(t)&&(!!e||t.includes("/"))}async function nk({fs:t,gitdir:e,remote:r,url:n,force:i}){if(!Kc(r,!0))throw new On(r,$c.clean(r));let a=await ct.get({fs:t,gitdir:e});if(!i&&(await a.getSubsections("remote")).includes(r)&&n!==await a.get(`remote.${r}.url`))throw new $n("remote",r);await a.set(`remote.${r}.url`,n),await a.set(`remote.${r}.fetch`,`+refs/heads/*:refs/remotes/${r}/*`),await ct.save({fs:t,gitdir:e,config:a})}async function ik({fs:t,dir:e,gitdir:r=O(e,".git"),remote:n,url:i,force:a=!1}){try{C("fs",t),C("gitdir",r),C("remote",n),C("url",i);let s=new Q(t),o=await ee({fsp:s,dotgit:r});return await nk({fs:s,gitdir:o,remote:n,url:i,force:a})}catch(s){throw s.caller="git.addRemote",s}}async function k8({fs:t,cache:e,onSign:r,gitdir:n,ref:i,tagger:a,message:s=i,gpgsig:o,object:l,signingKey:c,force:u=!1}){if(i=i.startsWith("refs/tags/")?i:`refs/tags/${i}`,!u&&await W.exists({fs:t,gitdir:n,ref:i}))throw new $n("tag",i);let f=await W.resolve({fs:t,gitdir:n,ref:l||"HEAD"}),{type:d}=await Ze({fs:t,cache:e,gitdir:n,oid:f}),h=Xr.from({object:f,type:d,tag:i.replace("refs/tags/",""),tagger:a,message:s,gpgsig:o});c&&(h=await Xr.sign(h,r,c));let m=await Ar({fs:t,gitdir:n,type:"tag",object:h.toObject()});await W.writeRef({fs:t,gitdir:n,ref:i,value:m})}async function ak({fs:t,onSign:e,dir:r,gitdir:n=O(r,".git"),ref:i,tagger:a,message:s=i,gpgsig:o,object:l,signingKey:c,force:u=!1,cache:f={}}){try{C("fs",t),C("gitdir",n),C("ref",i),c&&C("onSign",e);let d=new Q(t),h=await ee({fsp:d,dotgit:n}),m=await Fa({fs:d,gitdir:h,author:a});if(!m)throw new Jt("tagger");return await k8({fs:d,cache:f,onSign:e,gitdir:h,ref:i,tagger:m,message:s,gpgsig:o,object:l,signingKey:c,force:u})}catch(d){throw d.caller="git.annotatedTag",d}}async function A8({fs:t,gitdir:e,ref:r,object:n,checkout:i=!1,force:a=!1}){if(!Kc(r,!0))throw new On(r,$c.clean(r));let s=`refs/heads/${r}`;if(!a&&await W.exists({fs:t,gitdir:e,ref:s}))throw new $n("branch",r,!1);let o;try{o=await W.resolve({fs:t,gitdir:e,ref:n||"HEAD"})}catch(l){}o&&await W.writeRef({fs:t,gitdir:e,ref:s,value:o}),i&&await W.writeSymbolicRef({fs:t,gitdir:e,ref:"HEAD",value:s})}async function sk({fs:t,dir:e,gitdir:r=O(e,".git"),ref:n,object:i,checkout:a=!1,force:s=!1}){try{C("fs",t),C("gitdir",r),C("ref",n);let o=new Q(t),l=await ee({fsp:o,dotgit:r});return await A8({fs:o,gitdir:l,ref:n,object:i,checkout:a,force:s})}catch(o){throw o.caller="git.branch",o}}var ok=(t,e)=>t==="."||e==null||e.length===0||e==="."?!0:e.length>=t.length?e.startsWith(t):t.startsWith(e);async function fv({fs:t,cache:e,onProgress:r,onPostCheckout:n,dir:i,gitdir:a,remote:s,ref:o,filepaths:l,noCheckout:c,noUpdateHead:u,dryRun:f,force:d,track:h=!0,nonBlocking:m=!1,batchSize:g=100}){let v;if(n)try{v=await W.resolve({fs:t,gitdir:a,ref:"HEAD"})}catch(b){v="0000000000000000000000000000000000000000"}let w;try{w=await W.resolve({fs:t,gitdir:a,ref:o})}catch(b){if(o==="HEAD")throw b;let k=`${s}/${o}`;if(w=await W.resolve({fs:t,gitdir:a,ref:k}),h){let E=await ct.get({fs:t,gitdir:a});await E.set(`branch.${o}.remote`,s),await E.set(`branch.${o}.merge`,`refs/heads/${o}`),await ct.save({fs:t,gitdir:a,config:E})}await W.writeRef({fs:t,gitdir:a,ref:`refs/heads/${o}`,value:w})}if(!c){let b;try{b=await T8({fs:t,cache:e,onProgress:r,dir:i,gitdir:a,ref:o,force:d,filepaths:l})}catch(y){throw y instanceof Be&&y.data.what===w?new Bc(o,w):y}let k=b.filter(([y])=>y==="conflict").map(([y,x])=>x);if(k.length>0)throw new Nc(k);let E=b.filter(([y])=>y==="error").map(([y,x])=>x);if(E.length>0)throw new he(E.join(", "));if(f){n&&await n({previousHead:v,newHead:w,type:l!=null&&l.length>0?"file":"branch"});return}let S=0,A=b.length;if(await gt.acquire({fs:t,gitdir:a,cache:e},async function(y){await Promise.all(b.filter(([x])=>x==="delete"||x==="delete-index").map(async function([x,_]){let T=`${i}/${_}`;x==="delete"&&await t.rm(T),y.delete({filepath:_}),r&&await r({phase:"Updating workdir",loaded:++S,total:A})}))}),await gt.acquire({fs:t,gitdir:a,cache:e},async function(y){for(let[x,_]of b)if(x==="rmdir"||x==="rmdir-index"){let T=`${i}/${_}`;try{x==="rmdir"&&await t.rmdir(T),y.delete({filepath:_}),r&&await r({phase:"Updating workdir",loaded:++S,total:A})}catch(P){if(P.code==="ENOTEMPTY")console.log(`Did not delete ${_} because directory is not empty`);else throw P}}}),await Promise.all(b.filter(([y])=>y==="mkdir"||y==="mkdir-index").map(async function([y,x]){let _=`${i}/${x}`;await t.mkdir(_),r&&await r({phase:"Updating workdir",loaded:++S,total:A})})),m){let y=b.filter(([_])=>_==="create"||_==="create-index"||_==="update"||_==="mkdir-index"),x=await CE("Update Working Dir",y.map(([_,T,P,D,B])=>()=>P8({fs:t,cache:e,gitdir:a,dir:i},[_,T,P,D,B])),r,g);await gt.acquire({fs:t,gitdir:a,cache:e,allowUnmerged:!0},async function(_){await CE("Update Index",x.map(([T,P,D])=>()=>C8({index:_,fullpath:T,oid:P,stats:D})),r,g)})}else await gt.acquire({fs:t,gitdir:a,cache:e,allowUnmerged:!0},async function(y){await Promise.all(b.filter(([x])=>x==="create"||x==="create-index"||x==="update"||x==="mkdir-index").map(async function([x,_,T,P,D]){let B=`${i}/${_}`;try{if(x!=="create-index"&&x!=="mkdir-index"){let{object:le}=await Ze({fs:t,cache:e,gitdir:a,oid:T});if(D&&await t.rm(B),P===33188)await t.write(B,le);else if(P===33261)await t.write(B,le,{mode:511});else if(P===40960)await t.writelink(B,le);else throw new he(`Invalid mode 0o${P.toString(8)} detected in blob ${T}`)}let N=await t.lstat(B);P===33261&&(N.mode=493),x==="mkdir-index"&&(N.mode=57344),y.insert({filepath:_,stats:N,oid:T}),r&&await r({phase:"Updating workdir",loaded:++S,total:A})}catch(N){console.log(N)}}))});n&&await n({previousHead:v,newHead:w,type:l!=null&&l.length>0?"file":"branch"})}if(!u){let b=await W.expand({fs:t,gitdir:a,ref:o});b.startsWith("refs/heads")?await W.writeSymbolicRef({fs:t,gitdir:a,ref:"HEAD",value:b}):await W.writeRef({fs:t,gitdir:a,ref:"HEAD",value:w})}}async function T8({fs:t,cache:e,onProgress:r,dir:n,gitdir:i,ref:a,force:s,filepaths:o}){let l=0;return Ra({fs:t,cache:e,dir:n,gitdir:i,trees:[Yr({ref:a}),Qo(),Ss()],map:async function(c,[u,f,d]){if(c===".")return;if(o&&!o.some(m=>ok(c,m)))return null;switch(r&&await r({phase:"Analyzing workdir",loaded:++l}),[!!d,!!u,!!f].map(Number).join("")){case"000":return;case"001":return s&&o&&o.includes(c)?["delete",c]:void 0;case"010":switch(await u.type()){case"tree":return["mkdir",c];case"blob":return["create",c,await u.oid(),await u.mode()];case"commit":return["mkdir-index",c,await u.oid(),await u.mode()];default:return["error",`new entry Unhandled type ${await u.type()}`]}case"011":switch(`${await u.type()}-${await f.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",c];case"blob-blob":return await u.oid()!==await f.oid()?s?["update",c,await u.oid(),await u.mode(),await u.mode()!==await f.mode()]:["conflict",c]:await u.mode()!==await f.mode()?s?["update",c,await u.oid(),await u.mode(),!0]:["conflict",c]:["create-index",c,await u.oid(),await u.mode()];case"commit-tree":return;case"commit-blob":return["conflict",c];default:return["error",`new entry Unhandled type ${u.type}`]}case"100":return["delete-index",c];case"101":switch(await d.type()){case"tree":return["rmdir-index",c];case"blob":return await d.oid()!==await f.oid()?s?["delete",c]:["conflict",c]:["delete",c];case"commit":return["rmdir-index",c];default:return["error",`delete entry Unhandled type ${await d.type()}`]}case"110":case"111":switch(`${await d.type()}-${await u.type()}`){case"tree-tree":return;case"blob-blob":{if(await d.oid()===await u.oid()&&await d.mode()===await u.mode()&&!s)return;if(f){if(await f.oid()!==await d.oid()&&await f.oid()!==await u.oid())return s?["update",c,await u.oid(),await u.mode(),await u.mode()!==await f.mode()]:["conflict",c]}else if(s)return["update",c,await u.oid(),await u.mode(),await u.mode()!==await d.mode()];return await u.mode()!==await d.mode()?["update",c,await u.oid(),await u.mode(),!0]:await u.oid()!==await d.oid()?["update",c,await u.oid(),await u.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",c,await u.oid()];case"blob-tree":return["update-blob-to-tree",c];case"commit-commit":return["mkdir-index",c,await u.oid(),await u.mode()];default:return["error",`update entry Unhandled type ${await d.type()}-${await u.type()}`]}}},reduce:async function(c,u){return u=WE(u),c?c&&c[0]==="rmdir"?(u.push(c),u):(u.unshift(c),u):u}})}async function C8({index:t,fullpath:e,stats:r,oid:n}){try{t.insert({filepath:e,stats:r,oid:n})}catch(i){console.warn(`Error inserting ${e} into index:`,i)}}async function P8({fs:t,cache:e,gitdir:r,dir:n},[i,a,s,o,l]){let c=`${n}/${a}`;if(i!=="create-index"&&i!=="mkdir-index"){let{object:f}=await Ze({fs:t,cache:e,gitdir:r,oid:s});if(l&&await t.rm(c),o===33188)await t.write(c,f);else if(o===33261)await t.write(c,f,{mode:511});else if(o===40960)await t.writelink(c,f);else throw new he(`Invalid mode 0o${o.toString(8)} detected in blob ${s}`)}let u=await t.lstat(c);return o===33261&&(u.mode=493),i==="mkdir-index"&&(u.mode=57344),[a,s,u]}async function CE(t,e,r,n){let i=[];try{for(let a=0;a<e.length;a+=n){let s=e.slice(a,a+n).map(l=>l());(await Promise.allSettled(s)).forEach(l=>{l.status==="fulfilled"&&i.push(l.value)}),r&&await r({phase:"Updating workdir",loaded:a+s.length,total:e.length})}return i}catch(a){console.error(`Error during ${t}: ${a}`)}return i}async function dv({fs:t,onProgress:e,onPostCheckout:r,dir:n,gitdir:i=O(n,".git"),remote:a="origin",ref:s,filepaths:o,noCheckout:l=!1,noUpdateHead:c=s===void 0,dryRun:u=!1,force:f=!1,track:d=!0,cache:h={},nonBlocking:m=!1,batchSize:g=100}){try{C("fs",t),C("dir",n),C("gitdir",i);let v=s||"HEAD",w=new Q(t),b=await ee({fsp:w,dotgit:i});return await fv({fs:w,cache:h,onProgress:e,onPostCheckout:r,dir:n,gitdir:b,remote:a,ref:v,filepaths:o,noCheckout:l,noUpdateHead:c,dryRun:u,force:f,track:d,nonBlocking:m,batchSize:g})}catch(v){throw v.caller="git.checkout",v}}var R8=/^refs\/(heads\/|tags\/|remotes\/)?(.*)/;function ws(t){let e=R8.exec(t);return e?e[1]==="remotes/"&&t.endsWith("/HEAD")?e[2].slice(0,-5):e[2]:t}async function Oa({fs:t,gitdir:e,fullname:r=!1,test:n=!1}){let i=await W.resolve({fs:t,gitdir:e,ref:"HEAD",depth:2});if(n)try{await W.resolve({fs:t,gitdir:e,ref:i})}catch(a){return}if(i.startsWith("refs/"))return r?i:ws(i)}function I8(t){return t=t.replace(/^git@([^:]+):/,"https://$1/"),t=t.replace(/^ssh:\/\//,"https://"),t}function lk({username:t="",password:e=""}){return`Basic ${Buffer.from(`${t}:${e}`).toString("base64")}`}async function eu(t,e){let r=qE(t);for(;;){let{value:n,done:i}=await r.next();if(n&&await e(n),i)break}r.return&&r.return()}async function Ed(t){let e=0,r=[];await eu(t,a=>{r.push(a),e+=a.byteLength});let n=new Uint8Array(e),i=0;for(let a of r)n.set(a,i),i+=a.byteLength;return n}function PE(t){let e=t.match(/^https?:\/\/([^/]+)@/);if(e==null)return{url:t,auth:{}};e=e[1];let[r,n]=e.split(":");return t=t.replace(`${e}@`,""),{url:t,auth:{username:r,password:n}}}function lv(t,e){let r=e.toString(16);return"0".repeat(t-r.length)+r}var at=class{static flush(){return Buffer.from("0000","utf8")}static delim(){return Buffer.from("0001","utf8")}static encode(e){typeof e=="string"&&(e=Buffer.from(e));let r=e.length+4,n=lv(4,r);return Buffer.concat([Buffer.from(n,"utf8"),e])}static streamReader(e){let r=new _d(e);return async function(){try{let i=await r.read(4);if(i==null)return!0;if(i=parseInt(i.toString("utf8"),16),i===0||i===1)return null;let a=await r.read(i-4);return a==null?!0:a}catch(i){return e.error=i,!0}}}};async function RE(t){let e={},r;for(;r=await t(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");let n=r.indexOf("=");if(n>-1){let i=r.slice(0,n),a=r.slice(n+1);e[i]=a}else e[r]=!0}return{protocolVersion:2,capabilities2:e}}async function IE(t,{service:e}){let r=new Set,n=new Map,i=new Map,a=at.streamReader(t),s=await a();for(;s===null;)s=await a();if(s===!0)throw new Hc;if(s.includes("version 2"))return RE(a);if(s.toString("utf8").replace(/\n$/,"")!==`# service=${e}`)throw new bs(`# service=${e}\\n`,s.toString("utf8"));let o=await a();for(;o===null;)o=await a();if(o===!0)return{capabilities:r,refs:n,symrefs:i};if(o=o.toString("utf8"),o.includes("version 2"))return RE(a);let[l,c]=Vg(o,"\0","\\x00");if(c.split(" ").map(u=>r.add(u)),l!=="0000000000000000000000000000000000000000 capabilities^{}"){let[u,f]=Vg(l," "," ");for(n.set(f,u);;){let d=await a();if(d===!0)break;if(d!==null){let[h,m]=Vg(d.toString("utf8")," "," ");n.set(m,h)}}}for(let u of r)if(u.startsWith("symref=")){let f=u.match(/symref=([^:]+):(.*)/);f.length===3&&i.set(f[1],f[2])}return{protocolVersion:1,capabilities:r,refs:n,symrefs:i}}function Vg(t,e,r){let n=t.trim().split(e);if(n.length!==2)throw new bs(`Two strings separated by '${r}'`,t.toString("utf8"));return n}var FE=(t,e)=>t.endsWith("?")?`${t}${e}`:`${t}/${e.replace(/^https?:\/\//,"")}`,$E=(t,e)=>{(e.username||e.password)&&(t.Authorization=lk(e)),e.headers&&Object.assign(t,e.headers)},Wg=async t=>{try{let e=Buffer.from(await Ed(t.body)),r=e.toString("utf8");return{preview:r.length<256?r:r.slice(0,256)+"...",response:r,data:e}}catch(e){return{}}},Zo=class{static async capabilities(){return["discover","connect"]}static async discover({http:e,onProgress:r,onAuth:n,onAuthSuccess:i,onAuthFailure:a,corsProxy:s,service:o,url:l,headers:c,protocolVersion:u}){let{url:f,auth:d}=PE(l),h=s?FE(s,f):f;(d.username||d.password)&&(c.Authorization=lk(d)),u===2&&(c["Git-Protocol"]="version=2");let m,g,v=!1;do if(m=await e.request({onProgress:r,method:"GET",url:`${h}/info/refs?service=${o}`,headers:c}),g=!1,m.statusCode===401||m.statusCode===203){let w=v?a:n;if(w){if(d=await w(f,{...d,headers:{...c}}),d&&d.cancel)throw new Vo;d&&($E(c,d),v=!0,g=!0)}}else m.statusCode===200&&v&&i&&await i(f,d);while(g);if(m.statusCode!==200){let{response:w}=await Wg(m);throw new Go(m.statusCode,m.statusMessage,w)}if(m.headers["content-type"]===`application/x-${o}-advertisement`){let w=await IE(m.body,{service:o});return w.auth=d,w}else{let{preview:w,response:b,data:k}=await Wg(m);try{let E=await IE([k],{service:o});return E.auth=d,E}catch(E){throw new zc(w,b)}}}static async connect({http:e,onProgress:r,corsProxy:n,service:i,url:a,auth:s,body:o,headers:l}){let c=PE(a);c&&(a=c.url),n&&(a=FE(n,a)),l["content-type"]=`application/x-${i}-request`,l.accept=`application/x-${i}-result`,$E(l,s);let u=await e.request({onProgress:r,method:"POST",url:`${a}/${i}`,body:o,headers:l});if(u.statusCode!==200){let{response:f}=Wg(u);throw new Go(u.statusCode,u.statusMessage,f)}return u}},Ko=class{static getRemoteHelperFor({url:e}){let r=new Map;r.set("http",Zo),r.set("https",Zo);let n=F8({url:e});if(!n)throw new Wc(e);if(r.has(n.transport))return r.get(n.transport);throw new Vc(e,n.transport,n.transport==="ssh"?I8(e):void 0)}};function F8({url:t}){if(t.startsWith("git@"))return{transport:"ssh",address:t};let e=t.match(/(\w+)(:\/\/|::)(.*)/);if(e!==null){if(e[2]==="://")return{transport:e[1],address:e[0]};if(e[2]==="::")return{transport:e[1],address:e[3]}}}var vs=null,_s=class{static async read({fs:e,gitdir:r}){vs===null&&(vs=new Fc);let n=O(r,"shallow"),i=new Set;return await vs.acquire(n,async function(){let a=await e.read(n,{encoding:"utf8"});if(a===null||a.trim()==="")return i;a.trim().split(`
`).map(s=>i.add(s))}),i}static async write({fs:e,gitdir:r,oids:n}){vs===null&&(vs=new Fc);let i=O(r,"shallow");if(n.size>0){let a=[...n].join(`
`)+`
`;await vs.acquire(i,async function(){await e.write(i,a,{encoding:"utf8"})})}else await vs.acquire(i,async function(){await e.rm(i)})}};async function $8({fs:t,gitdir:e,oid:r}){let n=`objects/${r.slice(0,2)}/${r.slice(2)}`;return t.exists(`${e}/${n}`)}async function O8({fs:t,cache:e,gitdir:r,oid:n,getExternalRefDelta:i}){let a=await t.readdir(O(r,"objects/pack"));a=a.filter(s=>s.endsWith(".idx"));for(let s of a){let o=`${r}/objects/pack/${s}`,l=await uv({fs:t,cache:e,filename:o,getExternalRefDelta:i});if(l.error)throw new he(l.error);if(l.offsets.has(n))return!0}return!1}async function OE({fs:t,cache:e,gitdir:r,oid:n,format:i="content"}){let a=o=>Ze({fs:t,cache:e,gitdir:r,oid:o}),s=await $8({fs:t,gitdir:r,oid:n});return s||(s=await O8({fs:t,cache:e,gitdir:r,oid:n,getExternalRefDelta:a})),s}function M8(t){let i="5041434b"+"00000002"+"00000000";return t.slice(0,12).toString("hex")===i}function ck(t,e){let r=t.map(n=>n.split("=",1)[0]);return e.filter(n=>{let i=n.split("=",1)[0];return r.includes(i)})}var Rd={name:"isomorphic-git",version:"1.36.1",agent:"git/isomorphic-git@1.36.1"},Bo=class{constructor(){this._queue=[]}write(e){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){let r=this._waiting;this._waiting=null,r({value:e})}else this._queue.push(e)}end(){if(this._ended=!0,this._waiting){let e=this._waiting;this._waiting=null,e({done:!0})}}destroy(e){this.error=e,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(e=>{this._waiting=e})}};function D8(t){let e=t.indexOf("\r"),r=t.indexOf(`
`);return e===-1&&r===-1?-1:e===-1?r+1:r===-1?e+1:r===e+1?r+1:Math.min(e,r)+1}function uk(t){let e=new Bo,r="";return(async()=>(await eu(t,n=>{for(n=n.toString("utf8"),r+=n;;){let i=D8(r);if(i===-1)break;e.write(r.slice(0,i)),r=r.slice(i)}}),r.length>0&&e.write(r),e.end()))(),e}var kd=class{static demux(e){let r=at.streamReader(e),n=new Bo,i=new Bo,a=new Bo,s=async function(){let o=await r();if(o===null)return s();if(o===!0){n.end(),a.end(),e.error?i.destroy(e.error):i.end();return}switch(o[0]){case 1:{i.write(o.slice(1));break}case 2:{a.write(o.slice(1));break}case 3:{let l=o.slice(1);a.write(l),n.end(),a.end(),i.destroy(new Error(l.toString("utf8")));return}default:n.write(o)}s()};return s(),{packetlines:n,packfile:i,progress:a}}};async function L8(t){let{packetlines:e,packfile:r,progress:n}=kd.demux(t),i=[],a=[],s=[],o=!1,l=!1;return new Promise((c,u)=>{eu(e,f=>{let d=f.toString("utf8").trim();if(d.startsWith("shallow")){let h=d.slice(-41).trim();h.length!==40&&u(new Ta(h)),i.push(h)}else if(d.startsWith("unshallow")){let h=d.slice(-41).trim();h.length!==40&&u(new Ta(h)),a.push(h)}else if(d.startsWith("ACK")){let[,h,m]=d.split(" ");s.push({oid:h,status:m}),m||(l=!0)}else d.startsWith("NAK")?(o=!0,l=!0):(l=!0,o=!0);l&&(t.error?u(t.error):c({shallows:i,unshallows:a,acks:s,nak:o,packfile:r,progress:n}))}).finally(()=>{l||(t.error?u(t.error):c({shallows:i,unshallows:a,acks:s,nak:o,packfile:r,progress:n}))})})}function N8({capabilities:t=[],wants:e=[],haves:r=[],shallows:n=[],depth:i=null,since:a=null,exclude:s=[]}){let o=[];e=[...new Set(e)];let l=` ${t.join(" ")}`;for(let c of e)o.push(at.encode(`want ${c}${l}
`)),l="";for(let c of n)o.push(at.encode(`shallow ${c}
`));i!==null&&o.push(at.encode(`deepen ${i}
`)),a!==null&&o.push(at.encode(`deepen-since ${Math.floor(a.valueOf()/1e3)}
`));for(let c of s)o.push(at.encode(`deepen-not ${c}
`));o.push(at.flush());for(let c of r)o.push(at.encode(`have ${c}
`));return o.push(at.encode(`done
`)),o}async function hv({fs:t,cache:e,http:r,onProgress:n,onMessage:i,onAuth:a,onAuthSuccess:s,onAuthFailure:o,gitdir:l,ref:c,remoteRef:u,remote:f,url:d,corsProxy:h,depth:m=null,since:g=null,exclude:v=[],relative:w=!1,tags:b=!1,singleBranch:k=!1,headers:E={},prune:S=!1,pruneTags:A=!1}){let y=c||await Oa({fs:t,gitdir:l,test:!0}),x=await ct.get({fs:t,gitdir:l}),_=f||y&&await x.get(`branch.${y}.remote`)||"origin",T=d||await x.get(`remote.${_}.url`);if(typeof T=="undefined")throw new Sr("remote OR url");let P=u||y&&await x.get(`branch.${y}.merge`)||c||"HEAD";h===void 0&&(h=await x.get("http.corsProxy"));let D=Ko.getRemoteHelperFor({url:T}),B=await D.discover({http:r,onAuth:a,onAuthSuccess:s,onAuthFailure:o,corsProxy:h,service:"git-upload-pack",url:T,headers:E,protocolVersion:1}),N=B.auth,le=B.refs;if(le.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(m!==null&&!B.capabilities.has("shallow"))throw new Aa("shallow","depth");if(g!==null&&!B.capabilities.has("deepen-since"))throw new Aa("deepen-since","since");if(v.length>0&&!B.capabilities.has("deepen-not"))throw new Aa("deepen-not","exclude");if(w===!0&&!B.capabilities.has("deepen-relative"))throw new Aa("deepen-relative","relative");let{oid:Ae,fullref:we}=W.resolveAgainstMap({ref:P,map:le});for(let z of le.keys())z===we||z==="HEAD"||z.startsWith("refs/heads/")||b&&z.startsWith("refs/tags/")||le.delete(z);let fe=ck([...B.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${Rd.agent}`]);w&&fe.push("deepen-relative");let Ie=k?[Ae]:le.values(),ce=k?[y]:await W.listRefs({fs:t,gitdir:l,filepath:"refs"}),j=[];for(let z of ce)try{z=await W.expand({fs:t,gitdir:l,ref:z});let Z=await W.resolve({fs:t,gitdir:l,ref:z});await OE({fs:t,cache:e,gitdir:l,oid:Z})&&j.push(Z)}catch(Z){}j=[...new Set(j)];let J=await _s.read({fs:t,gitdir:l}),H=B.capabilities.has("shallow")?[...J]:[],Fe=N8({capabilities:fe,wants:Ie,haves:j,shallows:H,depth:m,since:g,exclude:v}),or=Buffer.from(await Ed(Fe)),Rt=await D.connect({http:r,onProgress:n,corsProxy:h,service:"git-upload-pack",url:T,auth:N,body:[or],headers:E}),$e=await L8(Rt.body);Rt.headers&&($e.headers=Rt.headers);for(let z of $e.shallows)if(!J.has(z))try{let{object:Z}=await Ze({fs:t,cache:e,gitdir:l,oid:z}),M=new kr(Z),V=await Promise.all(M.headers().parent.map(qe=>OE({fs:t,cache:e,gitdir:l,oid:qe})));V.length===0||V.every(qe=>qe)||J.add(z)}catch(Z){J.add(z)}for(let z of $e.unshallows)J.delete(z);if(await _s.write({fs:t,gitdir:l,oids:J}),k){let z=new Map([[we,Ae]]),Z=new Map,M=10,V=we;for(;M--;){let It=B.symrefs.get(V);if(It===void 0)break;Z.set(V,It),V=It}let Te=le.get(V);Te&&z.set(V,Te);let{pruned:qe}=await W.updateRemoteRefs({fs:t,gitdir:l,remote:_,refs:z,symrefs:Z,tags:b,prune:S});S&&($e.pruned=qe)}else{let{pruned:z}=await W.updateRemoteRefs({fs:t,gitdir:l,remote:_,refs:le,symrefs:B.symrefs,tags:b,prune:S,pruneTags:A});S&&($e.pruned=z)}if($e.HEAD=B.symrefs.get("HEAD"),$e.HEAD===void 0){let{oid:z}=W.resolveAgainstMap({ref:"HEAD",map:le});for(let[Z,M]of le.entries())if(Z!=="HEAD"&&M===z){$e.HEAD=Z;break}}let kt=we.startsWith("refs/tags")?"tag":"branch";if($e.FETCH_HEAD={oid:Ae,description:`${kt} '${ws(we)}' of ${T}`},n||i){let z=uk($e.progress);eu(z,async Z=>{if(i&&await i(Z),n){let M=Z.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);M&&await n({phase:M[1].trim(),loaded:parseInt(M[2],10),total:parseInt(M[3],10)})}})}let At=Buffer.from(await Ed($e.packfile));if(Rt.body.error)throw Rt.body.error;let Ut=At.slice(-20).toString("hex"),Xe={defaultBranch:$e.HEAD,fetchHead:$e.FETCH_HEAD.oid,fetchHeadDescription:$e.FETCH_HEAD.description};if($e.headers&&(Xe.headers=$e.headers),S&&(Xe.pruned=$e.pruned),Ut!==""&&!M8(At)){Xe.packfile=`objects/pack/pack-${Ut}.pack`;let z=O(l,Xe.packfile);await t.write(z,At);let Z=V=>Ze({fs:t,cache:e,gitdir:l,oid:V}),M=await Dc.fromPack({pack:At,getExternalRefDelta:Z,onProgress:n});await t.write(z.replace(/\.pack$/,".idx"),await M.toBuffer())}return Xe}async function fk({fs:t,bare:e=!1,dir:r,gitdir:n=e?r:O(r,".git"),defaultBranch:i="master"}){if(await t.exists(n+"/config"))return;let a=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];a=a.map(s=>n+"/"+s);for(let s of a)await t.mkdir(s);await t.write(n+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${e}
`+(e?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await t.write(n+"/HEAD",`ref: refs/heads/${i}
`)}async function B8({fs:t,cache:e,http:r,onProgress:n,onMessage:i,onAuth:a,onAuthSuccess:s,onAuthFailure:o,onPostCheckout:l,dir:c,gitdir:u,url:f,corsProxy:d,ref:h,remote:m,depth:g,since:v,exclude:w,relative:b,singleBranch:k,noCheckout:E,noTags:S,headers:A,nonBlocking:y,batchSize:x=100}){try{if(await fk({fs:t,gitdir:u}),await nk({fs:t,gitdir:u,remote:m,url:f,force:!1}),d){let P=await ct.get({fs:t,gitdir:u});await P.set("http.corsProxy",d),await ct.save({fs:t,gitdir:u,config:P})}let{defaultBranch:_,fetchHead:T}=await hv({fs:t,cache:e,http:r,onProgress:n,onMessage:i,onAuth:a,onAuthSuccess:s,onAuthFailure:o,gitdir:u,ref:h,remote:m,corsProxy:d,depth:g,since:v,exclude:w,relative:b,singleBranch:k,headers:A,tags:!S});if(T===null)return;h=h||_,h=h.replace("refs/heads/",""),await fv({fs:t,cache:e,onProgress:n,onPostCheckout:l,dir:c,gitdir:u,ref:h,remote:m,noCheckout:E,nonBlocking:y,batchSize:x})}catch(_){throw await t.rmdir(u,{recursive:!0,maxRetries:10}).catch(()=>{}),_}}async function dk({fs:t,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,onPostCheckout:o,dir:l,gitdir:c=O(l,".git"),url:u,corsProxy:f=void 0,ref:d=void 0,remote:h="origin",depth:m=void 0,since:g=void 0,exclude:v=[],relative:w=!1,singleBranch:b=!1,noCheckout:k=!1,noTags:E=!1,headers:S={},cache:A={},nonBlocking:y=!1,batchSize:x=100}){try{C("fs",t),C("http",e),C("gitdir",c),k||C("dir",l),C("url",u);let _=new Q(t),T=await ee({fsp:_,dotgit:c});return await B8({fs:_,cache:A,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,onPostCheckout:o,dir:l,gitdir:T,url:u,corsProxy:f,ref:d,remote:h,depth:m,since:g,exclude:v,relative:w,singleBranch:b,noCheckout:k,noTags:E,headers:S,nonBlocking:y,batchSize:x})}catch(_){throw _.caller="git.clone",_}}async function hk({fs:t,onSign:e,dir:r,gitdir:n=O(r,".git"),message:i,author:a,committer:s,signingKey:o,amend:l=!1,dryRun:c=!1,noUpdateBranch:u=!1,ref:f,parent:d,tree:h,cache:m={}}){try{C("fs",t),l||C("message",i),o&&C("onSign",e);let g=new Q(t),v=await ee({fsp:g,dotgit:n});return await Pd({fs:g,cache:m,onSign:e,gitdir:v,message:i,author:a,committer:s,signingKey:o,amend:l,dryRun:c,noUpdateBranch:u,ref:f,parent:d,tree:h})}catch(g){throw g.caller="git.commit",g}}async function pk({fs:t,dir:e,gitdir:r=O(e,".git"),fullname:n=!1,test:i=!1}){try{C("fs",t),C("gitdir",r);let a=new Q(t),s=await ee({fsp:a,dotgit:r});return await Oa({fs:a,gitdir:s,fullname:n,test:i})}catch(a){throw a.caller="git.currentBranch",a}}async function H8({fs:t,gitdir:e,ref:r}){if(r=r.startsWith("refs/heads/")?r:`refs/heads/${r}`,!await W.exists({fs:t,gitdir:e,ref:r}))throw new Be(r);let i=await W.expand({fs:t,gitdir:e,ref:r}),a=await Oa({fs:t,gitdir:e,fullname:!0});if(i===a){let l=await W.resolve({fs:t,gitdir:e,ref:i});await W.writeRef({fs:t,gitdir:e,ref:"HEAD",value:l})}await W.deleteRef({fs:t,gitdir:e,ref:i});let s=ws(r),o=await ct.get({fs:t,gitdir:e});await o.deleteSection("branch",s),await ct.save({fs:t,gitdir:e,config:o})}async function mk({fs:t,dir:e,gitdir:r=O(e,".git"),ref:n}){try{C("fs",t),C("ref",n);let i=new Q(t),a=await ee({fsp:i,dotgit:r});return await H8({fs:i,gitdir:a,ref:n})}catch(i){throw i.caller="git.deleteBranch",i}}async function gk({fs:t,dir:e,gitdir:r=O(e,".git"),ref:n}){try{C("fs",t),C("ref",n);let i=new Q(t),a=await ee({fsp:i,dotgit:r});await W.deleteRef({fs:i,gitdir:a,ref:n})}catch(i){throw i.caller="git.deleteRef",i}}async function U8({fs:t,gitdir:e,remote:r}){let n=await ct.get({fs:t,gitdir:e});await n.deleteSection("remote",r),await ct.save({fs:t,gitdir:e,config:n})}async function vk({fs:t,dir:e,gitdir:r=O(e,".git"),remote:n}){try{C("fs",t),C("remote",n);let i=new Q(t),a=await ee({fsp:i,dotgit:r});return await U8({fs:i,gitdir:a,remote:n})}catch(i){throw i.caller="git.deleteRemote",i}}async function G8({fs:t,gitdir:e,ref:r}){r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`,await W.deleteRef({fs:t,gitdir:e,ref:r})}async function wk({fs:t,dir:e,gitdir:r=O(e,".git"),ref:n}){try{C("fs",t),C("ref",n);let i=new Q(t),a=await ee({fsp:i,dotgit:r});return await G8({fs:i,gitdir:a,ref:n})}catch(i){throw i.caller="git.deleteTag",i}}async function j8({fs:t,gitdir:e,oid:r}){let n=r.slice(0,2);return(await t.readdir(`${e}/objects/${n}`)).map(a=>`${n}${a}`).filter(a=>a.startsWith(r))}async function q8({fs:t,cache:e,gitdir:r,oid:n,getExternalRefDelta:i}){let a=[],s=await t.readdir(O(r,"objects/pack"));s=s.filter(o=>o.endsWith(".idx"));for(let o of s){let l=`${r}/objects/pack/${o}`,c=await uv({fs:t,cache:e,filename:l,getExternalRefDelta:i});if(c.error)throw new he(c.error);for(let u of c.offsets.keys())u.startsWith(n)&&a.push(u)}return a}async function z8({fs:t,cache:e,gitdir:r,oid:n}){let i=o=>Ze({fs:t,cache:e,gitdir:r,oid:o}),a=await j8({fs:t,gitdir:r,oid:n}),s=await q8({fs:t,cache:e,gitdir:r,oid:n,getExternalRefDelta:i});for(let o of s)a.indexOf(o)===-1&&a.push(o);if(a.length===1)return a[0];throw a.length>1?new Lc("oids",n,a):new Be(`an object matching "${n}"`)}async function yk({fs:t,dir:e,gitdir:r=O(e,".git"),oid:n,cache:i={}}){try{C("fs",t),C("gitdir",r),C("oid",n);let a=new Q(t),s=await ee({fsp:a,dotgit:r});return await z8({fs:a,cache:i,gitdir:s,oid:n})}catch(a){throw a.caller="git.expandOid",a}}async function bk({fs:t,dir:e,gitdir:r=O(e,".git"),ref:n}){try{C("fs",t),C("gitdir",r),C("ref",n);let i=new Q(t),a=await ee({fsp:i,dotgit:r});return await W.expand({fs:i,gitdir:a,ref:n})}catch(i){throw i.caller="git.expandRef",i}}async function pv({fs:t,cache:e,gitdir:r,oids:n}){let i={},a=n.length,s=n.map((o,l)=>({index:l,oid:o}));for(;s.length;){let o=new Set;for(let{oid:c,index:u}of s)i[c]||(i[c]=new Set),i[c].add(u),i[c].size===a&&o.add(c);if(o.size>0)return[...o];let l=new Map;for(let{oid:c,index:u}of s)try{let{object:f}=await Ze({fs:t,cache:e,gitdir:r,oid:c}),d=kr.from(f),{parent:h}=d.parseHeaders();for(let m of h)(!i[m]||!i[m].has(u))&&l.set(m+":"+u,{oid:m,index:u})}catch(f){}s=Array.from(l.values())}return[]}var Yg=/^.*(\r?\n|$)/gm;function V8({branches:t,contents:e}){let r=t[1],n=t[2],i=e[0],a=e[1],s=e[2],o=a.match(Yg),l=i.match(Yg),c=s.match(Yg),u=E3(o,l,c),f=7,d="",h=!0;for(let m of u)m.ok&&(d+=m.ok.join("")),m.conflict&&(h=!1,d+=`${"<".repeat(f)} ${r}
`,d+=m.conflict.a.join(""),d+=`${"=".repeat(f)}
`,d+=m.conflict.b.join(""),d+=`${">".repeat(f)} ${n}
`);return{cleanMerge:h,mergedText:d}}async function W8({fs:t,cache:e,dir:r,gitdir:n=O(r,".git"),index:i,ourOid:a,baseOid:s,theirOid:o,ourName:l="ours",baseName:c="base",theirName:u="theirs",dryRun:f=!1,abortOnConflict:d=!0,mergeDriver:h}){let m=Yr({ref:a}),g=Yr({ref:s}),v=Yr({ref:o}),w=[],b=[],k=[],E=[],S=await Ra({fs:t,cache:e,dir:r,gitdir:n,trees:[m,g,v],map:async function(A,[y,x,_]){let T=wd(A),P=await Sd(y,x),D=await Sd(_,x);switch(`${P}-${D}`){case"false-false":return{mode:await x.mode(),path:T,oid:await x.oid(),type:await x.type()};case"false-true":return!_&&await y.type()==="tree"?{mode:await y.mode(),path:T,oid:await y.oid(),type:await y.type()}:_?{mode:await _.mode(),path:T,oid:await _.oid(),type:await _.type()}:void 0;case"true-false":return!y&&await _.type()==="tree"?{mode:await _.mode(),path:T,oid:await _.oid(),type:await _.type()}:y?{mode:await y.mode(),path:T,oid:await y.oid(),type:await y.type()}:void 0;case"true-true":{if(y&&_&&await y.type()==="tree"&&await _.type()==="tree")return{mode:await y.mode(),path:T,oid:await y.oid(),type:"tree"};if(y&&_&&await y.type()==="blob"&&await _.type()==="blob")return Y8({fs:t,gitdir:n,path:T,ours:y,base:x,theirs:_,ourName:l,baseName:c,theirName:u,mergeDriver:h}).then(async B=>{if(B.cleanMerge)d||i.insert({filepath:A,oid:B.mergeResult.oid,stage:0});else if(w.push(A),b.push(A),!d){let N="";x&&await x.type()==="blob"&&(N=await x.oid());let le=await y.oid(),Ae=await _.oid();i.delete({filepath:A}),N&&i.insert({filepath:A,oid:N,stage:1}),i.insert({filepath:A,oid:le,stage:2}),i.insert({filepath:A,oid:Ae,stage:3})}return B.mergeResult});if(x&&!y&&_&&await x.type()==="blob"&&await _.type()==="blob"){if(w.push(A),k.push(A),!d){let B=await x.oid(),N=await _.oid();i.delete({filepath:A}),i.insert({filepath:A,oid:B,stage:1}),i.insert({filepath:A,oid:N,stage:3})}return{mode:await _.mode(),oid:await _.oid(),type:"blob",path:T}}if(x&&y&&!_&&await x.type()==="blob"&&await y.type()==="blob"){if(w.push(A),E.push(A),!d){let B=await x.oid(),N=await y.oid();i.delete({filepath:A}),i.insert({filepath:A,oid:B,stage:1}),i.insert({filepath:A,oid:N,stage:2})}return{mode:await y.mode(),oid:await y.oid(),type:"blob",path:T}}if(x&&!y&&!_&&(await x.type()==="blob"||await x.type()==="tree"))return;throw new jo}}},reduce:w.length!==0&&(!r||d)?void 0:async(A,y)=>{let x=y.filter(Boolean);if(A&&!(A&&A.type==="tree"&&x.length===0&&A.path!==".")){if(x.length>0||A.path==="."&&x.length===0){let T=new Er(x).toObject(),P=await Ar({fs:t,gitdir:n,type:"tree",object:T,dryRun:f});A.oid=P}return A}}});return w.length!==0?(r&&!d&&await Ra({fs:t,cache:e,dir:r,gitdir:n,trees:[Yr({ref:S.oid})],map:async function(A,[y]){let x=`${r}/${A}`;if(await y.type()==="blob"){let _=await y.mode(),T=new TextDecoder().decode(await y.content());await t.write(x,T,{mode:_})}return!0}}),new qo(w,b,k,E)):S.oid}async function Y8({fs:t,gitdir:e,path:r,ours:n,base:i,theirs:a,ourName:s,theirName:o,baseName:l,dryRun:c,mergeDriver:u=V8}){let f="blob",d="100755",h="",m="";i&&await i.type()==="blob"&&(d=await i.mode(),h=await i.oid(),m=Buffer.from(await i.content()).toString("utf8"));let g=d===await n.mode()?await a.mode():await n.mode();if(await n.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:g,path:r,oid:await n.oid(),type:f}};if(await n.oid()===h)return{cleanMerge:!0,mergeResult:{mode:g,path:r,oid:await a.oid(),type:f}};if(await a.oid()===h)return{cleanMerge:!0,mergeResult:{mode:g,path:r,oid:await n.oid(),type:f}};let v=Buffer.from(await n.content()).toString("utf8"),w=Buffer.from(await a.content()).toString("utf8"),{mergedText:b,cleanMerge:k}=await u({branches:[l,s,o],contents:[m,v,w],path:r}),E=await Ar({fs:t,gitdir:e,type:"blob",object:Buffer.from(b,"utf8"),dryRun:c});return{cleanMerge:k,mergeResult:{mode:g,path:r,oid:E,type:f}}}async function _k({fs:t,cache:e,dir:r,gitdir:n,ours:i,theirs:a,fastForward:s=!0,fastForwardOnly:o=!1,dryRun:l=!1,noUpdateBranch:c=!1,abortOnConflict:u=!0,message:f,author:d,committer:h,signingKey:m,onSign:g,mergeDriver:v,allowUnrelatedHistories:w=!1}){i===void 0&&(i=await Oa({fs:t,gitdir:n,fullname:!0})),i=await W.expand({fs:t,gitdir:n,ref:i}),a=await W.expand({fs:t,gitdir:n,ref:a});let b=await W.resolve({fs:t,gitdir:n,ref:i}),k=await W.resolve({fs:t,gitdir:n,ref:a}),E=await pv({fs:t,cache:e,gitdir:n,oids:[b,k]});if(E.length!==1)if(E.length===0&&w)E.push("4b825dc642cb6eb9a060e54bf8d69288fbee4904");else throw new jo;let S=E[0];if(S===k)return{oid:b,alreadyMerged:!0};if(s&&S===b)return!l&&!c&&await W.writeRef({fs:t,gitdir:n,ref:i,value:k}),{oid:k,fastForward:!0};{if(o)throw new Uc;let A=await gt.acquire({fs:t,gitdir:n,cache:e,allowUnmerged:!1},async x=>W8({fs:t,cache:e,dir:r,gitdir:n,index:x,ourOid:b,theirOid:k,baseOid:S,ourName:ws(i),baseName:"base",theirName:ws(a),dryRun:l,abortOnConflict:u,mergeDriver:v}));if(A instanceof qo)throw A;return f||(f=`Merge branch '${ws(a)}' into ${ws(i)}`),{oid:await Pd({fs:t,cache:e,gitdir:n,message:f,ref:i,tree:A,parent:[b,k],author:d,committer:h,signingKey:m,onSign:g,dryRun:l,noUpdateBranch:c}),tree:A,mergeCommit:!0}}}async function xk({fs:t,cache:e,http:r,onProgress:n,onMessage:i,onAuth:a,onAuthSuccess:s,onAuthFailure:o,dir:l,gitdir:c,ref:u,url:f,remote:d,remoteRef:h,prune:m,pruneTags:g,fastForward:v,fastForwardOnly:w,corsProxy:b,singleBranch:k,headers:E,author:S,committer:A,signingKey:y}){try{if(!u){let T=await Oa({fs:t,gitdir:c});if(!T)throw new Sr("ref");u=T}let{fetchHead:x,fetchHeadDescription:_}=await hv({fs:t,cache:e,http:r,onProgress:n,onMessage:i,onAuth:a,onAuthSuccess:s,onAuthFailure:o,gitdir:c,corsProxy:b,ref:u,url:f,remote:d,remoteRef:h,singleBranch:k,headers:E,prune:m,pruneTags:g});await _k({fs:t,cache:e,gitdir:c,ours:u,theirs:x,fastForward:v,fastForwardOnly:w,message:`Merge ${_}`,author:S,committer:A,signingKey:y,dryRun:!1,noUpdateBranch:!1}),await fv({fs:t,cache:e,onProgress:n,dir:l,gitdir:c,ref:u,remote:d,noCheckout:!1})}catch(x){throw x.caller="git.pull",x}}async function Sk({fs:t,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,dir:o,gitdir:l=O(o,".git"),ref:c,url:u,remote:f,remoteRef:d,corsProxy:h,singleBranch:m,headers:g={},cache:v={}}){try{C("fs",t),C("http",e),C("gitdir",l);let w={name:"",email:"",timestamp:Date.now(),timezoneOffset:0},b=new Q(t),k=await ee({fsp:b,dotgit:l});return await xk({fs:b,cache:v,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,dir:o,gitdir:k,ref:c,url:u,remote:f,remoteRef:d,fastForwardOnly:!0,corsProxy:h,singleBranch:m,headers:g,author:w,committer:w})}catch(w){throw w.caller="git.fastForward",w}}async function Ek({fs:t,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,dir:o,gitdir:l=O(o,".git"),ref:c,remote:u,remoteRef:f,url:d,corsProxy:h,depth:m=null,since:g=null,exclude:v=[],relative:w=!1,tags:b=!1,singleBranch:k=!1,headers:E={},prune:S=!1,pruneTags:A=!1,cache:y={}}){try{C("fs",t),C("http",e),C("gitdir",l);let x=new Q(t),_=await ee({fsp:x,dotgit:l});return await hv({fs:x,cache:y,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,gitdir:_,ref:c,remote:u,remoteRef:f,url:d,corsProxy:h,depth:m,since:g,exclude:v,relative:w,tags:b,singleBranch:k,headers:E,prune:S,pruneTags:A})}catch(x){throw x.caller="git.fetch",x}}async function kk({fs:t,dir:e,gitdir:r=O(e,".git"),oids:n,cache:i={}}){try{C("fs",t),C("gitdir",r),C("oids",n);let a=new Q(t),s=await ee({fsp:a,dotgit:r});return await pv({fs:a,cache:i,gitdir:s,oids:n})}catch(a){throw a.caller="git.findMergeBase",a}}async function Ak({fs:t,filepath:e}){if(await t.exists(O(e,".git")))return e;{let r=ys(e);if(r===e)throw new Be(`git root for ${e}`);return Ak({fs:t,filepath:r})}}async function Tk({fs:t,filepath:e}){try{return C("fs",t),C("filepath",e),await Ak({fs:new Q(t),filepath:e})}catch(r){throw r.caller="git.findRoot",r}}async function Ck({fs:t,dir:e,gitdir:r=O(e,".git"),path:n}){try{C("fs",t),C("gitdir",r),C("path",n);let i=new Q(t),a=await ee({fsp:i,dotgit:r});return await Zc({fs:i,gitdir:a,path:n})}catch(i){throw i.caller="git.getConfig",i}}async function X8({fs:t,gitdir:e,path:r}){return(await ct.get({fs:t,gitdir:e})).getall(r)}async function Pk({fs:t,dir:e,gitdir:r=O(e,".git"),path:n}){try{C("fs",t),C("gitdir",r),C("path",n);let i=new Q(t),a=await ee({fsp:i,dotgit:r});return await X8({fs:i,gitdir:a,path:n})}catch(i){throw i.caller="git.getConfigAll",i}}async function Rk({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,url:a,headers:s={},forPush:o=!1}){try{C("http",t),C("url",a);let c=await Ko.getRemoteHelperFor({url:a}).discover({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,service:o?"git-receive-pack":"git-upload-pack",url:a,headers:s,protocolVersion:1}),u={capabilities:[...c.capabilities]};for(let[f,d]of c.refs){let h=f.split("/"),m=h.pop(),g=u;for(let v of h)g[v]=g[v]||{},g=g[v];g[m]=d}for(let[f,d]of c.symrefs){let h=f.split("/"),m=h.pop(),g=u;for(let v of h)g[v]=g[v]||{},g=g[v];g[m]=d}return u}catch(l){throw l.caller="git.getRemoteInfo",l}}function Ik(t,e,r,n){let i=[];for(let[a,s]of t.refs){if(e&&!a.startsWith(e))continue;if(a.endsWith("^{}")){if(n){let l=a.replace("^{}",""),c=i[i.length-1],u=c.ref===l?c:i.find(f=>f.ref===l);if(u===void 0)throw new Error("I did not expect this to happen");u.peeled=s}continue}let o={ref:a,oid:s};r&&t.symrefs.has(a)&&(o.target=t.symrefs.get(a)),i.push(o)}return i}async function Fk({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,url:a,headers:s={},forPush:o=!1,protocolVersion:l=2}){try{C("http",t),C("url",a);let u=await Ko.getRemoteHelperFor({url:a}).discover({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,service:o?"git-receive-pack":"git-upload-pack",url:a,headers:s,protocolVersion:l});if(u.protocolVersion===2)return{protocolVersion:u.protocolVersion,capabilities:u.capabilities2};let f={};for(let d of u.capabilities){let[h,m]=d.split("=");m?f[h]=m:f[h]=!0}return{protocolVersion:1,capabilities:f,refs:Ik(u,void 0,!0,!0)}}catch(c){throw c.caller="git.getRemoteInfo2",c}}async function Z8({type:t,object:e,format:r="content",oid:n=void 0}){return r!=="deflated"&&(r!=="wrapped"&&(e=Ca.wrap({type:t,object:e})),n=await ji(e)),{oid:n,object:e}}async function $k({object:t}){try{C("object",t),typeof t=="string"?t=Buffer.from(t,"utf8"):t instanceof Uint8Array||(t=new Uint8Array(t));let e="blob",{oid:r,object:n}=await Z8({type:e,format:"content",object:t});return{oid:r,type:e,object:n,format:"wrapped"}}catch(e){throw e.caller="git.hashBlob",e}}async function K8({fs:t,cache:e,onProgress:r,dir:n,gitdir:i,filepath:a}){try{a=O(n,a);let s=await t.read(a),o=c=>Ze({fs:t,cache:e,gitdir:i,oid:c}),l=await Dc.fromPack({pack:s,getExternalRefDelta:o,onProgress:r});return await t.write(a.replace(/\.pack$/,".idx"),await l.toBuffer()),{oids:[...l.hashes]}}catch(s){throw s.caller="git.indexPack",s}}async function Ok({fs:t,onProgress:e,dir:r,gitdir:n=O(r,".git"),filepath:i,cache:a={}}){try{C("fs",t),C("dir",r),C("gitdir",r),C("filepath",i);let s=new Q(t),o=await ee({fsp:s,dotgit:n});return await K8({fs:s,cache:a,onProgress:e,dir:r,gitdir:o,filepath:i})}catch(s){throw s.caller="git.indexPack",s}}async function Mk({fs:t,bare:e=!1,dir:r,gitdir:n=e?r:O(r,".git"),defaultBranch:i="master"}){try{C("fs",t),C("gitdir",n),e||C("dir",r);let a=new Q(t),s=await ee({fsp:a,dotgit:n});return await fk({fs:a,bare:e,dir:r,gitdir:s,defaultBranch:i})}catch(a){throw a.caller="git.init",a}}async function Dk({fs:t,cache:e,gitdir:r,oid:n,ancestor:i,depth:a}){let s=await _s.read({fs:t,gitdir:r});if(!n)throw new Sr("oid");if(!i)throw new Sr("ancestor");if(n===i)return!1;let o=[n],l=new Set,c=0;for(;o.length;){if(c++===a)throw new jc(a);let u=o.shift(),{type:f,object:d}=await Ze({fs:t,cache:e,gitdir:r,oid:u});if(f!=="commit")throw new dr(u,f,"commit");let h=kr.from(d).parse();for(let m of h.parent)if(m===i)return!0;if(!s.has(u))for(let m of h.parent)l.has(m)||(o.push(m),l.add(m))}return!1}async function Lk({fs:t,dir:e,gitdir:r=O(e,".git"),oid:n,ancestor:i,depth:a=-1,cache:s={}}){try{C("fs",t),C("gitdir",r),C("oid",n),C("ancestor",i);let o=new Q(t),l=await ee({fsp:o,dotgit:r});return await Dk({fs:o,cache:s,gitdir:l,oid:n,ancestor:i,depth:a})}catch(o){throw o.caller="git.isDescendent",o}}async function Nk({fs:t,dir:e,gitdir:r=O(e,".git"),filepath:n}){try{C("fs",t),C("dir",e),C("gitdir",r),C("filepath",n);let i=new Q(t),a=await ee({fsp:i,dotgit:r});return Ia.isIgnored({fs:i,dir:e,gitdir:a,filepath:n})}catch(i){throw i.caller="git.isIgnored",i}}async function Bk({fs:t,dir:e,gitdir:r=O(e,".git"),remote:n}){try{C("fs",t),C("gitdir",r);let i=new Q(t),a=await ee({fsp:i,dotgit:r});return W.listBranches({fs:i,gitdir:a,remote:n})}catch(i){throw i.caller="git.listBranches",i}}async function J8({fs:t,gitdir:e,ref:r,cache:n}){if(r){let i=await W.resolve({gitdir:e,fs:t,ref:r}),a=[];return await Hk({fs:t,cache:n,gitdir:e,oid:i,filenames:a,prefix:""}),a}else return gt.acquire({fs:t,gitdir:e,cache:n},async function(i){return i.entries.map(a=>a.path)})}async function Hk({fs:t,cache:e,gitdir:r,oid:n,filenames:i,prefix:a}){let{tree:s}=await el({fs:t,cache:e,gitdir:r,oid:n});for(let o of s)o.type==="tree"?await Hk({fs:t,cache:e,gitdir:r,oid:o.oid,filenames:i,prefix:O(a,o.path)}):i.push(O(a,o.path))}async function Uk({fs:t,dir:e,gitdir:r=O(e,".git"),ref:n,cache:i={}}){try{C("fs",t),C("gitdir",r);let a=new Q(t),s=await ee({fsp:a,dotgit:r});return await J8({fs:a,cache:i,gitdir:s,ref:n})}catch(a){throw a.caller="git.listFiles",a}}async function Q8({fs:t,cache:e,gitdir:r,ref:n}){let i;try{i=await W.resolve({gitdir:r,fs:t,ref:n})}catch(o){if(o instanceof Be)return[]}return(await el({fs:t,cache:e,gitdir:r,oid:i})).tree.map(o=>({target:o.path,note:o.oid}))}async function Gk({fs:t,dir:e,gitdir:r=O(e,".git"),ref:n="refs/notes/commits",cache:i={}}){try{C("fs",t),C("gitdir",r),C("ref",n);let a=new Q(t),s=await ee({fsp:a,dotgit:r});return await Q8({fs:a,cache:i,gitdir:s,ref:n})}catch(a){throw a.caller="git.listNotes",a}}async function jk({fs:t,dir:e,gitdir:r=O(e,".git"),filepath:n}){try{C("fs",t),C("gitdir",r);let i=new Q(t),a=await ee({fsp:i,dotgit:r});return W.listRefs({fs:i,gitdir:a,filepath:n})}catch(i){throw i.caller="git.listRefs",i}}async function e6({fs:t,gitdir:e}){let r=await ct.get({fs:t,gitdir:e}),n=await r.getSubsections("remote");return Promise.all(n.map(async a=>{let s=await r.get(`remote.${a}.url`);return{remote:a,url:s}}))}async function qk({fs:t,dir:e,gitdir:r=O(e,".git")}){try{C("fs",t),C("gitdir",r);let n=new Q(t),i=await ee({fsp:n,dotgit:r});return await e6({fs:n,gitdir:i})}catch(n){throw n.caller="git.listRemotes",n}}async function t6(t){let e=at.streamReader(t),r=[],n;for(;n=await e(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");let[i,a,...s]=n.split(" "),o={ref:a,oid:i};for(let l of s){let[c,u]=l.split(":");c==="symref-target"?o.target=u:c==="peeled"&&(o.peeled=u)}r.push(o)}return r}async function r6({prefix:t,symrefs:e,peelTags:r}){let n=[];return n.push(at.encode(`command=ls-refs
`)),n.push(at.encode(`agent=${Rd.agent}
`)),(r||e||t)&&n.push(at.delim()),r&&n.push(at.encode("peel")),e&&n.push(at.encode("symrefs")),t&&n.push(at.encode(`ref-prefix ${t}`)),n.push(at.flush()),n}async function zk({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,url:a,headers:s={},forPush:o=!1,protocolVersion:l=2,prefix:c,symrefs:u,peelTags:f}){try{C("http",t),C("url",a);let d=await Zo.discover({http:t,onAuth:e,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,service:o?"git-receive-pack":"git-upload-pack",url:a,headers:s,protocolVersion:l});if(d.protocolVersion===1)return Ik(d,c,u,f);let h=await r6({prefix:c,symrefs:u,peelTags:f}),m=await Zo.connect({http:t,auth:d.auth,headers:s,corsProxy:i,service:o?"git-receive-pack":"git-upload-pack",url:a,body:h});return t6(m.body)}catch(d){throw d.caller="git.listServerRefs",d}}async function Vk({fs:t,dir:e,gitdir:r=O(e,".git")}){try{C("fs",t),C("gitdir",r);let n=new Q(t),i=await ee({fsp:n,dotgit:r});return W.listTags({fs:n,gitdir:i})}catch(n){throw n.caller="git.listTags",n}}function n6(t,e){return t.committer.timestamp-e.committer.timestamp}var i6="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function ME({fs:t,cache:e,gitdir:r,oid:n,fileId:i}){if(i===i6)return;let a=n,s,o=await Wo({fs:t,cache:e,gitdir:r,oid:n}),l=o.tree;return i===o.oid?s=o.path:(s=await Wk({fs:t,cache:e,gitdir:r,tree:l,fileId:i,oid:a}),Array.isArray(s)&&(s.length===0?s=void 0:s.length===1&&(s=s[0]))),s}async function Wk({fs:t,cache:e,gitdir:r,tree:n,fileId:i,oid:a,filepaths:s=[],parentPath:o=""}){let l=n.entries().map(function(c){let u;return c.oid===i?(u=O(o,c.path),s.push(u)):c.type==="tree"&&(u=Ze({fs:t,cache:e,gitdir:r,oid:c.oid}).then(function({object:f}){return Wk({fs:t,cache:e,gitdir:r,tree:Er.from(f),fileId:i,oid:a,filepaths:s,parentPath:O(o,c.path)})})),u});return await Promise.all(l),s}async function a6({fs:t,cache:e,gitdir:r,filepath:n,ref:i,depth:a,since:s,force:o,follow:l}){let c=typeof s=="undefined"?void 0:Math.floor(s.valueOf()/1e3),u=[],f=await _s.read({fs:t,gitdir:r}),d=await W.resolve({fs:t,gitdir:r,ref:i}),h=[await Xo({fs:t,cache:e,gitdir:r,oid:d})],m,g,v;function w(b){v&&n&&u.push(b)}for(;h.length>0;){let b=h.pop();if(c!==void 0&&b.commit.committer.timestamp<=c)break;if(n){let k;try{k=await Jc({fs:t,cache:e,gitdir:r,oid:b.commit.tree,filepath:n}),g&&m!==k&&u.push(g),m=k,g=b,v=!0}catch(E){if(E instanceof Be){let S=l&&m;if(S&&(S=await ME({fs:t,cache:e,gitdir:r,oid:b.commit.tree,fileId:m}),S))if(Array.isArray(S)){if(g){let A=await ME({fs:t,cache:e,gitdir:r,oid:g.commit.tree,fileId:m});if(Array.isArray(A))if(S=S.filter(y=>A.indexOf(y)===-1),S.length===1)S=S[0],n=S,g&&u.push(g);else{S=!1,g&&u.push(g);break}}}else n=S,g&&u.push(g);if(!S){if(v&&m&&(u.push(g),!o))break;if(!o&&!l)throw E}g=b,v=!1}else throw E}}else u.push(b);if(a!==void 0&&u.length===a){w(b);break}if(!f.has(b.oid))for(let k of b.commit.parent){let E=await Xo({fs:t,cache:e,gitdir:r,oid:k});h.map(S=>S.oid).includes(E.oid)||h.push(E)}h.length===0&&w(b),h.sort((k,E)=>n6(k.commit,E.commit))}return u}async function Yk({fs:t,dir:e,gitdir:r=O(e,".git"),filepath:n,ref:i="HEAD",depth:a,since:s,force:o,follow:l,cache:c={}}){try{C("fs",t),C("gitdir",r),C("ref",i);let u=new Q(t),f=await ee({fsp:u,dotgit:r});return await a6({fs:u,cache:c,gitdir:f,filepath:n,ref:i,depth:a,since:s,force:o,follow:l})}catch(u){throw u.caller="git.log",u}}async function Xk({fs:t,onSign:e,dir:r,gitdir:n=O(r,".git"),ours:i,theirs:a,fastForward:s=!0,fastForwardOnly:o=!1,dryRun:l=!1,noUpdateBranch:c=!1,abortOnConflict:u=!0,message:f,author:d,committer:h,signingKey:m,cache:g={},mergeDriver:v,allowUnrelatedHistories:w=!1}){try{C("fs",t),m&&C("onSign",e);let b=new Q(t),k=await ee({fsp:b,dotgit:n}),E=await Fa({fs:b,gitdir:k,author:d});if(!E&&(!o||!s))throw new Jt("author");let S=await Yo({fs:b,gitdir:k,author:E,committer:h});if(!S&&(!o||!s))throw new Jt("committer");return await _k({fs:b,cache:g,dir:r,gitdir:k,ours:i,theirs:a,fastForward:s,fastForwardOnly:o,dryRun:l,noUpdateBranch:c,abortOnConflict:u,message:f,author:E,committer:S,signingKey:m,onSign:e,mergeDriver:v,allowUnrelatedHistories:w})}catch(b){throw b.caller="git.merge",b}}var s6={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function Zk({fs:t,cache:e,dir:r,gitdir:n=O(r,".git"),oids:i}){let a=new LE,s=[];function o(u,f){let d=Buffer.from(u,f);s.push(d),a.update(d)}async function l({stype:u,object:f}){let d=s6[u],h=f.length,m=h>15?128:0,g=h&15;h=h>>>4;let v=(m|d|g).toString(16);for(o(v,"hex");m;)m=h>127?128:0,v=m|h&127,o(lv(2,v),"hex"),h=h>>>7;o(Buffer.from(await XE(f)))}o("PACK"),o("00000002","hex"),o(lv(8,i.length),"hex");for(let u of i){let{type:f,object:d}=await Ze({fs:t,cache:e,gitdir:n,oid:u});await l({write:o,object:d,stype:f})}let c=a.digest();return s.push(c),s}async function o6({fs:t,cache:e,gitdir:r,oids:n,write:i}){let a=await Zk({fs:t,cache:e,gitdir:r,oids:n}),s=Buffer.from(await Ed(a)),l=`pack-${s.slice(-20).toString("hex")}.pack`;return i?(await t.write(O(r,`objects/pack/${l}`),s),{filename:l}):{filename:l,packfile:new Uint8Array(s)}}async function Kk({fs:t,dir:e,gitdir:r=O(e,".git"),oids:n,write:i=!1,cache:a={}}){try{C("fs",t),C("gitdir",r),C("oids",n);let s=new Q(t),o=await ee({fsp:s,dotgit:r});return await o6({fs:s,cache:a,gitdir:o,oids:n,write:i})}catch(s){throw s.caller="git.packObjects",s}}async function Jk({fs:t,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,dir:o,gitdir:l=O(o,".git"),ref:c,url:u,remote:f,remoteRef:d,prune:h=!1,pruneTags:m=!1,fastForward:g=!0,fastForwardOnly:v=!1,corsProxy:w,singleBranch:b,headers:k={},author:E,committer:S,signingKey:A,cache:y={}}){try{C("fs",t),C("gitdir",l);let x=new Q(t),_=await ee({fsp:x,dotgit:l}),T=await Fa({fs:x,gitdir:_,author:E});if(!T)throw new Jt("author");let P=await Yo({fs:x,gitdir:_,author:T,committer:S});if(!P)throw new Jt("committer");return await xk({fs:x,cache:y,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,dir:o,gitdir:_,ref:c,url:u,remote:f,remoteRef:d,fastForward:g,fastForwardOnly:v,corsProxy:w,singleBranch:b,headers:k,author:T,committer:P,signingKey:A,prune:h,pruneTags:m})}catch(x){throw x.caller="git.pull",x}}async function l6({fs:t,cache:e,dir:r,gitdir:n=O(r,".git"),start:i,finish:a}){let s=await _s.read({fs:t,gitdir:n}),o=new Set,l=new Set;for(let f of i)o.add(await W.resolve({fs:t,gitdir:n,ref:f}));for(let f of a)try{let d=await W.resolve({fs:t,gitdir:n,ref:f});l.add(d)}catch(d){}let c=new Set;async function u(f){c.add(f);let{type:d,object:h}=await Ze({fs:t,cache:e,gitdir:n,oid:f});if(d==="tag"){let g=Xr.from(h).headers().object;return u(g)}if(d!=="commit")throw new dr(f,d,"commit");if(!s.has(f)){let g=kr.from(h).headers().parent;for(f of g)!l.has(f)&&!c.has(f)&&await u(f)}}for(let f of o)await u(f);return c}async function Xg({fs:t,cache:e,dir:r,gitdir:n=O(r,".git"),oids:i}){let a=new Set;async function s(o){if(a.has(o))return;a.add(o);let{type:l,object:c}=await Ze({fs:t,cache:e,gitdir:n,oid:o});if(l==="tag"){let f=Xr.from(c).headers().object;await s(f)}else if(l==="commit"){let f=kr.from(c).headers().tree;await s(f)}else if(l==="tree"){let u=Er.from(c);for(let f of u)f.type==="blob"&&a.add(f.oid),f.type==="tree"&&await s(f.oid)}}for(let o of i)await s(o);return a}async function c6(t){let e={},r="",n=at.streamReader(t),i=await n();for(;i!==!0;)i!==null&&(r+=i.toString("utf8")+`
`),i=await n();let a=r.toString("utf8").split(`
`);if(i=a.shift(),!i.startsWith("unpack "))throw new bs('unpack ok" or "unpack [error message]',i);e.ok=i==="unpack ok",e.ok||(e.error=i.slice(7)),e.refs={};for(let s of a){if(s.trim()==="")continue;let o=s.slice(0,2),l=s.slice(3),c=l.indexOf(" ");c===-1&&(c=l.length);let u=l.slice(0,c),f=l.slice(c+1);e.refs[u]={ok:o==="ok",error:f}}return e}async function u6({capabilities:t=[],triplets:e=[]}){let r=[],n=`\0 ${t.join(" ")}`;for(let i of e)r.push(at.encode(`${i.oldoid} ${i.oid} ${i.fullRef}${n}
`)),n="";return r.push(at.flush()),r}async function f6({fs:t,cache:e,http:r,onProgress:n,onMessage:i,onAuth:a,onAuthSuccess:s,onAuthFailure:o,onPrePush:l,gitdir:c,ref:u,remoteRef:f,remote:d,url:h,force:m=!1,delete:g=!1,corsProxy:v,headers:w={}}){let b=u||await Oa({fs:t,gitdir:c});if(typeof b=="undefined")throw new Sr("ref");let k=await ct.get({fs:t,gitdir:c});d=d||await k.get(`branch.${b}.pushRemote`)||await k.get("remote.pushDefault")||await k.get(`branch.${b}.remote`)||"origin";let E=h||await k.get(`remote.${d}.pushurl`)||await k.get(`remote.${d}.url`);if(typeof E=="undefined")throw new Sr("remote OR url");let S=f||await k.get(`branch.${b}.merge`);if(typeof E=="undefined")throw new Sr("remoteRef");v===void 0&&(v=await k.get("http.corsProxy"));let A=await W.expand({fs:t,gitdir:c,ref:b}),y=g?"0000000000000000000000000000000000000000":await W.resolve({fs:t,gitdir:c,ref:A}),x=Ko.getRemoteHelperFor({url:E}),_=await x.discover({http:r,onAuth:a,onAuthSuccess:s,onAuthFailure:o,corsProxy:v,service:"git-receive-pack",url:E,headers:w,protocolVersion:1}),T=_.auth,P;if(!S)P=A;else try{P=await W.expandAgainstMap({ref:S,map:_.refs})}catch(J){if(J instanceof Be)P=S.startsWith("refs/")?S:`refs/heads/${S}`;else throw J}let D=_.refs.get(P)||"0000000000000000000000000000000000000000";if(l&&!await l({remote:d,url:E,localRef:{ref:g?"(delete)":A,oid:y},remoteRef:{ref:P,oid:D}}))throw new Vo;let B=!_.capabilities.has("no-thin"),N=new Set;if(!g){let J=[..._.refs.values()],H=new Set;if(D!=="0000000000000000000000000000000000000000"){let Fe=await pv({fs:t,cache:e,gitdir:c,oids:[y,D]});for(let or of Fe)J.push(or);B&&(H=await Xg({fs:t,cache:e,gitdir:c,oids:Fe}))}if(!J.includes(y)){let Fe=await l6({fs:t,cache:e,gitdir:c,start:[y],finish:J});N=await Xg({fs:t,cache:e,gitdir:c,oids:Fe})}if(B){try{let Fe=await W.resolve({fs:t,gitdir:c,ref:`refs/remotes/${d}/HEAD`,depth:2}),{oid:or}=await W.resolveAgainstMap({ref:Fe.replace(`refs/remotes/${d}/`,""),fullref:Fe,map:_.refs}),Rt=[or];for(let $e of await Xg({fs:t,cache:e,gitdir:c,oids:Rt}))H.add($e)}catch(Fe){}for(let Fe of H)N.delete(Fe)}if(y===D&&(m=!0),!m){if(A.startsWith("refs/tags")&&D!=="0000000000000000000000000000000000000000")throw new zo("tag-exists");if(y!=="0000000000000000000000000000000000000000"&&D!=="0000000000000000000000000000000000000000"&&!await Dk({fs:t,cache:e,gitdir:c,oid:y,ancestor:D,depth:-1}))throw new zo("not-fast-forward")}}let le=ck([..._.capabilities],["report-status","side-band-64k",`agent=${Rd.agent}`]),Ae=await u6({capabilities:le,triplets:[{oldoid:D,oid:y,fullRef:P}]}),we=g?[]:await Zk({fs:t,cache:e,gitdir:c,oids:[...N]}),fe=await x.connect({http:r,onProgress:n,corsProxy:v,service:"git-receive-pack",url:E,auth:T,headers:w,body:[...Ae,...we]}),{packfile:Ie,progress:ce}=await kd.demux(fe.body);if(i){let J=uk(ce);eu(J,async H=>{await i(H)})}let j=await c6(Ie);if(fe.headers&&(j.headers=fe.headers),d&&j.ok&&j.refs[P].ok&&!A.startsWith("refs/tags")){let J=`refs/remotes/${d}/${P.replace("refs/heads","")}`;g?await W.deleteRef({fs:t,gitdir:c,ref:J}):await W.writeRef({fs:t,gitdir:c,ref:J,value:y})}if(j.ok&&Object.values(j.refs).every(J=>J.ok))return j;{let J=Object.entries(j.refs).filter(([H,Fe])=>!Fe.ok).map(([H,Fe])=>`
  - ${H}: ${Fe.error}`).join("");throw new Gc(J,j)}}async function Qk({fs:t,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,onPrePush:o,dir:l,gitdir:c=O(l,".git"),ref:u,remoteRef:f,remote:d="origin",url:h,force:m=!1,delete:g=!1,corsProxy:v,headers:w={},cache:b={}}){try{C("fs",t),C("http",e),C("gitdir",c);let k=new Q(t),E=await ee({fsp:k,dotgit:c});return await f6({fs:k,cache:b,http:e,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,onPrePush:o,gitdir:E,ref:u,remoteRef:f,remote:d,url:h,force:m,delete:g,corsProxy:v,headers:w})}catch(k){throw k.caller="git.push",k}}async function eA({fs:t,cache:e,gitdir:r,oid:n}){let{type:i,object:a}=await Ze({fs:t,cache:e,gitdir:r,oid:n});if(i==="tag")return n=Xr.from(a).parse().object,eA({fs:t,cache:e,gitdir:r,oid:n});if(i!=="blob")throw new dr(n,i,"blob");return{oid:n,blob:new Uint8Array(a)}}async function tA({fs:t,cache:e,gitdir:r,oid:n,filepath:i=void 0}){return i!==void 0&&(n=await Jc({fs:t,cache:e,gitdir:r,oid:n,filepath:i})),await eA({fs:t,cache:e,gitdir:r,oid:n})}async function rA({fs:t,dir:e,gitdir:r=O(e,".git"),oid:n,filepath:i,cache:a={}}){try{C("fs",t),C("gitdir",r),C("oid",n);let s=new Q(t),o=await ee({fsp:s,dotgit:r});return await tA({fs:s,cache:a,gitdir:o,oid:n,filepath:i})}catch(s){throw s.caller="git.readBlob",s}}async function mv({fs:t,dir:e,gitdir:r=O(e,".git"),oid:n,cache:i={}}){try{C("fs",t),C("gitdir",r),C("oid",n);let a=new Q(t),s=await ee({fsp:a,dotgit:r});return await Xo({fs:a,cache:i,gitdir:s,oid:n})}catch(a){throw a.caller="git.readCommit",a}}async function d6({fs:t,cache:e,gitdir:r,ref:n="refs/notes/commits",oid:i}){let a=await W.resolve({gitdir:r,fs:t,ref:n}),{blob:s}=await tA({fs:t,cache:e,gitdir:r,oid:a,filepath:i});return s}async function nA({fs:t,dir:e,gitdir:r=O(e,".git"),ref:n="refs/notes/commits",oid:i,cache:a={}}){try{C("fs",t),C("gitdir",r),C("ref",n),C("oid",i);let s=new Q(t),o=await ee({fsp:s,dotgit:r});return await d6({fs:s,cache:a,gitdir:o,ref:n,oid:i})}catch(s){throw s.caller="git.readNote",s}}async function iA({fs:t,dir:e,gitdir:r=O(e,".git"),oid:n,format:i="parsed",filepath:a=void 0,encoding:s=void 0,cache:o={}}){try{C("fs",t),C("gitdir",r),C("oid",n);let l=new Q(t),c=await ee({fsp:l,dotgit:r});a!==void 0&&(n=await Jc({fs:l,cache:o,gitdir:c,oid:n,filepath:a}));let f=await Ze({fs:l,cache:o,gitdir:c,oid:n,format:i==="parsed"?"content":i});if(f.oid=n,i==="parsed")switch(f.format="parsed",f.type){case"commit":f.object=kr.from(f.object).parse();break;case"tree":f.object=Er.from(f.object).entries();break;case"blob":s?f.object=f.object.toString(s):(f.object=new Uint8Array(f.object),f.format="content");break;case"tag":f.object=Xr.from(f.object).parse();break;default:throw new dr(f.oid,f.type,"blob|commit|tag|tree")}else(f.format==="deflated"||f.format==="wrapped")&&(f.type=f.format);return f}catch(l){throw l.caller="git.readObject",l}}async function h6({fs:t,cache:e,gitdir:r,oid:n}){let{type:i,object:a}=await Ze({fs:t,cache:e,gitdir:r,oid:n,format:"content"});if(i!=="tag")throw new dr(n,i,"tag");let s=Xr.from(a);return{oid:n,tag:s.parse(),payload:s.payload()}}async function aA({fs:t,dir:e,gitdir:r=O(e,".git"),oid:n,cache:i={}}){try{C("fs",t),C("gitdir",r),C("oid",n);let a=new Q(t),s=await ee({fsp:a,dotgit:r});return await h6({fs:a,cache:i,gitdir:s,oid:n})}catch(a){throw a.caller="git.readTag",a}}async function sA({fs:t,dir:e,gitdir:r=O(e,".git"),oid:n,filepath:i=void 0,cache:a={}}){try{C("fs",t),C("gitdir",r),C("oid",n);let s=new Q(t),o=await ee({fsp:s,dotgit:r});return await el({fs:s,cache:a,gitdir:o,oid:n,filepath:i})}catch(s){throw s.caller="git.readTree",s}}async function oA({fs:t,dir:e,gitdir:r=O(e,".git"),filepath:n,cache:i={}}){try{C("fs",t),C("gitdir",r),C("filepath",n);let a=new Q(t),s=await ee({fsp:a,dotgit:r});await gt.acquire({fs:a,gitdir:s,cache:i},async function(o){o.delete({filepath:n})})}catch(a){throw a.caller="git.remove",a}}async function p6({fs:t,cache:e,onSign:r,gitdir:n,ref:i="refs/notes/commits",oid:a,author:s,committer:o,signingKey:l}){let c;try{c=await W.resolve({gitdir:n,fs:t,ref:i})}catch(m){if(!(m instanceof Be))throw m}let f=(await el({fs:t,cache:e,gitdir:n,oid:c||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;f=f.filter(m=>m.path!==a);let d=await Qc({fs:t,gitdir:n,tree:f});return await Pd({fs:t,cache:e,onSign:r,gitdir:n,ref:i,tree:d,parent:c&&[c],message:`Note removed by 'isomorphic-git removeNote'
`,author:s,committer:o,signingKey:l})}async function lA({fs:t,onSign:e,dir:r,gitdir:n=O(r,".git"),ref:i="refs/notes/commits",oid:a,author:s,committer:o,signingKey:l,cache:c={}}){try{C("fs",t),C("gitdir",n),C("oid",a);let u=new Q(t),f=await ee({fsp:u,dotgit:n}),d=await Fa({fs:u,gitdir:f,author:s});if(!d)throw new Jt("author");let h=await Yo({fs:u,gitdir:f,author:d,committer:o});if(!h)throw new Jt("committer");return await p6({fs:u,cache:c,onSign:e,gitdir:f,ref:i,oid:a,author:d,committer:h,signingKey:l})}catch(u){throw u.caller="git.removeNote",u}}async function m6({fs:t,gitdir:e,oldref:r,ref:n,checkout:i=!1}){if(!Kc(n,!0))throw new On(n,$c.clean(n));if(!Kc(r,!0))throw new On(r,$c.clean(r));let a=`refs/heads/${r}`,s=`refs/heads/${n}`;if(await W.exists({fs:t,gitdir:e,ref:s}))throw new $n("branch",n,!1);let l=await W.resolve({fs:t,gitdir:e,ref:a,depth:1});await W.writeRef({fs:t,gitdir:e,ref:s,value:l}),await W.deleteRef({fs:t,gitdir:e,ref:a});let u=await Oa({fs:t,gitdir:e,fullname:!0})===a;(i||u)&&await W.writeSymbolicRef({fs:t,gitdir:e,ref:"HEAD",value:s})}async function cA({fs:t,dir:e,gitdir:r=O(e,".git"),ref:n,oldref:i,checkout:a=!1}){try{C("fs",t),C("gitdir",r),C("ref",n),C("oldref",i);let s=new Q(t),o=await ee({fsp:s,dotgit:r});return await m6({fs:s,gitdir:o,ref:n,oldref:i,checkout:a})}catch(s){throw s.caller="git.renameBranch",s}}async function uA({gitdir:t,type:e,object:r}){return ji(Ca.wrap({type:e,object:r}))}async function fA({fs:t,dir:e,gitdir:r=O(e,".git"),filepath:n,ref:i,cache:a={}}){try{C("fs",t),C("gitdir",r),C("filepath",n);let s=new Q(t),o=await ee({fsp:s,dotgit:r}),l,c;try{l=await W.resolve({fs:s,gitdir:o,ref:i||"HEAD"})}catch(d){if(i)throw d}if(l)try{l=await Jc({fs:s,cache:a,gitdir:o,oid:l,filepath:n})}catch(d){l=null}let u={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0},f=e&&await s.read(O(e,n));f&&(c=await uA({gitdir:o,type:"blob",object:f}),l===c&&(u=await s.lstat(O(e,n)))),await gt.acquire({fs:s,gitdir:o,cache:a},async function(d){d.delete({filepath:n}),l&&d.insert({filepath:n,stats:u,oid:l})})}catch(s){throw s.caller="git.reset",s}}async function dA({fs:t,dir:e,gitdir:r=O(e,".git"),ref:n,depth:i}){try{C("fs",t),C("gitdir",r),C("ref",n);let a=new Q(t),s=await ee({fsp:a,dotgit:r});return await W.resolve({fs:a,gitdir:s,ref:n,depth:i})}catch(a){throw a.caller="git.resolveRef",a}}async function hA({fs:t,dir:e,gitdir:r=O(e,".git"),path:n,value:i,append:a=!1}){try{C("fs",t),C("gitdir",r),C("path",n);let s=new Q(t),o=await ee({fsp:s,dotgit:r}),l=await ct.get({fs:s,gitdir:o});a?await l.append(n,i):await l.set(n,i),await ct.save({fs:s,gitdir:o,config:l})}catch(s){throw s.caller="git.setConfig",s}}async function pA({fs:t,gitdir:e,commit:r}){let n=kr.from(r).toObject();return await Ar({fs:t,gitdir:e,type:"commit",object:n,format:"content"})}var Ad=class t{static get timezoneOffsetForRefLogEntry(){let e=new Date().getTimezoneOffset(),r=Math.abs(Math.floor(e/60)),n=Math.abs(e%60).toString().padStart(2,"0");return`${e>0?"-":"+"}${r.toString().padStart(2,"0")}${n}`}static createStashReflogEntry(e,r,n){let i=e.name.replace(/\s/g,""),a="0000000000000000000000000000000000000000",s=Math.floor(Date.now()/1e3),o=t.timezoneOffsetForRefLogEntry;return`${a} ${r} ${i} ${e.email} ${s} ${o}	${n}
`}static getStashReflogEntry(e,r=!1){return e.split(`
`).filter(a=>a).reverse().map((a,s)=>r?`stash@{${s}}: ${a.split("	")[1]}`:a)}},g6={stage:Ss,workdir:Qo},Zg;async function Jo(t,e){return Zg===void 0&&(Zg=new Fc),Zg.acquire(t,e)}async function v6(t,e,r,n,i=null){let a=O(r,n),s=await t.lstat(a);if(!s)throw new Be(a);if(s.isDirectory())throw new he(`${a}: file expected, but found directory`);let o=i?await jE({fs:t,gitdir:e,oid:i}):void 0,l=o?i:void 0;return o||await Jo({fs:t,gitdir:e,currentFilepath:a},async()=>{let c=s.isSymbolicLink()?await t.readlink(a).then(ZE):await t.read(a);if(c===null)throw new Be(a);l=await Ar({fs:t,gitdir:e,type:"blob",object:c})}),l}async function w6({fs:t,dir:e,gitdir:r,entries:n}){async function i(a){if(a.type==="tree"){if(!a.oid){let s=await Promise.all(a.children.map(i));a.oid=await Qc({fs:t,gitdir:r,tree:s}),a.mode=16384}}else a.type==="blob"&&(a.oid=await v6(t,r,e,a.path,a.oid),a.mode=33188);return a.path=a.path.split("/").pop(),a}return Promise.all(n.map(i))}async function DE({fs:t,dir:e,gitdir:r,treePair:n}){let i=n[1]==="stage",a=n.map(h=>typeof h=="string"?g6[h]():h),s=[],u=await Ra({fs:t,cache:{},dir:e,gitdir:r,trees:a,map:async(h,[m,g])=>{if(!(h==="."||await Ia.isIgnored({fs:t,dir:e,gitdir:r,filepath:h}))&&g)return(!m||await m.oid()!==await g.oid()&&await g.oid()!==void 0)&&s.push([m,g]),{mode:await g.mode(),path:h,oid:await g.oid(),type:await g.type()}},reduce:async(h,m)=>(m=m.filter(Boolean),h?(h.children=m,h):m.length>0?m:void 0),iterate:async(h,m)=>{let g=[];for(let v of m){let[w,b]=v;i?b&&(await t.exists(`${e}/${b.toString()}`)?g.push(v):s.push([null,b])):w&&(b?g.push(v):s.push([w,null]))}return g.length?Promise.all(g.map(h)):[]}});if(s.length===0||u.length===0)return null;let d=(await w6({fs:t,dir:e,gitdir:r,entries:u})).filter(Boolean).map(h=>({mode:h.mode,path:h.path,oid:h.oid,type:h.type}));return Qc({fs:t,gitdir:r,tree:d})}async function y6({fs:t,dir:e,gitdir:r,stashCommit:n,parentCommit:i,wasStaged:a}){let s=[],o=[],l=await Ra({fs:t,cache:{},dir:e,gitdir:r,trees:[Yr({ref:i}),Yr({ref:n})],map:async(c,[u,f])=>{if(c==="."||await Ia.isIgnored({fs:t,dir:e,gitdir:r,filepath:c}))return;let d=f?await f.type():await u.type();if(d!=="tree"&&d!=="blob")return;if(!f&&u){let m=d==="tree"?"rmdir":"rm";return d==="tree"&&s.push(c),d==="blob"&&a&&o.push({filepath:c,oid:await u.oid()}),{method:m,filepath:c}}let h=await f.oid();if(!u||await u.oid()!==h)return d==="tree"?{method:"mkdir",filepath:c}:(a&&o.push({filepath:c,oid:h,stats:await t.lstat(O(e,c))}),{method:"write",filepath:c,oid:h})}});await Jo({fs:t,gitdir:r,dirRemoved:s,ops:l},async()=>{for(let c of l){let u=O(e,c.filepath);switch(c.method){case"rmdir":await t.rmdir(u);break;case"mkdir":await t.mkdir(u);break;case"rm":await t.rm(u);break;case"write":if(!s.some(f=>u.startsWith(f))){let{object:f}=await Ze({fs:t,cache:{},gitdir:r,oid:c.oid});await t.exists(u)&&await t.rm(u),await t.write(u,f)}break}}}),await gt.acquire({fs:t,gitdir:r,cache:{}},async c=>{o.forEach(({filepath:u,stats:f,oid:d})=>{c.insert({filepath:u,stats:f,oid:d})})})}var xs=class t{constructor({fs:e,dir:r,gitdir:n=O(r,".git")}){Object.assign(this,{fs:e,dir:r,gitdir:n,_author:null})}static get refStash(){return"refs/stash"}static get refLogsStash(){return"logs/refs/stash"}get refStashPath(){return O(this.gitdir,t.refStash)}get refLogsStashPath(){return O(this.gitdir,t.refLogsStash)}async getAuthor(){if(!this._author&&(this._author=await Fa({fs:this.fs,gitdir:this.gitdir,author:{}}),!this._author))throw new Jt("author");return this._author}async getStashSHA(e,r){return await this.fs.exists(this.refStashPath)?(r||await this.readStashReflogs({parsed:!1}))[e].split(" ")[1]:null}async writeStashCommit({message:e,tree:r,parent:n}){return pA({fs:this.fs,gitdir:this.gitdir,commit:{message:e,tree:r,parent:n,author:await this.getAuthor(),committer:await this.getAuthor()}})}async readStashCommit(e){let r=await this.readStashReflogs({parsed:!1});if(e!==0&&(e<0||e>r.length-1))throw new On(`stash@${e}`,"number that is in range of [0, num of stash pushed]");let n=await this.getStashSHA(e,r);return n?Xo({fs:this.fs,cache:{},gitdir:this.gitdir,oid:n}):{}}async writeStashRef(e){return W.writeRef({fs:this.fs,gitdir:this.gitdir,ref:t.refStash,value:e})}async writeStashReflogEntry({stashCommit:e,message:r}){let n=await this.getAuthor(),i=Ad.createStashReflogEntry(n,e,r),a=this.refLogsStashPath;await Jo({filepath:a,entry:i},async()=>{let s=await this.fs.exists(a)?await this.fs.read(a,"utf8"):"";await this.fs.write(a,s+i,"utf8")})}async readStashReflogs({parsed:e=!1}){if(!await this.fs.exists(this.refLogsStashPath))return[];let r=await this.fs.read(this.refLogsStashPath,"utf8");return Ad.getStashReflogEntry(r,e)}};async function mA({fs:t,dir:e,gitdir:r,message:n=""}){let i=new xs({fs:t,dir:e,gitdir:r});await i.getAuthor();let a=await Oa({fs:t,gitdir:r,fullname:!1}),s=await W.resolve({fs:t,gitdir:r,ref:"HEAD"}),l=(await mv({fs:t,dir:e,gitdir:r,oid:s})).commit.message,c=[s],u=null,f=Yr({ref:"HEAD"}),d=await DE({fs:t,dir:e,gitdir:r,treePair:[Yr({ref:"HEAD"}),"stage"]});if(d){let v=await i.writeStashCommit({message:`stash-Index: WIP on ${a} - ${new Date().toISOString()}`,tree:d,parent:c});c.push(v),u=d,f=Ss()}let h=await DE({fs:t,dir:e,gitdir:r,treePair:[f,"workdir"]});if(h){let v=await i.writeStashCommit({message:`stash-WorkDir: WIP on ${a} - ${new Date().toISOString()}`,tree:h,parent:[c[c.length-1]]});c.push(v),u=h}if(!u||!d&&!h)throw new Be("changes, nothing to stash");let m=(n.trim()||`WIP on ${a}`)+`: ${s.substring(0,7)} ${l}`;return{stashCommit:await i.writeStashCommit({message:m,tree:u,parent:c}),stashMsg:m,branch:a,stashMgr:i}}async function b6({fs:t,dir:e,gitdir:r,message:n=""}){let{stashCommit:i,stashMsg:a,branch:s,stashMgr:o}=await mA({fs:t,dir:e,gitdir:r,message:n});return await o.writeStashRef(i),await o.writeStashReflogEntry({stashCommit:i,message:a}),await dv({fs:t,dir:e,gitdir:r,ref:s,track:!1,force:!0}),i}async function _6({fs:t,dir:e,gitdir:r,message:n=""}){let{stashCommit:i}=await mA({fs:t,dir:e,gitdir:r,message:n});return i}async function gA({fs:t,dir:e,gitdir:r,refIdx:n=0}){let a=await new xs({fs:t,dir:e,gitdir:r}).readStashCommit(n),{parent:s=null}=a.commit?a.commit:{};if(!(!s||!Array.isArray(s)))for(let o=0;o<s.length-1;o++){let c=(await Xo({fs:t,cache:{},gitdir:r,oid:s[o+1]})).commit.message.startsWith("stash-Index");await y6({fs:t,dir:e,gitdir:r,stashCommit:s[o+1],parentCommit:s[o],wasStaged:c})}}async function vA({fs:t,dir:e,gitdir:r,refIdx:n=0}){let i=new xs({fs:t,dir:e,gitdir:r});if(!(await i.readStashCommit(n)).commit)return;let s=i.refStashPath;await Jo(s,async()=>{await t.exists(s)&&await t.rm(s)});let o=await i.readStashReflogs({parsed:!1});if(!o.length)return;o.splice(n,1);let l=i.refLogsStashPath;await Jo({reflogEntries:o,stashReflogPath:l,stashMgr:i},async()=>{if(o.length){await t.write(l,o.reverse().join(`
`)+`
`,"utf8");let c=o[o.length-1].split(" ")[1];await i.writeStashRef(c)}else await t.rm(l)})}async function x6({fs:t,dir:e,gitdir:r}){return new xs({fs:t,dir:e,gitdir:r}).readStashReflogs({parsed:!0})}async function S6({fs:t,dir:e,gitdir:r}){let n=new xs({fs:t,dir:e,gitdir:r}),i=[n.refStashPath,n.refLogsStashPath];await Jo(i,async()=>{await Promise.all(i.map(async a=>{if(await t.exists(a))return t.rm(a)}))})}async function E6({fs:t,dir:e,gitdir:r,refIdx:n=0}){await gA({fs:t,dir:e,gitdir:r,refIdx:n}),await vA({fs:t,dir:e,gitdir:r,refIdx:n})}async function wA({fs:t,dir:e,gitdir:r=O(e,".git"),op:n="push",message:i="",refIdx:a=0}){C("fs",t),C("dir",e),C("gitdir",r),C("op",n);let s={push:b6,apply:gA,drop:vA,list:x6,clear:S6,pop:E6,create:_6},o=["apply","drop","pop"];try{let l=new Q(t),c=await ee({fsp:l,dotgit:r});["refs","logs","logs/refs"].map(d=>O(c,d)).forEach(async d=>{await l.exists(d)||await l.mkdir(d)});let f=s[n];if(f){if(o.includes(n)&&a<0)throw new On(`stash@${a}`,"number that is in range of [0, num of stash pushed]");return await f({fs:l,dir:e,gitdir:c,message:i,refIdx:a})}throw new Error(`To be implemented: ${n}`)}catch(l){throw l.caller="git.stash",l}}async function yA({fs:t,dir:e,gitdir:r=O(e,".git"),filepath:n,cache:i={}}){try{C("fs",t),C("gitdir",r),C("filepath",n);let a=new Q(t),s=await ee({fsp:a,dotgit:r});if(await Ia.isIgnored({fs:a,gitdir:s,dir:e,filepath:n}))return"ignored";let l=await k6({fs:a,cache:i,gitdir:s}),c=await bA({fs:a,cache:i,gitdir:s,tree:l,path:n}),u=await gt.acquire({fs:a,gitdir:s,cache:i},async function(v){for(let w of v)if(w.path===n)return w;return null}),f=await a.lstat(O(e,n)),d=c!==null,h=u!==null,m=f!==null,g=async()=>{if(h&&!vd(u,f))return u.oid;{let v=await a.read(O(e,n)),w=await uA({gitdir:s,type:"blob",object:v});return h&&u.oid===w&&f.size!==-1&&gt.acquire({fs:a,gitdir:s,cache:i},async function(b){b.insert({filepath:n,stats:f,oid:w})}),w}};if(!d&&!m&&!h)return"absent";if(!d&&!m&&h)return"*absent";if(!d&&m&&!h)return"*added";if(!d&&m&&h)return await g()===u.oid?"added":"*added";if(d&&!m&&!h)return"deleted";if(d&&!m&&h)return c===u.oid,"*deleted";if(d&&m&&!h)return await g()===c?"*undeleted":"*undeletemodified";if(d&&m&&h){let v=await g();return v===c?v===u.oid?"unmodified":"*unmodified":v===u.oid?"modified":"*modified"}}catch(a){throw a.caller="git.status",a}}async function bA({fs:t,cache:e,gitdir:r,tree:n,path:i}){typeof i=="string"&&(i=i.split("/"));let a=i.shift();for(let s of n)if(s.path===a){if(i.length===0)return s.oid;let{type:o,object:l}=await Ze({fs:t,cache:e,gitdir:r,oid:s.oid});if(o==="tree"){let c=Er.from(l);return bA({fs:t,cache:e,gitdir:r,tree:c,path:i})}if(o==="blob")throw new dr(s.oid,o,"blob",i.join("/"))}return null}async function k6({fs:t,cache:e,gitdir:r}){let n;try{n=await W.resolve({fs:t,gitdir:r,ref:"HEAD"})}catch(a){if(a instanceof Be)return[]}let{tree:i}=await el({fs:t,cache:e,gitdir:r,oid:n});return i}async function _A({fs:t,dir:e,gitdir:r=O(e,".git"),ref:n="HEAD",filepaths:i=["."],filter:a,cache:s={},ignored:o=!1}){try{C("fs",t),C("gitdir",r),C("ref",n);let l=new Q(t),c=await ee({fsp:l,dotgit:r});return await Ra({fs:l,cache:s,dir:e,gitdir:c,trees:[Yr({ref:n}),Qo(),Ss()],map:async function(u,[f,d,h]){if(!f&&!h&&d&&!o&&await Ia.isIgnored({fs:l,dir:e,filepath:u})||!i.some(y=>ok(u,y)))return null;if(a&&!a(u))return;let[m,g,v]=await Promise.all([f&&f.type(),d&&d.type(),h&&h.type()]),w=[m,g,v].includes("blob");if((m==="tree"||m==="special")&&!w)return;if(m==="commit")return null;if((g==="tree"||g==="special")&&!w)return;if(v==="commit")return null;if((v==="tree"||v==="special")&&!w)return;let b=m==="blob"?await f.oid():void 0,k=v==="blob"?await h.oid():void 0,E;m!=="blob"&&g==="blob"&&v!=="blob"?E="42":g==="blob"&&(E=await d.oid());let S=[void 0,b,E,k],A=S.map(y=>S.indexOf(y));return A.shift(),[u,...A]}})}catch(l){throw l.caller="git.statusMatrix",l}}async function xA({fs:t,dir:e,gitdir:r=O(e,".git"),ref:n,object:i,force:a=!1}){try{C("fs",t),C("gitdir",r),C("ref",n);let s=new Q(t);if(n===void 0)throw new Sr("ref");n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`;let o=await ee({fsp:s,dotgit:r}),l=await W.resolve({fs:s,gitdir:o,ref:i||"HEAD"});if(!a&&await W.exists({fs:s,gitdir:o,ref:n}))throw new $n("tag",n);await W.writeRef({fs:s,gitdir:o,ref:n,value:l})}catch(s){throw s.caller="git.tag",s}}async function SA({fs:t,dir:e,gitdir:r=O(e,".git"),cache:n={},filepath:i,oid:a,mode:s,add:o,remove:l,force:c}){try{C("fs",t),C("gitdir",r),C("filepath",i);let u=new Q(t),f=await ee({fsp:u,dotgit:r});if(l)return await gt.acquire({fs:u,gitdir:f,cache:n},async function(h){if(!c){let m=await u.lstat(O(e,i));if(m){if(m.isDirectory())throw new Pa("directory");return}}h.has({filepath:i})&&h.delete({filepath:i})});let d;if(!a){if(d=await u.lstat(O(e,i)),!d)throw new Be(`file at "${i}" on disk and "remove" not set`);if(d.isDirectory())throw new Pa("directory")}return await gt.acquire({fs:u,gitdir:f,cache:n},async function(h){if(!o&&!h.has({filepath:i}))throw new Be(`file at "${i}" in index and "add" not set`);let m;if(a)m={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:s,uid:0,gid:0,size:0};else{m=d;let g=m.isSymbolicLink()?await u.readlink(O(e,i)):await u.read(O(e,i));a=await Ar({fs:u,gitdir:f,type:"blob",format:"content",object:g})}return h.insert({filepath:i,oid:a,stats:m}),a})}catch(u){throw u.caller="git.updateIndex",u}}function EA(){try{return Rd.version}catch(t){throw t.caller="git.version",t}}async function kA({fs:t,dir:e,gitdir:r=O(e,".git"),trees:n,map:i,reduce:a,iterate:s,cache:o={}}){try{C("fs",t),C("gitdir",r),C("trees",n);let l=new Q(t),c=await ee({fsp:l,dotgit:r});return await Ra({fs:l,cache:o,dir:e,gitdir:c,trees:n,map:i,reduce:a,iterate:s})}catch(l){throw l.caller="git.walk",l}}async function AA({fs:t,dir:e,gitdir:r=O(e,".git"),blob:n}){try{C("fs",t),C("gitdir",r),C("blob",n);let i=new Q(t),a=await ee({fsp:i,dotgit:r});return await Ar({fs:i,gitdir:a,type:"blob",object:n,format:"content"})}catch(i){throw i.caller="git.writeBlob",i}}async function TA({fs:t,dir:e,gitdir:r=O(e,".git"),commit:n}){try{C("fs",t),C("gitdir",r),C("commit",n);let i=new Q(t),a=await ee({fsp:i,dotgit:r});return await pA({fs:i,gitdir:a,commit:n})}catch(i){throw i.caller="git.writeCommit",i}}async function CA({fs:t,dir:e,gitdir:r=O(e,".git"),type:n,object:i,format:a="parsed",oid:s,encoding:o=void 0}){try{let l=new Q(t),c=await ee({fsp:l,dotgit:r});if(a==="parsed"){switch(n){case"commit":i=kr.from(i).toObject();break;case"tree":i=Er.from(i).toObject();break;case"blob":i=Buffer.from(i,o);break;case"tag":i=Xr.from(i).toObject();break;default:throw new dr(s||"",n,"blob|commit|tag|tree")}a="content"}return s=await Ar({fs:l,gitdir:c,type:n,object:i,oid:s,format:a}),s}catch(l){throw l.caller="git.writeObject",l}}async function PA({fs:t,dir:e,gitdir:r=O(e,".git"),ref:n,value:i,force:a=!1,symbolic:s=!1}){try{C("fs",t),C("gitdir",r),C("ref",n),C("value",i);let o=new Q(t);if(!Kc(n,!0))throw new On(n,$c.clean(n));let l=await ee({fsp:o,dotgit:r});if(!a&&await W.exists({fs:o,gitdir:l,ref:n}))throw new $n("ref",n);s?await W.writeSymbolicRef({fs:o,gitdir:l,ref:n,value:i}):(i=await W.resolve({fs:o,gitdir:l,ref:i}),await W.writeRef({fs:o,gitdir:l,ref:n,value:i}))}catch(o){throw o.caller="git.writeRef",o}}async function A6({fs:t,gitdir:e,tag:r}){let n=Xr.from(r).toObject();return await Ar({fs:t,gitdir:e,type:"tag",object:n,format:"content"})}async function RA({fs:t,dir:e,gitdir:r=O(e,".git"),tag:n}){try{C("fs",t),C("gitdir",r),C("tag",n);let i=new Q(t),a=await ee({fsp:i,dotgit:r});return await A6({fs:i,gitdir:a,tag:n})}catch(i){throw i.caller="git.writeTag",i}}async function IA({fs:t,dir:e,gitdir:r=O(e,".git"),tree:n}){try{C("fs",t),C("gitdir",r),C("tree",n);let i=new Q(t),a=await ee({fsp:i,dotgit:r});return await Qc({fs:i,gitdir:a,tree:n})}catch(i){throw i.caller="git.writeTree",i}}var T6={Errors:VE,STAGE:Ss,TREE:Yr,WORKDIR:Qo,add:KE,abortMerge:YE,addNote:rk,addRemote:ik,annotatedTag:ak,branch:sk,checkout:dv,clone:dk,commit:hk,getConfig:Ck,getConfigAll:Pk,setConfig:hA,currentBranch:pk,deleteBranch:mk,deleteRef:gk,deleteRemote:vk,deleteTag:wk,expandOid:yk,expandRef:bk,fastForward:Sk,fetch:Ek,findMergeBase:kk,findRoot:Tk,getRemoteInfo:Rk,getRemoteInfo2:Fk,hashBlob:$k,indexPack:Ok,init:Mk,isDescendent:Lk,isIgnored:Nk,listBranches:Bk,listFiles:Uk,listNotes:Gk,listRefs:jk,listRemotes:qk,listServerRefs:zk,listTags:Vk,log:Yk,merge:Xk,packObjects:Kk,pull:Jk,push:Qk,readBlob:rA,readCommit:mv,readNote:nA,readObject:iA,readTag:aA,readTree:sA,remove:oA,removeNote:lA,renameBranch:cA,resetIndex:fA,updateIndex:SA,resolveRef:dA,status:yA,statusMatrix:_A,tag:xA,version:EA,walk:kA,writeBlob:AA,writeCommit:TA,writeObject:CA,writeRef:PA,writeTag:RA,writeTree:IA,stash:wA};X.Errors=VE;X.STAGE=Ss;X.TREE=Yr;X.WORKDIR=Qo;X.abortMerge=YE;X.add=KE;X.addNote=rk;X.addRemote=ik;X.annotatedTag=ak;X.branch=sk;X.checkout=dv;X.clone=dk;X.commit=hk;X.currentBranch=pk;X.default=T6;X.deleteBranch=mk;X.deleteRef=gk;X.deleteRemote=vk;X.deleteTag=wk;X.expandOid=yk;X.expandRef=bk;X.fastForward=Sk;X.fetch=Ek;X.findMergeBase=kk;X.findRoot=Tk;X.getConfig=Ck;X.getConfigAll=Pk;X.getRemoteInfo=Rk;X.getRemoteInfo2=Fk;X.hashBlob=$k;X.indexPack=Ok;X.init=Mk;X.isDescendent=Lk;X.isIgnored=Nk;X.listBranches=Bk;X.listFiles=Uk;X.listNotes=Gk;X.listRefs=jk;X.listRemotes=qk;X.listServerRefs=zk;X.listTags=Vk;X.log=Yk;X.merge=Xk;X.packObjects=Kk;X.pull=Jk;X.push=Qk;X.readBlob=rA;X.readCommit=mv;X.readNote=nA;X.readObject=iA;X.readTag=aA;X.readTree=sA;X.remove=oA;X.removeNote=lA;X.renameBranch=cA;X.resetIndex=fA;X.resolveRef=dA;X.setConfig=hA;X.stash=wA;X.status=yA;X.statusMatrix=_A;X.tag=xA;X.updateIndex=SA;X.version=EA;X.walk=kA;X.writeBlob=AA;X.writeCommit=TA;X.writeObject=CA;X.writeRef=PA;X.writeTag=RA;X.writeTree=IA});var HA=I((AZ,BA)=>{"use strict";p();BA.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var GA=I((CZ,UA)=>{p();var xv={px:{px:1,cm:37.79527559055118,mm:3.7795275590551185,in:96,pt:1.3333333333333333,pc:16},cm:{px:.026458333333333334,cm:1,mm:.1,in:2.54,pt:.035277777777777776,pc:.42333333333333334},mm:{px:.26458333333333334,cm:10,mm:1,in:25.4,pt:.35277777777777775,pc:4.233333333333333},in:{px:.010416666666666666,cm:.39370078740157477,mm:.03937007874015748,in:1,pt:.013888888888888888,pc:.16666666666666666},pt:{px:.75,cm:28.346456692913385,mm:2.834645669291339,in:72,pt:1,pc:12},pc:{px:.0625,cm:2.3622047244094486,mm:.2362204724409449,in:6,pt:.08333333333333333,pc:1},deg:{deg:1,grad:.9,rad:180/Math.PI,turn:360},grad:{deg:1.1111111111111112,grad:1,rad:200/Math.PI,turn:400},rad:{deg:Math.PI/180,grad:Math.PI/200,rad:1,turn:Math.PI*2},turn:{deg:.002777777777777778,grad:.0025,rad:.5/Math.PI,turn:1},s:{s:1,ms:.001},ms:{s:1e3,ms:1},Hz:{Hz:1,kHz:1e3},kHz:{Hz:.001,kHz:1},dpi:{dpi:1,dpcm:.39370078740157477,dppx:.010416666666666666},dpcm:{dpi:2.54,dpcm:1,dppx:.026458333333333334},dppx:{dpi:96,dpcm:37.79527559055118,dppx:1}};UA.exports=function(t,e,r,n){if(!xv.hasOwnProperty(r))throw new Error("Cannot convert to "+r);if(!xv[r].hasOwnProperty(e))throw new Error("Cannot convert from "+e+" to "+r);var i=xv[r][e]*t;return n!==!1?(n=Math.pow(10,parseInt(n)||5),Math.round(i*n)/n):i}});var rT=I(qi=>{"use strict";p();Object.defineProperty(qi,"__esModule",{value:!0});qi.fromRgba=nl;qi.fromRgb=Sv;qi.fromHsla=Ld;qi.fromHsl=eT;qi.fromString=tT;qi.default=void 0;var jA=VA(HA()),F6=VA(GA());function VA(t){return t&&t.__esModule?t:{default:t}}function $6(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function O6(t,e,r){return e&&qA(t.prototype,e),r&&qA(t,r),t}function hr(t,e){return N6(t)||L6(t,e)||D6(t,e)||M6()}function M6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D6(t,e){if(t){if(typeof t=="string")return zA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zA(t,e)}}function zA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function L6(t,e){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,i=!1,a=void 0;try{for(var s=t[Symbol.iterator](),o;!(n=(o=s.next()).done)&&(r.push(o.value),!(e&&r.length===e));n=!0);}catch(l){i=!0,a=l}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw a}}return r}}function N6(t){if(Array.isArray(t))return t}var WA=/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?$/,YA=/^#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])?$/,XA=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(0|1|0?\.\d+|\d+%))?\s*\)$/,ZA=/^rgba?\(\s*(\d+)\s+(\d+)\s+(\d+)(?:\s*\/\s*(0|1|0?\.\d+|\d+%))?\s*\)$/,KA=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(0|1|0?\.\d+|\d+%))?\s*\)$/,JA=/^rgba?\(\s*(\d+%)\s+(\d+%)\s+(\d+%)(?:\s*\/\s*(0|1|0?\.\d+|\d+%))?\s*\)$/,QA=/^hsla?\(\s*(\d+)(deg|rad|grad|turn)?\s*,\s*(\d+)%\s*,\s*(\d+)%(?:\s*,\s*(0|1|0?\.\d+|\d+%))?\s*\)$/;function nu(t,e){return t.indexOf(e)>-1}function B6(t,e,r){var n=t/255,i=e/255,a=r/255,s=Math.max(n,i,a),o=Math.min(n,i,a),l=s-o,c=(s+o)/2;if(l===0)return[0,0,c*100];var u=l/(1-Math.abs(2*c-1)),f=function(){switch(s){case n:return(i-a)/l%6;case i:return(a-n)/l+2;default:return(n-i)/l+4}}();return[f*60,u*100,c*100]}function H6(t,e,r){var n=t/60,i=e/100,a=r/100,s=(1-Math.abs(2*a-1))*i,o=s*(1-Math.abs(n%2-1)),l=a-s/2,c=function(){return n<1?[s,o,0]:n<2?[o,s,0]:n<3?[0,s,o]:n<4?[0,o,s]:n<5?[o,0,s]:[s,0,o]}(),u=hr(c,3),f=u[0],d=u[1],h=u[2];return[(f+l)*255,(d+l)*255,(h+l)*255]}var U6=function(){function t(e){var r=hr(e,4),n=r[0],i=r[1],a=r[2],s=r[3];$6(this,t),this.values=[Math.max(Math.min(parseInt(n,10),255),0),Math.max(Math.min(parseInt(i,10),255),0),Math.max(Math.min(parseInt(a,10),255),0),s==null?1:Math.max(Math.min(parseFloat(s),255),0)]}return O6(t,[{key:"toRgbString",value:function(){var r=hr(this.values,4),n=r[0],i=r[1],a=r[2],s=r[3];return s===1?"rgb(".concat(n,", ").concat(i,", ").concat(a,")"):"rgba(".concat(n,", ").concat(i,", ").concat(a,", ").concat(s,")")}},{key:"toHslString",value:function(){var r=this.toHslaArray(),n=hr(r,4),i=n[0],a=n[1],s=n[2],o=n[3];return o===1?"hsl(".concat(i,", ").concat(a,"%, ").concat(s,"%)"):"hsla(".concat(i,", ").concat(a,"%, ").concat(s,"%, ").concat(o,")")}},{key:"toHexString",value:function(){var r=hr(this.values,4),n=r[0],i=r[1],a=r[2],s=r[3];return n=Number(n).toString(16).padStart(2,"0"),i=Number(i).toString(16).padStart(2,"0"),a=Number(a).toString(16).padStart(2,"0"),s=s<1?parseInt(s*255,10).toString(16).padStart(2,"0"):"","#".concat(n).concat(i).concat(a).concat(s)}},{key:"toRgbaArray",value:function(){return this.values}},{key:"toHslaArray",value:function(){var r=hr(this.values,4),n=r[0],i=r[1],a=r[2],s=r[3],o=B6(n,i,a),l=hr(o,3),c=l[0],u=l[1],f=l[2];return[c,u,f,s]}}]),t}();function nl(t){var e=hr(t,4),r=e[0],n=e[1],i=e[2],a=e[3];return new U6([r,n,i,a])}function Sv(t){var e=hr(t,3),r=e[0],n=e[1],i=e[2];return nl([r,n,i,1])}function Ld(t){var e=hr(t,4),r=e[0],n=e[1],i=e[2],a=e[3],s=H6(r,n,i),o=hr(s,3),l=o[0],c=o[1],u=o[2];return nl([l,c,u,a])}function eT(t){var e=hr(t,3),r=e[0],n=e[1],i=e[2];return Ld([r,n,i,1])}function G6(t){var e=WA.exec(t)||YA.exec(t),r=hr(e,5),n=r[1],i=r[2],a=r[3],s=r[4];return n=parseInt(n.length<2?n.repeat(2):n,16),i=parseInt(i.length<2?i.repeat(2):i,16),a=parseInt(a.length<2?a.repeat(2):a,16),s=s&&(parseInt(s.length<2?s.repeat(2):s,16)/255).toPrecision(1)||1,nl([n,i,a,s])}function j6(t){var e=XA.exec(t)||KA.exec(t)||ZA.exec(t)||JA.exec(t),r=hr(e,5),n=r[1],i=r[2],a=r[3],s=r[4];return n=nu(n,"%")?parseInt(n,10)*255/100:parseInt(n,10),i=nu(i,"%")?parseInt(i,10)*255/100:parseInt(i,10),a=nu(a,"%")>0?parseInt(a,10)*255/100:parseInt(a,10),s=s===void 0?1:parseFloat(s)/(nu(s,"%")?100:1),nl([n,i,a,s])}function q6(t){var e=QA.exec(t),r=hr(e,6),n=r[1],i=r[2],a=r[3],s=r[4],o=r[5];return i=i||"deg",n=(0,F6.default)(parseFloat(n),i,"deg"),a=parseFloat(a),s=parseFloat(s),o=o===void 0?1:parseFloat(o)/(nu(o,"%")?100:1),Ld([n,a,s,o])}function tT(t){return jA.default[t]?Sv(jA.default[t]):WA.test(t)||YA.test(t)?G6(t):XA.test(t)||KA.test(t)||ZA.test(t)||JA.test(t)?j6(t):QA.test(t)?q6(t):null}var z6={fromString:tT,fromRgb:Sv,fromRgba:nl,fromHsl:eT,fromHsla:Ld};qi.default=z6});var Ev=I((FZ,iT)=>{"use strict";p();var nT=Object.prototype.toString;iT.exports=function(e){var r=nT.call(e),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&nT.call(e.callee)==="[object Function]"),n}});var hT=I((OZ,dT)=>{"use strict";p();var fT;Object.keys||(iu=Object.prototype.hasOwnProperty,kv=Object.prototype.toString,aT=Ev(),Av=Object.prototype.propertyIsEnumerable,sT=!Av.call({toString:null},"toString"),oT=Av.call(function(){},"prototype"),au=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Nd=function(t){var e=t.constructor;return e&&e.prototype===t},lT={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},cT=function(){if(typeof window=="undefined")return!1;for(var t in window)try{if(!lT["$"+t]&&iu.call(window,t)&&window[t]!==null&&typeof window[t]=="object")try{Nd(window[t])}catch(e){return!0}}catch(e){return!0}return!1}(),uT=function(t){if(typeof window=="undefined"||!cT)return Nd(t);try{return Nd(t)}catch(e){return!1}},fT=function(e){var r=e!==null&&typeof e=="object",n=kv.call(e)==="[object Function]",i=aT(e),a=r&&kv.call(e)==="[object String]",s=[];if(!r&&!n&&!i)throw new TypeError("Object.keys called on a non-object");var o=oT&&n;if(a&&e.length>0&&!iu.call(e,0))for(var l=0;l<e.length;++l)s.push(String(l));if(i&&e.length>0)for(var c=0;c<e.length;++c)s.push(String(c));else for(var u in e)!(o&&u==="prototype")&&iu.call(e,u)&&s.push(String(u));if(sT)for(var f=uT(e),d=0;d<au.length;++d)!(f&&au[d]==="constructor")&&iu.call(e,au[d])&&s.push(au[d]);return s});var iu,kv,aT,Av,sT,oT,au,Nd,lT,cT,uT;dT.exports=fT});var Hd=I((DZ,gT)=>{"use strict";p();var V6=Array.prototype.slice,W6=Ev(),pT=Object.keys,Bd=pT?function(e){return pT(e)}:hT(),mT=Object.keys;Bd.shim=function(){if(Object.keys){var e=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);e||(Object.keys=function(n){return W6(n)?mT(V6.call(n)):mT(n)})}else Object.keys=Bd;return Object.keys||Bd};gT.exports=Bd});var La=I((NZ,bT)=>{"use strict";p();var Y6=Hd(),X6=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Z6=Object.prototype.toString,K6=Array.prototype.concat,vT=Gf(),J6=function(t){return typeof t=="function"&&Z6.call(t)==="[object Function]"},wT=jf()(),Q6=function(t,e,r,n){if(e in t){if(n===!0){if(t[e]===r)return}else if(!J6(n)||!n())return}wT?vT(t,e,r,!0):vT(t,e,r)},yT=function(t,e){var r=arguments.length>2?arguments[2]:{},n=Y6(e);X6&&(n=K6.call(n,Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i+=1)Q6(t,n[i],e[n[i]],r[n[i]])};yT.supportsDescriptors=!!wT;bT.exports=yT});var Tv=I((HZ,ET)=>{"use strict";p();var e5=Hd(),xT=uc()(),ST=Mt(),Ud=Cf(),t5=ST("Array.prototype.push"),_T=ST("Object.prototype.propertyIsEnumerable"),r5=xT?Ud.getOwnPropertySymbols:null;ET.exports=function(e,r){if(e==null)throw new TypeError("target must be an object");var n=Ud(e);if(arguments.length===1)return n;for(var i=1;i<arguments.length;++i){var a=Ud(arguments[i]),s=e5(a),o=xT&&(Ud.getOwnPropertySymbols||r5);if(o)for(var l=o(a),c=0;c<l.length;++c){var u=l[c];_T(a,u)&&t5(s,u)}for(var f=0;f<s.length;++f){var d=s[f];if(_T(a,d)){var h=a[d];n[d]=h}}}return n}});var Pv=I((GZ,kT)=>{"use strict";p();var Cv=Tv(),n5=function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),r={},n=0;n<e.length;++n)r[e[n]]=e[n];var i=Object.assign({},r),a="";for(var s in i)a+=s;return t!==a},i5=function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(e){return t[1]==="y"}return!1};kT.exports=function(){return!Object.assign||n5()||i5()?Cv:Object.assign}});var TT=I((qZ,AT)=>{"use strict";p();var a5=La(),s5=Pv();AT.exports=function(){var e=s5();return a5(Object,{assign:e},{assign:function(){return Object.assign!==e}}),e}});var IT=I((VZ,RT)=>{"use strict";p();var o5=La(),l5=ls(),c5=Tv(),CT=Pv(),u5=TT(),f5=l5.apply(CT()),PT=function(e,r){return f5(Object,arguments)};o5(PT,{getPolyfill:CT,implementation:c5,shim:u5});RT.exports=PT});var Rv=I((YZ,OT)=>{"use strict";p();var FT=ri(),$T=ls(),d5=$T(FT("String.prototype.indexOf"));OT.exports=function(e,r){var n=FT(e,!!r);return typeof n=="function"&&d5(e,".prototype.")>-1?$T(n):n}});var DT=I((ZZ,MT)=>{"use strict";p();var ou=function(){return typeof function(){}.name=="string"},su=Object.getOwnPropertyDescriptor;if(su)try{su([],"length")}catch(t){su=null}ou.functionsHaveConfigurableNames=function(){if(!ou()||!su)return!1;var e=su(function(){},"name");return!!e&&!!e.configurable};var h5=Function.prototype.bind;ou.boundFunctionsHaveNames=function(){return ou()&&typeof h5=="function"&&function(){}.bind().name!==""};MT.exports=ou});var BT=I((JZ,NT)=>{"use strict";p();var LT=Gf(),p5=jf()(),m5=DT().functionsHaveConfigurableNames(),g5=_r();NT.exports=function(e,r){if(typeof e!="function")throw new g5("`fn` is not a function");var n=arguments.length>2&&!!arguments[2];return(!n||m5)&&(p5?LT(e,"name",r,!0,!0):LT(e,"name",r)),e}});var Iv=I((eK,HT)=>{"use strict";p();var v5=BT(),w5=_r(),y5=Object;HT.exports=v5(function(){if(this==null||this!==y5(this))throw new w5("RegExp.prototype.flags getter called on non-object");var e="";return this.hasIndices&&(e+="d"),this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.unicodeSets&&(e+="v"),this.sticky&&(e+="y"),e},"get flags",!0)});var Fv=I((rK,UT)=>{"use strict";p();var b5=Iv(),_5=La().supportsDescriptors,x5=Object.getOwnPropertyDescriptor;UT.exports=function(){if(_5&&/a/mig.flags==="gim"){var e=x5(RegExp.prototype,"flags");if(e&&typeof e.get=="function"&&"dotAll"in RegExp.prototype&&"hasIndices"in RegExp.prototype){var r="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){r+="d"}}),Object.defineProperty(n,"sticky",{get:function(){r+="y"}}),e.get.call(n),r==="dy")return e.get}}return b5}});var qT=I((iK,jT)=>{"use strict";p();var S5=La().supportsDescriptors,E5=Fv(),k5=va(),A5=Object.defineProperty,T5=Mm(),GT=Df(),C5=/a/;jT.exports=function(){if(!S5||!GT)throw new T5("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=E5(),r=GT(C5),n=k5(r,"flags");return(!n||n.get!==e)&&A5(r,"flags",{configurable:!0,enumerable:!1,get:e}),e}});var YT=I((sK,WT)=>{"use strict";p();var P5=La(),R5=ls(),I5=Iv(),zT=Fv(),F5=qT(),VT=R5(zT());P5(VT,{getPolyfill:zT,implementation:I5,shim:F5});WT.exports=VT});var Ov=I((lK,ZT)=>{"use strict";p();var $5=wa()(),O5=Mt(),$v=O5("Object.prototype.toString"),Gd=function(e){return $5&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:$v(e)==="[object Arguments]"},XT=function(e){return Gd(e)?!0:e!==null&&typeof e=="object"&&"length"in e&&typeof e.length=="number"&&e.length>=0&&$v(e)!=="[object Array]"&&"callee"in e&&$v(e.callee)==="[object Function]"},M5=function(){return Gd(arguments)}();Gd.isLegacyArguments=XT;ZT.exports=M5?Gd:XT});var KT=I(()=>{p()});var du=I((hK,vC)=>{p();var qv=typeof Map=="function"&&Map.prototype,Mv=Object.getOwnPropertyDescriptor&&qv?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,qd=qv&&Mv&&typeof Mv.get=="function"?Mv.get:null,JT=qv&&Map.prototype.forEach,zv=typeof Set=="function"&&Set.prototype,Dv=Object.getOwnPropertyDescriptor&&zv?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,zd=zv&&Dv&&typeof Dv.get=="function"?Dv.get:null,QT=zv&&Set.prototype.forEach,D5=typeof WeakMap=="function"&&WeakMap.prototype,cu=D5?WeakMap.prototype.has:null,L5=typeof WeakSet=="function"&&WeakSet.prototype,uu=L5?WeakSet.prototype.has:null,N5=typeof WeakRef=="function"&&WeakRef.prototype,eC=N5?WeakRef.prototype.deref:null,B5=Boolean.prototype.valueOf,H5=Object.prototype.toString,U5=Function.prototype.toString,G5=String.prototype.match,Vv=String.prototype.slice,Na=String.prototype.replace,j5=String.prototype.toUpperCase,tC=String.prototype.toLowerCase,uC=RegExp.prototype.test,rC=Array.prototype.concat,fi=Array.prototype.join,q5=Array.prototype.slice,nC=Math.floor,Bv=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Lv=Object.getOwnPropertySymbols,Hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,il=typeof Symbol=="function"&&typeof Symbol.iterator=="object",fu=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===il||!0)?Symbol.toStringTag:null,fC=Object.prototype.propertyIsEnumerable,iC=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function aC(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||uC.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-nC(-t):nC(t);if(n!==t){var i=String(n),a=Vv.call(e,i.length+1);return Na.call(i,r,"$&_")+"."+Na.call(Na.call(a,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Na.call(e,r,"$&_")}var Uv=KT(),sC=Uv.custom,oC=pC(sC)?sC:null,dC={__proto__:null,double:'"',single:"'"},z5={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};vC.exports=function t(e,r,n,i){var a=r||{};if(zi(a,"quoteStyle")&&!zi(dC,a.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(zi(a,"maxStringLength")&&(typeof a.maxStringLength=="number"?a.maxStringLength<0&&a.maxStringLength!==1/0:a.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=zi(a,"customInspect")?a.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(zi(a,"indent")&&a.indent!==null&&a.indent!=="	"&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(zi(a,"numericSeparator")&&typeof a.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var o=a.numericSeparator;if(typeof e=="undefined")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return gC(e,a);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return o?aC(e,l):l}if(typeof e=="bigint"){var c=String(e)+"n";return o?aC(e,c):c}var u=typeof a.depth=="undefined"?5:a.depth;if(typeof n=="undefined"&&(n=0),n>=u&&u>0&&typeof e=="object")return Gv(e)?"[Array]":"[Object]";var f=c4(a,n);if(typeof i=="undefined")i=[];else if(mC(i,e)>=0)return"[Circular]";function d(B,N,le){if(N&&(i=q5.call(i),i.push(N)),le){var Ae={depth:a.depth};return zi(a,"quoteStyle")&&(Ae.quoteStyle=a.quoteStyle),t(B,Ae,n+1,i)}return t(B,a,n+1,i)}if(typeof e=="function"&&!lC(e)){var h=e4(e),m=jd(e,d);return"[Function"+(h?": "+h:" (anonymous)")+"]"+(m.length>0?" { "+fi.call(m,", ")+" }":"")}if(pC(e)){var g=il?Na.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Hv.call(e);return typeof e=="object"&&!il?lu(g):g}if(s4(e)){for(var v="<"+tC.call(String(e.nodeName)),w=e.attributes||[],b=0;b<w.length;b++)v+=" "+w[b].name+"="+hC(V5(w[b].value),"double",a);return v+=">",e.childNodes&&e.childNodes.length&&(v+="..."),v+="</"+tC.call(String(e.nodeName))+">",v}if(Gv(e)){if(e.length===0)return"[]";var k=jd(e,d);return f&&!l4(k)?"["+jv(k,f)+"]":"[ "+fi.call(k,", ")+" ]"}if(Y5(e)){var E=jd(e,d);return!("cause"in Error.prototype)&&"cause"in e&&!fC.call(e,"cause")?"{ ["+String(e)+"] "+fi.call(rC.call("[cause]: "+d(e.cause),E),", ")+" }":E.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+fi.call(E,", ")+" }"}if(typeof e=="object"&&s){if(oC&&typeof e[oC]=="function"&&Uv)return Uv(e,{depth:u-n});if(s!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(t4(e)){var S=[];return JT&&JT.call(e,function(B,N){S.push(d(N,e,!0)+" => "+d(B,e))}),cC("Map",qd.call(e),S,f)}if(i4(e)){var A=[];return QT&&QT.call(e,function(B){A.push(d(B,e))}),cC("Set",zd.call(e),A,f)}if(r4(e))return Nv("WeakMap");if(a4(e))return Nv("WeakSet");if(n4(e))return Nv("WeakRef");if(Z5(e))return lu(d(Number(e)));if(J5(e))return lu(d(Bv.call(e)));if(K5(e))return lu(B5.call(e));if(X5(e))return lu(d(String(e)));if(typeof window!="undefined"&&e===window)return"{ [object Window] }";if(typeof globalThis!="undefined"&&e===globalThis||typeof global!="undefined"&&e===global)return"{ [object globalThis] }";if(!W5(e)&&!lC(e)){var y=jd(e,d),x=iC?iC(e)===Object.prototype:e instanceof Object||e.constructor===Object,_=e instanceof Object?"":"null prototype",T=!x&&fu&&Object(e)===e&&fu in e?Vv.call(Ba(e),8,-1):_?"Object":"",P=x||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",D=P+(T||_?"["+fi.call(rC.call([],T||[],_||[]),": ")+"] ":"");return y.length===0?D+"{}":f?D+"{"+jv(y,f)+"}":D+"{ "+fi.call(y,", ")+" }"}return String(e)};function hC(t,e,r){var n=r.quoteStyle||e,i=dC[n];return i+t+i}function V5(t){return Na.call(String(t),/"/g,"&quot;")}function ks(t){return!fu||!(typeof t=="object"&&(fu in t||typeof t[fu]!="undefined"))}function Gv(t){return Ba(t)==="[object Array]"&&ks(t)}function W5(t){return Ba(t)==="[object Date]"&&ks(t)}function lC(t){return Ba(t)==="[object RegExp]"&&ks(t)}function Y5(t){return Ba(t)==="[object Error]"&&ks(t)}function X5(t){return Ba(t)==="[object String]"&&ks(t)}function Z5(t){return Ba(t)==="[object Number]"&&ks(t)}function K5(t){return Ba(t)==="[object Boolean]"&&ks(t)}function pC(t){if(il)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!Hv)return!1;try{return Hv.call(t),!0}catch(e){}return!1}function J5(t){if(!t||typeof t!="object"||!Bv)return!1;try{return Bv.call(t),!0}catch(e){}return!1}var Q5=Object.prototype.hasOwnProperty||function(t){return t in this};function zi(t,e){return Q5.call(t,e)}function Ba(t){return H5.call(t)}function e4(t){if(t.name)return t.name;var e=G5.call(U5.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function mC(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function t4(t){if(!qd||!t||typeof t!="object")return!1;try{qd.call(t);try{zd.call(t)}catch(e){return!0}return t instanceof Map}catch(e){}return!1}function r4(t){if(!cu||!t||typeof t!="object")return!1;try{cu.call(t,cu);try{uu.call(t,uu)}catch(e){return!0}return t instanceof WeakMap}catch(e){}return!1}function n4(t){if(!eC||!t||typeof t!="object")return!1;try{return eC.call(t),!0}catch(e){}return!1}function i4(t){if(!zd||!t||typeof t!="object")return!1;try{zd.call(t);try{qd.call(t)}catch(e){return!0}return t instanceof Set}catch(e){}return!1}function a4(t){if(!uu||!t||typeof t!="object")return!1;try{uu.call(t,uu);try{cu.call(t,cu)}catch(e){return!0}return t instanceof WeakSet}catch(e){}return!1}function s4(t){return!t||typeof t!="object"?!1:typeof HTMLElement!="undefined"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function gC(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return gC(Vv.call(t,0,e.maxStringLength),e)+n}var i=z5[e.quoteStyle||"single"];i.lastIndex=0;var a=Na.call(Na.call(t,i,"\\$1"),/[\x00-\x1f]/g,o4);return hC(a,"single",e)}function o4(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+j5.call(e.toString(16))}function lu(t){return"Object("+t+")"}function Nv(t){return t+" { ? }"}function cC(t,e,r,n){var i=n?jv(r,n):fi.call(r,", ");return t+" ("+e+") {"+i+"}"}function l4(t){for(var e=0;e<t.length;e++)if(mC(t[e],`
`)>=0)return!1;return!0}function c4(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=fi.call(Array(t.indent+1)," ");else return null;return{base:r,prev:fi.call(Array(e+1),r)}}function jv(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+fi.call(t,","+r)+`
`+e.prev}function jd(t,e){var r=Gv(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=zi(t,i)?e(t[i],t):""}var a=typeof Lv=="function"?Lv(t):[],s;if(il){s={};for(var o=0;o<a.length;o++)s["$"+a[o]]=a[o]}for(var l in t)zi(t,l)&&(r&&String(Number(l))===l&&l<t.length||il&&s["$"+l]instanceof Symbol||(uC.call(/[^\w$]/,l)?n.push(e(l,t)+": "+e(t[l],t)):n.push(l+": "+e(t[l],t))));if(typeof Lv=="function")for(var c=0;c<a.length;c++)fC.call(t,a[c])&&n.push("["+e(a[c])+"]: "+e(t[a[c]],t));return n}});var yC=I((mK,wC)=>{"use strict";p();var u4=du(),f4=_r(),Vd=function(t,e,r){for(var n=t,i;(i=n.next)!=null;n=i)if(i.key===e)return n.next=i.next,r||(i.next=t.next,t.next=i),i},d4=function(t,e){if(t){var r=Vd(t,e);return r&&r.value}},h4=function(t,e,r){var n=Vd(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},p4=function(t,e){return t?!!Vd(t,e):!1},m4=function(t,e){if(t)return Vd(t,e,!0)};wC.exports=function(){var e,r={assert:function(n){if(!r.has(n))throw new f4("Side channel does not contain "+u4(n))},delete:function(n){var i=e&&e.next,a=m4(e,n);return a&&i&&i===a&&(e=void 0),!!a},get:function(n){return d4(e,n)},has:function(n){return p4(e,n)},set:function(n,i){e||(e={next:void 0}),h4(e,n,i)}};return r}});var Wv=I((vK,_C)=>{"use strict";p();var g4=ri(),hu=Mt(),v4=du(),w4=_r(),bC=g4("%Map%",!0),y4=hu("Map.prototype.get",!0),b4=hu("Map.prototype.set",!0),_4=hu("Map.prototype.has",!0),x4=hu("Map.prototype.delete",!0),S4=hu("Map.prototype.size",!0);_C.exports=!!bC&&function(){var e,r={assert:function(n){if(!r.has(n))throw new w4("Side channel does not contain "+v4(n))},delete:function(n){if(e){var i=x4(e,n);return S4(e)===0&&(e=void 0),i}return!1},get:function(n){if(e)return y4(e,n)},has:function(n){return e?_4(e,n):!1},set:function(n,i){e||(e=new bC),b4(e,n,i)}};return r}});var SC=I((yK,xC)=>{"use strict";p();var E4=ri(),Yd=Mt(),k4=du(),Wd=Wv(),A4=_r(),al=E4("%WeakMap%",!0),T4=Yd("WeakMap.prototype.get",!0),C4=Yd("WeakMap.prototype.set",!0),P4=Yd("WeakMap.prototype.has",!0),R4=Yd("WeakMap.prototype.delete",!0);xC.exports=al?function(){var e,r,n={assert:function(i){if(!n.has(i))throw new A4("Side channel does not contain "+k4(i))},delete:function(i){if(al&&i&&(typeof i=="object"||typeof i=="function")){if(e)return R4(e,i)}else if(Wd&&r)return r.delete(i);return!1},get:function(i){return al&&i&&(typeof i=="object"||typeof i=="function")&&e?T4(e,i):r&&r.get(i)},has:function(i){return al&&i&&(typeof i=="object"||typeof i=="function")&&e?P4(e,i):!!r&&r.has(i)},set:function(i,a){al&&i&&(typeof i=="object"||typeof i=="function")?(e||(e=new al),C4(e,i,a)):Wd&&(r||(r=Wd()),r.set(i,a))}};return n}:Wd});var Yv=I((_K,EC)=>{"use strict";p();var I4=_r(),F4=du(),$4=yC(),O4=Wv(),M4=SC(),D4=M4||O4||$4;EC.exports=function(){var e,r={assert:function(n){if(!r.has(n))throw new I4("Side channel does not contain "+F4(n))},delete:function(n){return!!e&&e.delete(n)},get:function(n){return e&&e.get(n)},has:function(n){return!!e&&e.has(n)},set:function(n,i){e||(e=D4()),e.set(n,i)}};return r}});var AC=I((SK,kC)=>{"use strict";p();var L4=Lf(),pu=Yv()(),Vi=_r(),Xv={assert:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new Vi("`O` is not an object");if(typeof e!="string")throw new Vi("`slot` must be a string");if(pu.assert(t),!Xv.has(t,e))throw new Vi("`"+e+"` is not present on `O`")},get:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new Vi("`O` is not an object");if(typeof e!="string")throw new Vi("`slot` must be a string");var r=pu.get(t);return r&&r["$"+e]},has:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new Vi("`O` is not an object");if(typeof e!="string")throw new Vi("`slot` must be a string");var r=pu.get(t);return!!r&&L4(r,"$"+e)},set:function(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new Vi("`O` is not an object");if(typeof e!="string")throw new Vi("`slot` must be a string");var n=pu.get(t);n||(n={},pu.set(t,n)),n["$"+e]=r}};Object.freeze&&Object.freeze(Xv);kC.exports=Xv});var PC=I((kK,CC)=>{"use strict";p();var mu=AC(),N4=Pf(),TC=typeof StopIteration=="object"?StopIteration:null;CC.exports=function(e){if(!TC)throw new N4("this environment lacks StopIteration");mu.set(e,"[[Done]]",!1);var r={next:function(){var i=mu.get(this,"[[Iterator]]"),a=!!mu.get(i,"[[Done]]");try{return{done:a,value:a?void 0:i.next()}}catch(s){if(mu.set(i,"[[Done]]",!0),s!==TC)throw s;return{done:!0,value:void 0}}}};return mu.set(r,"[[Iterator]]",e),r}});var Zv=I((TK,IC)=>{"use strict";p();var RC=Mt(),B4=RC("String.prototype.valueOf"),H4=function(e){try{return B4(e),!0}catch(r){return!1}},U4=RC("Object.prototype.toString"),G4="[object String]",j4=wa()();IC.exports=function(e){return typeof e=="string"?!0:!e||typeof e!="object"?!1:j4?H4(e):U4(e)===G4}});var Jv=I((PK,OC)=>{"use strict";p();var Kv=typeof Map=="function"&&Map.prototype?Map:null,q4=typeof Set=="function"&&Set.prototype?Set:null,Xd;Kv||(Xd=function(e){return!1});var $C=Kv?Map.prototype.has:null,FC=q4?Set.prototype.has:null;!Xd&&!$C&&(Xd=function(e){return!1});OC.exports=Xd||function(e){if(!e||typeof e!="object")return!1;try{if($C.call(e),FC)try{FC.call(e)}catch(r){return!0}return e instanceof Kv}catch(r){}return!1}});var ew=I((IK,LC)=>{"use strict";p();var z4=typeof Map=="function"&&Map.prototype?Map:null,Qv=typeof Set=="function"&&Set.prototype?Set:null,Zd;Qv||(Zd=function(e){return!1});var MC=z4?Map.prototype.has:null,DC=Qv?Set.prototype.has:null;!Zd&&!DC&&(Zd=function(e){return!1});LC.exports=Zd||function(e){if(!e||typeof e!="object")return!1;try{if(DC.call(e),MC)try{MC.call(e)}catch(r){return!0}return e instanceof Qv}catch(r){}return!1}});var XC=I(($K,Qd)=>{"use strict";p();var NC=Ov(),BC=PC();Ff()()||uc()()?(Kd=Symbol.iterator,Qd.exports=function(e){if(e!=null&&typeof e[Kd]!="undefined")return e[Kd]();if(NC(e))return Array.prototype[Kd].call(e)}):(HC=Tf(),UC=Zv(),tw=ri(),GC=tw("%Map%",!0),jC=tw("%Set%",!0),vn=Rv(),rw=vn("Array.prototype.push"),nw=vn("String.prototype.charCodeAt"),qC=vn("String.prototype.slice"),zC=function(e,r){var n=e.length;if(r+1>=n)return r+1;var i=nw(e,r);if(i<55296||i>56319)return r+1;var a=nw(e,r+1);return a<56320||a>57343?r+1:r+2},Jd=function(e){var r=0;return{next:function(){var i=r>=e.length,a;return i||(a=e[r],r+=1),{done:i,value:a}}}},iw=function(e,r){if(HC(e)||NC(e))return Jd(e);if(UC(e)){var n=0;return{next:function(){var a=zC(e,n),s=qC(e,n,a);return n=a,{done:a>e.length,value:s}}}}if(r&&typeof e["_es6-shim iterator_"]!="undefined")return e["_es6-shim iterator_"]()},!GC&&!jC?Qd.exports=function(e){if(e!=null)return iw(e,!0)}:(VC=Jv(),WC=ew(),aw=vn("Map.prototype.forEach",!0),sw=vn("Set.prototype.forEach",!0),(typeof process=="undefined"||!process.versions||!process.versions.node)&&(ow=vn("Map.prototype.iterator",!0),lw=vn("Set.prototype.iterator",!0)),cw=vn("Map.prototype.@@iterator",!0)||vn("Map.prototype._es6-shim iterator_",!0),uw=vn("Set.prototype.@@iterator",!0)||vn("Set.prototype._es6-shim iterator_",!0),YC=function(e){if(VC(e)){if(ow)return BC(ow(e));if(cw)return cw(e);if(aw){var r=[];return aw(e,function(i,a){rw(r,[a,i])}),Jd(r)}}if(WC(e)){if(lw)return BC(lw(e));if(uw)return uw(e);if(sw){var n=[];return sw(e,function(i){rw(n,i)}),Jd(n)}}},Qd.exports=function(e){return YC(e)||iw(e)}));var Kd,HC,UC,tw,GC,jC,vn,rw,nw,qC,zC,Jd,iw,VC,WC,aw,sw,ow,lw,cw,uw,YC});var fw=I((MK,KC)=>{"use strict";p();var ZC=function(t){return t!==t};KC.exports=function(e,r){return e===0&&r===0?1/e===1/r:!!(e===r||ZC(e)&&ZC(r))}});var dw=I((LK,JC)=>{"use strict";p();var V4=fw();JC.exports=function(){return typeof Object.is=="function"?Object.is:V4}});var e2=I((BK,QC)=>{"use strict";p();var W4=dw(),Y4=La();QC.exports=function(){var e=W4();return Y4(Object,{is:e},{is:function(){return Object.is!==e}}),e}});var i2=I((UK,n2)=>{"use strict";p();var X4=La(),Z4=ls(),K4=fw(),t2=dw(),J4=e2(),r2=Z4(t2(),Object);X4(r2,{getPolyfill:t2,implementation:K4,shim:J4});n2.exports=r2});var pw=I((jK,l2)=>{"use strict";p();var Q4=ls(),o2=Mt(),eU=ri(),hw=eU("%ArrayBuffer%",!0),eh=o2("ArrayBuffer.prototype.byteLength",!0),tU=o2("Object.prototype.toString"),a2=!!hw&&!eh&&new hw(0).slice,s2=!!a2&&Q4(a2);l2.exports=eh||s2?function(e){if(!e||typeof e!="object")return!1;try{return eh?eh(e):s2(e,0),!0}catch(r){return!1}}:hw?function(e){return tU(e)==="[object ArrayBuffer]"}:function(e){return!1}});var f2=I((zK,u2)=>{"use strict";p();var c2=Mt(),rU=c2("Date.prototype.getDay"),nU=function(e){try{return rU(e),!0}catch(r){return!1}},iU=c2("Object.prototype.toString"),aU="[object Date]",sU=wa()();u2.exports=function(e){return typeof e!="object"||e===null?!1:sU?nU(e):iU(e)===aU}});var ww=I((WK,g2)=>{"use strict";p();var d2=Mt(),oU=wa()(),lU=Lf(),cU=va(),vw;oU?(h2=d2("RegExp.prototype.exec"),mw={},th=function(){throw mw},gw={toString:th,valueOf:th},typeof Symbol.toPrimitive=="symbol"&&(gw[Symbol.toPrimitive]=th),vw=function(e){if(!e||typeof e!="object")return!1;var r=cU(e,"lastIndex"),n=r&&lU(r,"value");if(!n)return!1;try{h2(e,gw)}catch(i){return i===mw}}):(p2=d2("Object.prototype.toString"),m2="[object RegExp]",vw=function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:p2(e)===m2});var h2,mw,th,gw,p2,m2;g2.exports=vw});var y2=I((XK,w2)=>{"use strict";p();var uU=Mt(),v2=uU("SharedArrayBuffer.prototype.byteLength",!0);w2.exports=v2?function(e){if(!e||typeof e!="object")return!1;try{return v2(e),!0}catch(r){return!1}}:function(e){return!1}});var x2=I((KK,_2)=>{"use strict";p();var b2=Mt(),fU=b2("Number.prototype.toString"),dU=function(e){try{return fU(e),!0}catch(r){return!1}},hU=b2("Object.prototype.toString"),pU="[object Number]",mU=wa()();_2.exports=function(e){return typeof e=="number"?!0:!e||typeof e!="object"?!1:mU?dU(e):hU(e)===pU}});var k2=I((QK,E2)=>{"use strict";p();var S2=Mt(),gU=S2("Boolean.prototype.toString"),vU=S2("Object.prototype.toString"),wU=function(e){try{return gU(e),!0}catch(r){return!1}},yU="[object Boolean]",bU=wa()();E2.exports=function(e){return typeof e=="boolean"?!0:e===null||typeof e!="object"?!1:bU?wU(e):vU(e)===yU}});var T2=I((tJ,A2)=>{"use strict";p();var _U=Mt(),xU=ww(),SU=_U("RegExp.prototype.exec"),EU=_r();A2.exports=function(e){if(!xU(e))throw new EU("`regex` must be a RegExp");return function(n){return SU(e,n)!==null}}});var F2=I((nJ,yw)=>{"use strict";p();var I2=Mt(),kU=I2("Object.prototype.toString"),AU=Ff()(),TU=T2();AU?(C2=I2("Symbol.prototype.toString"),P2=TU(/^Symbol\(.*\)$/),R2=function(e){return typeof e.valueOf()!="symbol"?!1:P2(C2(e))},yw.exports=function(e){if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||kU(e)!=="[object Symbol]")return!1;try{return R2(e)}catch(r){return!1}}):yw.exports=function(e){return!1};var C2,P2,R2});var M2=I((aJ,O2)=>{"use strict";p();var $2=typeof BigInt!="undefined"&&BigInt;O2.exports=function(){return typeof $2=="function"&&typeof BigInt=="function"&&typeof $2(42)=="bigint"&&typeof BigInt(42)=="bigint"}});var N2=I((oJ,bw)=>{"use strict";p();var CU=M2()();CU?(D2=BigInt.prototype.valueOf,L2=function(e){try{return D2.call(e),!0}catch(r){}return!1},bw.exports=function(e){return e===null||typeof e=="undefined"||typeof e=="boolean"||typeof e=="string"||typeof e=="number"||typeof e=="symbol"||typeof e=="function"?!1:typeof e=="bigint"?!0:L2(e)}):bw.exports=function(e){return!1};var D2,L2});var H2=I((cJ,B2)=>{"use strict";p();var PU=Zv(),RU=x2(),IU=k2(),FU=F2(),$U=N2();B2.exports=function(e){if(e==null||typeof e!="object"&&typeof e!="function")return null;if(PU(e))return"String";if(RU(e))return"Number";if(IU(e))return"Boolean";if(FU(e))return"Symbol";if($U(e))return"BigInt"}});var j2=I((fJ,G2)=>{"use strict";p();var rh=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,U2=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,nh;rh||(nh=function(e){return!1});var xw=rh?rh.prototype.has:null,_w=U2?U2.prototype.has:null;!nh&&!xw&&(nh=function(e){return!1});G2.exports=nh||function(e){if(!e||typeof e!="object")return!1;try{if(xw.call(e,xw),_w)try{_w.call(e,_w)}catch(r){return!0}return e instanceof rh}catch(r){}return!1}});var z2=I((hJ,Ew)=>{"use strict";p();var OU=ri(),q2=Mt(),MU=OU("%WeakSet%",!0),Sw=q2("WeakSet.prototype.has",!0);Sw?(ih=q2("WeakMap.prototype.has",!0),Ew.exports=function(e){if(!e||typeof e!="object")return!1;try{if(Sw(e,Sw),ih)try{ih(e,ih)}catch(r){return!0}return e instanceof MU}catch(r){}return!1}):Ew.exports=function(e){return!1};var ih});var W2=I((mJ,V2)=>{"use strict";p();var DU=Jv(),LU=ew(),NU=j2(),BU=z2();V2.exports=function(e){if(e&&typeof e=="object"){if(DU(e))return"Map";if(LU(e))return"Set";if(NU(e))return"WeakMap";if(BU(e))return"WeakSet"}return!1}});var Z2=I((vJ,X2)=>{"use strict";p();var HU=Mt(),Y2=HU("ArrayBuffer.prototype.byteLength",!0),UU=pw();X2.exports=function(e){return UU(e)?Y2?Y2(e):e.byteLength:NaN}});var _P=I((yJ,bP)=>{"use strict";p();var vP=IT(),di=Rv(),K2=YT(),GU=ri(),sl=XC(),jU=Yv(),J2=i2(),Q2=Ov(),eP=Tf(),tP=pw(),rP=f2(),nP=ww(),iP=y2(),aP=Hd(),sP=H2(),oP=W2(),lP=Km(),cP=Z2(),uP=di("SharedArrayBuffer.prototype.byteLength",!0),fP=di("Date.prototype.getTime"),kw=Object.getPrototypeOf,dP=di("Object.prototype.toString"),sh=GU("%Set%",!0),Aw=di("Map.prototype.has",!0),oh=di("Map.prototype.get",!0),hP=di("Map.prototype.size",!0),lh=di("Set.prototype.add",!0),wP=di("Set.prototype.delete",!0),ch=di("Set.prototype.has",!0),ah=di("Set.prototype.size",!0);function pP(t,e,r,n){for(var i=sl(t),a;(a=i.next())&&!a.done;)if(Mn(e,a.value,r,n))return wP(t,a.value),!0;return!1}function yP(t){if(typeof t=="undefined")return null;if(typeof t!="object")return typeof t=="symbol"?!1:typeof t=="string"||typeof t=="number"?+t==+t:!0}function qU(t,e,r,n,i,a){var s=yP(r);if(s!=null)return s;var o=oh(e,s),l=vP({},i,{strict:!1});return typeof o=="undefined"&&!Aw(e,s)||!Mn(n,o,l,a)?!1:!Aw(t,s)&&Mn(n,o,l,a)}function zU(t,e,r){var n=yP(r);return n!=null?n:ch(e,n)&&!ch(t,n)}function mP(t,e,r,n,i,a){for(var s=sl(t),o,l;(o=s.next())&&!o.done;)if(l=o.value,Mn(r,l,i,a)&&Mn(n,oh(e,l),i,a))return wP(t,l),!0;return!1}function Mn(t,e,r,n){var i=r||{};if(i.strict?J2(t,e):t===e)return!0;var a=sP(t),s=sP(e);if(a!==s)return!1;if(!t||!e||typeof t!="object"&&typeof e!="object")return i.strict?J2(t,e):t==e;var o=n.has(t),l=n.has(e),c;if(o&&l){if(n.get(t)===n.get(e))return!0}else c={};return o||n.set(t,c),l||n.set(e,c),YU(t,e,i,n)}function gP(t){return!t||typeof t!="object"||typeof t.length!="number"||typeof t.copy!="function"||typeof t.slice!="function"||t.length>0&&typeof t[0]!="number"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function VU(t,e,r,n){if(ah(t)!==ah(e))return!1;for(var i=sl(t),a=sl(e),s,o,l;(s=i.next())&&!s.done;)if(s.value&&typeof s.value=="object")l||(l=new sh),lh(l,s.value);else if(!ch(e,s.value)){if(r.strict||!zU(t,e,s.value))return!1;l||(l=new sh),lh(l,s.value)}if(l){for(;(o=a.next())&&!o.done;)if(o.value&&typeof o.value=="object"){if(!pP(l,o.value,r.strict,n))return!1}else if(!r.strict&&!ch(t,o.value)&&!pP(l,o.value,r.strict,n))return!1;return ah(l)===0}return!0}function WU(t,e,r,n){if(hP(t)!==hP(e))return!1;for(var i=sl(t),a=sl(e),s,o,l,c,u,f;(s=i.next())&&!s.done;)if(c=s.value[0],u=s.value[1],c&&typeof c=="object")l||(l=new sh),lh(l,c);else if(f=oh(e,c),typeof f=="undefined"&&!Aw(e,c)||!Mn(u,f,r,n)){if(r.strict||!qU(t,e,c,u,r,n))return!1;l||(l=new sh),lh(l,c)}if(l){for(;(o=a.next())&&!o.done;)if(c=o.value[0],f=o.value[1],c&&typeof c=="object"){if(!mP(l,t,c,f,r,n))return!1}else if(!r.strict&&(!t.has(c)||!Mn(oh(t,c),f,r,n))&&!mP(l,t,c,f,vP({},r,{strict:!1}),n))return!1;return ah(l)===0}return!0}function YU(t,e,r,n){var i,a;if(typeof t!=typeof e||t==null||e==null||dP(t)!==dP(e)||Q2(t)!==Q2(e))return!1;var s=eP(t),o=eP(e);if(s!==o)return!1;var l=t instanceof Error,c=e instanceof Error;if(l!==c||(l||c)&&(t.name!==e.name||t.message!==e.message))return!1;var u=nP(t),f=nP(e);if(u!==f||(u||f)&&(t.source!==e.source||K2(t)!==K2(e)))return!1;var d=rP(t),h=rP(e);if(d!==h||(d||h)&&fP(t)!==fP(e)||r.strict&&kw&&kw(t)!==kw(e))return!1;var m=lP(t),g=lP(e);if(m!==g)return!1;if(m||g){if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}var v=gP(t),w=gP(e);if(v!==w)return!1;if(v||w){if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}var b=tP(t),k=tP(e);if(b!==k)return!1;if(b||k)return cP(t)!==cP(e)?!1:typeof Uint8Array=="function"&&Mn(new Uint8Array(t),new Uint8Array(e),r,n);var E=iP(t),S=iP(e);if(E!==S)return!1;if(E||S)return uP(t)!==uP(e)?!1:typeof Uint8Array=="function"&&Mn(new Uint8Array(t),new Uint8Array(e),r,n);if(typeof t!=typeof e)return!1;var A=aP(t),y=aP(e);if(A.length!==y.length)return!1;for(A.sort(),y.sort(),i=A.length-1;i>=0;i--)if(A[i]!=y[i])return!1;for(i=A.length-1;i>=0;i--)if(a=A[i],!Mn(t[a],e[a],r,n))return!1;var x=oP(t),_=oP(e);return x!==_?!1:x==="Set"||_==="Set"?VU(t,e,r,n):x==="Map"?WU(t,e,r,n):!0}bP.exports=function(e,r,n){return Mn(e,r,n,jU())}});var MP=I((CJ,OP)=>{p();OP.exports=function(t,e){var r=t,n=e,i=r.length,a=n.length,s=!1,o=i+1,l=[],c=[],u,f,d=function(){i>=a&&(u=r,f=i,r=n,n=u,i=a,a=f,s=!0,o=i+1)},h=function(g,v,w,b,k){return{startX:g,startY:v,endX:w,endY:b,r:k}},m=function(g,v,w){var b,k,E,S,A;for(v>w?b=l[g-1+o]:b=l[g+1+o],A=E=Math.max(v,w),S=k=E-g;k<i&&E<a&&r[k]===n[E];)++k,++E;return S==k&&A==E?l[g+o]=b:(l[g+o]=c.length,c[c.length]=new h(S,A,k,E,b)),E};return d(),{compose:function(){var g,v,w,b,k,E,S,A,y,x;for(g=a-i,v=i+a+3,w={},E=0;E<v;++E)w[E]=-1,l[E]=-1;b=-1;do{for(++b,S=-b;S<=g-1;++S)w[S+o]=m(S,w[S-1+o]+1,w[S+1+o]);for(S=g+b;S>=g+1;--S)w[S+o]=m(S,w[S-1+o]+1,w[S+1+o]);w[g+o]=m(g,w[g-1+o]+1,w[g+1+o])}while(w[g+o]!==a);for(ed=g+2*b,k=l[g+o],A=i,y=a,x=[];k!==-1;){let _=c[k];(i!=_.endX||a!=_.endY)&&x.push({file1:[s?_.endY:_.endX,s?y-_.endY:A-_.endX],file2:[s?_.endX:_.endY,s?A-_.endX:y-_.endY]}),A=_.startX,y=_.startY,k=c[k].r}return(A!=0||y!=0)&&x.push({file1:[0,s?y:A],file2:[0,s?A:y]}),x.reverse(),x}}}});var NP=I((RJ,LP)=>{p();var DP=MP();function ZU(t,e,r){var n,i=new DP(e,t).compose(),a=new DP(e,r).compose(),s=[];function o(B,N){s.push([B.file1[0],N,B.file1[1],B.file2[0],B.file2[1]])}for(n=0;n<i.length;n++)o(i[n],0);for(n=0;n<a.length;n++)o(a[n],2);s.sort(function(B,N){return B[0]-N[0]});var l=[],c=0;function u(B){B>c&&(l.push([1,c,B-c]),c=B)}for(var f=0;f<s.length;f++){for(var d=f,h=s[f],m=h[0],g=m+h[2];f<s.length-1;){var v=s[f+1],w=v[0];if(w>g)break;g=Math.max(g,w+v[2]),f++}if(u(m),d==f)h[4]>0&&l.push([h[1],h[3],h[4]]);else{var b={0:[t.length,-1,e.length,-1],2:[r.length,-1,e.length,-1]};for(n=d;n<=f;n++){h=s[n];var k=h[1],E=b[k],S=h[0],A=S+h[2],y=h[3],x=y+h[4];E[0]=Math.min(y,E[0]),E[1]=Math.max(x,E[1]),E[2]=Math.min(S,E[2]),E[3]=Math.max(A,E[3])}var _=b[0][0]+(m-b[0][2]),T=b[0][1]+(g-b[0][3]),P=b[2][0]+(m-b[2][2]),D=b[2][1]+(g-b[2][3]);l.push([-1,_,T-_,m,g-m,P,D-P])}c=g}return u(e.length),l}function KU(t,e,r){var n=[],i=[t,e,r],a=ZU(t,e,r),s=[];function o(){s.length&&n.push({ok:s}),s=[]}function l(h){for(var m=0;m<h.length;m++)s.push(h[m])}function c(h){if(h[2]!=h[6])return!0;for(var m=h[1],g=h[5],v=0;v<h[2];v++)if(t[v+m]!=r[v+g])return!0;return!1}for(var u=0;u<a.length;u++){var f=a[u],d=f[0];d==-1?c(f)?(o(),n.push({conflict:{a:t.slice(f[1],f[1]+f[2]),aIndex:f[1],o:e.slice(f[3],f[3]+f[4]),oIndex:f[3],b:r.slice(f[5],f[5]+f[6]),bIndex:f[5]}})):l(i[0].slice(f[1],f[1]+f[2])):l(i[d].slice(f[1],f[1]+f[2]))}return o(),n}LP.exports=KU});var UP=I((HJ,HP)=>{p();var fl=1e3,dl=fl*60,hl=dl*60,Ts=hl*24,eG=Ts*7,tG=Ts*365.25;HP.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return rG(t);if(r==="number"&&isFinite(t))return e.long?iG(t):nG(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function rG(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*tG;case"weeks":case"week":case"w":return r*eG;case"days":case"day":case"d":return r*Ts;case"hours":case"hour":case"hrs":case"hr":case"h":return r*hl;case"minutes":case"minute":case"mins":case"min":case"m":return r*dl;case"seconds":case"second":case"secs":case"sec":case"s":return r*fl;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function nG(t){var e=Math.abs(t);return e>=Ts?Math.round(t/Ts)+"d":e>=hl?Math.round(t/hl)+"h":e>=dl?Math.round(t/dl)+"m":e>=fl?Math.round(t/fl)+"s":t+"ms"}function iG(t){var e=Math.abs(t);return e>=Ts?dh(t,e,Ts,"day"):e>=hl?dh(t,e,hl,"hour"):e>=dl?dh(t,e,dl,"minute"):e>=fl?dh(t,e,fl,"second"):t+" ms"}function dh(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var jP=I((GJ,GP)=>{p();function aG(t){r.debug=r,r.default=r,r.coerce=l,r.disable=s,r.enable=i,r.enabled=o,r.humanize=UP(),r.destroy=c,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let f=0;for(let d=0;d<u.length;d++)f=(f<<5)-f+u.charCodeAt(d),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(u){let f,d=null,h,m;function g(...v){if(!g.enabled)return;let w=g,b=Number(new Date),k=b-(f||b);w.diff=k,w.prev=f,w.curr=b,f=b,v[0]=r.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let E=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(A,y)=>{if(A==="%%")return"%";E++;let x=r.formatters[y];if(typeof x=="function"){let _=v[E];A=x.call(w,_),v.splice(E,1),E--}return A}),r.formatArgs.call(w,v),(w.log||r.log).apply(w,v)}return g.namespace=u,g.useColors=r.useColors(),g.color=r.selectColor(u),g.extend=n,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(h!==r.namespaces&&(h=r.namespaces,m=r.enabled(u)),m),set:v=>{d=v}}),typeof r.init=="function"&&r.init(g),g}function n(u,f){let d=r(this.namespace+(typeof f=="undefined"?":":f)+u);return d.log=this.log,d}function i(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let f=(typeof u=="string"?u:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let d of f)d[0]==="-"?r.skips.push(d.slice(1)):r.names.push(d)}function a(u,f){let d=0,h=0,m=-1,g=0;for(;d<u.length;)if(h<f.length&&(f[h]===u[d]||f[h]==="*"))f[h]==="*"?(m=h,g=d,h++):(d++,h++);else if(m!==-1)h=m+1,g++,d=g;else return!1;for(;h<f.length&&f[h]==="*";)h++;return h===f.length}function s(){let u=[...r.names,...r.skips.map(f=>"-"+f)].join(",");return r.enable(""),u}function o(u){for(let f of r.skips)if(a(u,f))return!1;for(let f of r.names)if(a(u,f))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}GP.exports=aG});var ph=I((Tr,hh)=>{p();Tr.formatArgs=oG;Tr.save=lG;Tr.load=cG;Tr.useColors=sG;Tr.storage=uG();Tr.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Tr.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function sG(){if(typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function oG(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+hh.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}Tr.log=console.debug||console.log||(()=>{});function lG(t){try{t?Tr.storage.setItem("debug",t):Tr.storage.removeItem("debug")}catch(e){}}function cG(){let t;try{t=Tr.storage.getItem("debug")||Tr.storage.getItem("DEBUG")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function uG(){try{return localStorage}catch(t){}}hh.exports=jP()(Tr);var{formatters:fG}=hh.exports;fG.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var qP=I(Zr=>{"use strict";p();var dG=Zr&&Zr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zr,"__esModule",{value:!0});var hG=require("fs"),pG=dG(ph()),pl=pG.default("@kwsites/file-exists");function mG(t,e,r){pl("checking %s",t);try{let n=hG.statSync(t);return n.isFile()&&e?(pl("[OK] path represents a file"),!0):n.isDirectory()&&r?(pl("[OK] path represents a directory"),!0):(pl("[FAIL] path represents something other than a file or directory"),!1)}catch(n){if(n.code==="ENOENT")return pl("[FAIL] path is not accessible: %o",n),!1;throw pl("[FATAL] %o",n),n}}function gG(t,e=Zr.READABLE){return mG(t,(e&Zr.FILE)>0,(e&Zr.FOLDER)>0)}Zr.exists=gG;Zr.FILE=1;Zr.FOLDER=2;Zr.READABLE=Zr.FILE+Zr.FOLDER});var zP=I(mh=>{"use strict";p();function vG(t){for(var e in t)mh.hasOwnProperty(e)||(mh[e]=t[e])}Object.defineProperty(mh,"__esModule",{value:!0});vG(qP())});var $w=I(Cs=>{"use strict";p();Object.defineProperty(Cs,"__esModule",{value:!0});Cs.createDeferred=Cs.deferred=void 0;function Fw(){let t,e,r="pending";return{promise:new Promise((i,a)=>{t=i,e=a}),done(i){r==="pending"&&(r="resolved",t(i))},fail(i){r==="pending"&&(r="rejected",e(i))},get fulfilled(){return r!=="pending"},get status(){return r}}}Cs.deferred=Fw;Cs.createDeferred=Fw;Cs.default=Fw});var E0=I((exports,module)=>{p();(function(){"use strict";var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&typeof module=="object"&&module.exports,AMD=typeof define=="function"&&define.amd,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer!="undefined",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(t){return Object.prototype.toString.call(t)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(t){return typeof t=="object"&&t.buffer&&t.buffer.constructor===ArrayBuffer});var createOutputMethod=function(t,e){return function(r){return new Sha256(e,!0).update(r)[t]()}},createMethod=function(t){var e=createOutputMethod("hex",t);NODE_JS&&(e=nodeWrap(e,t)),e.create=function(){return new Sha256(t)},e.update=function(i){return e.create().update(i)};for(var r=0;r<OUTPUT_TYPES.length;++r){var n=OUTPUT_TYPES[r];e[n]=createOutputMethod(n,t)}return e},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(t){if(typeof t=="string")return crypto.createHash(algorithm).update(t,"utf8").digest("hex");if(t==null)throw new Error(ERROR);return t.constructor===ArrayBuffer&&(t=new Uint8Array(t)),Array.isArray(t)||ArrayBuffer.isView(t)||t.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(t)).digest("hex"):method(t)};return nodeMethod},createHmacOutputMethod=function(t,e){return function(r,n){return new HmacSha256(r,e,!0).update(n)[t]()}},createHmacMethod=function(t){var e=createHmacOutputMethod("hex",t);e.create=function(i){return new HmacSha256(i,t)},e.update=function(i,a){return e.create(i).update(a)};for(var r=0;r<OUTPUT_TYPES.length;++r){var n=OUTPUT_TYPES[r];e[n]=createHmacOutputMethod(n,t)}return e};function Sha256(t,e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=t}Sha256.prototype.update=function(t){if(!this.finalized){var e,r=typeof t;if(r!=="string"){if(r==="object"){if(t===null)throw new Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(t)))throw new Error(ERROR)}else throw new Error(ERROR);e=!0}for(var n,i=0,a,s=t.length,o=this.blocks;i<s;){if(this.hashed&&(this.hashed=!1,o[0]=this.block,o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),e)for(a=this.start;i<s&&a<64;++i)o[a>>2]|=t[i]<<SHIFT[a++&3];else for(a=this.start;i<s&&a<64;++i)n=t.charCodeAt(i),n<128?o[a>>2]|=n<<SHIFT[a++&3]:n<2048?(o[a>>2]|=(192|n>>6)<<SHIFT[a++&3],o[a>>2]|=(128|n&63)<<SHIFT[a++&3]):n<55296||n>=57344?(o[a>>2]|=(224|n>>12)<<SHIFT[a++&3],o[a>>2]|=(128|n>>6&63)<<SHIFT[a++&3],o[a>>2]|=(128|n&63)<<SHIFT[a++&3]):(n=65536+((n&1023)<<10|t.charCodeAt(++i)&1023),o[a>>2]|=(240|n>>18)<<SHIFT[a++&3],o[a>>2]|=(128|n>>12&63)<<SHIFT[a++&3],o[a>>2]|=(128|n>>6&63)<<SHIFT[a++&3],o[a>>2]|=(128|n&63)<<SHIFT[a++&3]);this.lastByteIndex=a,this.bytes+=a-this.start,a>=64?(this.block=o[16],this.start=a-64,this.hash(),this.hashed=!0):this.start=a}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>2]|=EXTRA[e&3],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var t=this.h0,e=this.h1,r=this.h2,n=this.h3,i=this.h4,a=this.h5,s=this.h6,o=this.h7,l=this.blocks,c,u,f,d,h,m,g,v,w,b,k;for(c=16;c<64;++c)h=l[c-15],u=(h>>>7|h<<25)^(h>>>18|h<<14)^h>>>3,h=l[c-2],f=(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10,l[c]=l[c-16]+u+l[c-7]+f<<0;for(k=e&r,c=0;c<64;c+=4)this.first?(this.is224?(v=300032,h=l[0]-1413257819,o=h-150054599<<0,n=h+24177077<<0):(v=704751109,h=l[0]-210244248,o=h-1521486534<<0,n=h+143694565<<0),this.first=!1):(u=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),f=(i>>>6|i<<26)^(i>>>11|i<<21)^(i>>>25|i<<7),v=t&e,d=v^t&r^k,g=i&a^~i&s,h=o+f+g+K[c]+l[c],m=u+d,o=n+h<<0,n=h+m<<0),u=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),f=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),w=n&t,d=w^n&e^v,g=o&i^~o&a,h=s+f+g+K[c+1]+l[c+1],m=u+d,s=r+h<<0,r=h+m<<0,u=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),f=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),b=r&n,d=b^r&t^w,g=s&o^~s&i,h=a+f+g+K[c+2]+l[c+2],m=u+d,a=e+h<<0,e=h+m<<0,u=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),f=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),k=e&r,d=k^e&n^b,g=a&s^~a&o,h=i+f+g+K[c+3]+l[c+3],m=u+d,i=t+h<<0,t=h+m<<0;this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+r<<0,this.h3=this.h3+n<<0,this.h4=this.h4+i<<0,this.h5=this.h5+a<<0,this.h6=this.h6+s<<0,this.h7=this.h7+o<<0},Sha256.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,r=this.h2,n=this.h3,i=this.h4,a=this.h5,s=this.h6,o=this.h7,l=HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[t&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[e&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[r&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[n&15]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[i&15]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[a&15]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[s&15];return this.is224||(l+=HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[o&15]),l},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,r=this.h2,n=this.h3,i=this.h4,a=this.h5,s=this.h6,o=this.h7,l=[t>>24&255,t>>16&255,t>>8&255,t&255,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24&255,r>>16&255,r>>8&255,r&255,n>>24&255,n>>16&255,n>>8&255,n&255,i>>24&255,i>>16&255,i>>8&255,i&255,a>>24&255,a>>16&255,a>>8&255,a&255,s>>24&255,s>>16&255,s>>8&255,s&255];return this.is224||l.push(o>>24&255,o>>16&255,o>>8&255,o&255),l},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(this.is224?28:32),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),t};function HmacSha256(t,e,r){var n,i=typeof t;if(i==="string"){var a=[],s=t.length,o=0,l;for(n=0;n<s;++n)l=t.charCodeAt(n),l<128?a[o++]=l:l<2048?(a[o++]=192|l>>6,a[o++]=128|l&63):l<55296||l>=57344?(a[o++]=224|l>>12,a[o++]=128|l>>6&63,a[o++]=128|l&63):(l=65536+((l&1023)<<10|t.charCodeAt(++n)&1023),a[o++]=240|l>>18,a[o++]=128|l>>12&63,a[o++]=128|l>>6&63,a[o++]=128|l&63);t=a}else if(i==="object"){if(t===null)throw new Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(t)))throw new Error(ERROR)}else throw new Error(ERROR);t.length>64&&(t=new Sha256(e,!0).update(t).array());var c=[],u=[];for(n=0;n<64;++n){var f=t[n]||0;c[n]=92^f,u[n]=54^f}Sha256.call(this,e,r),this.update(u),this.oKeyPad=c,this.inner=!0,this.sharedMemory=r}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var t=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(t),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&define(function(){return exports}))})()});var pO=I(cy=>{p();(function(t){var e=/\S/,r=/\"/g,n=/\n/g,i=/\r/g,a=/\\/g,s=/\u2028/,o=/\u2029/;t.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12},t.scan=function(x,_){var T=x.length,P=0,D=1,B=2,N=P,le=null,Ae=null,we="",fe=[],Ie=!1,ce=0,j=0,J="{{",H="}}";function Fe(){we.length>0&&(fe.push({tag:"_t",text:new String(we)}),we="")}function or(){for(var kt=!0,At=j;At<fe.length;At++)if(kt=t.tags[fe[At].tag]<t.tags._v||fe[At].tag=="_t"&&fe[At].text.match(e)===null,!kt)return!1;return kt}function Rt(kt,At){if(Fe(),kt&&or())for(var Ut=j,Xe;Ut<fe.length;Ut++)fe[Ut].text&&((Xe=fe[Ut+1])&&Xe.tag==">"&&(Xe.indent=fe[Ut].text.toString()),fe.splice(Ut,1));else At||fe.push({tag:`
`});Ie=!1,j=fe.length}function $e(kt,At){var Ut="="+H,Xe=kt.indexOf(Ut,At),z=c(kt.substring(kt.indexOf("=",At)+1,Xe)).split(" ");return J=z[0],H=z[z.length-1],Xe+Ut.length-1}for(_&&(_=_.split(" "),J=_[0],H=_[1]),ce=0;ce<T;ce++)N==P?u(J,x,ce)?(--ce,Fe(),N=D):x.charAt(ce)==`
`?Rt(Ie):we+=x.charAt(ce):N==D?(ce+=J.length-1,Ae=t.tags[x.charAt(ce+1)],le=Ae?x.charAt(ce+1):"_v",le=="="?(ce=$e(x,ce),N=P):(Ae&&ce++,N=B),Ie=ce):u(H,x,ce)?(fe.push({tag:le,n:c(we),otag:J,ctag:H,i:le=="/"?Ie-J.length:ce+H.length}),we="",ce+=H.length-1,N=P,le=="{"&&(H=="}}"?ce++:l(fe[fe.length-1]))):we+=x.charAt(ce);return Rt(Ie,!0),fe};function l(y){y.n.substr(y.n.length-1)==="}"&&(y.n=y.n.substring(0,y.n.length-1))}function c(y){return y.trim?y.trim():y.replace(/^\s*|\s*$/g,"")}function u(y,x,_){if(x.charAt(_)!=y.charAt(0))return!1;for(var T=1,P=y.length;T<P;T++)if(x.charAt(_+T)!=y.charAt(T))return!1;return!0}var f={_t:!0,"\n":!0,$:!0,"/":!0};function d(y,x,_,T){var P=[],D=null,B=null,N=null;for(B=_[_.length-1];y.length>0;){if(N=y.shift(),B&&B.tag=="<"&&!(N.tag in f))throw new Error("Illegal content in < super tag.");if(t.tags[N.tag]<=t.tags.$||h(N,T))_.push(N),N.nodes=d(y,N.tag,_,T);else if(N.tag=="/"){if(_.length===0)throw new Error("Closing tag without opener: /"+N.n);if(D=_.pop(),N.n!=D.n&&!m(N.n,D.n,T))throw new Error("Nesting error: "+D.n+" vs. "+N.n);return D.end=N.i,P}else N.tag==`
`&&(N.last=y.length==0||y[0].tag==`
`);P.push(N)}if(_.length>0)throw new Error("missing closing tag: "+_.pop().n);return P}function h(y,x){for(var _=0,T=x.length;_<T;_++)if(x[_].o==y.n)return y.tag="#",!0}function m(y,x,_){for(var T=0,P=_.length;T<P;T++)if(_[T].c==y&&_[T].o==x)return!0}function g(y){var x=[];for(var _ in y)x.push('"'+b(_)+'": function(c,p,t,i) {'+y[_]+"}");return"{ "+x.join(",")+" }"}function v(y){var x=[];for(var _ in y.partials)x.push('"'+b(_)+'":{name:"'+b(y.partials[_].name)+'", '+v(y.partials[_])+"}");return"partials: {"+x.join(",")+"}, subs: "+g(y.subs)}t.stringify=function(y,x,_){return"{code: function (c,p,i) { "+t.wrapMain(y.code)+" },"+v(y)+"}"};var w=0;t.generate=function(y,x,_){w=0;var T={code:"",subs:{},partials:{}};return t.walk(y,T),_.asString?this.stringify(T,x,_):this.makeTemplate(T,x,_)},t.wrapMain=function(y){return'var t=this;t.b(i=i||"");'+y+"return t.fl();"},t.template=t.Template,t.makeTemplate=function(y,x,_){var T=this.makePartials(y);return T.code=new Function("c","p","i",this.wrapMain(y.code)),new this.template(T,x,this,_)},t.makePartials=function(y){var x,_={subs:{},partials:y.partials,name:y.name};for(x in _.partials)_.partials[x]=this.makePartials(_.partials[x]);for(x in y.subs)_.subs[x]=new Function("c","p","t","i",y.subs[x]);return _};function b(y){return y.replace(a,"\\\\").replace(r,'\\"').replace(n,"\\n").replace(i,"\\r").replace(s,"\\u2028").replace(o,"\\u2029")}function k(y){return~y.indexOf(".")?"d":"f"}function E(y,x){var _="<"+(x.prefix||""),T=_+y.n+w++;return x.partials[T]={name:y.n,partials:{}},x.code+='t.b(t.rp("'+b(T)+'",c,p,"'+(y.indent||"")+'"));',T}t.codegen={"#":function(y,x){x.code+="if(t.s(t."+k(y.n)+'("'+b(y.n)+'",c,p,1),c,p,0,'+y.i+","+y.end+',"'+y.otag+" "+y.ctag+'")){t.rs(c,p,function(c,p,t){',t.walk(y.nodes,x),x.code+="});c.pop();}"},"^":function(y,x){x.code+="if(!t.s(t."+k(y.n)+'("'+b(y.n)+'",c,p,1),c,p,1,0,0,"")){',t.walk(y.nodes,x),x.code+="};"},">":E,"<":function(y,x){var _={partials:{},code:"",subs:{},inPartial:!0};t.walk(y.nodes,_);var T=x.partials[E(y,x)];T.subs=_.subs,T.partials=_.partials},$:function(y,x){var _={subs:{},code:"",partials:x.partials,prefix:y.n};t.walk(y.nodes,_),x.subs[y.n]=_.code,x.inPartial||(x.code+='t.sub("'+b(y.n)+'",c,p,i);')},"\n":function(y,x){x.code+=A('"\\n"'+(y.last?"":" + i"))},_v:function(y,x){x.code+="t.b(t.v(t."+k(y.n)+'("'+b(y.n)+'",c,p,0)));'},_t:function(y,x){x.code+=A('"'+b(y.text)+'"')},"{":S,"&":S};function S(y,x){x.code+="t.b(t.t(t."+k(y.n)+'("'+b(y.n)+'",c,p,0)));'}function A(y){return"t.b("+y+");"}t.walk=function(y,x){for(var _,T=0,P=y.length;T<P;T++)_=t.codegen[y[T].tag],_&&_(y[T],x);return x},t.parse=function(y,x,_){return _=_||{},d(y,"",[],_.sectionTags||[])},t.cache={},t.cacheKey=function(y,x){return[y,!!x.asString,!!x.disableLambda,x.delimiters,!!x.modelGet].join("||")},t.compile=function(y,x){x=x||{};var _=t.cacheKey(y,x),T=this.cache[_];if(T){var P=T.partials;for(var D in P)delete P[D].instance;return T}return T=this.generate(this.parse(this.scan(y,x.delimiters),y,x),y,x),this.cache[_]=T}})(typeof cy!="undefined"?cy:Hogan)});var mO=I(uy=>{p();var B9={};(function(t){t.Template=function(d,h,m,g){d=d||{},this.r=d.code||this.r,this.c=m,this.options=g||{},this.text=h||"",this.partials=d.partials||{},this.subs=d.subs||{},this.buf=""},t.Template.prototype={r:function(d,h,m){return""},v:u,t:c,render:function(h,m,g){return this.ri([h],m||{},g)},ri:function(d,h,m){return this.r(d,h,m)},ep:function(d,h){var m=this.partials[d],g=h[m.name];if(m.instance&&m.base==g)return m.instance;if(typeof g=="string"){if(!this.c)throw new Error("No compiler available.");g=this.c.compile(g,this.options)}if(!g)return null;if(this.partials[d].base=g,m.subs){h.stackText||(h.stackText={});for(key in m.subs)h.stackText[key]||(h.stackText[key]=this.activeSub!==void 0&&h.stackText[this.activeSub]?h.stackText[this.activeSub]:this.text);g=r(g,m.subs,m.partials,this.stackSubs,this.stackPartials,h.stackText)}return this.partials[d].instance=g,g},rp:function(d,h,m,g){var v=this.ep(d,m);return v?v.ri(h,m,g):""},rs:function(d,h,m){var g=d[d.length-1];if(!f(g)){m(d,h,this);return}for(var v=0;v<g.length;v++)d.push(g[v]),m(d,h,this),d.pop()},s:function(d,h,m,g,v,w,b){var k;return f(d)&&d.length===0?!1:(typeof d=="function"&&(d=this.ms(d,h,m,g,v,w,b)),k=!!d,!g&&k&&h&&h.push(typeof d=="object"?d:h[h.length-1]),k)},d:function(d,h,m,g){var v,w=d.split("."),b=this.f(w[0],h,m,g),k=this.options.modelGet,E=null;if(d==="."&&f(h[h.length-2]))b=h[h.length-1];else for(var S=1;S<w.length;S++)v=e(w[S],b,k),v!==void 0?(E=b,b=v):b="";return g&&!b?!1:(!g&&typeof b=="function"&&(h.push(E),b=this.mv(b,h,m),h.pop()),b)},f:function(d,h,m,g){for(var v=!1,w=null,b=!1,k=this.options.modelGet,E=h.length-1;E>=0;E--)if(w=h[E],v=e(d,w,k),v!==void 0){b=!0;break}return b?(!g&&typeof v=="function"&&(v=this.mv(v,h,m)),v):g?!1:""},ls:function(d,h,m,g,v,w){var b=this.options.delimiters;return this.options.delimiters=w,this.b(this.ct(c(d.call(h,v,m)),h,g)),this.options.delimiters=b,!1},ct:function(d,h,m){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(d,this.options).render(h,m)},b:function(d){this.buf+=d},fl:function(){var d=this.buf;return this.buf="",d},ms:function(d,h,m,g,v,w,b){var k,E=h[h.length-1],S=d.call(E);return typeof S=="function"?g?!0:(k=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(S,E,h,m,k.substring(v,w),b)):S},mv:function(d,h,m){var g=h[h.length-1],v=d.call(g);return typeof v=="function"?this.ct(c(v.call(g)),g,m):v},sub:function(d,h,m,g){var v=this.subs[d];v&&(this.activeSub=d,v(h,m,this,g),this.activeSub=!1)}};function e(d,h,m){var g;return h&&typeof h=="object"&&(h[d]!==void 0?g=h[d]:m&&h.get&&typeof h.get=="function"&&(g=h.get(d))),g}function r(d,h,m,g,v,w){function b(){}b.prototype=d;function k(){}k.prototype=d.subs;var E,S=new b;S.subs=new k,S.subsText={},S.buf="",g=g||{},S.stackSubs=g,S.subsText=w;for(E in h)g[E]||(g[E]=h[E]);for(E in g)S.subs[E]=g[E];v=v||{},S.stackPartials=v;for(E in m)v[E]||(v[E]=m[E]);for(E in v)S.partials[E]=v[E];return S}var n=/&/g,i=/</g,a=/>/g,s=/\'/g,o=/\"/g,l=/[&<>\"\']/;function c(d){return String(d==null?"":d)}function u(d){return d=c(d),l.test(d)?d.replace(n,"&amp;").replace(i,"&lt;").replace(a,"&gt;").replace(s,"&#39;").replace(o,"&quot;"):d}var f=Array.isArray||function(d){return Object.prototype.toString.call(d)==="[object Array]"}})(typeof uy!="undefined"?uy:B9)});var fy=I((ire,gO)=>{p();var mp=pO();mp.Template=mO().Template;mp.template=mp.Template;gO.exports=mp});var yO=I(bn=>{"use strict";p();Object.defineProperty(bn,"__esModule",{value:!0});bn.ColorSchemeType=bn.DiffStyleType=bn.LineMatchingType=bn.OutputFormatType=bn.LineType=void 0;var vO;(function(t){t.INSERT="insert",t.DELETE="delete",t.CONTEXT="context"})(vO||(bn.LineType=vO={}));bn.OutputFormatType={LINE_BY_LINE:"line-by-line",SIDE_BY_SIDE:"side-by-side"};bn.LineMatchingType={LINES:"lines",WORDS:"words",NONE:"none"};bn.DiffStyleType={WORD:"word",CHAR:"char"};var wO;(function(t){t.AUTO="auto",t.DARK="dark",t.LIGHT="light"})(wO||(bn.ColorSchemeType=wO={}))});var XW={};OD(XW,{default:()=>vm});module.exports=MD(XW);p();var dD=Ft(gv()),xe=require("obsidian"),hD=Ft(require("path"));p();var ui={};p();var Id=class{constructor(e){this.plugin=e;this.tasks=[]}addTask(e,r){this.tasks.push({task:e,onFinished:r!=null?r:()=>{}}),this.tasks.length===1&&this.handleTask()}handleTask(){if(this.tasks.length>0){let e=this.tasks[0];e.task().then(r=>{e.onFinished(r),this.tasks.shift(),this.handleTask()},r=>{this.plugin.displayError(r),e.onFinished(void 0),this.tasks.shift(),this.handleTask()})}}clear(){this.tasks=[]}};p();var U=require("obsidian");p();var FA=require("obsidian"),Fd="YYYY-MM-DD",vv=`${Fd} HH:mm`,wv=`${Fd} HH:mm:ss`,$d=40,tl="conflict-files-obsidian-git.md",et={commitMessage:"vault backup: {{date}}",autoCommitMessage:"vault backup: {{date}}",commitMessageScript:"",commitDateFormat:wv,autoSaveInterval:0,autoPushInterval:0,autoPullInterval:0,autoPullOnBoot:!1,autoCommitOnlyStaged:!1,disablePush:!1,pullBeforePush:!0,disablePopups:!1,showErrorNotices:!0,disablePopupsForNoChanges:!1,listChangedFilesInMessageBody:!1,showStatusBar:!0,updateSubmodules:!1,syncMethod:"merge",mergeStrategy:"none",customMessageOnAutoBackup:!1,autoBackupAfterFileChange:!1,treeStructure:!1,refreshSourceControl:FA.Platform.isDesktopApp,basePath:"",differentIntervalCommitAndPush:!1,changedFilesInStatusBar:!1,showedMobileNotice:!1,refreshSourceControlTimer:7e3,showBranchStatusBar:!0,setLastSaveToLastCommit:!1,submoduleRecurseCheckout:!1,gitDir:"",showFileMenu:!0,authorInHistoryView:"hide",dateInHistoryView:!1,diffStyle:"split",hunks:{showSigns:!1,hunkCommands:!1,statusBar:"disabled"},lineAuthor:{show:!1,followMovement:"inactive",authorDisplay:"initials",showCommitHash:!1,dateTimeFormatOptions:"date",dateTimeFormatCustomString:vv,dateTimeTimezone:"viewer-local",coloringMaxAge:"1y",colorNew:{r:255,g:150,b:150},colorOld:{r:120,g:160,b:255},textColorCss:"var(--text-muted)",ignoreWhitespace:!1,gutterSpacingFallbackLength:5}},jt={type:"git-view",name:"Source Control",icon:"git-pull-request"},gn={type:"git-history-view",name:"History",icon:"history"},Ma={type:"split-diff-view",name:"Diff view",icon:"diff"},Da={type:"diff-view",name:"Diff View",icon:"git-pull-request"},Od="C:\\Program Files\\Git\\cmd\\git.exe",Md="git_credentials_input",Es="obsidian_askpass.sh",$A=`#!/bin/sh

PROMPT="$1"
TEMP_FILE="$OBSIDIAN_GIT_CREDENTIALS_INPUT"

cleanup() {
    rm -f "$TEMP_FILE" "$TEMP_FILE.response"
}
trap cleanup EXIT

echo "$PROMPT" > "$TEMP_FILE"

while [ ! -e "$TEMP_FILE.response" ]; do
    if [ ! -e "$TEMP_FILE" ]; then
        echo "Trigger file got removed: Abort" >&2
        exit 1
    fi
    sleep 0.1
done

RESPONSE=$(cat "$TEMP_FILE.response")

echo "$RESPONSE"
`,OA=["3dm","3ds","3g2","3gp","7z","a","aac","adp","afdesign","afphoto","afpub","ai","aif","aiff","alz","ape","apk","appimage","ar","arj","asf","au","avi","bak","baml","bh","bin","bk","bmp","btif","bz2","bzip2","cab","caf","cgm","class","cmx","cpio","cr2","cur","dat","dcm","deb","dex","djvu","dll","dmg","dng","doc","docm","docx","dot","dotm","dra","DS_Store","dsk","dts","dtshd","dvb","dwg","dxf","ecelp4800","ecelp7470","ecelp9600","egg","eol","eot","epub","exe","f4v","fbs","fh","fla","flac","flatpak","fli","flv","fpx","fst","fvt","g3","gh","gif","graffle","gz","gzip","h261","h263","h264","icns","ico","ief","img","ipa","iso","jar","jpeg","jpg","jpgv","jpm","jxr","key","ktx","lha","lib","lvp","lz","lzh","lzma","lzo","m3u","m4a","m4v","mar","mdi","mht","mid","midi","mj2","mka","mkv","mmr","mng","mobi","mov","movie","mp3","mp4","mp4a","mpeg","mpg","mpga","mxu","nef","npx","numbers","nupkg","o","odp","ods","odt","oga","ogg","ogv","otf","ott","pages","pbm","pcx","pdb","pdf","pea","pgm","pic","png","pnm","pot","potm","potx","ppa","ppam","ppm","pps","ppsm","ppsx","ppt","pptm","pptx","psd","pya","pyc","pyo","pyv","qt","rar","ras","raw","resources","rgb","rip","rlc","rmf","rmvb","rpm","rtf","rz","s3m","s7z","scpt","sgi","shar","snap","sil","sketch","slk","smv","snk","so","stl","suo","sub","swf","tar","tbz","tbz2","tga","tgz","thmx","tif","tiff","tlz","ttc","ttf","txz","udf","uvh","uvi","uvm","uvp","uvs","uvu","viv","vob","war","wav","wax","wbmp","wdp","weba","webm","webp","whl","wim","wm","wma","wmv","wmx","woff","woff2","wrm","wvx","xbm","xif","xla","xlam","xls","xlsb","xlsm","xlsx","xlt","xltm","xltx","xm","xmind","xpi","xpm","xwd","xz","z","zip","zipx"];p();p();p();var tu=class{diff(e,r,n={}){let i;typeof n=="function"?(i=n,n={}):"callback"in n&&(i=n.callback);let a=this.castInput(e,n),s=this.castInput(r,n),o=this.removeEmpty(this.tokenize(a,n)),l=this.removeEmpty(this.tokenize(s,n));return this.diffWithOptionsObj(o,l,n,i)}diffWithOptionsObj(e,r,n,i){var a;let s=b=>{if(b=this.postProcess(b,n),i){setTimeout(function(){i(b)},0);return}else return b},o=r.length,l=e.length,c=1,u=o+l;n.maxEditLength!=null&&(u=Math.min(u,n.maxEditLength));let f=(a=n.timeout)!==null&&a!==void 0?a:1/0,d=Date.now()+f,h=[{oldPos:-1,lastComponent:void 0}],m=this.extractCommon(h[0],r,e,0,n);if(h[0].oldPos+1>=l&&m+1>=o)return s(this.buildValues(h[0].lastComponent,r,e));let g=-1/0,v=1/0,w=()=>{for(let b=Math.max(g,-c);b<=Math.min(v,c);b+=2){let k,E=h[b-1],S=h[b+1];E&&(h[b-1]=void 0);let A=!1;if(S){let x=S.oldPos-b;A=S&&0<=x&&x<o}let y=E&&E.oldPos+1<l;if(!A&&!y){h[b]=void 0;continue}if(!y||A&&E.oldPos<S.oldPos?k=this.addToPath(S,!0,!1,0,n):k=this.addToPath(E,!1,!0,1,n),m=this.extractCommon(k,r,e,b,n),k.oldPos+1>=l&&m+1>=o)return s(this.buildValues(k.lastComponent,r,e))||!0;h[b]=k,k.oldPos+1>=l&&(v=Math.min(v,b-1)),m+1>=o&&(g=Math.max(g,b+1))}c++};if(i)(function b(){setTimeout(function(){if(c>u||Date.now()>d)return i(void 0);w()||b()},0)})();else for(;c<=u&&Date.now()<=d;){let b=w();if(b)return b}}addToPath(e,r,n,i,a){let s=e.lastComponent;return s&&!a.oneChangePerToken&&s.added===r&&s.removed===n?{oldPos:e.oldPos+i,lastComponent:{count:s.count+1,added:r,removed:n,previousComponent:s.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:r,removed:n,previousComponent:s}}}extractCommon(e,r,n,i,a){let s=r.length,o=n.length,l=e.oldPos,c=l-i,u=0;for(;c+1<s&&l+1<o&&this.equals(n[l+1],r[c+1],a);)c++,l++,u++,a.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return u&&!a.oneChangePerToken&&(e.lastComponent={count:u,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=l,c}equals(e,r,n){return n.comparator?n.comparator(e,r):e===r||!!n.ignoreCase&&e.toLowerCase()===r.toLowerCase()}removeEmpty(e){let r=[];for(let n=0;n<e.length;n++)e[n]&&r.push(e[n]);return r}castInput(e,r){return e}tokenize(e,r){return Array.from(e)}join(e){return e.join("")}postProcess(e,r){return e}get useLongestToken(){return!1}buildValues(e,r,n){let i=[],a;for(;e;)i.push(e),a=e.previousComponent,delete e.previousComponent,e=a;i.reverse();let s=i.length,o=0,l=0,c=0;for(;o<s;o++){let u=i[o];if(u.removed)u.value=this.join(n.slice(c,c+u.count)),c+=u.count;else{if(!u.added&&this.useLongestToken){let f=r.slice(l,l+u.count);f=f.map(function(d,h){let m=n[c+h];return m.length>d.length?m:d}),u.value=this.join(f)}else u.value=this.join(r.slice(l,l+u.count));l+=u.count,u.added||(c+=u.count)}}return i}};p();var yv=class extends tu{constructor(){super(...arguments),this.tokenize=P6}equals(e,r,n){return n.ignoreWhitespace?((!n.newlineIsToken||!e.includes(`
`))&&(e=e.trim()),(!n.newlineIsToken||!r.includes(`
`))&&(r=r.trim())):n.ignoreNewlineAtEof&&!n.newlineIsToken&&(e.endsWith(`
`)&&(e=e.slice(0,-1)),r.endsWith(`
`)&&(r=r.slice(0,-1))),super.equals(e,r,n)}},C6=new yv;function bv(t,e,r){return C6.diff(t,e,r)}function P6(t,e){e.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));let r=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(let i=0;i<n.length;i++){let a=n[i];i%2&&!e.newlineIsToken?r[r.length-1]+=a:r.push(a)}return r}p();var MA={includeIndex:!0,includeUnderline:!0,includeFileHeaders:!0};function _v(t,e,r,n,i,a,s){let o;s?typeof s=="function"?o={callback:s}:o=s:o={},typeof o.context=="undefined"&&(o.context=4);let l=o.context;if(o.newlineIsToken)throw new Error("newlineIsToken may not be used with patch-generation functions, only with diffing functions");if(o.callback){let{callback:u}=o;bv(r,n,Object.assign(Object.assign({},o),{callback:f=>{let d=c(f);u(d)}}))}else return c(bv(r,n,o));function c(u){if(!u)return;u.push({value:"",lines:[]});function f(b){return b.map(function(k){return" "+k})}let d=[],h=0,m=0,g=[],v=1,w=1;for(let b=0;b<u.length;b++){let k=u[b],E=k.lines||R6(k.value);if(k.lines=E,k.added||k.removed){if(!h){let S=u[b-1];h=v,m=w,S&&(g=l>0?f(S.lines.slice(-l)):[],h-=g.length,m-=g.length)}for(let S of E)g.push((k.added?"+":"-")+S);k.added?w+=E.length:v+=E.length}else{if(h)if(E.length<=l*2&&b<u.length-2)for(let S of f(E))g.push(S);else{let S=Math.min(E.length,l);for(let y of f(E.slice(0,S)))g.push(y);let A={oldStart:h,oldLines:v-h+S,newStart:m,newLines:w-m+S,lines:g};d.push(A),h=0,m=0,g=[]}v+=E.length,w+=E.length}}for(let b of d)for(let k=0;k<b.lines.length;k++)b.lines[k].endsWith(`
`)?b.lines[k]=b.lines[k].slice(0,-1):(b.lines.splice(k+1,0,"\\ No newline at end of file"),k++);return{oldFileName:t,newFileName:e,oldHeader:i,newHeader:a,hunks:d}}}function Dd(t,e){if(e||(e=MA),Array.isArray(t)){if(t.length>1&&!e.includeFileHeaders)throw new Error("Cannot omit file headers on a multi-file patch. (The result would be unparseable; how would a tool trying to apply the patch know which changes are to which file?)");return t.map(n=>Dd(n,e)).join(`
`)}let r=[];e.includeIndex&&t.oldFileName==t.newFileName&&r.push("Index: "+t.oldFileName),e.includeUnderline&&r.push("==================================================================="),e.includeFileHeaders&&(r.push("--- "+t.oldFileName+(typeof t.oldHeader=="undefined"?"":"	"+t.oldHeader)),r.push("+++ "+t.newFileName+(typeof t.newHeader=="undefined"?"":"	"+t.newHeader)));for(let n=0;n<t.hunks.length;n++){let i=t.hunks[n];i.oldLines===0&&(i.oldStart-=1),i.newLines===0&&(i.newStart-=1),r.push("@@ -"+i.oldStart+","+i.oldLines+" +"+i.newStart+","+i.newLines+" @@");for(let a of i.lines)r.push(a)}return r.join(`
`)+`
`}function DA(t,e,r,n,i,a,s){if(typeof s=="function"&&(s={callback:s}),s!=null&&s.callback){let{callback:o}=s;_v(t,e,r,n,i,a,Object.assign(Object.assign({},s),{callback:l=>{o(l?Dd(l,s.headerOptions):void 0)}}))}else{let o=_v(t,e,r,n,i,a,s);return o?Dd(o,s==null?void 0:s.headerOptions):void 0}}function ru(t,e,r,n,i,a){return DA(t,t,e,r,n,i,a)}function R6(t){let e=t.endsWith(`
`),r=t.split(`
`).map(n=>n+`
`);return e?r.pop():r.push(r.pop().slice(0,-1)),r}var re=Ft(gv()),As=require("obsidian");p();function LA(t,e){let r=Object.assign({},t.lineAuthor,e.lineAuthor);return Object.assign({},t,e,{lineAuthor:r})}var rl=class extends Error{constructor(r){super("No network connection available");this.originalError=r}};p();var NA=require("obsidian"),I6={options:[],placeholder:"",allowEmpty:!1,onlySelection:!1,initialValue:void 0,obscure:!1},Ke=class extends NA.SuggestModal{constructor(e,r){if(super(e.app),this.config={...I6,...r},this.setPlaceholder(this.config.placeholder),this.config.obscure){this.inputEl.type="password";let n=this.containerEl.querySelector(".prompt-input-container");n.addClass("git-obscure-prompt"),n.setAttr("git-is-obscured","true");let i=n==null?void 0:n.createDiv({cls:"search-input-clear-button"});i.style.marginRight="32px",i.id="git-show-password",i.addEventListener("click",()=>{n.getAttr("git-is-obscured")==="true"?(this.inputEl.type="text",n.setAttr("git-is-obscured","false")):(this.inputEl.type="password",n.setAttr("git-is-obscured","true"))})}}openAndGetResult(){return new Promise(e=>{this.resolve=e,this.open(),this.config.initialValue!=null&&(this.inputEl.value=this.config.initialValue,this.inputEl.dispatchEvent(new Event("input")))})}onClose(){new Promise(e=>setTimeout(e,10)).then(()=>{this.resolve&&this.resolve(void 0)})}getSuggestions(e){return this.config.onlySelection?this.config.options:this.config.allowEmpty?[e.length>0?e:" ",...this.config.options]:[e.length>0?e:"...",...this.config.options]}renderSuggestion(e,r){this.config.obscure?r.hide():r.setText(e)}onChooseSuggestion(e,r){if(this.resolve){let n;this.config.allowEmpty&&e===" "?n="":e==="..."?n=void 0:n=e,this.resolve(n)}}};p();var xP=Ft(rT()),SP=require("child_process"),EP=Ft(_P()),Wi=require("obsidian");function uh(t){throw new Error(`Unexpected object: ${t}`)}function gu(t,e,r){return t===1?`${t} ${e}`:`${t} ${r!=null?r:e+"s"}`}var Tw=(t,e)=>t==="."||e==null||e.length===0||e==="."?!0:e.length>=t.length?e.startsWith(t):t.startsWith(e);function Dn(t,e){let r;if(e){if(e.button===0||e.button===1){let n=Wi.Keymap.isModEvent(e);r=t.workspace.getLeaf(n)}}else r=t.workspace.getLeaf(!1);return r}function hi(t,e,r,n,i){if(e.button==2){let a=t.vault.getAbstractFileByPath(r);if(a!=null){let s=new Wi.Menu;t.workspace.trigger("file-menu",s,a,i,n),s.showAtPosition({x:e.pageX,y:e.pageY})}else{let s=new Wi.Menu;t.workspace.trigger("obsidian-git:menu",s,r,i,n),s.showAtPosition({x:e.pageX,y:e.pageY})}}}function Ha(t){throw new Error("Impossible branch: "+t)}function Cw(t){return`rgb(${t.r},${t.g},${t.b})`}function kP(t){var a;let e=(a=xP.fromString(t))==null?void 0:a.toRgbaArray();if(e===void 0)return;let[r,n,i]=e;return{r,g:n,b:i}}function AP(t){return t.diff(Wi.moment.unix(0),"seconds")}function TP(t){if(t.length!==0)return t.slice().sort()[Math.floor(t.length/2)]}function CP(t,e){return(0,EP.default)(t,e,{strict:!0})}function vu(t,e){return new Proxy(t,{get(r,n){return n==="length"?Math.min(e,r.length):r[n]}})}function PP(t,e,r){return t.length<=e?new Array(e-t.length).fill(r).join("")+t:t.substring(t.length-e)}function RP(t,e){if(e<=0)return t;let r=new Array(e).fill(" ").join(""),n=t.substring(e,t.length);return r+n}function Pw(t,e,r){return t<=e&&e<=r}function Yi(t){let[e,...r]=t.split("/");return[e,r.length===0?void 0:r.join("/")]}function pi(t){return t.endsWith("/")?t:t.split("/").last().replace(/\.md$/,"")}function IP(t){return t===1?"1 minute":`${t} minutes`}function XU(t){let e=t.lastIndexOf(".");return t.substring(e+1)}function ol(t){if(t.endsWith(".md"))return!1;let e=XU(t);return OA.includes(e)}function Rw(t){return(t.startsWith("https://github.com/")||t.startsWith("https://gitlab.com/"))&&(t.endsWith(".git")||(t=t+".git")),t}function ll(t,e){let r=e.vault.getAbstractFileByPath(t);if(!(r instanceof Wi.TFile))return!1;try{return!!e.viewRegistry.getTypeByExtension(r.extension)}catch(n){return!0}}function FP({isFolder:t,gitRelativePath:e}){let r="/";return r+=e,t&&(r+="/"),r.replace(/([\\!#*?[\]])/g,String.raw`\$1`).replace(/\s(?=\s*$)/g,String.raw`\ `)}function cl(t,e,r,n){let i=e.target;t.workspace.trigger("hover-link",{event:e,source:r.getViewType(),hoverParent:r,targetEl:i,linktext:n})}function wu(t,e,r={}){return new Promise((n,i)=>{let a=(0,SP.spawn)(t,e,r),s="",o="";a.stdout.on("data",l=>{s+=l.toString()}),a.stderr.on("data",l=>{o+=l.toString()}),a.on("error",l=>{n({error:new Error(l.message),stdout:s,stderr:s,code:1})}),a.on("close",l=>{n({stdout:s,stderr:o,code:l!=null?l:1,error:void 0})})})}p();var $P=require("obsidian"),ul=class{constructor(e){this.plugin=e,this.app=e.app}getRelativeVaultPath(e){return this.plugin.settings.basePath?this.plugin.settings.basePath+"/"+e:e}getRelativeRepoPath(e,r=!0){return r&&this.plugin.settings.basePath.length>0?e.substring(this.plugin.settings.basePath.length+1):e}unload(){}_getTreeStructure(e,r=0){let n=[];for(e=[...e];e.length>0;){let i=e.first(),a=i.path.substring(r);if(a.contains("/")){let s=a.substring(0,a.indexOf("/")),o=e.filter(c=>c.path.substring(r).startsWith(s+"/"));o.forEach(c=>e.remove(c));let l=i.path.substring(0,a.indexOf("/")+r);n.push({title:s,path:l,vaultPath:this.getRelativeVaultPath(l),children:this._getTreeStructure(o,(r>0?r+s.length:s.length)+1)})}else n.push({title:a,data:i,path:i.path,vaultPath:this.getRelativeVaultPath(i.path)}),e.remove(i)}return n}simplify(e){var r,n,i,a;for(let s of e){for(;;){let o=((r=s.children)==null?void 0:r.length)==1,l=((i=(n=s.children)==null?void 0:n.first())==null?void 0:i.data)==null;if(!(s.children!=null&&o&&l))break;let c=s.children.first();s.title+="/"+c.title,s.data=c.data,s.path=c.path,s.vaultPath=c.vaultPath,s.children=c.children}s.children!=null&&this.simplify(s.children),(a=s.children)==null||a.sort((o,l)=>{let c=(l.data==null?1:0)-(o.data==null?1:0);return c!=0?c:o.title.localeCompare(l.title)})}return e.sort((s,o)=>{let l=(o.data==null?1:0)-(s.data==null?1:0);return l!=0?l:s.title.localeCompare(o.title)})}getTreeStructure(e){let r=this._getTreeStructure(e);return this.simplify(r)}async formatCommitMessage(e){let r;if(e.includes("{{numFiles}}")){r=await this.status();let n=r.staged.length;e=e.replace("{{numFiles}}",String(n))}if(e.includes("{{hostname}}")){let n=this.plugin.localStorage.getHostname()||"";e=e.replace("{{hostname}}",n)}if(e.includes("{{files}}")){r=r!=null?r:await this.status();let n={},i="";if(r.staged.length<100){r.staged.forEach(s=>{s.index in n?n[s.index].push(s.path):n[s.index]=[s.path]});let a=[];for(let[s,o]of Object.entries(n))a.push(s+" "+o.join(" "));i=a.join(", ")}else i="Too many files to list";e=e.replace("{{files}}",i)}if(e=e.replace("{{date}}",(0,$P.moment)().format(this.plugin.settings.commitDateFormat)),this.plugin.settings.listChangedFilesInMessageBody){let n=r!=null?r:await this.status(),i="";n.staged.length<100?i=n.staged.map(a=>a.path).join(`
`):i="Too many files to list",e=e+`

Affected files:
`+i}return e}};p();var Ua=require("obsidian"),fh=class{constructor(e,r){this.plugin=r;this.promises={};this.adapter=e.adapter,this.vault=e,this.lastBasePath=this.plugin.settings.basePath,this.promises.readFile=this.readFile.bind(this),this.promises.writeFile=this.writeFile.bind(this),this.promises.readdir=this.readdir.bind(this),this.promises.mkdir=this.mkdir.bind(this),this.promises.rmdir=this.rmdir.bind(this),this.promises.stat=this.stat.bind(this),this.promises.unlink=this.unlink.bind(this),this.promises.lstat=this.lstat.bind(this),this.promises.readlink=this.readlink.bind(this),this.promises.symlink=this.symlink.bind(this)}async readFile(e,r){var n;if(this.maybeLog("Read: "+e+JSON.stringify(r)),r=="utf8"||r.encoding=="utf8"){let i=this.vault.getAbstractFileByPath(e);return i instanceof Ua.TFile?(this.maybeLog("Reuse"),this.vault.read(i)):this.adapter.read(e)}else{if(e.endsWith(this.gitDir+"/index"))return this.plugin.settings.basePath!=this.lastBasePath?(this.clearIndex(),this.lastBasePath=this.plugin.settings.basePath,this.adapter.readBinary(e)):(n=this.index)!=null?n:this.adapter.readBinary(e);let i=this.vault.getAbstractFileByPath(e);return i instanceof Ua.TFile?(this.maybeLog("Reuse"),this.vault.readBinary(i)):this.adapter.readBinary(e)}}async writeFile(e,r){if(this.maybeLog("Write: "+e),typeof r=="string"){let n=this.vault.getAbstractFileByPath(e);return n instanceof Ua.TFile?this.vault.modify(n,r):this.adapter.write(e,r)}else if(e.endsWith(this.gitDir+"/index"))this.index=r,this.indexmtime=Date.now();else{let n=this.vault.getAbstractFileByPath(e);return n instanceof Ua.TFile?this.vault.modifyBinary(n,r):this.adapter.writeBinary(e,r)}}async readdir(e){e==="."&&(e="/");let r=await this.adapter.list(e),n=[...r.files,...r.folders],i;return e!=="/"?i=n.map(a=>(0,Ua.normalizePath)(a.substring(e.length))):i=n,i}async mkdir(e){return this.adapter.mkdir(e)}async rmdir(e,r){var n,i;return this.adapter.rmdir(e,(i=(n=r==null?void 0:r.options)==null?void 0:n.recursive)!=null?i:!1)}async stat(e){if(e.endsWith(this.gitDir+"/index")){if(this.index!==void 0&&this.indexctime!=null&&this.indexmtime!=null)return{isFile:()=>!0,isDirectory:()=>!1,isSymbolicLink:()=>!1,size:this.index.byteLength,type:"file",ctimeMs:this.indexctime,mtimeMs:this.indexmtime};{let n=await this.adapter.stat(e);if(n==null)throw{code:"ENOENT"};return this.indexctime=n.ctime,this.indexmtime=n.mtime,{ctimeMs:n.ctime,mtimeMs:n.mtime,size:n.size,type:"file",isFile:()=>!0,isDirectory:()=>!1,isSymbolicLink:()=>!1}}}e==="."&&(e="/");let r=this.vault.getAbstractFileByPath(e);if(this.maybeLog("Stat: "+e),r instanceof Ua.TFile)return this.maybeLog("Reuse stat"),{ctimeMs:r.stat.ctime,mtimeMs:r.stat.mtime,size:r.stat.size,type:"file",isFile:()=>!0,isDirectory:()=>!1,isSymbolicLink:()=>!1};{let n=await this.adapter.stat(e);if(n)return{ctimeMs:n.ctime,mtimeMs:n.mtime,size:n.size,type:n.type==="folder"?"directory":n.type,isFile:()=>n.type==="file",isDirectory:()=>n.type==="folder",isSymbolicLink:()=>!1};throw{code:"ENOENT"}}}async unlink(e){return this.adapter.remove(e)}async lstat(e){return this.stat(e)}async readlink(e){throw new Error(`readlink of (${e}) is not implemented.`)}async symlink(e){throw new Error(`symlink of (${e}) is not implemented.`)}async saveAndClear(){this.index!==void 0&&await this.adapter.writeBinary(this.plugin.gitManager.getRelativeVaultPath(this.gitDir+"/index"),this.index,{ctime:this.indexctime,mtime:this.indexmtime}),this.clearIndex()}clearIndex(){this.index=void 0,this.indexctime=void 0,this.indexmtime=void 0}get gitDir(){return this.plugin.settings.gitDir||".git"}maybeLog(e){}};var BP=Ft(NP()),Ln=class extends ul{constructor(r){super(r);this.FILE=0;this.HEAD=1;this.WORKDIR=2;this.STAGE=3;this.status_mapping={"000":"  ","003":"AD","020":"??","022":"A ","023":"AM",100:"D ",101:" D",103:"MD",110:"DA",111:"  ",113:"MM",120:"DA",121:" M",122:"M ",123:"MM"};this.noticeLength=999999;this.fs=new fh(this.app.vault,this.plugin)}getRepo(){return{fs:this.fs,dir:this.plugin.settings.basePath,gitdir:this.plugin.settings.gitDir||void 0,onAuth:()=>{var r,n;return{username:(r=this.plugin.localStorage.getUsername())!=null?r:void 0,password:(n=this.plugin.localStorage.getPassword())!=null?n:void 0}},onAuthFailure:async()=>{new As.Notice("Authentication failed. Please try with different credentials");let r=await new Ke(this.plugin,{placeholder:"Specify your username"}).openAndGetResult();if(r){let n=await new Ke(this.plugin,{placeholder:"Specify your password/personal access token",obscure:!0}).openAndGetResult();if(n)return this.plugin.localStorage.setUsername(r),this.plugin.localStorage.setPassword(n),{username:r,password:n}}return{cancel:!0}},http:{async request({url:r,method:n,headers:i,body:a}){let s;a&&(s=await QU(a));let o=await(0,As.requestUrl)({url:r,method:n,headers:i,body:s,throw:!1});return{url:r,method:n,headers:o.headers,body:JU(o.arrayBuffer),statusCode:o.status,statusMessage:o.status.toString()}}}}}async wrapFS(r){try{let n=await r;return await this.fs.saveAndClear(),n}catch(n){throw await this.fs.saveAndClear(),n}}async status(r){let n,i=window.setTimeout(()=>{n=new As.Notice("This takes longer: Getting status",this.noticeLength)},2e4);try{this.plugin.setPluginState({gitAction:1});let a={...this.getRepo()};(r==null?void 0:r.path)!=null&&(a.filepaths=[`${r.path}/`]);let s=(await this.wrapFS(re.default.statusMatrix(a))).map(f=>this.getFileStatusResult(f)),o=[],l=[],c=[];for(let f of s)f.workingDir!==" "&&o.push(f),f.index!==" "&&f.index!=="U"&&l.push(f),(f.index!=" "||f.workingDir!=" ")&&c.push(f);let u=[];return window.clearTimeout(i),n==null||n.hide(),{all:c,changed:o,staged:l,conflicted:u}}catch(a){throw window.clearTimeout(i),n==null||n.hide(),this.plugin.displayError(a),a}}async commitAll({message:r,status:n,unstagedFiles:i}){try{return await this.checkAuthorInfo(),await this.stageAll({status:n,unstagedFiles:i}),this.commit({message:r})}catch(a){throw this.plugin.displayError(a),a}}async commit({message:r}){try{await this.checkAuthorInfo(),this.plugin.setPluginState({gitAction:4});let n=await this.formatCommitMessage(r),i=this.plugin.localStorage.getConflict(),a;if(i){let s=await this.branchInfo();a=[s.current,s.tracking]}await this.wrapFS(re.default.commit({...this.getRepo(),message:n,parent:a})),this.plugin.localStorage.setConflict(!1);return}catch(n){throw this.plugin.displayError(n),n}}async stage(r,n){let i=this.getRelativeRepoPath(r,n),a;n?a=r:a=this.getRelativeVaultPath(r);try{this.plugin.setPluginState({gitAction:3}),await this.app.vault.adapter.exists(a)?await this.wrapFS(re.default.add({...this.getRepo(),filepath:i})):await this.wrapFS(re.default.remove({...this.getRepo(),filepath:i}))}catch(s){throw this.plugin.displayError(s),s}}async stageAll({dir:r,status:n,unstagedFiles:i}){try{if(n)await Promise.all(n.changed.map(a=>a.workingDir!=="D"?this.wrapFS(re.default.add({...this.getRepo(),filepath:a.path})):re.default.remove({...this.getRepo(),filepath:a.path})));else{let a=i!=null?i:await this.getUnstagedFiles(r!=null?r:".");await Promise.all(a.map(({path:s,type:o})=>o=="D"?re.default.remove({...this.getRepo(),filepath:s}):this.wrapFS(re.default.add({...this.getRepo(),filepath:s}))))}}catch(a){throw this.plugin.displayError(a),a}}async unstage(r,n){try{this.plugin.setPluginState({gitAction:3}),r=this.getRelativeRepoPath(r,n),await this.wrapFS(re.default.resetIndex({...this.getRepo(),filepath:r}))}catch(i){throw this.plugin.displayError(i),i}}async unstageAll({dir:r,status:n}){try{let i;n?i=n.staged.map(a=>a.path):i=(await this.getStagedFiles(r!=null?r:".")).map(({path:s})=>s),await this.wrapFS(Promise.all(i.map(a=>re.default.resetIndex({...this.getRepo(),filepath:a}))))}catch(i){throw this.plugin.displayError(i),i}}async discard(r){try{this.plugin.setPluginState({gitAction:3}),await this.wrapFS(re.default.checkout({...this.getRepo(),filepaths:[r],force:!0}))}catch(n){throw this.plugin.displayError(n),n}}async discardAll({dir:r,status:n}){let i=[];n?r!=null?i=n.changed.filter(a=>a.workingDir!="U"&&a.path.startsWith(r)).map(a=>a.path):i=n.changed.filter(a=>a.workingDir!="U").map(a=>a.path):i=(await this.getUnstagedFiles(r)).filter(a=>a.type!="A").map(({path:a})=>a);try{await this.wrapFS(re.default.checkout({...this.getRepo(),filepaths:i,force:!0}))}catch(a){throw this.plugin.displayError(a),a}}async getUntrackedPaths(r){let n=[];if(r.status)for(let i of r.status.changed)i.index=="U"&&i.workingDir==="U"&&i.path.startsWith(r.path!=null?`${r.path}/`:"")&&n.push(i.path);else{let i=await this.status({path:r==null?void 0:r.path});for(let a of i.changed)a.index==="U"&&a.workingDir==="U"&&n.push(a.path)}return n}getProgressText(r,n){let i=`${r} progress:`;return n.phase&&(i=`${i} ${n.phase}:`),n.loaded&&(i=`${i} ${n.loaded}`,n.total&&(i=`${i} of ${n.total}`)),i}resolveRef(r){return this.wrapFS(re.default.resolveRef({...this.getRepo(),ref:r}))}async pull(){let r=this.showNotice("Initializing pull");try{this.plugin.setPluginState({gitAction:2});let n=await this.resolveRef("HEAD");await this.fetch();let i=await this.branchInfo();await this.checkAuthorInfo(),(await this.wrapFS(re.default.merge({...this.getRepo(),ours:i.current,theirs:i.tracking,abortOnConflict:!1,mergeDriver:this.plugin.settings.mergeStrategy!=="none"?({contents:l})=>{var b,k,E;let c=l[0],u=l[1],f=l[2],d=/^.*(\r?\n|$)/gm,h=(b=u.match(d))!=null?b:[],m=(k=c.match(d))!=null?k:[],g=(E=f.match(d))!=null?E:[],v=(0,BP.default)(h,m,g),w="";for(let S of v)S.ok&&(w+=S.ok.join("")),S.conflict&&(w+=this.plugin.settings.mergeStrategy==="ours"?S.conflict.a.join(""):S.conflict.b.join(""));return{cleanMerge:!0,mergedText:w}}:void 0}))).alreadyMerged||await this.wrapFS(re.default.checkout({...this.getRepo(),ref:i.current,onProgress:l=>{r!==void 0&&(r.noticeEl.innerText=this.getProgressText("Checkout",l))},remote:i.remote})),r==null||r.hide();let s=await this.resolveRef("HEAD"),o=await this.getFileChangesCount(n,s);return this.showNotice("Finished pull",!1),o.map(l=>({path:l.path,workingDir:"P",index:"P",vaultPath:this.getRelativeVaultPath(l.path)}))}catch(n){throw r==null||r.hide(),n instanceof re.Errors.MergeConflictError&&await this.plugin.handleConflict(n.data.filepaths.map(i=>this.getRelativeVaultPath(i))),this.plugin.displayError(n),n}}async push(){if(!await this.canPush())return 0;let r=this.showNotice("Initializing push");try{this.plugin.setPluginState({gitAction:1});let n=await this.branchInfo(),i=n.tracking,a=n.current,s=(await this.getFileChangesCount(a,i)).length;this.plugin.setPluginState({gitAction:5});let o=await this.getCurrentRemote();return await this.wrapFS(re.default.push({...this.getRepo(),remote:o,onProgress:l=>{r!==void 0&&(r.noticeEl.innerText=this.getProgressText("Pushing",l))}})),r==null||r.hide(),s}catch(n){throw r==null||r.hide(),this.plugin.displayError(n),n}}async getUnpushedCommits(){let r=await this.branchInfo(),n=r.tracking,i=r.current;if(n==null||i==null)return 0;let a=await this.resolveRef(i),s=await this.resolveRef(n);return(await this.getFileChangesCount(a,s)).length}async canPush(){let r=await this.branchInfo(),n=r.tracking,i=r.current,a=await this.resolveRef(i),s=await this.resolveRef(n);return a!=s}async checkRequirements(){return await this.plugin.app.vault.adapter.exists(`${this.getRepo().dir}/.git/HEAD`)?"valid":"missing-repo"}async branchInfo(){var r,n;try{let i=await re.default.currentBranch(this.getRepo())||"",a=await re.default.listBranches(this.getRepo()),s=(r=await this.getConfig(`branch.${i}.remote`))!=null?r:"origin",o=(n=await this.getConfig(`branch.${i}.merge`))==null?void 0:n.split("refs/heads")[1],l=o?s+o:void 0;return{current:i,tracking:l,branches:a,remote:s}}catch(i){throw this.plugin.displayError(i),i}}async getCurrentRemote(){var i;let r=await re.default.currentBranch(this.getRepo())||"";return(i=await this.getConfig(`branch.${r}.remote`))!=null?i:"origin"}async checkout(r,n){try{return this.wrapFS(re.default.checkout({...this.getRepo(),ref:r,force:!!n,remote:n}))}catch(i){throw this.plugin.displayError(i),i}}async createBranch(r){try{await this.wrapFS(re.default.branch({...this.getRepo(),ref:r,checkout:!0}))}catch(n){throw this.plugin.displayError(n),n}}async deleteBranch(r){try{await this.wrapFS(re.default.deleteBranch({...this.getRepo(),ref:r}))}catch(n){throw this.plugin.displayError(n),n}}branchIsMerged(r){return Promise.resolve(!0)}async init(){try{await this.wrapFS(re.default.init(this.getRepo()))}catch(r){throw this.plugin.displayError(r),r}}async clone(r,n,i){let a=this.showNotice("Initializing clone");try{await this.wrapFS(re.default.clone({...this.getRepo(),dir:n,url:r,depth:i,onProgress:s=>{a!==void 0&&(a.noticeEl.innerText=this.getProgressText("Cloning",s))}})),a==null||a.hide()}catch(s){throw a==null||a.hide(),this.plugin.displayError(s),s}}async setConfig(r,n){try{return this.wrapFS(re.default.setConfig({...this.getRepo(),path:r,value:n}))}catch(i){throw this.plugin.displayError(i),i}}async getConfig(r){try{return this.wrapFS(re.default.getConfig({...this.getRepo(),path:r}))}catch(n){throw this.plugin.displayError(n),n}}async fetch(r){let n=this.showNotice("Initializing fetch");try{let i={...this.getRepo(),onProgress:a=>{n!==void 0&&(n.noticeEl.innerText=this.getProgressText("Fetching",a))},remote:r!=null?r:await this.getCurrentRemote()};await this.wrapFS(re.default.fetch(i)),n==null||n.hide()}catch(i){throw this.plugin.displayError(i),n==null||n.hide(),i}}async setRemote(r,n){try{await this.wrapFS(re.default.addRemote({...this.getRepo(),remote:r,url:n,force:!0}))}catch(i){throw this.plugin.displayError(i),i}}async getRemoteBranches(r){let n=[];return n.push(...await this.wrapFS(re.default.listBranches({...this.getRepo(),remote:r}))),n.remove("HEAD"),n=n.map(i=>`${r}/${i}`),n}async getRemotes(){return(await this.wrapFS(re.default.listRemotes({...this.getRepo()}))).map(r=>r.remote)}async removeRemote(r){await this.wrapFS(re.default.deleteRemote({...this.getRepo(),remote:r}))}async getRemoteUrl(r){var n;return(n=(await this.wrapFS(re.default.listRemotes({...this.getRepo()}))).filter(i=>i.remote==r)[0])==null?void 0:n.url}async log(r,n=!0,i,a){let s=await this.wrapFS(re.default.log({...this.getRepo(),depth:i,ref:a}));return Promise.all(s.map(async o=>{let l=o.commit.message.split(`

`);return{message:l[0],author:{name:o.commit.author.name,email:o.commit.author.email},body:l.slice(1).join(`

`),date:new Date(o.commit.committer.timestamp).toDateString(),diff:{changed:0,files:(await this.getFileChangesCount(o.commit.parent.first(),o.oid)).map(c=>({path:c.path,status:c.type,vaultPath:this.getRelativeVaultPath(c.path),hash:o.oid}))},hash:o.oid,refs:[]}}))}updateBasePath(r){return this.getRepo().dir=r,Promise.resolve()}async updateUpstreamBranch(r){let[n,i]=Yi(r),a=await this.branchInfo();await this.wrapFS(re.default.push({...this.getRepo(),remote:n,remoteRef:i})),await this.setConfig(`branch.${a.current}.merge`,`refs/heads/${i}`)}updateGitPath(r){return Promise.resolve()}async getFileChangesCount(r,n){return this.walkDifference({walkers:[re.default.TREE({ref:r}),re.default.TREE({ref:n})]})}async walkDifference({walkers:r,dir:n}){return await this.wrapFS(re.default.walk({...this.getRepo(),trees:r,map:async function(a,[s,o]){if(!Tw(a,n))return null;if(await(s==null?void 0:s.type())==="tree"||await(o==null?void 0:o.type())==="tree")return;let l=await(s==null?void 0:s.oid()),c=await(o==null?void 0:o.oid()),u="equal";if(l!==c&&(u="M"),l===void 0&&(u="A"),c===void 0&&(u="D"),l===void 0&&c===void 0&&(console.log("Something weird happened:"),console.log(s),console.log(o)),u!=="equal")return{path:a,type:u}}}))}async getStagedFiles(r="."){return(await this.walkDifference({walkers:[re.default.TREE({ref:"HEAD"}),re.default.STAGE()],dir:r})).map(i=>({vaultPath:this.getRelativeVaultPath(i.path),path:i.path}))}async getUnstagedFiles(r="."){let n,i=window.setTimeout(()=>{n=new As.Notice("This takes longer: Getting status",this.noticeLength)},2e4);try{let a=this.getRepo(),s=await this.wrapFS(re.default.walk({...a,trees:[re.default.WORKDIR(),re.default.STAGE()],map:async function(o,[l,c]){if(!c&&l&&await re.default.isIgnored({...a,filepath:o})||!Tw(o,r))return null;let[u,f]=await Promise.all([l&&l.type(),c&&c.type()]),d=[u,f].includes("blob");if((u==="tree"||u==="special")&&!d)return;if(f==="commit")return null;if((f==="tree"||f==="special")&&!d)return;let h=f==="blob"?await c.oid():void 0,m;return u==="blob"&&f!=="blob"?m="42":u==="blob"&&(m=await l.oid()),m?h?m!==h?{path:o,type:"M"}:null:{path:o,type:"A"}:{path:o,type:"D"}}}));return window.clearTimeout(i),n==null||n.hide(),s}catch(a){throw window.clearTimeout(i),n==null||n.hide(),this.plugin.displayError(a),a}}async getDiffString(r,n=!1,i){let a=this.getRelativeVaultPath(r),s=async(c,[u])=>{if(r==c){let f=await u.oid();return(await re.default.readBlob({...this.getRepo(),oid:f})).blob}};if(i){let c=await(0,re.readBlob)({...this.getRepo(),filepath:r,oid:i}).then(h=>new TextDecoder().decode(h.blob)).catch(h=>{if(!(h instanceof re.default.Errors.NotFoundError))throw h}),u=await re.default.readCommit({...this.getRepo(),oid:i}),f=await(0,re.readBlob)({...this.getRepo(),filepath:r,oid:u.commit.parent.first()}).then(h=>new TextDecoder().decode(h.blob)).catch(h=>{if(!(h instanceof re.default.Errors.NotFoundError))throw h});return ru(a,f!=null?f:"",c!=null?c:"")}let o=(await re.default.walk({...this.getRepo(),trees:[re.default.STAGE()],map:s})).first(),l=new TextDecoder().decode(o);if(n){let c=await this.resolveRef("HEAD").then(f=>(0,re.readBlob)({...this.getRepo(),filepath:r,oid:f})).then(f=>new TextDecoder().decode(f.blob)).catch(f=>{if(!(f instanceof re.default.Errors.NotFoundError))throw f});return ru(a,c!=null?c:"",l)}else{let c;return await this.app.vault.adapter.exists(a)?c=await this.app.vault.adapter.read(a):c="",ru(a,l,c)}}async getLastCommitTime(){let r=this.getRepo(),n=await this.resolveRef("HEAD"),a=(await re.default.readCommit({...r,oid:n})).commit.committer.timestamp;return new Date(a*1e3)}getFileStatusResult(r){let n=this.status_mapping[`${r[this.HEAD]}${r[this.WORKDIR]}${r[this.STAGE]}`];return{index:n[0]=="?"?"U":n[0],workingDir:n[1]=="?"?"U":n[1],path:r[this.FILE],vaultPath:this.getRelativeVaultPath(r[this.FILE])}}async checkAuthorInfo(){let r=await this.getConfig("user.name"),n=await this.getConfig("user.email");if(!r||!n)throw Error("Git author name and email are not set. Please set both fields in the settings.")}showNotice(r,n=!0){if(!this.plugin.settings.disablePopups)return new As.Notice(r,n?this.noticeLength:void 0)}};async function*JU(t){yield new Uint8Array(t)}async function QU(t){let e=new ReadableStream({async start(n){for await(let i of t)n.enqueue(i);n.close()}});return await new Response(e).arrayBuffer()}p();var PF=Ft(ph()),Jr=Ft(require("fs/promises")),Zi=require("obsidian"),Ge=Ft(require("path")),Cu=require("path");p();var Ah=Ft(zP(),1),Sh=Ft(ph(),1),gI=require("child_process"),QI=Ft($w(),1),ml=Ft($w(),1),kF=require("node:events"),Qw=Object.defineProperty,wG=Object.getOwnPropertyDescriptor,e0=Object.getOwnPropertyNames,yG=Object.prototype.hasOwnProperty,Y=(t,e)=>function(){return t&&(e=(0,t[e0(t)[0]])(t=0)),e},bG=(t,e)=>function(){return e||(0,t[e0(t)[0]])((e={exports:{}}).exports,e),e.exports},wt=(t,e)=>{for(var r in e)Qw(t,r,{get:e[r],enumerable:!0})},_G=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of e0(e))!yG.call(t,i)&&i!==r&&Qw(t,i,{get:()=>e[i],enumerable:!(n=wG(e,i))||n.enumerable});return t},ut=t=>_G(Qw({},"__esModule",{value:!0}),t);function xG(...t){let e=new String(t);return kh.set(e,t),e}function bh(t){return t instanceof String&&kh.has(t)}function VP(t){return kh.get(t)||[]}var kh,xu=Y({"src/lib/args/pathspec.ts"(){"use strict";kh=new WeakMap}}),Rr,ja=Y({"src/lib/errors/git-error.ts"(){"use strict";Rr=class extends Error{constructor(t,e){super(e),this.task=t,Object.setPrototypeOf(this,new.target.prototype)}}}}),Su,vl=Y({"src/lib/errors/git-response-error.ts"(){"use strict";ja(),Su=class extends Rr{constructor(t,e){super(void 0,e||String(t)),this.git=t}}}}),SR,ER=Y({"src/lib/errors/task-configuration-error.ts"(){"use strict";ja(),SR=class extends Rr{constructor(t){super(void 0,t)}}}});function kR(t){return typeof t!="function"?Fs:t}function AR(t){return typeof t=="function"&&t!==Fs}function TR(t,e){let r=t.indexOf(e);return r<=0?[t,""]:[t.substr(0,r),t.substr(r+1)]}function CR(t,e=0){return PR(t)&&t.length>e?t[e]:void 0}function Is(t,e=0){if(PR(t)&&t.length>e)return t[t.length-1-e]}function PR(t){return!!(t&&typeof t.length=="number")}function Eu(t="",e=!0,r=`
`){return t.split(r).reduce((n,i)=>{let a=e?i.trim():i;return a&&n.push(a),n},[])}function t0(t,e){return Eu(t,!0).map(r=>e(r))}function r0(t){return(0,Ah.exists)(t,Ah.FOLDER)}function De(t,e){return Array.isArray(t)?t.includes(e)||t.push(e):t.add(e),e}function RR(t,e){return Array.isArray(t)&&!t.includes(e)&&t.push(e),t}function Th(t,e){if(Array.isArray(t)){let r=t.indexOf(e);r>=0&&t.splice(r,1)}else t.delete(e);return e}function mi(t){return Array.isArray(t)?t:[t]}function IR(t){return t.replace(/[\s-]+(.)/g,(e,r)=>r.toUpperCase())}function FR(t){return mi(t).map(String)}function Ve(t,e=0){if(t==null)return e;let r=parseInt(t,10);return isNaN(r)?e:r}function bu(t,e){let r=[];for(let n=0,i=t.length;n<i;n++)r.push(e,t[n]);return r}function _u(t){return(Array.isArray(t)?Buffer.concat(t):t).toString("utf-8")}function $R(t,e){return Object.assign({},...e.map(r=>r in t?{[r]:t[r]}:{}))}function Hw(t=0){return new Promise(e=>setTimeout(e,t))}function Uw(t){if(t!==!1)return t}var gl,Fs,ku,Ch=Y({"src/lib/utils/util.ts"(){"use strict";gl="\0",Fs=()=>{},ku=Object.prototype.toString.call.bind(Object.prototype.toString)}});function gi(t,e,r){return e(t)?t:arguments.length>2?r:void 0}function Gw(t,e){let r=bh(t)?"string":typeof t;return/number|string|boolean/.test(r)&&(!e||!e.includes(r))}function Ph(t){return!!t&&ku(t)==="[object Object]"}function OR(t){return typeof t=="function"}var Au,Qt,MR,_h,n0,DR=Y({"src/lib/utils/argument-filters.ts"(){"use strict";Ch(),xu(),Au=t=>Array.isArray(t),Qt=t=>typeof t=="string",MR=t=>Array.isArray(t)&&t.every(Qt),_h=t=>Qt(t)||Array.isArray(t)&&t.every(Qt),n0=t=>t==null||"number|boolean|function".includes(typeof t)?!1:Array.isArray(t)||typeof t=="string"||typeof t.length=="number"}}),jw,SG=Y({"src/lib/utils/exit-codes.ts"(){"use strict";jw=(t=>(t[t.SUCCESS=0]="SUCCESS",t[t.ERROR=1]="ERROR",t[t.NOT_FOUND=-2]="NOT_FOUND",t[t.UNCLEAN=128]="UNCLEAN",t))(jw||{})}}),xh,EG=Y({"src/lib/utils/git-output-streams.ts"(){"use strict";xh=class LR{constructor(e,r){this.stdOut=e,this.stdErr=r}asStrings(){return new LR(this.stdOut.toString("utf8"),this.stdErr.toString("utf8"))}}}}),pe,Ga,kG=Y({"src/lib/utils/line-parser.ts"(){"use strict";pe=class{constructor(t,e){this.matches=[],this.parse=(r,n)=>(this.resetMatches(),this._regExp.every((i,a)=>this.addMatch(i,a,r(a)))?this.useMatches(n,this.prepareMatches())!==!1:!1),this._regExp=Array.isArray(t)?t:[t],e&&(this.useMatches=e)}useMatches(t,e){throw new Error("LineParser:useMatches not implemented")}resetMatches(){this.matches.length=0}prepareMatches(){return this.matches}addMatch(t,e,r){let n=r&&t.exec(r);return n&&this.pushMatch(e,n),!!n}pushMatch(t,e){this.matches.push(...e.slice(1))}},Ga=class extends pe{addMatch(t,e,r){return/^remote:\s/.test(String(r))&&super.addMatch(t,e,r)}pushMatch(t,e){(t>0||e.length>1)&&super.pushMatch(t,e)}}}});function NR(...t){let e=process.cwd(),r=Object.assign({baseDir:e,...BR},...t.filter(n=>typeof n=="object"&&n));return r.baseDir=r.baseDir||e,r.trimmed=r.trimmed===!0,r}var BR,AG=Y({"src/lib/utils/simple-git-options.ts"(){"use strict";BR={binary:"git",maxConcurrentProcesses:5,config:[],trimmed:!1}}});function i0(t,e=[]){return Ph(t)?Object.keys(t).reduce((r,n)=>{let i=t[n];if(bh(i))r.push(i);else if(Gw(i,["boolean"]))r.push(n+"="+i);else if(Array.isArray(i))for(let a of i)Gw(a,["string","number"])||r.push(n+"="+a);else r.push(n);return r},e):e}function Cr(t,e=0,r=!1){let n=[];for(let i=0,a=e<0?t.length:e;i<a;i++)"string|number".includes(typeof t[i])&&n.push(String(t[i]));return i0(a0(t),n),r||n.push(...TG(t)),n}function TG(t){let e=typeof Is(t)=="function";return gi(Is(t,e?1:0),Au,[])}function a0(t){let e=OR(Is(t));return gi(Is(t,e?1:0),Ph)}function ft(t,e=!0){let r=kR(Is(t));return e||AR(r)?r:void 0}var CG=Y({"src/lib/utils/task-options.ts"(){"use strict";DR(),Ch(),xu()}});function qw(t,e){return t(e.stdOut,e.stdErr)}function Ir(t,e,r,n=!0){return mi(r).forEach(i=>{for(let a=Eu(i,n),s=0,o=a.length;s<o;s++){let l=(c=0)=>{if(!(s+c>=o))return a[s+c]};e.some(({parse:c})=>c(l,t))}}),t}var PG=Y({"src/lib/utils/task-parser.ts"(){"use strict";Ch()}}),HR={};wt(HR,{ExitCodes:()=>jw,GitOutputStreams:()=>xh,LineParser:()=>pe,NOOP:()=>Fs,NULL:()=>gl,RemoteLineParser:()=>Ga,append:()=>De,appendTaskOptions:()=>i0,asArray:()=>mi,asCamelCase:()=>IR,asFunction:()=>kR,asNumber:()=>Ve,asStringArray:()=>FR,bufferToString:()=>_u,callTaskParser:()=>qw,createInstanceConfig:()=>NR,delay:()=>Hw,filterArray:()=>Au,filterFunction:()=>OR,filterHasLength:()=>n0,filterPlainObject:()=>Ph,filterPrimitives:()=>Gw,filterString:()=>Qt,filterStringArray:()=>MR,filterStringOrStringArray:()=>_h,filterType:()=>gi,first:()=>CR,folderExists:()=>r0,forEachLineWithContent:()=>t0,getTrailingOptions:()=>Cr,including:()=>RR,isUserFunction:()=>AR,last:()=>Is,objectToString:()=>ku,orVoid:()=>Uw,parseStringResponse:()=>Ir,pick:()=>$R,prefixedArray:()=>bu,remove:()=>Th,splitOn:()=>TR,toLinesWithContent:()=>Eu,trailingFunctionArgument:()=>ft,trailingOptionsArgument:()=>a0});var de=Y({"src/lib/utils/index.ts"(){"use strict";DR(),SG(),EG(),kG(),AG(),CG(),PG(),Ch()}}),UR={};wt(UR,{CheckRepoActions:()=>zw,checkIsBareRepoTask:()=>jR,checkIsRepoRootTask:()=>GR,checkIsRepoTask:()=>RG});function RG(t){switch(t){case"bare":return jR();case"root":return GR()}return{commands:["rev-parse","--is-inside-work-tree"],format:"utf-8",onError:Rh,parser:s0}}function GR(){return{commands:["rev-parse","--git-dir"],format:"utf-8",onError:Rh,parser(e){return/^\.(git)?$/.test(e.trim())}}}function jR(){return{commands:["rev-parse","--is-bare-repository"],format:"utf-8",onError:Rh,parser:s0}}function IG(t){return/(Not a git repository|Kein Git-Repository)/i.test(String(t))}var zw,Rh,s0,qR=Y({"src/lib/tasks/check-is-repo.ts"(){"use strict";de(),zw=(t=>(t.BARE="bare",t.IN_TREE="tree",t.IS_REPO_ROOT="root",t))(zw||{}),Rh=({exitCode:t},e,r,n)=>{if(t===128&&IG(e))return r(Buffer.from("false"));n(e)},s0=t=>t.trim()==="true"}});function FG(t,e){let r=new zR(t),n=t?WR:VR;return Eu(e).forEach(i=>{let a=i.replace(n,"");r.paths.push(a),(YR.test(a)?r.folders:r.files).push(a)}),r}var zR,VR,WR,YR,$G=Y({"src/lib/responses/CleanSummary.ts"(){"use strict";de(),zR=class{constructor(t){this.dryRun=t,this.paths=[],this.files=[],this.folders=[]}},VR=/^[a-z]+\s*/i,WR=/^[a-z]+\s+[a-z]+\s*/i,YR=/\/$/}}),Vw={};wt(Vw,{EMPTY_COMMANDS:()=>Ih,adhocExecTask:()=>XR,configurationErrorTask:()=>Pr,isBufferTask:()=>KR,isEmptyTask:()=>JR,straightThroughBufferTask:()=>ZR,straightThroughStringTask:()=>pr});function XR(t){return{commands:Ih,format:"empty",parser:t}}function Pr(t){return{commands:Ih,format:"empty",parser(){throw typeof t=="string"?new SR(t):t}}}function pr(t,e=!1){return{commands:t,format:"utf-8",parser(r){return e?String(r).trim():r}}}function ZR(t){return{commands:t,format:"buffer",parser(e){return e}}}function KR(t){return t.format==="buffer"}function JR(t){return t.format==="empty"||!t.commands.length}var Ih,vt=Y({"src/lib/tasks/task.ts"(){"use strict";ER(),Ih=[]}}),QR={};wt(QR,{CONFIG_ERROR_INTERACTIVE_MODE:()=>o0,CONFIG_ERROR_MODE_REQUIRED:()=>l0,CONFIG_ERROR_UNKNOWN_OPTION:()=>c0,CleanOptions:()=>Rs,cleanTask:()=>eI,cleanWithOptionsTask:()=>OG,isCleanOptionsArray:()=>MG});function OG(t,e){let{cleanMode:r,options:n,valid:i}=DG(t);return r?i.options?(n.push(...e),n.some(BG)?Pr(o0):eI(r,n)):Pr(c0+JSON.stringify(t)):Pr(l0)}function eI(t,e){return{commands:["clean",`-${t}`,...e],format:"utf-8",parser(n){return FG(t==="n",n)}}}function MG(t){return Array.isArray(t)&&t.every(e=>u0.has(e))}function DG(t){let e,r=[],n={cleanMode:!1,options:!0};return t.replace(/[^a-z]i/g,"").split("").forEach(i=>{LG(i)?(e=i,n.cleanMode=!0):n.options=n.options&&NG(r[r.length]=`-${i}`)}),{cleanMode:e,options:r,valid:n}}function LG(t){return t==="f"||t==="n"}function NG(t){return/^-[a-z]$/i.test(t)&&u0.has(t.charAt(1))}function BG(t){return/^-[^\-]/.test(t)?t.indexOf("i")>0:t==="--interactive"}var o0,l0,c0,Rs,u0,tI=Y({"src/lib/tasks/clean.ts"(){"use strict";$G(),de(),vt(),o0="Git clean interactive mode is not supported",l0='Git clean mode parameter ("n" or "f") is required',c0="Git clean unknown option found in: ",Rs=(t=>(t.DRY_RUN="n",t.FORCE="f",t.IGNORED_INCLUDED="x",t.IGNORED_ONLY="X",t.EXCLUDING="e",t.QUIET="q",t.RECURSIVE="d",t))(Rs||{}),u0=new Set(["i",...FR(Object.values(Rs))])}});function HG(t){let e=new nI;for(let r of rI(t))e.addValue(r.file,String(r.key),r.value);return e}function UG(t,e){let r=null,n=[],i=new Map;for(let a of rI(t,e))a.key===e&&(n.push(r=a.value),i.has(a.file)||i.set(a.file,[]),i.get(a.file).push(r));return{key:e,paths:Array.from(i.keys()),scopes:i,value:r,values:n}}function GG(t){return t.replace(/^(file):/,"")}function*rI(t,e=null){let r=t.split("\0");for(let n=0,i=r.length-1;n<i;){let a=GG(r[n++]),s=r[n++],o=e;if(s.includes(`
`)){let l=TR(s,`
`);o=l[0],s=l[1]}yield{file:a,key:o,value:s}}}var nI,jG=Y({"src/lib/responses/ConfigList.ts"(){"use strict";de(),nI=class{constructor(){this.files=[],this.values=Object.create(null)}get all(){return this._all||(this._all=this.files.reduce((t,e)=>Object.assign(t,this.values[e]),{})),this._all}addFile(t){if(!(t in this.values)){let e=Is(this.files);this.values[t]=e?Object.create(this.values[e]):{},this.files.push(t)}return this.values[t]}addValue(t,e,r){let n=this.addFile(t);n.hasOwnProperty(e)?Array.isArray(n[e])?n[e].push(r):n[e]=[n[e],r]:n[e]=r,this._all=void 0}}}});function Ow(t,e){return typeof t=="string"&&Ww.hasOwnProperty(t)?t:e}function qG(t,e,r,n){let i=["config",`--${n}`];return r&&i.push("--add"),i.push(t,e),{commands:i,format:"utf-8",parser(a){return a}}}function zG(t,e){let r=["config","--null","--show-origin","--get-all",t];return e&&r.splice(1,0,`--${e}`),{commands:r,format:"utf-8",parser(n){return UG(n,t)}}}function VG(t){let e=["config","--list","--show-origin","--null"];return t&&e.push(`--${t}`),{commands:e,format:"utf-8",parser(r){return HG(r)}}}function WG(){return{addConfig(t,e,...r){return this._runTask(qG(t,e,r[0]===!0,Ow(r[1],"local")),ft(arguments))},getConfig(t,e){return this._runTask(zG(t,Ow(e,void 0)),ft(arguments))},listConfig(...t){return this._runTask(VG(Ow(t[0],void 0)),ft(arguments))}}}var Ww,iI=Y({"src/lib/tasks/config.ts"(){"use strict";jG(),de(),Ww=(t=>(t.system="system",t.global="global",t.local="local",t.worktree="worktree",t))(Ww||{})}});function YG(t){return aI.has(t)}var Mw,aI,sI=Y({"src/lib/tasks/diff-name-status.ts"(){"use strict";Mw=(t=>(t.ADDED="A",t.COPIED="C",t.DELETED="D",t.MODIFIED="M",t.RENAMED="R",t.CHANGED="T",t.UNMERGED="U",t.UNKNOWN="X",t.BROKEN="B",t))(Mw||{}),aI=new Set(Object.values(Mw))}});function XG(...t){return new lI().param(...t)}function ZG(t){let e=new Set,r={};return t0(t,n=>{let[i,a,s]=n.split(gl);e.add(i),(r[i]=r[i]||[]).push({line:Ve(a),path:i,preview:s})}),{paths:e,results:r}}function KG(){return{grep(t){let e=ft(arguments),r=Cr(arguments);for(let i of oI)if(r.includes(i))return this._runTask(Pr(`git.grep: use of "${i}" is not supported.`),e);typeof t=="string"&&(t=XG().param(t));let n=["grep","--null","-n","--full-name",...r,...t];return this._runTask({commands:n,format:"utf-8",parser(i){return ZG(i)}},e)}}}var oI,yu,WP,lI,cI=Y({"src/lib/tasks/grep.ts"(){"use strict";de(),vt(),oI=["-h"],yu=Symbol("grepQuery"),lI=class{constructor(){this[WP]=[]}*[(WP=yu,Symbol.iterator)](){for(let t of this[yu])yield t}and(...t){return t.length&&this[yu].push("--and","(",...bu(t,"-e"),")"),this}param(...t){return this[yu].push(...bu(t,"-e")),this}}}}),uI={};wt(uI,{ResetMode:()=>vh,getResetMode:()=>QG,resetTask:()=>JG});function JG(t,e){let r=["reset"];return fI(t)&&r.push(`--${t}`),r.push(...e),pr(r)}function QG(t){if(fI(t))return t;switch(typeof t){case"string":case"undefined":return"soft"}}function fI(t){return dI.includes(t)}var vh,dI,hI=Y({"src/lib/tasks/reset.ts"(){"use strict";vt(),vh=(t=>(t.MIXED="mixed",t.SOFT="soft",t.HARD="hard",t.MERGE="merge",t.KEEP="keep",t))(vh||{}),dI=Array.from(Object.values(vh))}});function ej(){return(0,Sh.default)("simple-git")}function YP(t,e,r){return!e||!String(e).replace(/\s*/,"")?r?(n,...i)=>{t(n,...i),r(n,...i)}:t:(n,...i)=>{t(`%s ${n}`,e,...i),r&&r(n,...i)}}function tj(t,e,{namespace:r}){if(typeof t=="string")return t;let n=e&&e.namespace||"";return n.startsWith(r)?n.substr(r.length+1):n||r}function f0(t,e,r,n=ej()){let i=t&&`[${t}]`||"",a=[],s=typeof e=="string"?n.extend(e):e,o=tj(gi(e,Qt),s,n);return c(r);function l(u,f){return De(a,f0(t,o.replace(/^[^:]+/,u),f,n))}function c(u){let f=u&&`[${u}]`||"",d=s&&YP(s,f)||Fs,h=YP(n,`${i} ${f}`,d);return Object.assign(s?d:h,{label:t,sibling:l,info:h,step:c})}}var pI=Y({"src/lib/git-logger.ts"(){"use strict";de(),Sh.default.formatters.L=t=>String(n0(t)?t.length:"-"),Sh.default.formatters.B=t=>Buffer.isBuffer(t)?t.toString("utf8"):ku(t)}}),mI,rj=Y({"src/lib/runners/tasks-pending-queue.ts"(){"use strict";var t;ja(),pI(),mI=(t=class{constructor(r="GitExecutor"){this.logLabel=r,this._queue=new Map}withProgress(r){return this._queue.get(r)}createProgress(r){let n=t.getName(r.commands[0]),i=f0(this.logLabel,n);return{task:r,logger:i,name:n}}push(r){let n=this.createProgress(r);return n.logger("Adding task to the queue, commands = %o",r.commands),this._queue.set(r,n),n}fatal(r){for(let[n,{logger:i}]of Array.from(this._queue.entries()))n===r.task?(i.info("Failed %o",r),i("Fatal exception, any as-yet un-started tasks run through this executor will not be attempted")):i.info("A fatal exception occurred in a previous task, the queue has been purged: %o",r.message),this.complete(n);if(this._queue.size!==0)throw new Error(`Queue size should be zero after fatal: ${this._queue.size}`)}complete(r){this.withProgress(r)&&this._queue.delete(r)}attempt(r){let n=this.withProgress(r);if(!n)throw new Rr(void 0,"TasksPendingQueue: attempt called for an unknown task");return n.logger("Starting task"),n}static getName(r="empty"){return`task:${r}:${++t.counter}`}},t.counter=0,t)}});function Ps(t,e){return{method:CR(t.commands)||"",commands:e}}function nj(t,e){return r=>{e("[ERROR] child process exception %o",r),t.push(Buffer.from(String(r.stack),"ascii"))}}function XP(t,e,r,n){return i=>{r("%s received %L bytes",e,i),n("%B",i),t.push(i)}}var Yw,ij=Y({"src/lib/runners/git-executor-chain.ts"(){"use strict";ja(),vt(),de(),rj(),Yw=class{constructor(t,e,r){this._executor=t,this._scheduler=e,this._plugins=r,this._chain=Promise.resolve(),this._queue=new mI}get cwd(){return this._cwd||this._executor.cwd}set cwd(t){this._cwd=t}get env(){return this._executor.env}get outputHandler(){return this._executor.outputHandler}chain(){return this}push(t){return this._queue.push(t),this._chain=this._chain.then(()=>this.attemptTask(t))}async attemptTask(t){let e=await this._scheduler.next(),r=()=>this._queue.complete(t);try{let{logger:n}=this._queue.attempt(t);return await(JR(t)?this.attemptEmptyTask(t,n):this.attemptRemoteTask(t,n))}catch(n){throw this.onFatalException(t,n)}finally{r(),e()}}onFatalException(t,e){let r=e instanceof Rr?Object.assign(e,{task:t}):new Rr(t,e&&String(e));return this._chain=Promise.resolve(),this._queue.fatal(r),r}async attemptRemoteTask(t,e){let r=this._plugins.exec("spawn.binary","",Ps(t,t.commands)),n=this._plugins.exec("spawn.args",[...t.commands],Ps(t,t.commands)),i=await this.gitResponse(t,r,n,this.outputHandler,e.step("SPAWN")),a=await this.handleTaskData(t,n,i,e.step("HANDLE"));return e("passing response to task's parser as a %s",t.format),KR(t)?qw(t.parser,a):qw(t.parser,a.asStrings())}async attemptEmptyTask(t,e){return e("empty task bypassing child process to call to task's parser"),t.parser(this)}handleTaskData(t,e,r,n){let{exitCode:i,rejection:a,stdOut:s,stdErr:o}=r;return new Promise((l,c)=>{n("Preparing to handle process response exitCode=%d stdOut=",i);let{error:u}=this._plugins.exec("task.error",{error:a},{...Ps(t,e),...r});if(u&&t.onError)return n.info("exitCode=%s handling with custom error handler"),t.onError(r,u,f=>{n.info("custom error handler treated as success"),n("custom error returned a %s",ku(f)),l(new xh(Array.isArray(f)?Buffer.concat(f):f,Buffer.concat(o)))},c);if(u)return n.info("handling as error: exitCode=%s stdErr=%s rejection=%o",i,o.length,a),c(u);n.info("retrieving task output complete"),l(new xh(Buffer.concat(s),Buffer.concat(o)))})}async gitResponse(t,e,r,n,i){let a=i.sibling("output"),s=this._plugins.exec("spawn.options",{cwd:this.cwd,env:this.env,windowsHide:!0},Ps(t,t.commands));return new Promise(o=>{let l=[],c=[];i.info("%s %o",e,r),i("%O",s);let u=this._beforeSpawn(t,r);if(u)return o({stdOut:l,stdErr:c,exitCode:9901,rejection:u});this._plugins.exec("spawn.before",void 0,{...Ps(t,r),kill(d){u=d||u}});let f=(0,gI.spawn)(e,r,s);f.stdout.on("data",XP(l,"stdOut",i,a.step("stdOut"))),f.stderr.on("data",XP(c,"stdErr",i,a.step("stdErr"))),f.on("error",nj(c,i)),n&&(i("Passing child process stdOut/stdErr to custom outputHandler"),n(e,f.stdout,f.stderr,[...r])),this._plugins.exec("spawn.after",void 0,{...Ps(t,r),spawned:f,close(d,h){o({stdOut:l,stdErr:c,exitCode:d,rejection:u||h})},kill(d){f.killed||(u=d,f.kill("SIGINT"))}})})}_beforeSpawn(t,e){let r;return this._plugins.exec("spawn.before",void 0,{...Ps(t,e),kill(n){r=n||r}}),r}}}}),vI={};wt(vI,{GitExecutor:()=>wI});var wI,aj=Y({"src/lib/runners/git-executor.ts"(){"use strict";ij(),wI=class{constructor(t,e,r){this.cwd=t,this._scheduler=e,this._plugins=r,this._chain=new Yw(this,this._scheduler,this._plugins)}chain(){return new Yw(this,this._scheduler,this._plugins)}push(t){return this._chain.push(t)}}}});function sj(t,e,r=Fs){let n=a=>{r(null,a)},i=a=>{(a==null?void 0:a.task)===t&&r(a instanceof Su?oj(a):a,void 0)};e.then(n,i)}function oj(t){let e=n=>{console.warn(`simple-git deprecation notice: accessing GitResponseError.${n} should be GitResponseError.git.${n}, this will no longer be available in version 3`),e=Fs};return Object.create(t,Object.getOwnPropertyNames(t.git).reduce(r,{}));function r(n,i){return i in t||(n[i]={enumerable:!1,configurable:!1,get(){return e(i),t.git[i]}}),n}}var lj=Y({"src/lib/task-callback.ts"(){"use strict";vl(),de()}});function ZP(t,e){return XR(r=>{if(!r0(t))throw new Error(`Git.cwd: cannot change to non-directory "${t}"`);return(e||r).cwd=t})}var cj=Y({"src/lib/tasks/change-working-directory.ts"(){"use strict";de(),vt()}});function Dw(t){let e=["checkout",...t];return e[1]==="-b"&&e.includes("-B")&&(e[1]=Th(e,"-B")),pr(e)}function uj(){return{checkout(){return this._runTask(Dw(Cr(arguments,1)),ft(arguments))},checkoutBranch(t,e){return this._runTask(Dw(["-b",t,e,...Cr(arguments)]),ft(arguments))},checkoutLocalBranch(t){return this._runTask(Dw(["-b",t,...Cr(arguments)]),ft(arguments))}}}var fj=Y({"src/lib/tasks/checkout.ts"(){"use strict";de(),vt()}});function dj(){return{count:0,garbage:0,inPack:0,packs:0,prunePackable:0,size:0,sizeGarbage:0,sizePack:0}}function hj(){return{countObjects(){return this._runTask({commands:["count-objects","--verbose"],format:"utf-8",parser(t){return Ir(dj(),[yI],t)}})}}}var yI,pj=Y({"src/lib/tasks/count-objects.ts"(){"use strict";de(),yI=new pe(/([a-z-]+): (\d+)$/,(t,[e,r])=>{let n=IR(e);t.hasOwnProperty(n)&&(t[n]=Ve(r))})}});function mj(t){return Ir({author:null,branch:"",commit:"",root:!1,summary:{changes:0,insertions:0,deletions:0}},bI,t)}var bI,gj=Y({"src/lib/parsers/parse-commit.ts"(){"use strict";de(),bI=[new pe(/^\[([^\s]+)( \([^)]+\))? ([^\]]+)/,(t,[e,r,n])=>{t.branch=e,t.commit=n,t.root=!!r}),new pe(/\s*Author:\s(.+)/i,(t,[e])=>{let r=e.split("<"),n=r.pop();!n||!n.includes("@")||(t.author={email:n.substr(0,n.length-1),name:r.join("<").trim()})}),new pe(/(\d+)[^,]*(?:,\s*(\d+)[^,]*)(?:,\s*(\d+))/g,(t,[e,r,n])=>{t.summary.changes=parseInt(e,10)||0,t.summary.insertions=parseInt(r,10)||0,t.summary.deletions=parseInt(n,10)||0}),new pe(/^(\d+)[^,]*(?:,\s*(\d+)[^(]+\(([+-]))?/,(t,[e,r,n])=>{t.summary.changes=parseInt(e,10)||0;let i=parseInt(r,10)||0;n==="-"?t.summary.deletions=i:n==="+"&&(t.summary.insertions=i)})]}});function vj(t,e,r){return{commands:["-c","core.abbrev=40","commit",...bu(t,"-m"),...e,...r],format:"utf-8",parser:mj}}function wj(){return{commit(e,...r){let n=ft(arguments),i=t(e)||vj(mi(e),mi(gi(r[0],_h,[])),[...gi(r[1],Au,[]),...Cr(arguments,0,!0)]);return this._runTask(i,n)}};function t(e){return!_h(e)&&Pr("git.commit: requires the commit message to be supplied as a string/string[]")}}var yj=Y({"src/lib/tasks/commit.ts"(){"use strict";gj(),de(),vt()}});function bj(){return{firstCommit(){return this._runTask(pr(["rev-list","--max-parents=0","HEAD"],!0),ft(arguments))}}}var _j=Y({"src/lib/tasks/first-commit.ts"(){"use strict";de(),vt()}});function xj(t,e){let r=["hash-object",t];return e&&r.push("-w"),pr(r,!0)}var Sj=Y({"src/lib/tasks/hash-object.ts"(){"use strict";vt()}});function Ej(t,e,r){let n=String(r).trim(),i;if(i=_I.exec(n))return new wh(t,e,!1,i[1]);if(i=xI.exec(n))return new wh(t,e,!0,i[1]);let a="",s=n.split(" ");for(;s.length;)if(s.shift()==="in"){a=s.join(" ");break}return new wh(t,e,/^re/i.test(n),a)}var wh,_I,xI,kj=Y({"src/lib/responses/InitSummary.ts"(){"use strict";wh=class{constructor(t,e,r,n){this.bare=t,this.path=e,this.existing=r,this.gitDir=n}},_I=/^Init.+ repository in (.+)$/,xI=/^Rein.+ in (.+)$/}});function Aj(t){return t.includes(d0)}function Tj(t=!1,e,r){let n=["init",...r];return t&&!Aj(n)&&n.splice(1,0,d0),{commands:n,format:"utf-8",parser(i){return Ej(n.includes("--bare"),e,i)}}}var d0,Cj=Y({"src/lib/tasks/init.ts"(){"use strict";kj(),d0="--bare"}});function h0(t){for(let e=0;e<t.length;e++){let r=p0.exec(t[e]);if(r)return`--${r[1]}`}return""}function Pj(t){return p0.test(t)}var p0,Tu=Y({"src/lib/args/log-format.ts"(){"use strict";p0=/^--(stat|numstat|name-only|name-status)(=|$)/}}),SI,Rj=Y({"src/lib/responses/DiffSummary.ts"(){"use strict";SI=class{constructor(){this.changed=0,this.deletions=0,this.insertions=0,this.files=[]}}}});function EI(t=""){let e=kI[t];return r=>Ir(new SI,e,r,!1)}var Lw,KP,JP,QP,kI,AI=Y({"src/lib/parsers/parse-diff-summary.ts"(){"use strict";Tu(),Rj(),sI(),de(),Lw=[new pe(/^(.+)\s+\|\s+(\d+)(\s+[+\-]+)?$/,(t,[e,r,n=""])=>{t.files.push({file:e.trim(),changes:Ve(r),insertions:n.replace(/[^+]/g,"").length,deletions:n.replace(/[^-]/g,"").length,binary:!1})}),new pe(/^(.+) \|\s+Bin ([0-9.]+) -> ([0-9.]+) ([a-z]+)/,(t,[e,r,n])=>{t.files.push({file:e.trim(),before:Ve(r),after:Ve(n),binary:!0})}),new pe(/(\d+) files? changed\s*((?:, \d+ [^,]+){0,2})/,(t,[e,r])=>{let n=/(\d+) i/.exec(r),i=/(\d+) d/.exec(r);t.changed=Ve(e),t.insertions=Ve(n==null?void 0:n[1]),t.deletions=Ve(i==null?void 0:i[1])})],KP=[new pe(/(\d+)\t(\d+)\t(.+)$/,(t,[e,r,n])=>{let i=Ve(e),a=Ve(r);t.changed++,t.insertions+=i,t.deletions+=a,t.files.push({file:n,changes:i+a,insertions:i,deletions:a,binary:!1})}),new pe(/-\t-\t(.+)$/,(t,[e])=>{t.changed++,t.files.push({file:e,after:0,before:0,binary:!0})})],JP=[new pe(/(.+)$/,(t,[e])=>{t.changed++,t.files.push({file:e,changes:0,insertions:0,deletions:0,binary:!1})})],QP=[new pe(/([ACDMRTUXB])([0-9]{0,3})\t(.[^\t]*)(\t(.[^\t]*))?$/,(t,[e,r,n,i,a])=>{t.changed++,t.files.push({file:a!=null?a:n,changes:0,insertions:0,deletions:0,binary:!1,status:Uw(YG(e)&&e),from:Uw(!!a&&n!==a&&n),similarity:Ve(r)})})],kI={"":Lw,"--stat":Lw,"--numstat":KP,"--name-status":QP,"--name-only":JP}}});function Ij(t,e){return e.reduce((r,n,i)=>(r[n]=t[i]||"",r),Object.create({diff:null}))}function TI(t=v0,e=CI,r=""){let n=EI(r);return function(i){let a=Eu(i.trim(),!1,m0).map(function(s){let o=s.split(g0),l=Ij(o[0].split(t),e);return o.length>1&&o[1].trim()&&(l.diff=n(o[1])),l});return{all:a,latest:a.length&&a[0]||null,total:a.length}}}var m0,g0,v0,CI,PI=Y({"src/lib/parsers/parse-list-log-summary.ts"(){"use strict";de(),AI(),Tu(),m0="\xF2\xF2\xF2\xF2\xF2\xF2 ",g0=" \xF2\xF2",v0=" \xF2 ",CI=["hash","date","message","refs","author_name","author_email"]}}),RI={};wt(RI,{diffSummaryTask:()=>Fj,validateLogFormatConfig:()=>Fh});function Fj(t){let e=h0(t),r=["diff"];return e===""&&(e="--stat",r.push("--stat=4096")),r.push(...t),Fh(r)||{commands:r,format:"utf-8",parser:EI(e)}}function Fh(t){let e=t.filter(Pj);if(e.length>1)return Pr(`Summary flags are mutually exclusive - pick one of ${e.join(",")}`);if(e.length&&t.includes("-z"))return Pr(`Summary flag ${e} parsing is not compatible with null termination option '-z'`)}var w0=Y({"src/lib/tasks/diff.ts"(){"use strict";Tu(),AI(),vt()}});function $j(t,e){let r=[],n=[];return Object.keys(t).forEach(i=>{r.push(i),n.push(String(t[i]))}),[r,n.join(e)]}function Oj(t){return Object.keys(t).reduce((e,r)=>(r in Xw||(e[r]=t[r]),e),{})}function II(t={},e=[]){let r=gi(t.splitter,Qt,v0),n=Ph(t.format)?t.format:{hash:"%H",date:t.strictDate===!1?"%ai":"%aI",message:"%s",refs:"%D",body:t.multiLine?"%B":"%b",author_name:t.mailMap!==!1?"%aN":"%an",author_email:t.mailMap!==!1?"%aE":"%ae"},[i,a]=$j(n,r),s=[],o=[`--pretty=format:${m0}${a}${g0}`,...e],l=t.n||t["max-count"]||t.maxCount;if(l&&o.push(`--max-count=${l}`),t.from||t.to){let c=t.symmetric!==!1?"...":"..";s.push(`${t.from||""}${c}${t.to||""}`)}return Qt(t.file)&&o.push("--follow",xG(t.file)),i0(Oj(t),o),{fields:i,splitter:r,commands:[...o,...s]}}function Mj(t,e,r){let n=TI(t,e,h0(r));return{commands:["log",...r],format:"utf-8",parser:n}}function Dj(){return{log(...r){let n=ft(arguments),i=II(a0(arguments),gi(arguments[0],Au)),a=e(...r)||Fh(i.commands)||t(i);return this._runTask(a,n)}};function t(r){return Mj(r.splitter,r.fields,r.commands)}function e(r,n){return Qt(r)&&Qt(n)&&Pr("git.log(string, string) should be replaced with git.log({ from: string, to: string })")}}var Xw,FI=Y({"src/lib/tasks/log.ts"(){"use strict";Tu(),xu(),PI(),de(),vt(),w0(),Xw=(t=>(t[t["--pretty"]=0]="--pretty",t[t["max-count"]=1]="max-count",t[t.maxCount=2]="maxCount",t[t.n=3]="n",t[t.file=4]="file",t[t.format=5]="format",t[t.from=6]="from",t[t.to=7]="to",t[t.splitter=8]="splitter",t[t.symmetric=9]="symmetric",t[t.mailMap=10]="mailMap",t[t.multiLine=11]="multiLine",t[t.strictDate=12]="strictDate",t))(Xw||{})}}),yh,$I,Lj=Y({"src/lib/responses/MergeSummary.ts"(){"use strict";yh=class{constructor(t,e=null,r){this.reason=t,this.file=e,this.meta=r}toString(){return`${this.file}:${this.reason}`}},$I=class{constructor(){this.conflicts=[],this.merges=[],this.result="success"}get failed(){return this.conflicts.length>0}get reason(){return this.result}toString(){return this.conflicts.length?`CONFLICTS: ${this.conflicts.join(", ")}`:"OK"}}}}),Zw,OI,Nj=Y({"src/lib/responses/PullSummary.ts"(){"use strict";Zw=class{constructor(){this.remoteMessages={all:[]},this.created=[],this.deleted=[],this.files=[],this.deletions={},this.insertions={},this.summary={changes:0,deletions:0,insertions:0}}},OI=class{constructor(){this.remote="",this.hash={local:"",remote:""},this.branch={local:"",remote:""},this.message=""}toString(){return this.message}}}});function Nw(t){return t.objects=t.objects||{compressing:0,counting:0,enumerating:0,packReused:0,reused:{count:0,delta:0},total:{count:0,delta:0}}}function eR(t){let e=/^\s*(\d+)/.exec(t),r=/delta (\d+)/i.exec(t);return{count:Ve(e&&e[1]||"0"),delta:Ve(r&&r[1]||"0")}}var MI,Bj=Y({"src/lib/parsers/parse-remote-objects.ts"(){"use strict";de(),MI=[new Ga(/^remote:\s*(enumerating|counting|compressing) objects: (\d+),/i,(t,[e,r])=>{let n=e.toLowerCase(),i=Nw(t.remoteMessages);Object.assign(i,{[n]:Ve(r)})}),new Ga(/^remote:\s*(enumerating|counting|compressing) objects: \d+% \(\d+\/(\d+)\),/i,(t,[e,r])=>{let n=e.toLowerCase(),i=Nw(t.remoteMessages);Object.assign(i,{[n]:Ve(r)})}),new Ga(/total ([^,]+), reused ([^,]+), pack-reused (\d+)/i,(t,[e,r,n])=>{let i=Nw(t.remoteMessages);i.total=eR(e),i.reused=eR(r),i.packReused=Ve(n)})]}});function DI(t,e){return Ir({remoteMessages:new NI},LI,e)}var LI,NI,BI=Y({"src/lib/parsers/parse-remote-messages.ts"(){"use strict";de(),Bj(),LI=[new Ga(/^remote:\s*(.+)$/,(t,[e])=>(t.remoteMessages.all.push(e.trim()),!1)),...MI,new Ga([/create a (?:pull|merge) request/i,/\s(https?:\/\/\S+)$/],(t,[e])=>{t.remoteMessages.pullRequestUrl=e}),new Ga([/found (\d+) vulnerabilities.+\(([^)]+)\)/i,/\s(https?:\/\/\S+)$/],(t,[e,r,n])=>{t.remoteMessages.vulnerabilities={count:Ve(e),summary:r,url:n}})],NI=class{constructor(){this.all=[]}}}});function Hj(t,e){let r=Ir(new OI,HI,[t,e]);return r.message&&r}var tR,rR,nR,iR,HI,aR,y0,UI=Y({"src/lib/parsers/parse-pull.ts"(){"use strict";Nj(),de(),BI(),tR=/^\s*(.+?)\s+\|\s+\d+\s*(\+*)(-*)/,rR=/(\d+)\D+((\d+)\D+\(\+\))?(\D+(\d+)\D+\(-\))?/,nR=/^(create|delete) mode \d+ (.+)/,iR=[new pe(tR,(t,[e,r,n])=>{t.files.push(e),r&&(t.insertions[e]=r.length),n&&(t.deletions[e]=n.length)}),new pe(rR,(t,[e,,r,,n])=>r!==void 0||n!==void 0?(t.summary.changes=+e||0,t.summary.insertions=+r||0,t.summary.deletions=+n||0,!0):!1),new pe(nR,(t,[e,r])=>{De(t.files,r),De(e==="create"?t.created:t.deleted,r)})],HI=[new pe(/^from\s(.+)$/i,(t,[e])=>void(t.remote=e)),new pe(/^fatal:\s(.+)$/,(t,[e])=>void(t.message=e)),new pe(/([a-z0-9]+)\.\.([a-z0-9]+)\s+(\S+)\s+->\s+(\S+)$/,(t,[e,r,n,i])=>{t.branch.local=n,t.hash.local=e,t.branch.remote=i,t.hash.remote=r})],aR=(t,e)=>Ir(new Zw,iR,[t,e]),y0=(t,e)=>Object.assign(new Zw,aR(t,e),DI(t,e))}}),sR,GI,oR,Uj=Y({"src/lib/parsers/parse-merge.ts"(){"use strict";Lj(),de(),UI(),sR=[new pe(/^Auto-merging\s+(.+)$/,(t,[e])=>{t.merges.push(e)}),new pe(/^CONFLICT\s+\((.+)\): Merge conflict in (.+)$/,(t,[e,r])=>{t.conflicts.push(new yh(e,r))}),new pe(/^CONFLICT\s+\((.+\/delete)\): (.+) deleted in (.+) and/,(t,[e,r,n])=>{t.conflicts.push(new yh(e,r,{deleteRef:n}))}),new pe(/^CONFLICT\s+\((.+)\):/,(t,[e])=>{t.conflicts.push(new yh(e,null))}),new pe(/^Automatic merge failed;\s+(.+)$/,(t,[e])=>{t.result=e})],GI=(t,e)=>Object.assign(oR(t,e),y0(t,e)),oR=t=>Ir(new $I,sR,t)}});function lR(t){return t.length?{commands:["merge",...t],format:"utf-8",parser(e,r){let n=GI(e,r);if(n.failed)throw new Su(n);return n}}:Pr("Git.merge requires at least one option")}var Gj=Y({"src/lib/tasks/merge.ts"(){"use strict";vl(),Uj(),vt()}});function jj(t,e,r){let n=r.includes("deleted"),i=r.includes("tag")||/^refs\/tags/.test(t),a=!r.includes("new");return{deleted:n,tag:i,branch:!i,new:!a,alreadyUpdated:a,local:t,remote:e}}var cR,jI,uR,qj=Y({"src/lib/parsers/parse-push.ts"(){"use strict";de(),BI(),cR=[new pe(/^Pushing to (.+)$/,(t,[e])=>{t.repo=e}),new pe(/^updating local tracking ref '(.+)'/,(t,[e])=>{t.ref={...t.ref||{},local:e}}),new pe(/^[=*-]\s+([^:]+):(\S+)\s+\[(.+)]$/,(t,[e,r,n])=>{t.pushed.push(jj(e,r,n))}),new pe(/^Branch '([^']+)' set up to track remote branch '([^']+)' from '([^']+)'/,(t,[e,r,n])=>{t.branch={...t.branch||{},local:e,remote:r,remoteName:n}}),new pe(/^([^:]+):(\S+)\s+([a-z0-9]+)\.\.([a-z0-9]+)$/,(t,[e,r,n,i])=>{t.update={head:{local:e,remote:r},hash:{from:n,to:i}}})],jI=(t,e)=>{let r=uR(t,e),n=DI(t,e);return{...r,...n}},uR=(t,e)=>Ir({pushed:[]},cR,[t,e])}}),qI={};wt(qI,{pushTagsTask:()=>zj,pushTask:()=>b0});function zj(t={},e){return De(e,"--tags"),b0(t,e)}function b0(t={},e){let r=["push",...e];return t.branch&&r.splice(1,0,t.branch),t.remote&&r.splice(1,0,t.remote),Th(r,"-v"),De(r,"--verbose"),De(r,"--porcelain"),{commands:r,format:"utf-8",parser:jI}}var zI=Y({"src/lib/tasks/push.ts"(){"use strict";qj(),de()}});function Vj(){return{showBuffer(){let t=["show",...Cr(arguments,1)];return t.includes("--binary")||t.splice(1,0,"--binary"),this._runTask(ZR(t),ft(arguments))},show(){let t=["show",...Cr(arguments,1)];return this._runTask(pr(t),ft(arguments))}}}var Wj=Y({"src/lib/tasks/show.ts"(){"use strict";de(),vt()}}),fR,VI,Yj=Y({"src/lib/responses/FileStatusSummary.ts"(){"use strict";fR=/^(.+)\0(.+)$/,VI=class{constructor(t,e,r){if(this.path=t,this.index=e,this.working_dir=r,e==="R"||r==="R"){let n=fR.exec(t)||[null,t,t];this.from=n[2]||"",this.path=n[1]||""}}}}});function dR(t){let[e,r]=t.split(gl);return{from:r||e,to:e}}function Kr(t,e,r){return[`${t}${e}`,r]}function Bw(t,...e){return e.map(r=>Kr(t,r,(n,i)=>De(n.conflicted,i)))}function Xj(t,e){let r=e.trim();switch(" "){case r.charAt(2):return n(r.charAt(0),r.charAt(1),r.substr(3));case r.charAt(1):return n(" ",r.charAt(0),r.substr(2));default:return}function n(i,a,s){let o=`${i}${a}`,l=WI.get(o);l&&l(t,s),o!=="##"&&o!=="!!"&&t.files.push(new VI(s,i,a))}}var hR,WI,YI,Zj=Y({"src/lib/responses/StatusSummary.ts"(){"use strict";de(),Yj(),hR=class{constructor(){this.not_added=[],this.conflicted=[],this.created=[],this.deleted=[],this.ignored=void 0,this.modified=[],this.renamed=[],this.files=[],this.staged=[],this.ahead=0,this.behind=0,this.current=null,this.tracking=null,this.detached=!1,this.isClean=()=>!this.files.length}},WI=new Map([Kr(" ","A",(t,e)=>De(t.created,e)),Kr(" ","D",(t,e)=>De(t.deleted,e)),Kr(" ","M",(t,e)=>De(t.modified,e)),Kr("A"," ",(t,e)=>De(t.created,e)&&De(t.staged,e)),Kr("A","M",(t,e)=>De(t.created,e)&&De(t.staged,e)&&De(t.modified,e)),Kr("D"," ",(t,e)=>De(t.deleted,e)&&De(t.staged,e)),Kr("M"," ",(t,e)=>De(t.modified,e)&&De(t.staged,e)),Kr("M","M",(t,e)=>De(t.modified,e)&&De(t.staged,e)),Kr("R"," ",(t,e)=>{De(t.renamed,dR(e))}),Kr("R","M",(t,e)=>{let r=dR(e);De(t.renamed,r),De(t.modified,r.to)}),Kr("!","!",(t,e)=>{De(t.ignored=t.ignored||[],e)}),Kr("?","?",(t,e)=>De(t.not_added,e)),...Bw("A","A","U"),...Bw("D","D","U"),...Bw("U","A","D","U"),["##",(t,e)=>{let r=/ahead (\d+)/,n=/behind (\d+)/,i=/^(.+?(?=(?:\.{3}|\s|$)))/,a=/\.{3}(\S*)/,s=/\son\s([\S]+)$/,o;o=r.exec(e),t.ahead=o&&+o[1]||0,o=n.exec(e),t.behind=o&&+o[1]||0,o=i.exec(e),t.current=o&&o[1],o=a.exec(e),t.tracking=o&&o[1],o=s.exec(e),t.current=o&&o[1]||t.current,t.detached=/\(no branch\)/.test(e)}]]),YI=function(t){let e=t.split(gl),r=new hR;for(let n=0,i=e.length;n<i;){let a=e[n++].trim();a&&(a.charAt(0)==="R"&&(a+=gl+(e[n++]||"")),Xj(r,a))}return r}}});function Kj(t){return{format:"utf-8",commands:["status","--porcelain","-b","-u","--null",...t.filter(r=>!XI.includes(r))],parser(r){return YI(r)}}}var XI,Jj=Y({"src/lib/tasks/status.ts"(){"use strict";Zj(),XI=["--null","-z"]}});function Eh(t=0,e=0,r=0,n="",i=!0){return Object.defineProperty({major:t,minor:e,patch:r,agent:n,installed:i},"toString",{value(){return`${this.major}.${this.minor}.${this.patch}`},configurable:!1,enumerable:!1})}function Qj(){return Eh(0,0,0,"",!1)}function eq(){return{version(){return this._runTask({commands:["--version"],format:"utf-8",parser:tq,onError(t,e,r,n){if(t.exitCode===-2)return r(Buffer.from(_0));n(e)}})}}}function tq(t){return t===_0?Qj():Ir(Eh(0,0,0,t),ZI,t)}var _0,ZI,rq=Y({"src/lib/tasks/version.ts"(){"use strict";de(),_0="installed=false",ZI=[new pe(/version (\d+)\.(\d+)\.(\d+)(?:\s*\((.+)\))?/,(t,[e,r,n,i=""])=>{Object.assign(t,Eh(Ve(e),Ve(r),Ve(n),i))}),new pe(/version (\d+)\.(\d+)\.(\D+)(.+)?$/,(t,[e,r,n,i=""])=>{Object.assign(t,Eh(Ve(e),Ve(r),n,i))})]}}),KI={};wt(KI,{SimpleGitApi:()=>Kw});var Kw,nq=Y({"src/lib/simple-git-api.ts"(){"use strict";lj(),cj(),fj(),pj(),yj(),iI(),_j(),cI(),Sj(),Cj(),FI(),Gj(),zI(),Wj(),Jj(),vt(),rq(),de(),Kw=class{constructor(t){this._executor=t}_runTask(t,e){let r=this._executor.chain(),n=r.push(t);return e&&sj(t,n,e),Object.create(this,{then:{value:n.then.bind(n)},catch:{value:n.catch.bind(n)},_executor:{value:r}})}add(t){return this._runTask(pr(["add",...mi(t)]),ft(arguments))}cwd(t){let e=ft(arguments);return typeof t=="string"?this._runTask(ZP(t,this._executor),e):typeof(t==null?void 0:t.path)=="string"?this._runTask(ZP(t.path,t.root&&this._executor||void 0),e):this._runTask(Pr("Git.cwd: workingDirectory must be supplied as a string"),e)}hashObject(t,e){return this._runTask(xj(t,e===!0),ft(arguments))}init(t){return this._runTask(Tj(t===!0,this._executor.cwd,Cr(arguments)),ft(arguments))}merge(){return this._runTask(lR(Cr(arguments)),ft(arguments))}mergeFromTo(t,e){return Qt(t)&&Qt(e)?this._runTask(lR([t,e,...Cr(arguments)]),ft(arguments,!1)):this._runTask(Pr("Git.mergeFromTo requires that the 'remote' and 'branch' arguments are supplied as strings"))}outputHandler(t){return this._executor.outputHandler=t,this}push(){let t=b0({remote:gi(arguments[0],Qt),branch:gi(arguments[1],Qt)},Cr(arguments));return this._runTask(t,ft(arguments))}stash(){return this._runTask(pr(["stash",...Cr(arguments)]),ft(arguments))}status(){return this._runTask(Kj(Cr(arguments)),ft(arguments))}},Object.assign(Kw.prototype,uj(),wj(),WG(),hj(),bj(),KG(),Dj(),Vj(),eq())}}),JI={};wt(JI,{Scheduler:()=>eF});var pR,eF,iq=Y({"src/lib/runners/scheduler.ts"(){"use strict";de(),pI(),pR=(()=>{let t=0;return()=>{t++;let{promise:e,done:r}=(0,QI.createDeferred)();return{promise:e,done:r,id:t}}})(),eF=class{constructor(t=2){this.concurrency=t,this.logger=f0("","scheduler"),this.pending=[],this.running=[],this.logger("Constructed, concurrency=%s",t)}schedule(){if(!this.pending.length||this.running.length>=this.concurrency){this.logger("Schedule attempt ignored, pending=%s running=%s concurrency=%s",this.pending.length,this.running.length,this.concurrency);return}let t=De(this.running,this.pending.shift());this.logger("Attempting id=%s",t.id),t.done(()=>{this.logger("Completing id=",t.id),Th(this.running,t),this.schedule()})}next(){let{promise:t,id:e}=De(this.pending,pR());return this.logger("Scheduling id=%s",e),this.schedule(),t}}}}),tF={};wt(tF,{applyPatchTask:()=>aq});function aq(t,e){return pr(["apply",...e,...t])}var sq=Y({"src/lib/tasks/apply-patch.ts"(){"use strict";vt()}});function oq(t,e){return{branch:t,hash:e,success:!0}}function lq(t){return{branch:t,hash:null,success:!1}}var rF,cq=Y({"src/lib/responses/BranchDeleteSummary.ts"(){"use strict";rF=class{constructor(){this.all=[],this.branches={},this.errors=[]}get success(){return!this.errors.length}}}});function nF(t,e){return e===1&&Jw.test(t)}var mR,Jw,gR,$h,uq=Y({"src/lib/parsers/parse-branch-delete.ts"(){"use strict";cq(),de(),mR=/(\S+)\s+\(\S+\s([^)]+)\)/,Jw=/^error[^']+'([^']+)'/m,gR=[new pe(mR,(t,[e,r])=>{let n=oq(e,r);t.all.push(n),t.branches[e]=n}),new pe(Jw,(t,[e])=>{let r=lq(e);t.errors.push(r),t.all.push(r),t.branches[e]=r})],$h=(t,e)=>Ir(new rF,gR,[t,e])}}),iF,fq=Y({"src/lib/responses/BranchSummary.ts"(){"use strict";iF=class{constructor(){this.all=[],this.branches={},this.current="",this.detached=!1}push(t,e,r,n,i){t==="*"&&(this.detached=e,this.current=r),this.all.push(r),this.branches[r]={current:t==="*",linkedWorkTree:t==="+",name:r,commit:n,label:i}}}}});function vR(t){return t?t.charAt(0):""}function aF(t){return Ir(new iF,sF,t)}var sF,dq=Y({"src/lib/parsers/parse-branch.ts"(){"use strict";fq(),de(),sF=[new pe(/^([*+]\s)?\((?:HEAD )?detached (?:from|at) (\S+)\)\s+([a-z0-9]+)\s(.*)$/,(t,[e,r,n,i])=>{t.push(vR(e),!0,r,n,i)}),new pe(/^([*+]\s)?(\S+)\s+([a-z0-9]+)\s?(.*)$/s,(t,[e,r,n,i])=>{t.push(vR(e),!1,r,n,i)})]}}),oF={};wt(oF,{branchLocalTask:()=>pq,branchTask:()=>hq,containsDeleteBranchCommand:()=>lF,deleteBranchTask:()=>gq,deleteBranchesTask:()=>mq});function lF(t){let e=["-d","-D","--delete"];return t.some(r=>e.includes(r))}function hq(t){let e=lF(t),r=["branch",...t];return r.length===1&&r.push("-a"),r.includes("-v")||r.splice(1,0,"-v"),{format:"utf-8",commands:r,parser(n,i){return e?$h(n,i).all[0]:aF(n)}}}function pq(){return{format:"utf-8",commands:["branch","-v"],parser:aF}}function mq(t,e=!1){return{format:"utf-8",commands:["branch","-v",e?"-D":"-d",...t],parser(r,n){return $h(r,n)},onError({exitCode:r,stdOut:n},i,a,s){if(!nF(String(i),r))return s(i);a(n)}}}function gq(t,e=!1){let r={format:"utf-8",commands:["branch","-v",e?"-D":"-d",t],parser(n,i){return $h(n,i).branches[t]},onError({exitCode:n,stdErr:i,stdOut:a},s,o,l){if(!nF(String(s),n))return l(s);throw new Su(r.parser(_u(a),_u(i)),String(s))}};return r}var vq=Y({"src/lib/tasks/branch.ts"(){"use strict";vl(),uq(),dq(),de()}}),cF,wq=Y({"src/lib/responses/CheckIgnore.ts"(){"use strict";cF=t=>t.split(/\n/g).map(e=>e.trim()).filter(e=>!!e)}}),uF={};wt(uF,{checkIgnoreTask:()=>yq});function yq(t){return{commands:["check-ignore",...t],format:"utf-8",parser:cF}}var bq=Y({"src/lib/tasks/check-ignore.ts"(){"use strict";wq()}}),fF={};wt(fF,{cloneMirrorTask:()=>xq,cloneTask:()=>dF});function _q(t){return/^--upload-pack(=|$)/.test(t)}function dF(t,e,r){let n=["clone",...r];return Qt(t)&&n.push(t),Qt(e)&&n.push(e),n.find(_q)?Pr("git.fetch: potential exploit argument blocked."):pr(n)}function xq(t,e,r){return De(r,"--mirror"),dF(t,e,r)}var Sq=Y({"src/lib/tasks/clone.ts"(){"use strict";vt(),de()}});function Eq(t,e){return Ir({raw:t,remote:null,branches:[],tags:[],updated:[],deleted:[]},hF,[t,e])}var hF,kq=Y({"src/lib/parsers/parse-fetch.ts"(){"use strict";de(),hF=[new pe(/From (.+)$/,(t,[e])=>{t.remote=e}),new pe(/\* \[new branch]\s+(\S+)\s*-> (.+)$/,(t,[e,r])=>{t.branches.push({name:e,tracking:r})}),new pe(/\* \[new tag]\s+(\S+)\s*-> (.+)$/,(t,[e,r])=>{t.tags.push({name:e,tracking:r})}),new pe(/- \[deleted]\s+\S+\s*-> (.+)$/,(t,[e])=>{t.deleted.push({tracking:e})}),new pe(/\s*([^.]+)\.\.(\S+)\s+(\S+)\s*-> (.+)$/,(t,[e,r,n,i])=>{t.updated.push({name:n,tracking:i,to:r,from:e})})]}}),pF={};wt(pF,{fetchTask:()=>Tq});function Aq(t){return/^--upload-pack(=|$)/.test(t)}function Tq(t,e,r){let n=["fetch",...r];return t&&e&&n.push(t,e),n.find(Aq)?Pr("git.fetch: potential exploit argument blocked."):{commands:n,format:"utf-8",parser:Eq}}var Cq=Y({"src/lib/tasks/fetch.ts"(){"use strict";kq(),vt()}});function Pq(t){return Ir({moves:[]},mF,t)}var mF,Rq=Y({"src/lib/parsers/parse-move.ts"(){"use strict";de(),mF=[new pe(/^Renaming (.+) to (.+)$/,(t,[e,r])=>{t.moves.push({from:e,to:r})})]}}),gF={};wt(gF,{moveTask:()=>Iq});function Iq(t,e){return{commands:["mv","-v",...mi(t),e],format:"utf-8",parser:Pq}}var Fq=Y({"src/lib/tasks/move.ts"(){"use strict";Rq(),de()}}),vF={};wt(vF,{pullTask:()=>$q});function $q(t,e,r){let n=["pull",...r];return t&&e&&n.splice(1,0,t,e),{commands:n,format:"utf-8",parser(i,a){return y0(i,a)},onError(i,a,s,o){let l=Hj(_u(i.stdOut),_u(i.stdErr));if(l)return o(new Su(l));o(a)}}}var Oq=Y({"src/lib/tasks/pull.ts"(){"use strict";vl(),UI(),de()}});function Mq(t){let e={};return wF(t,([r])=>e[r]={name:r}),Object.values(e)}function Dq(t){let e={};return wF(t,([r,n,i])=>{e.hasOwnProperty(r)||(e[r]={name:r,refs:{fetch:"",push:""}}),i&&n&&(e[r].refs[i.replace(/[^a-z]/g,"")]=n)}),Object.values(e)}function wF(t,e){t0(t,r=>e(r.split(/\s+/)))}var Lq=Y({"src/lib/responses/GetRemoteSummary.ts"(){"use strict";de()}}),yF={};wt(yF,{addRemoteTask:()=>Nq,getRemotesTask:()=>Bq,listRemotesTask:()=>Hq,remoteTask:()=>Uq,removeRemoteTask:()=>Gq});function Nq(t,e,r){return pr(["remote","add",...r,t,e])}function Bq(t){let e=["remote"];return t&&e.push("-v"),{commands:e,format:"utf-8",parser:t?Dq:Mq}}function Hq(t){let e=[...t];return e[0]!=="ls-remote"&&e.unshift("ls-remote"),pr(e)}function Uq(t){let e=[...t];return e[0]!=="remote"&&e.unshift("remote"),pr(e)}function Gq(t){return pr(["remote","remove",t])}var jq=Y({"src/lib/tasks/remote.ts"(){"use strict";Lq(),vt()}}),bF={};wt(bF,{stashListTask:()=>qq});function qq(t={},e){let r=II(t),n=["stash","list",...r.commands,...e],i=TI(r.splitter,r.fields,h0(n));return Fh(n)||{commands:n,format:"utf-8",parser:i}}var zq=Y({"src/lib/tasks/stash-list.ts"(){"use strict";Tu(),PI(),w0(),FI()}}),_F={};wt(_F,{addSubModuleTask:()=>Vq,initSubModuleTask:()=>Wq,subModuleTask:()=>Oh,updateSubModuleTask:()=>Yq});function Vq(t,e){return Oh(["add",t,e])}function Wq(t){return Oh(["init",...t])}function Oh(t){let e=[...t];return e[0]!=="submodule"&&e.unshift("submodule"),pr(e)}function Yq(t){return Oh(["update",...t])}var Xq=Y({"src/lib/tasks/sub-module.ts"(){"use strict";vt()}});function Zq(t,e){let r=isNaN(t),n=isNaN(e);return r!==n?r?1:-1:r?xF(t,e):0}function xF(t,e){return t===e?0:t>e?1:-1}function Kq(t){return t.trim()}function gh(t){return typeof t=="string"&&parseInt(t.replace(/^\D+/g,""),10)||0}var wR,SF,Jq=Y({"src/lib/responses/TagList.ts"(){"use strict";wR=class{constructor(t,e){this.all=t,this.latest=e}},SF=function(t,e=!1){let r=t.split(`
`).map(Kq).filter(Boolean);e||r.sort(function(i,a){let s=i.split("."),o=a.split(".");if(s.length===1||o.length===1)return Zq(gh(s[0]),gh(o[0]));for(let l=0,c=Math.max(s.length,o.length);l<c;l++){let u=xF(gh(s[l]),gh(o[l]));if(u)return u}return 0});let n=e?r[0]:[...r].reverse().find(i=>i.indexOf(".")>=0);return new wR(r,n)}}}),EF={};wt(EF,{addAnnotatedTagTask:()=>tz,addTagTask:()=>ez,tagListTask:()=>Qq});function Qq(t=[]){let e=t.some(r=>/^--sort=/.test(r));return{format:"utf-8",commands:["tag","-l",...t],parser(r){return SF(r,e)}}}function ez(t){return{format:"utf-8",commands:["tag",t],parser(){return{name:t}}}}function tz(t,e){return{format:"utf-8",commands:["tag","-a","-m",e,t],parser(){return{name:t}}}}var rz=Y({"src/lib/tasks/tag.ts"(){"use strict";Jq()}}),nz=bG({"src/git.js"(t,e){"use strict";var{GitExecutor:r}=(aj(),ut(vI)),{SimpleGitApi:n}=(nq(),ut(KI)),{Scheduler:i}=(iq(),ut(JI)),{configurationErrorTask:a}=(vt(),ut(Vw)),{asArray:s,filterArray:o,filterPrimitives:l,filterString:c,filterStringOrStringArray:u,filterType:f,getTrailingOptions:d,trailingFunctionArgument:h,trailingOptionsArgument:m}=(de(),ut(HR)),{applyPatchTask:g}=(sq(),ut(tF)),{branchTask:v,branchLocalTask:w,deleteBranchesTask:b,deleteBranchTask:k}=(vq(),ut(oF)),{checkIgnoreTask:E}=(bq(),ut(uF)),{checkIsRepoTask:S}=(qR(),ut(UR)),{cloneTask:A,cloneMirrorTask:y}=(Sq(),ut(fF)),{cleanWithOptionsTask:x,isCleanOptionsArray:_}=(tI(),ut(QR)),{diffSummaryTask:T}=(w0(),ut(RI)),{fetchTask:P}=(Cq(),ut(pF)),{moveTask:D}=(Fq(),ut(gF)),{pullTask:B}=(Oq(),ut(vF)),{pushTagsTask:N}=(zI(),ut(qI)),{addRemoteTask:le,getRemotesTask:Ae,listRemotesTask:we,remoteTask:fe,removeRemoteTask:Ie}=(jq(),ut(yF)),{getResetMode:ce,resetTask:j}=(hI(),ut(uI)),{stashListTask:J}=(zq(),ut(bF)),{addSubModuleTask:H,initSubModuleTask:Fe,subModuleTask:or,updateSubModuleTask:Rt}=(Xq(),ut(_F)),{addAnnotatedTagTask:$e,addTagTask:kt,tagListTask:At}=(rz(),ut(EF)),{straightThroughBufferTask:Ut,straightThroughStringTask:Xe}=(vt(),ut(Vw));function z(M,V){this._plugins=V,this._executor=new r(M.baseDir,new i(M.maxConcurrentProcesses),V),this._trimmed=M.trimmed}(z.prototype=Object.create(n.prototype)).constructor=z,z.prototype.customBinary=function(M){return this._plugins.reconfigure("binary",M),this},z.prototype.env=function(M,V){return arguments.length===1&&typeof M=="object"?this._executor.env=M:(this._executor.env=this._executor.env||{})[M]=V,this},z.prototype.stashList=function(M){return this._runTask(J(m(arguments)||{},o(M)&&M||[]),h(arguments))};function Z(M,V,Te,qe){return typeof Te!="string"?a(`git.${M}() requires a string 'repoPath'`):V(Te,f(qe,c),d(arguments))}z.prototype.clone=function(){return this._runTask(Z("clone",A,...arguments),h(arguments))},z.prototype.mirror=function(){return this._runTask(Z("mirror",y,...arguments),h(arguments))},z.prototype.mv=function(M,V){return this._runTask(D(M,V),h(arguments))},z.prototype.checkoutLatestTag=function(M){var V=this;return this.pull(function(){V.tags(function(Te,qe){V.checkout(qe.latest,M)})})},z.prototype.pull=function(M,V,Te,qe){return this._runTask(B(f(M,c),f(V,c),d(arguments)),h(arguments))},z.prototype.fetch=function(M,V){return this._runTask(P(f(M,c),f(V,c),d(arguments)),h(arguments))},z.prototype.silent=function(M){return console.warn("simple-git deprecation notice: git.silent: logging should be configured using the `debug` library / `DEBUG` environment variable, this will be an error in version 3"),this},z.prototype.tags=function(M,V){return this._runTask(At(d(arguments)),h(arguments))},z.prototype.rebase=function(){return this._runTask(Xe(["rebase",...d(arguments)]),h(arguments))},z.prototype.reset=function(M){return this._runTask(j(ce(M),d(arguments)),h(arguments))},z.prototype.revert=function(M){let V=h(arguments);return typeof M!="string"?this._runTask(a("Commit must be a string"),V):this._runTask(Xe(["revert",...d(arguments,0,!0),M]),V)},z.prototype.addTag=function(M){let V=typeof M=="string"?kt(M):a("Git.addTag requires a tag name");return this._runTask(V,h(arguments))},z.prototype.addAnnotatedTag=function(M,V){return this._runTask($e(M,V),h(arguments))},z.prototype.deleteLocalBranch=function(M,V,Te){return this._runTask(k(M,typeof V=="boolean"?V:!1),h(arguments))},z.prototype.deleteLocalBranches=function(M,V,Te){return this._runTask(b(M,typeof V=="boolean"?V:!1),h(arguments))},z.prototype.branch=function(M,V){return this._runTask(v(d(arguments)),h(arguments))},z.prototype.branchLocal=function(M){return this._runTask(w(),h(arguments))},z.prototype.raw=function(M){let V=!Array.isArray(M),Te=[].slice.call(V?arguments:M,0);for(let It=0;It<Te.length&&V;It++)if(!l(Te[It])){Te.splice(It,Te.length-It);break}Te.push(...d(arguments,0,!0));var qe=h(arguments);return Te.length?this._runTask(Xe(Te,this._trimmed),qe):this._runTask(a("Raw: must supply one or more command to execute"),qe)},z.prototype.submoduleAdd=function(M,V,Te){return this._runTask(H(M,V),h(arguments))},z.prototype.submoduleUpdate=function(M,V){return this._runTask(Rt(d(arguments,!0)),h(arguments))},z.prototype.submoduleInit=function(M,V){return this._runTask(Fe(d(arguments,!0)),h(arguments))},z.prototype.subModule=function(M,V){return this._runTask(or(d(arguments)),h(arguments))},z.prototype.listRemote=function(){return this._runTask(we(d(arguments)),h(arguments))},z.prototype.addRemote=function(M,V,Te){return this._runTask(le(M,V,d(arguments)),h(arguments))},z.prototype.removeRemote=function(M,V){return this._runTask(Ie(M),h(arguments))},z.prototype.getRemotes=function(M,V){return this._runTask(Ae(M===!0),h(arguments))},z.prototype.remote=function(M,V){return this._runTask(fe(d(arguments)),h(arguments))},z.prototype.tag=function(M,V){let Te=d(arguments);return Te[0]!=="tag"&&Te.unshift("tag"),this._runTask(Xe(Te),h(arguments))},z.prototype.updateServerInfo=function(M){return this._runTask(Xe(["update-server-info"]),h(arguments))},z.prototype.pushTags=function(M,V){let Te=N({remote:f(M,c)},d(arguments));return this._runTask(Te,h(arguments))},z.prototype.rm=function(M){return this._runTask(Xe(["rm","-f",...s(M)]),h(arguments))},z.prototype.rmKeepLocal=function(M){return this._runTask(Xe(["rm","--cached",...s(M)]),h(arguments))},z.prototype.catFile=function(M,V){return this._catFile("utf-8",arguments)},z.prototype.binaryCatFile=function(){return this._catFile("buffer",arguments)},z.prototype._catFile=function(M,V){var Te=h(V),qe=["cat-file"],It=V[0];if(typeof It=="string")return this._runTask(a("Git.catFile: options must be supplied as an array of strings"),Te);Array.isArray(It)&&qe.push.apply(qe,It);let po=M==="buffer"?Ut(qe):Xe(qe);return this._runTask(po,Te)},z.prototype.diff=function(M,V){let Te=c(M)?a("git.diff: supplying options as a single string is no longer supported, switch to an array of strings"):Xe(["diff",...d(arguments)]);return this._runTask(Te,h(arguments))},z.prototype.diffSummary=function(){return this._runTask(T(d(arguments,1)),h(arguments))},z.prototype.applyPatch=function(M){let V=u(M)?g(s(M),d([].slice.call(arguments,1))):a("git.applyPatch requires one or more string patches as the first argument");return this._runTask(V,h(arguments))},z.prototype.revparse=function(){let M=["rev-parse",...d(arguments,!0)];return this._runTask(Xe(M,!0),h(arguments))},z.prototype.clean=function(M,V,Te){let qe=_(M),It=qe&&M.join("")||f(M,c)||"",po=d([].slice.call(arguments,qe?1:0));return this._runTask(x(It,po),h(arguments))},z.prototype.exec=function(M){let V={commands:[],format:"utf-8",parser(){typeof M=="function"&&M()}};return this._runTask(V)},z.prototype.clearQueue=function(){return this},z.prototype.checkIgnore=function(M,V){return this._runTask(E(s(f(M,u,[]))),h(arguments))},z.prototype.checkIsRepo=function(M,V){return this._runTask(S(f(M,c)),h(arguments))},e.exports=z}});xu();ja();var iz=class extends Rr{constructor(t,e){super(void 0,e),this.config=t}};ja();ja();var Xi=class extends Rr{constructor(t,e,r){super(t,r),this.task=t,this.plugin=e,Object.setPrototypeOf(this,new.target.prototype)}};vl();ER();qR();tI();iI();sI();cI();hI();function az(t){return t?[{type:"spawn.before",action(n,i){t.aborted&&i.kill(new Xi(void 0,"abort","Abort already signaled"))}},{type:"spawn.after",action(n,i){function a(){i.kill(new Xi(void 0,"abort","Abort signal received"))}t.addEventListener("abort",a),i.spawned.on("close",()=>t.removeEventListener("abort",a))}}]:void 0}function sz(t){return typeof t=="string"&&t.trim().toLowerCase()==="-c"}function oz(t,e){if(sz(t)&&/^\s*protocol(.[a-z]+)?.allow/.test(e))throw new Xi(void 0,"unsafe","Configuring protocol.allow is not permitted without enabling allowUnsafeExtProtocol")}function lz(t,e){if(/^\s*--(upload|receive)-pack/.test(t))throw new Xi(void 0,"unsafe","Use of --upload-pack or --receive-pack is not permitted without enabling allowUnsafePack");if(e==="clone"&&/^\s*-u\b/.test(t))throw new Xi(void 0,"unsafe","Use of clone with option -u is not permitted without enabling allowUnsafePack");if(e==="push"&&/^\s*--exec\b/.test(t))throw new Xi(void 0,"unsafe","Use of push with option --exec is not permitted without enabling allowUnsafePack")}function cz({allowUnsafeProtocolOverride:t=!1,allowUnsafePack:e=!1}={}){return{type:"spawn.args",action(r,n){return r.forEach((i,a)=>{let s=a<r.length?r[a+1]:"";t||oz(i,s),e||lz(i,n.method)}),r}}}de();function uz(t){let e=bu(t,"-c");return{type:"spawn.args",action(r){return[...e,...r]}}}de();var yR=(0,ml.deferred)().promise;function fz({onClose:t=!0,onExit:e=50}={}){function r(){let i=-1,a={close:(0,ml.deferred)(),closeTimeout:(0,ml.deferred)(),exit:(0,ml.deferred)(),exitTimeout:(0,ml.deferred)()},s=Promise.race([t===!1?yR:a.closeTimeout.promise,e===!1?yR:a.exitTimeout.promise]);return n(t,a.close,a.closeTimeout),n(e,a.exit,a.exitTimeout),{close(o){i=o,a.close.done()},exit(o){i=o,a.exit.done()},get exitCode(){return i},result:s}}function n(i,a,s){i!==!1&&(i===!0?a.promise:a.promise.then(()=>Hw(i))).then(s.done)}return{type:"spawn.after",async action(i,{spawned:a,close:s}){var u,f;let o=r(),l=!0,c=()=>void(l=!1);(u=a.stdout)==null||u.on("data",c),(f=a.stderr)==null||f.on("data",c),a.on("error",c),a.on("close",d=>o.close(d)),a.on("exit",d=>o.exit(d));try{await o.result,l&&await Hw(50),s(o.exitCode)}catch(d){s(o.exitCode,d)}}}}de();var dz="Invalid value supplied for custom binary, requires a single string or an array containing either one or two strings",bR="Invalid value supplied for custom binary, restricted characters must be removed or supply the unsafe.allowUnsafeCustomBinary option";function hz(t){return!t||!/^([a-z]:)?([a-z0-9/.\\_-]+)$/i.test(t)}function _R(t,e){if(t.length<1||t.length>2)throw new Xi(void 0,"binary",dz);if(t.some(hz))if(e)console.warn(bR);else throw new Xi(void 0,"binary",bR);let[n,i]=t;return{binary:n,prefix:i}}function pz(t,e=["git"],r=!1){let n=_R(mi(e),r);t.on("binary",i=>{n=_R(mi(i),r)}),t.append("spawn.binary",()=>n.binary),t.append("spawn.args",i=>n.prefix?[n.prefix,...i]:i)}ja();function mz(t){return!!(t.exitCode&&t.stdErr.length)}function gz(t){return Buffer.concat([...t.stdOut,...t.stdErr])}function vz(t=!1,e=mz,r=gz){return(n,i)=>!t&&n||!e(i)?n:r(i)}function xR(t){return{type:"task.error",action(e,r){let n=t(e.error,{stdErr:r.stdErr,stdOut:r.stdOut,exitCode:r.exitCode});return Buffer.isBuffer(n)?{error:new Rr(void 0,n.toString("utf-8"))}:{error:n}}}}de();var wz=class{constructor(){this.plugins=new Set,this.events=new kF.EventEmitter}on(t,e){this.events.on(t,e)}reconfigure(t,e){this.events.emit(t,e)}append(t,e){let r=De(this.plugins,{type:t,action:e});return()=>this.plugins.delete(r)}add(t){let e=[];return mi(t).forEach(r=>r&&this.plugins.add(De(e,r))),()=>{e.forEach(r=>this.plugins.delete(r))}}exec(t,e,r){let n=e,i=Object.freeze(Object.create(r));for(let a of this.plugins)a.type===t&&(n=a.action(n,i));return n}};de();function yz(t){let e="--progress",r=["checkout","clone","fetch","pull","push"];return[{type:"spawn.args",action(a,s){return r.includes(s.method)?RR(a,e):a}},{type:"spawn.after",action(a,s){var o;s.commands.includes(e)&&((o=s.spawned.stderr)==null||o.on("data",l=>{let c=/^([\s\S]+?):\s*(\d+)% \((\d+)\/(\d+)\)/.exec(l.toString("utf8"));c&&t({method:s.method,stage:bz(c[1]),progress:Ve(c[2]),processed:Ve(c[3]),total:Ve(c[4])})}))}}]}function bz(t){return String(t.toLowerCase().split(" ",1))||"unknown"}de();function _z(t){let e=$R(t,["uid","gid"]);return{type:"spawn.options",action(r){return{...e,...r}}}}function xz({block:t,stdErr:e=!0,stdOut:r=!0}){if(t>0)return{type:"spawn.after",action(n,i){var c,u;let a;function s(){a&&clearTimeout(a),a=setTimeout(l,t)}function o(){var f,d;(f=i.spawned.stdout)==null||f.off("data",s),(d=i.spawned.stderr)==null||d.off("data",s),i.spawned.off("exit",o),i.spawned.off("close",o),a&&clearTimeout(a)}function l(){o(),i.kill(new Xi(void 0,"timeout","block timeout reached"))}r&&((c=i.spawned.stdout)==null||c.on("data",s)),e&&((u=i.spawned.stderr)==null||u.on("data",s)),i.spawned.on("exit",o),i.spawned.on("close",o),s()}}}xu();function Sz(){return{type:"spawn.args",action(t){let e=[],r;function n(i){(r=r||[]).push(...i)}for(let i=0;i<t.length;i++){let a=t[i];if(bh(a)){n(VP(a));continue}if(a==="--"){n(t.slice(i+1).flatMap(s=>bh(s)&&VP(s)||s));break}e.push(a)}return r?[...e,"--",...r.map(String)]:e}}}de();var Ez=nz();function kz(t,e){var i;let r=new wz,n=NR(t&&(typeof t=="string"?{baseDir:t}:t)||{},e);if(!r0(n.baseDir))throw new iz(n,"Cannot use simple-git on a directory that does not exist");return Array.isArray(n.config)&&r.add(uz(n.config)),r.add(cz(n.unsafe)),r.add(Sz()),r.add(fz(n.completion)),n.abort&&r.add(az(n.abort)),n.progress&&r.add(yz(n.progress)),n.timeout&&r.add(xz(n.timeout)),n.spawnOptions&&r.add(_z(n.spawnOptions)),r.add(xR(vz(!0))),n.errors&&r.add(xR(n.errors)),pz(r,n.binary,(i=n.unsafe)==null?void 0:i.allowUnsafeCustomBinary),new Ez(n,r)}vl();var AF=kz;var Ee=class extends ul{constructor(r){super(r);this.useDefaultWindowsGitPath=!1}async setGitInstance(r=!1){var n;if(await this.isGitInstalled()){let i=this.app.vault.adapter,a=i.getBasePath(),s=a;this.plugin.settings.basePath&&(await i.exists((0,Zi.normalizePath)(this.plugin.settings.basePath))?s=Ge.join(a,this.plugin.settings.basePath):r||new Zi.Notice("ObsidianGit: Base path does not exist")),this.absoluteRepoPath=s,this.git=AF({baseDir:s,binary:this.plugin.localStorage.getGitPath()||(this.useDefaultWindowsGitPath?Od:void 0),config:["core.quotepath=off"],unsafe:{allowUnsafeCustomBinary:!0}});let o=this.plugin.localStorage.getPATHPaths(),l=this.plugin.localStorage.getEnvVars(),c=this.plugin.settings.gitDir;if(o.length>0){let v=o.join(":")+":"+process.env.PATH;process.env.PATH=v}c&&(process.env.GIT_DIR=c);for(let v of l){let[w,b]=v.split("=");process.env[w]=b}let u="simple-git",f=",",h=((n=localStorage.debug)!=null?n:"").split(f);if(!h.includes(u)&&!h.includes(`-${u}`)&&(h.push(u),PF.default.enable(h.join(f))),await this.git.checkIsRepo()){let v=await this.git.revparse("--show-cdup"),w=(0,Cu.resolve)(s+Cu.sep+v);this.absoluteRepoPath=w,await this.git.cwd(w)}let m=Ge.join(a,this.app.vault.configDir,"plugins","obsidian-git"),g=Ge.join(m,Es);process.env.SSH_ASKPASS==null&&(process.env.SSH_ASKPASS=g),process.env.OBSIDIAN_GIT_CREDENTIALS_INPUT=Ge.join(m,Md),process.env.SSH_ASKPASS==g&&this.askpass().catch(v=>this.plugin.displayError(v))}}getRelativeVaultPath(r){let i=this.app.vault.adapter.getBasePath(),a=Ge.join(this.absoluteRepoPath,r),s=Ge.relative(i,a);return Zi.Platform.isWin&&(s=s.replace(/\\/g,"/")),s}getRelativeRepoPath(r,n=!0){if(n){let a=this.plugin.app.vault.adapter.getBasePath(),s=this.absoluteRepoPath,o=Ge.join(a,r),l=Ge.relative(s,o);return Zi.Platform.isWin&&(l=l.replace(/\\/g,"/")),l}return r}get absPluginConfigPath(){let n=this.app.vault.adapter.getBasePath();return Ge.join(n,this.app.vault.configDir,"plugins","obsidian-git")}get relPluginConfigPath(){return Ge.join(this.app.vault.configDir,"plugins","obsidian-git")}async askpass(){let r=this.app.vault.adapter,n=this.app.vault.configDir+"/plugins/obsidian-git/";await this.addAskPassScriptToExclude(),await Jr.writeFile(Ge.join(this.absPluginConfigPath,Es),$A),await Jr.chmod(Ge.join(this.absPluginConfigPath,Es),493),this.watchAbortController=new AbortController;let{signal:i}=this.watchAbortController;try{let a=Jr.watch(this.absPluginConfigPath,{signal:i});for await(let s of a){if(s.filename!=Md)continue;let o=n+Md;if(!await r.exists(o))continue;let l=await r.read(o),c;l.length>60&&(c=new Zi.Notice(l,999999));let u=await new Ke(this.plugin,{allowEmpty:!0,obscure:!0,placeholder:l.length>60?"Enter a response to the message.":l}).openAndGetResult();c==null||c.hide(),await r.exists(o)&&await r.write(`${o}.response`,u!=null?u:"")}}catch(a){this.plugin.displayError(a),await Jr.rm(Ge.join(this.absPluginConfigPath,Es),{force:!0}),await Jr.rm(Ge.join(this.absPluginConfigPath,`${Es}.response`),{force:!0}),await new Promise(s=>setTimeout(s,5e3)),this.plugin.log("Retry watch for ask pass"),await this.askpass()}}async addAskPassScriptToExclude(){try{let r=await this.git.revparse(["--path-format=absolute","--git-path","info/exclude"]),n=Ge.join(this.app.vault.configDir,"plugins","obsidian-git",Es),i=this.getRelativeRepoPath(n,!0);(await Jr.readFile(r,"utf-8")).split(`
`).some(l=>l.contains(i))||await Jr.appendFile(r,i+`
`)}catch(r){console.error("Error while adding askpass script to exclude file:",r)}}unload(){var r;(r=this.watchAbortController)==null||r.abort()}async status(r){let n=r==null?void 0:r.path;this.plugin.setPluginState({gitAction:1});let i=await this.git.status(n!=null?["--",n]:[]);this.plugin.setPluginState({gitAction:0});let a=i.files.map(s=>{let o=this.formatPath(s);return{path:o.path,from:o.from,index:s.index==="?"?"U":s.index,workingDir:s.working_dir==="?"?"U":s.working_dir,vaultPath:this.getRelativeVaultPath(o.path)}});return{all:a,changed:a.filter(s=>s.workingDir!==" "),staged:a.filter(s=>s.index!==" "&&s.index!="U"),conflicted:i.conflicted.map(s=>this.formatPath({path:s}).path)}}async submoduleAwareHeadRevisonInContainingDirectory(r){let n=this.getRelativeRepoPath(r),a=["-C",Ge.dirname(n),"rev-parse","HEAD"],s=this.git.raw(a);return s.catch(o=>console.warn("obsidian-git: rev-parse error:",o)),(await s).trim()}async getSubmodulePaths(){return new Promise(r=>{this.git.outputHandler((n,i,a,s)=>{if(!(s.contains("submodule")&&s.contains("foreach")))return;let o="",l=this.app.vault.adapter.getBasePath()+(this.plugin.settings.basePath?"/"+this.plugin.settings.basePath:"");i.on("data",c=>{o+=c.toString("utf8")}),i.on("end",()=>{let u=o.split(`
`).map(f=>{let d=f.match(/'([^']*)'/);if(d!=null)return l+"/"+d[1]+Cu.sep}).filter(f=>!!f);u.reverse(),r(u)})}),this.git.subModule(["foreach","--recursive",""]).then(()=>{this.git.outputHandler(()=>{})},n=>this.plugin.displayError(n))})}formatPath(r){function n(i){if(i!=null)return i.startsWith('"')&&i.endsWith('"')?i.substring(1,i.length-1):i}return r.from!=null?{from:n(r.from),path:n(r.path)}:{path:n(r.path)}}async blame(r,n,i){if(r=this.getRelativeRepoPath(r),!await this.isTracked(r))return"untracked";let a=await this.getSubmoduleOfFile(r),s=a?["-C",a.submodule]:[],o=a?a.relativeFilepath:r;s.push("blame","--porcelain"),i&&s.push("-w");let l=`-C${$d}`;switch(n){case"inactive":break;case"same-commit":s.push("-C",l);break;case"all-commits":s.push("-C","-C",l);break;default:Ha(n)}s.push("--",o);let c=await this.git.raw(s);return Az(c)}async isTracked(r){let n=await this.getSubmoduleOfFile(r),i=n?["-C",n.submodule]:[],a=n?n.relativeFilepath:r;return i.push("ls-files","--",a),this.git.raw(i).then(s=>s.trim()!=="")}async commitAll({message:r}){if(this.plugin.settings.updateSubmodules){this.plugin.setPluginState({gitAction:4});let i=await this.getSubmodulePaths();for(let a of i)await this.git.cwd({path:a,root:!1}).add("-A"),await this.git.cwd({path:a,root:!1}).commit(await this.formatCommitMessage(r))}this.plugin.setPluginState({gitAction:3}),await this.git.add("-A"),this.plugin.setPluginState({gitAction:4});let n=await this.git.commit(await this.formatCommitMessage(r));return this.app.workspace.trigger("obsidian-git:head-change"),n.summary.changes}async commit({message:r,amend:n}){this.plugin.setPluginState({gitAction:4});let i=(await this.git.commit(await this.formatCommitMessage(r),n?["--amend"]:[])).summary.changes;return this.app.workspace.trigger("obsidian-git:head-change"),this.plugin.setPluginState({gitAction:0}),i}async stage(r,n){this.plugin.setPluginState({gitAction:3}),r=this.getRelativeRepoPath(r,n),await this.git.add(["--",r]),this.plugin.setPluginState({gitAction:0})}async stageAll({dir:r}){this.plugin.setPluginState({gitAction:3}),await this.git.add(r!=null?r:"-A"),this.plugin.setPluginState({gitAction:0})}async unstageAll({dir:r}){this.plugin.setPluginState({gitAction:3}),await this.git.reset(r!=null?["--",r]:[]),this.plugin.setPluginState({gitAction:0})}async unstage(r,n){this.plugin.setPluginState({gitAction:3}),r=this.getRelativeRepoPath(r,n),await this.git.reset(["--",r]),this.plugin.setPluginState({gitAction:0})}async discard(r){this.plugin.setPluginState({gitAction:3}),await this.isTracked(r)&&await this.git.checkout(["--",r]),this.plugin.setPluginState({gitAction:0})}async applyPatch(r){let n=Ge.join(this.relPluginConfigPath,"patch");await this.app.vault.adapter.write(n,r),await this.git.applyPatch(n,{"--cached":null,"--unidiff-zero":null,"--whitespace":"nowarn"}),await this.app.vault.adapter.remove(n)}async getUntrackedPaths(r){let n=r==null?void 0:r.path;this.plugin.setPluginState({gitAction:1});let i=[];n!=null&&i.push("--",n);let a=await this.git.clean(Rs.RECURSIVE+Rs.DRY_RUN,i);return this.plugin.setPluginState({gitAction:0}),a.paths}async hashObject(r){r=this.getRelativeRepoPath(r);let n=await this.getSubmoduleOfFile(r),i=n?["-C",n.submodule]:[],a=n?n.relativeFilepath:r;return i.push("hash-object","--",a),this.git.raw(i)}async discardAll({dir:r}){return this.discard(r!=null?r:".")}async pull(){this.plugin.setPluginState({gitAction:2});try{this.plugin.settings.updateSubmodules&&await this.git.subModule(["update","--remote","--merge","--recursive"]);let r=await this.branchInfo(),n=await this.git.revparse([r.current]);if(!r.tracking&&this.plugin.settings.updateSubmodules){this.plugin.log("No tracking branch found. Ignoring pull of main repo and updating submodules only.");return}await this.git.fetch();let i=await this.git.revparse([r.tracking]);if(n!==i){if(this.plugin.settings.syncMethod==="merge"||this.plugin.settings.syncMethod==="rebase")try{let o=[r.tracking];switch(this.plugin.settings.mergeStrategy!=="none"&&o.push(`--strategy-option=${this.plugin.settings.mergeStrategy}`),this.plugin.settings.syncMethod){case"merge":await this.git.merge(o);break;case"rebase":await this.git.rebase(o)}}catch(o){this.plugin.displayError(`Pull failed (${this.plugin.settings.syncMethod}): ${"message"in o?o.message:o}`);return}else if(this.plugin.settings.syncMethod==="reset")try{await this.git.raw(["update-ref",`refs/heads/${r.current}`,i]),await this.unstageAll({})}catch(o){this.plugin.displayError(`Sync failed (${this.plugin.settings.syncMethod}): ${"message"in o?o.message:o}`)}this.app.workspace.trigger("obsidian-git:head-change");let a=await this.git.revparse([r.current]);return(await this.git.diff([`${n}..${a}`,"--name-only"])).split(/\r\n|\r|\n/).filter(o=>o.length>0).map(o=>({path:o,workingDir:"P",vaultPath:this.getRelativeVaultPath(o)}))}else return[]}catch(r){this.convertErrors(r)}}async push(){this.plugin.setPluginState({gitAction:5});try{if(this.plugin.settings.updateSubmodules){let s=await this.git.env({...process.env,OBSIDIAN_GIT:1}).subModule(["foreach","--recursive",`tracking=$(git for-each-ref --format='%(upstream:short)' "$(git symbolic-ref -q HEAD)"); echo $tracking; if [ ! -z "$(git diff --shortstat $tracking)" ]; then git push; fi`]);console.log(s)}let r=await this.git.status(),n=r.tracking,i=r.current;if(!n&&this.plugin.settings.updateSubmodules){this.plugin.log("No tracking branch found. Ignoring push of main repo and updating submodules only.");return}let a=(await this.git.diffSummary([i,n,"--"])).changed;return await this.git.env({...process.env,OBSIDIAN_GIT:1}).push(),a}catch(r){this.convertErrors(r)}}async getUnpushedCommits(){let r=await this.git.status(),n=r.tracking,i=r.current;if(n==null||i==null)return 0;let[a,s]=Yi(n);return(await this.getRemoteBranches(a)).includes(n)?(await this.git.diffSummary([i,n,"--"])).changed:(this.plugin.log(`Tracking branch ${n} does not exist on remote ${a}.`),0)}async canPush(){if(this.plugin.settings.updateSubmodules===!0)return!0;let r=await this.git.status(),n=r.tracking,i=r.current;return n?(await this.git.diffSummary([i,n,"--"])).changed!==0:!1}async checkRequirements(){return await this.isGitInstalled()?await this.git.checkIsRepo()?"valid":"missing-repo":"missing-git"}async branchInfo(){let r=await this.git.status(),n=await this.git.branch(["--no-color"]);return{current:r.current||void 0,tracking:r.tracking||void 0,branches:n.all}}async getRemoteUrl(r){try{return await this.git.remote(["get-url",r])||void 0}catch(n){if(String(n).contains(r))return;throw n}}async log(r,n=!0,i,a){let s;r&&(s=this.getRelativeRepoPath(r,n));let o={file:s,maxCount:i,"--diff-merges":"first-parent","--name-status":null};return a&&(o[a]=null),(await this.git.log(o)).all.map(c=>{var u,f,d,h;return{...c,author:{name:c.author_name,email:c.author_email},refs:c.refs.split(", ").filter(m=>m.length>0),diff:{...c.diff,files:(f=(u=c.diff)==null?void 0:u.files.map(m=>({...m,status:m.status,path:m.file,hash:c.hash,vaultPath:this.getRelativeVaultPath(m.file),fromPath:m.from,fromVaultPath:m.from!=null?this.getRelativeVaultPath(m.from):void 0,binary:m.binary})))!=null?f:[]},fileName:(h=(d=c.diff)==null?void 0:d.files.first())==null?void 0:h.file}})}async show(r,n,i=!0){let a=this.getRelativeRepoPath(n,i);return this.git.show([r+":"+a])}async checkout(r,n){if(n&&(r=`${n}/${r}`),await this.git.checkout(r),this.plugin.settings.submoduleRecurseCheckout){let i=await this.getSubmodulePaths();for(let a of i){let s=await this.git.cwd({path:a,root:!1}).branch();Object.keys(s.branches).includes(r)&&await this.git.cwd({path:a,root:!1}).checkout(r)}}}async createBranch(r){await this.git.checkout(["-b",r])}async deleteBranch(r,n){await this.git.branch([n?"-D":"-d",r])}async branchIsMerged(r){return!(await this.git.branch(["--no-merged"])).all.contains(r)}async init(){await this.git.init(!1)}async clone(r,n,i){await this.git.clone(r,Ge.join(this.app.vault.adapter.getBasePath(),n),i?["--depth",`${i}`]:[])}async setConfig(r,n){n==null?await this.git.raw(["config","--local","--unset",r]):await this.git.addConfig(r,n)}async getConfig(r){let i=(await this.git.listConfig("local")).all[r];if(typeof i=="string"||i==null)return i;throw new Error("Config value is not a string")}async fetch(r){await this.git.fetch(r!=null?[r]:[])}async setRemote(r,n){(await this.getRemotes()).includes(r)?await this.git.remote(["set-url",r,n]):await this.git.remote(["add",r,n])}async getRemoteBranches(r){let n=await this.git.branch(["-r","--list",`${r}*`]),i=[];for(let a in n.branches)i.push(n.branches[a].name);return i}async getRemotes(){let r=await this.git.remote([]);return r?r.trim().split(`
`):[]}async removeRemote(r){await this.git.removeRemote(r)}async updateUpstreamBranch(r){try{await this.git.branch(["--set-upstream-to",r])}catch(n){try{await this.git.branch(["--set-upstream",r])}catch(i){let[a,s]=Yi(r),o=await this.branchInfo();await this.git.push(["--set-upstream",a,`${o.current}:${s}`])}}}updateGitPath(r){return this.setGitInstance()}updateBasePath(r){return this.setGitInstance(!0)}async getDiffString(r,n=!1,i){return n?await this.git.diff(["--cached","--",r]):i?await this.git.show([`${i}`,"--",r]):await this.git.diff(["--",r])}async diff(r,n,i){return await this.git.diff([`${n}..${i}`,"--",r])}async rawCommand(r){let n=r.split(" ");return await this.git.raw(n[0],...n.slice(1))}async getSubmoduleOfFile(r){if(!await this.app.vault.adapter.exists(Ge.dirname(r)))return;let n=await this.git.raw(["-C",Ge.dirname(r),"rev-parse","--show-toplevel"],l=>l&&console.warn("get-submodule-of-file",l==null?void 0:l.message));if(n=n.trim(),(await this.git.raw(["-C",Ge.dirname(r),"rev-parse","--show-superproject-working-tree"],l=>l&&console.warn("get-submodule-of-file",l==null?void 0:l.message))).trim()==="")return;let s=this.app.vault.adapter.getFullPath(Ge.normalize(r)),o=Ge.relative(n,s);return{submodule:n,relativeFilepath:o}}async getLastCommitTime(){try{let r=await this.git.log({n:1});if(r!=null&&r.latest!=null)return new Date(r.latest.date)}catch(r){if(r instanceof Rr){if(r.message.contains("does not have any commits yet"))return}else throw r}}async isGitInstalled(){let r=this.plugin.localStorage.getGitPath(),n=await wu(r||"git",["--version"],{});if(n.error)if(Zi.Platform.isWin&&!r){this.plugin.log(`Git not found in PATH. Checking standard installation path(${Od}) of Git for Windows.`);let i=await wu(Od,["--version"]);if(i.error)return console.error(i.error),!1;this.useDefaultWindowsGitPath=!0}else return console.error(n.error),!1;else this.useDefaultWindowsGitPath=!1;return!0}convertErrors(r){if(r instanceof Rr){let n=String(r.message);if(n.contains("Could not resolve host")||n.contains("Unable to resolve host")||n.contains("Unable to open connection")||n.match(/ssh: connect to host .*? port .*?: Operation timed out/)!=null||n.match(/ssh: connect to host .*? port .*?: Network is unreachable/)!=null||n.match(/ssh: connect to host .*? port .*?: Undefined error: 0/)!=null)throw new rl(n)}throw r}async isFileTrackedByLFS(r){try{return(await this.git.raw(["check-attr","filter",r])).includes("filter: lfs")}catch(n){let i=n instanceof Error?n.message:String(n);return this.plugin.displayError(`Error checking LFS status: ${i}`),!1}}},RF={hash:"000000",isZeroCommit:!0,summary:""};function Az(t){let r=t.replace(`\r
`,`
`).split(`
`),n={commits:new Map,hashPerLine:[void 0],originalFileLineNrPerLine:[void 0],finalFileLineNrPerLine:[void 0],groupSizePerStartingLine:new Map},i=1;for(let a=0;a<r.length;){if(TF(r[a])){let s=r[a].split(" "),o=Tz(s,i,n);for(a++;TF(r[a]);a++){let l=r[a].split(" ");Cz(l,n,i)}Pz(n.commits.get(o)),i+=1}else if(!(r[a]===""&&a===r.length-1))throw Error(`Expected non-whitespace line or EOF, but found: ${r[a]}`);a++}return n}function Tz(t,e,r){let n=t[0];if(r.hashPerLine.push(n),r.originalFileLineNrPerLine.push(parseInt(t[1])),r.finalFileLineNrPerLine.push(parseInt(t[2])),t.length>=4&&r.groupSizePerStartingLine.set(e,parseInt(t[3])),parseInt(t[2])!==e)throw Error(`git-blame output is out of order: ${e} vs ${t[2]}`);return n}function Cz(t,e,r){let n=t[0],i=t.slice(1).join(" "),a=e.hashPerLine[r],s=e.commits.get(a)||{hash:a,author:{},committer:{},previous:{}};switch(n){case"summary":s.summary=i;break;case"author":s.author.name=i;break;case"author-mail":s.author.email=CF(i);break;case"author-time":s.author.epochSeconds=parseInt(i);break;case"author-tz":s.author.tz=i;break;case"committer":s.committer.name=i;break;case"committer-mail":s.committer.email=CF(i);break;case"committer-time":s.committer.epochSeconds=parseInt(i);break;case"committer-tz":s.committer.tz=i;break;case"previous":s.previous.commitHash=i;break;case"filename":s.previous.filename=i;break}e.commits.set(a,s)}function Pz(t){if(t.summary===void 0)throw Error(`Summary not provided for commit: ${t.hash}`);x0(t.author)&&(t.author=void 0),x0(t.committer)&&(t.committer=void 0),x0(t.previous)&&(t.previous=void 0),t.isZeroCommit=!!t.hash.match(/^0*$/)}function x0(t){return!t||Object.keys(t).length===0}function TF(t){return t.length>0&&t[0].trim()===t[0]}function CF(t){let e=t.startsWith("<")?t.substring(1):t;return e.endsWith(">")?e.substring(0,e.length-1):e}p();var t$=require("@codemirror/state");p();var S0=class{constructor(){this.eventsPerFilepath=new Map;this.startRemoveStalesSubscribersInterval()}ifFilepathDefinedTransformSubscribers(e,r){if(e)return this.ensureInitialized(e),r(this.eventsPerFilepath.get(e))}forEachSubscriber(e){this.eventsPerFilepath.forEach(r=>r.forEach(e))}ensureInitialized(e){this.eventsPerFilepath.get(e)||this.eventsPerFilepath.set(e,new Set)}startRemoveStalesSubscribersInterval(){this.removeStalesSubscribersTimer=window.setInterval(()=>this==null?void 0:this.forEachSubscriber(e=>e==null?void 0:e.removeIfStale()),6e4)}clear(){window.clearInterval(this.removeStalesSubscribersTimer),this.eventsPerFilepath.clear()}},Ki=new S0;p();var Dh=require("@codemirror/state"),IF=Ft(E0());function FF(t,e,r){if(!(t===void 0||e===void 0||r===void 0))return`head${t}-obj${e}-path${r}`}var $F=Dh.StateEffect.define();function OF(t,e,r){return r.update({effects:$F.of({key:t,la:e,lineOffsetsFromUnsavedChanges:new Map})})}var wl=Dh.StateField.define({create:t=>{},update:(t,e)=>{for(let r of e.effects)if(r.is($F))return r.value;return Rz(e,t)},compare:(t,e)=>(t==null?void 0:t.key)===(e==null?void 0:e.key)});function Lh(t){var a;let e=IF.sha256.create();if(!t)return e;let{la:r,key:n,lineOffsetsFromUnsavedChanges:i}=t;e.update(r==="untracked"?"t":"f"),e.update(n);for(let[s,o]of(a=i.entries())!=null?a:[])e.update([s,o]);return e}var wn={get:void 0,save:void 0};function MF(t,e){wn.get=t,wn.save=e}function Nh(t){var e,r;return(r=(e=Mh(t.coloringMaxAge))==null?void 0:e.asDays())!=null?r:Mh(et.lineAuthor.coloringMaxAge).asDays()}function Rz(t,e){if(e)return t.changes.empty||t.changes.iterChanges((r,n,i,a)=>{var m;let s=t.startState.doc,{newDoc:o}=t,l=s.lineAt(r).number,c=s.lineAt(n).number,u=o.lineAt(i).number,f=o.lineAt(a).number,d=c-l+1,h=f-u+1;for(let g=u;g<=f;g++){let v=(m=e.lineOffsetsFromUnsavedChanges.get(g))!=null?m:0,w=f===g,b=h-d;w&&(v+=b),e.lineOffsetsFromUnsavedChanges.set(g,v)}}),e}p();function DF(){yl=void 0,k0=[],Bh=0,Uh.clear(),Gh.clear(),bl.clear()}var yl,Hh=()=>yl;function LF(t,e){var i;let r=e.length;if(r<((i=yl==null?void 0:yl.length)!=null?i:0))return;yl={gutter:t,length:r,text:e};let n=wn.get();r!==n.gutterSpacingFallbackLength&&(n.gutterSpacingFallbackLength=r,wn.save(n))}var k0=[],Iz=15,Bh=0;function NF(t){k0[Bh]=t,Bh=(Bh+1)%Iz}function BF(){return TP(k0)}var Uh=new Map,Gh=new Map,bl=new Set;p();var JF=require("@codemirror/state"),QF=require("@codemirror/view");p();var P0=require("@codemirror/view"),YF=Ft(E0()),Vh=require("obsidian");p();p();var jh={x:-10,y:-10};function HF(){jh.x===-10&&window.addEventListener("mousedown",t=>{jh.x=t.clientX,jh.y=t.clientY})}function UF(){for(let t of bl)if(Fz(t,jh))return t}function Fz(t,e){let{x:r,y:n,width:i,height:a}=t.getBoundingClientRect();return r<=e.x&&e.x<=r+i&&n<=e.y&&e.y<=n+a}var GF="data-commit";function jF(t,e,r){if(e.hasFocus())return;let n=UF();if(!n)return;let i=Oz(n);i&&(!i.isZeroCommit&&!i.isWaitingGutter&&$z(i,t),A0("showCommitHash",t),A0("authorDisplay",t),A0("dateTimeFormatOptions",t))}function $z(t,e){e.addItem(r=>r.setTitle("Copy commit hash").setIcon("copy").setSection("obs-git-line-author-copy").onClick(n=>navigator.clipboard.writeText(t.hash)))}function A0(t,e){var l,c;let r,n,i=ui.plugin.settings.lineAuthor,a=i[t],s=typeof a=="boolean"?a:a!=="hide",o=et.lineAuthor[t];if(t==="showCommitHash")r="Show commit hash",n=a;else if(t==="authorDisplay"){let u=(l=i.lastShownAuthorDisplay)!=null?l:o;r="Show author "+(s?a:u),n=s?"hide":u}else if(t==="dateTimeFormatOptions"){let u=(c=i.lastShownDateTimeFormatOptions)!=null?c:o;r="Show "+(s?a:u),r+=r.contains("date")?"":" date",n=s?"hide":u}else Ha(t);e.addItem(u=>u.setTitle(r).setSection("obs-git-line-author-configure").setChecked(s).onClick(f=>{var d,h;return(h=(d=ui.plugin)==null?void 0:d.settingsTab)==null?void 0:h.lineAuthorSettingHandler(t,n)}))}function qF(t,e,r){r.setAttr(GF,JSON.stringify({hash:t.hash,isZeroCommit:t.isZeroCommit,isWaitingGutter:e}))}function Oz(t){let e=t.getAttr(GF);return e?JSON.parse(e):void 0}p();function zh(t,e){return t==="oldest"?qh(0,!1,e).color:qh(void 0,!0,e).color}function qh(t,e,r){let n=Nh(r),i=Date.now()/1e3,a=t!=null?t:0,o=(e?0:i-a)/60/60/24,l=Math.pow(Math.clamp(o/n,0,1),1/2.3),c=Mz(),u=r.colorNew,f=r.colorOld,d=c?.4:1,h=T0(u.r,f.r,l)*d,m=T0(u.g,f.g,l)*d,g=T0(u.b,f.b,l)*d;return{color:`rgba(${h},${m},${g},${c?.75:.25})`,daysSinceCommit:o}}function T0(t,e,r){return t+(e-t)*r}function Mz(){var t;return((t=window.app)==null?void 0:t.getTheme())==="obsidian"}function zF(t){document.body.style.setProperty("--obs-git-gutter-text",t.textColorCss)}p();function VF(t,e,r){let n;for(let i=e;i<=r;i++){let a=t.hashPerLine[i],s=t.commits.get(a);(!n||s.isZeroCommit||Dz(s,n))&&(n=s)}return n}function Dz(t,e){var i,a,s,o;let r=(a=(i=t.author)==null?void 0:i.epochSeconds)!=null?a:0,n=(o=(s=e.author)==null?void 0:s.epochSeconds)!=null?o:0;return r>n}var WF="-",Lz="+",Nz=3,Bz="*",Hz=/\S/g,Uz="%",_l=class t extends P0.GutterMarker{constructor(r){super();this.text=r}eq(r){return r instanceof t&&this.text===r.text}toDOM(){return document.createTextNode(this.text)}destroy(r){}},C0=class extends P0.GutterMarker{constructor(r,n,i,a,s,o){super();this.lineAuthoring=r;this.startLine=n;this.endLine=i;this.key=a;this.settings=s;this.options=o;this.point=!1;this.elementClass="obs-git-blame-gutter"}eq(r){return this.key===(r==null?void 0:r.key)&&this.startLine===(r==null?void 0:r.startLine)&&this.endLine===(r==null?void 0:r.endLine)&&(this==null?void 0:this.options)===(r==null?void 0:r.options)}toDOM(){var r;return this.precomputedDomProvider=(r=this.precomputedDomProvider)!=null?r:this.computeDom(),this.precomputedDomProvider()}destroy(r){r&&(document.body.contains(r)||bl.delete(r))}computeDom(){let r=VF(this.lineAuthoring,this.startLine,this.endLine),n=r.isZeroCommit?"":this.renderNonZeroCommit(r);return!r.isZeroCommit&&this.options!=="waiting-for-result"?LF(this,n):n=this.adaptTextForFakeCommit(r,n,this.options),this.createHtmlNode(r,n,this.options==="waiting-for-result")}createHtmlNode(r,n,i){var c;let a=window.createDiv();a.innerText=n;let{color:s,daysSinceCommit:o}=qh((c=r==null?void 0:r.author)==null?void 0:c.epochSeconds,r==null?void 0:r.isZeroCommit,this.settings);a.style.backgroundColor=s,qF(r,i,a);function l(){let u=a.cloneNode(!0);return bl.add(u),i||NF(o),u}return l}renderNonZeroCommit(r){let n=this.settings.showCommitHash?this.renderHash(r):"",i=this.settings.authorDisplay==="hide"?"":`${this.renderAuthorName(r,this.settings.authorDisplay)}`,a=this.settings.dateTimeFormatOptions==="hide"?"":`${this.renderAuthoringDate(r,this.settings.dateTimeFormatOptions,this.settings.dateTimeFormatCustomString,this.settings.dateTimeTimezone)}`;return[n,i,a].filter(o=>o.length>=1).join(" ")}renderHash(r){return r.hash.substring(0,6)}renderAuthorName(r,n){var o,l,c,u;let i=(l=(o=r==null?void 0:r.author)==null?void 0:o.name)!=null?l:"",a=i.split(" ").filter(f=>f.length>=1),s;switch(n){case"initials":s=a.map(f=>f[0].toUpperCase()).join("");break;case"first name":s=(c=a.first())!=null?c:WF;break;case"last name":s=(u=a.last())!=null?u:WF;break;case"full":s=i;break;default:return Ha(n)}return CP(r==null?void 0:r.author,r==null?void 0:r.committer)||(s=s+Bz),s}renderAuthoringDate(r,n,i,a){var c;let s="?";if(((c=r==null?void 0:r.author)==null?void 0:c.epochSeconds)===void 0)return s;let o;switch(n){case"date":o=Fd;break;case"datetime":o=vv;break;case"custom":o=i;break;case"natural language":o=u=>{let f=u.diff((0,Vh.moment)());return Vh.moment.duration(f).humanize(!0)};break;default:return Ha(n)}let l=Vh.moment.unix(r.author.epochSeconds);switch(a){case"viewer-local":break;case"author-local":l=l.utcOffset(r.author.tz),typeof o=="string"&&(o+=" Z");break;case"utc0000":l=l.utc(),typeof o=="string"&&(o+="[Z]");break;default:return Ha(a)}return typeof o=="string"?l.format(o):o(l)}adaptTextForFakeCommit(r,n,i){var l,c,u,f;let a=(c=(l=Hh())==null?void 0:l.text)!=null?c:n,s=i!=="waiting-for-result"&&r.isZeroCommit?Lz:Uz;n=a.replace(Hz,s);let o=(f=(u=wn.get())==null?void 0:u.gutterSpacingFallbackLength)!=null?f:n.length;if(n=PP(n,o,s),i!=="waiting-for-result"&&r.isZeroCommit){let d=Math.min(o,Nz);n=RP(n,o-d)}return n}};function $s(t,e,r,n,i,a){let s=YF.sha256.create();s.update(JSON.stringify(i)),s.update(`s${e}-e${r}-k${n}-o${a}`);let o=s.hex(),l=Uh.get(o);if(l)return l;let c=new C0(t,e,r,n,i,a);return Uh.set(o,c),c}p();var XF=require("obsidian");function R0(){var e,r;let t=(r=(e=wn.get())==null?void 0:e.gutterSpacingFallbackLength)!=null?r:et.lineAuthor.gutterSpacingFallbackLength;return new _l(Array(t).fill("-").join(""))}function I0(t){let{lineAuthoring:e,ageForInitialRender:r}=Gz(t);return $s(e,1,1,"initialGutter"+r,t,"waiting-for-result")}function Gz(t){var a;let e=(a=BF())!=null?a:Nh(t)*.25,r=(0,XF.moment)().add(-e,"days"),n={name:"",epochSeconds:AP(r),tz:"+0000"},i={hash:"waiting-for-result",author:n,committer:n,isZeroCommit:!1};return{lineAuthoring:{hashPerLine:[void 0,"waiting-for-result"],commits:new Map([["waiting-for-result",i]])},ageForInitialRender:e}}p();function ZF(t,e){return $s({hashPerLine:[void 0,"000000"],commits:new Map([["000000",RF]])},1,1,t,e)}var F0=new _l(""),e$=(0,QF.gutter)({class:"line-author-gutter-container",markers(t){let e=t.state.field(wl,!1);return jz(t,e)},lineMarkerChange(t){let e=Lh(t.state.field(wl));return Lh(t.startState.field(wl))!==e},renderEmptyElements:!0,initialSpacer:t=>(KF(t),R0()),updateSpacer:(t,e)=>{var r,n;return KF(e.view),(n=(r=Hh())==null?void 0:r.gutter)!=null?n:R0()}});function jz(t,e){let r=Lh(e),n=t.state.doc,i=new Map;for(let u=1;u<=n.lines;u++){let f=n.line(u).from,d=t.lineBlockAt(f).to;i.set(u,[f,d]),r.update([f,d,0])}let a=wn.get();r.update("s"+Object.values(wn).join(","));let s=r.hex(),o=Gh.get(s);if(o)return o;let{result:l,allowCache:c}=qz(n,i,a,e);return c&&Gh.set(s,l),l}function qz(t,e,r,n){let i=!0,a=t.lines,s=[];function o(f,d,h){return s.push(h.range(f,d))}let l=zz(a,n),c=t.length===0,u=t.iterLines(a,a+1).next().value==="";for(let f=1;f<=a;f++){let[d,h]=e.get(f),m=t.lineAt(h).number;if(c){o(d,h,F0);continue}if(f===a&&u){o(d,h,F0);continue}if(n===void 0){o(d,h,I0(r)),i=!1;continue}let{key:g,la:v}=n;if(v==="untracked"){o(d,h,ZF(v,r));continue}let w=v.hashPerLine.length-1,b=l[f],k=l[m];if(k&&k>w&&o(d,h,F0),b!==void 0&&Pw(1,b,w)&&k!==void 0&&Pw(1,k,w)){o(d,h,$s(v,b,k,g,r));continue}if(w<1){o(d,h,I0(r)),i=!1;continue}let E=Math.clamp(b!=null?b:f,1,w),S=Math.clamp(k!=null?k:m,1,w);o(d,h,$s(v,E,S,g+"computing",r,"waiting-for-result"))}return{result:JF.RangeSet.of(s,!0),allowCache:i}}function zz(t,e){if(!(e!=null&&e.lineOffsetsFromUnsavedChanges))return Array.from(new Array(t+1),i=>i);let r=[void 0],n=0;for(let i=1;i<=t;i++){let a=e.lineOffsetsFromUnsavedChanges.get(i);n+=a!=null?a:0,r[i]=a===void 0?i-n:void 0}return r}function KF(t){t.dom.querySelectorAll(".cm-gutters").forEach(r=>{r!=null&&r.style&&(r.style.marginLeft||(r.style.marginLeft="unset"))})}var Wh=class{constructor(e){this.plugin=e;this.lineAuthorings=new Map}async trackChanged(e){return this.trackChangedHelper(e).catch(r=>(console.warn("Git: Error in trackChanged."+r),Promise.reject(r)))}async trackChangedHelper(e){if(e){if(e.path===void 0){console.warn("Git: Attempted to track change of undefined filepath. Unforeseen situation.");return}return this.computeLineAuthorInfo(e.path)}}destroy(){this.lineAuthorings.clear(),DF()}async computeLineAuthorInfo(e){let r=this.plugin.editorIntegration.lineAuthoringFeature.isAvailableOnCurrentPlatform().gitManager,n=await r.submoduleAwareHeadRevisonInContainingDirectory(e),i=await r.hashObject(e),a=FF(n,i,e);if(a!==void 0){if(!this.lineAuthorings.has(a)){let s=await r.blame(e,this.plugin.settings.lineAuthor.followMovement,this.plugin.settings.lineAuthor.ignoreWhitespace);this.lineAuthorings.set(a,s)}this.notifyComputationResultToSubscribers(e,a)}}notifyComputationResultToSubscribers(e,r){Ki.ifFilepathDefinedTransformSubscribers(e,n=>n.forEach(i=>i.notifyLineAuthoring(r,this.lineAuthorings.get(r))))}},r$=t$.Prec.high([wl,e$]);var Vz="https://momentjs.com/docs/#/parsing/string-format/",Wz="https://publish.obsidian.md/git-doc/Line+Authoring",Yh=class extends U.PluginSettingTab{constructor(r,n){super(r,n);this.plugin=n;this.lineAuthorColorSettings=new Map}get settings(){return this.plugin.settings}display(){let{containerEl:r}=this,n=this.plugin,i;n.settings.differentIntervalCommitAndPush?i="commit":i="commit-and-sync";let a=n.gitReady;r.empty(),a||(r.createEl("p",{text:"Git is not ready. When all settings are correct you can configure commit-sync, etc."}),r.createEl("br"));let s;if(a){new U.Setting(r).setName("Automatic").setHeading(),new U.Setting(r).setName("Split timers for automatic commit and sync").setDesc("Enable to use one interval for commit and another for sync.").addToggle(u=>u.setValue(n.settings.differentIntervalCommitAndPush).onChange(async f=>{n.settings.differentIntervalCommitAndPush=f,await n.saveSettings(),n.automaticsManager.reload("commit","push"),this.refreshDisplayWithDelay()})),new U.Setting(r).setName(`Auto ${i} interval (minutes)`).setDesc(`${n.settings.differentIntervalCommitAndPush?"Commit":"Commit and sync"} changes every X minutes. Set to 0 (default) to disable. (See below setting for further configuration!)`).addText(u=>{u.inputEl.type="number",this.setNonDefaultValue({text:u,settingsProperty:"autoSaveInterval"}),u.setPlaceholder(String(et.autoSaveInterval)),u.onChange(async f=>{f!==""?n.settings.autoSaveInterval=Number(f):n.settings.autoSaveInterval=et.autoSaveInterval,await n.saveSettings(),n.automaticsManager.reload("commit")})}),s=new U.Setting(r).setName(`Auto ${i} after stopping file edits`).setDesc(`Requires the ${i} interval not to be 0.
                        If turned on, do auto ${i} every ${IP(n.settings.autoSaveInterval)} after stopping file edits.
                        This also prevents auto ${i} while editing a file. If turned off, it's independent from the last file edit.`).addToggle(u=>u.setValue(n.settings.autoBackupAfterFileChange).onChange(async f=>{n.settings.autoBackupAfterFileChange=f,this.refreshDisplayWithDelay(),await n.saveSettings(),n.automaticsManager.reload("commit")})),this.mayDisableSetting(s,n.settings.setLastSaveToLastCommit),s=new U.Setting(r).setName(`Auto ${i} after latest commit`).setDesc(`If turned on, sets last auto ${i} timestamp to the latest commit timestamp. This reduces the frequency of auto ${i} when doing manual commits.`).addToggle(u=>u.setValue(n.settings.setLastSaveToLastCommit).onChange(async f=>{n.settings.setLastSaveToLastCommit=f,await n.saveSettings(),n.automaticsManager.reload("commit"),this.refreshDisplayWithDelay()})),this.mayDisableSetting(s,n.settings.autoBackupAfterFileChange),s=new U.Setting(r).setName("Auto push interval (minutes)").setDesc("Push commits every X minutes. Set to 0 (default) to disable.").addText(u=>{u.inputEl.type="number",this.setNonDefaultValue({text:u,settingsProperty:"autoPushInterval"}),u.setPlaceholder(String(et.autoPushInterval)),u.onChange(async f=>{f!==""?n.settings.autoPushInterval=Number(f):n.settings.autoPushInterval=et.autoPushInterval,await n.saveSettings(),n.automaticsManager.reload("push")})}),this.mayDisableSetting(s,!n.settings.differentIntervalCommitAndPush),new U.Setting(r).setName("Auto pull interval (minutes)").setDesc("Pull changes every X minutes. Set to 0 (default) to disable.").addText(u=>{u.inputEl.type="number",this.setNonDefaultValue({text:u,settingsProperty:"autoPullInterval"}),u.setPlaceholder(String(et.autoPullInterval)),u.onChange(async f=>{f!==""?n.settings.autoPullInterval=Number(f):n.settings.autoPullInterval=et.autoPullInterval,await n.saveSettings(),n.automaticsManager.reload("pull")})}),new U.Setting(r).setName(`Auto ${i} only staged files`).setDesc(`If turned on, only staged files are committed on ${i}. If turned off, all changed files are committed.`).addToggle(u=>u.setValue(n.settings.autoCommitOnlyStaged).onChange(async f=>{n.settings.autoCommitOnlyStaged=f,await n.saveSettings()})),new U.Setting(r).setName(`Specify custom commit message on auto ${i}`).setDesc("You will get a pop up to specify your message.").addToggle(u=>u.setValue(n.settings.customMessageOnAutoBackup).onChange(async f=>{n.settings.customMessageOnAutoBackup=f,await n.saveSettings(),this.refreshDisplayWithDelay()})),s=new U.Setting(r).setName(`Commit message on auto ${i}`).setDesc("Available placeholders: {{date}} (see below), {{hostname}} (see below), {{numFiles}} (number of changed files in the commit) and {{files}} (changed files in commit message).").addTextArea(u=>{u.setPlaceholder(et.autoCommitMessage).onChange(async f=>{f===""?n.settings.autoCommitMessage=et.autoCommitMessage:n.settings.autoCommitMessage=f,await n.saveSettings()}),this.setNonDefaultValue({text:u,settingsProperty:"autoCommitMessage"})}),this.mayDisableSetting(s,n.settings.customMessageOnAutoBackup),new U.Setting(r).setName("Commit message").setHeading(),new U.Setting(r).setName("Commit message on manual commit").setDesc("Available placeholders: {{date}} (see below), {{hostname}} (see below), {{numFiles}} (number of changed files in the commit) and {{files}} (changed files in commit message).").addTextArea(u=>{u.setPlaceholder(et.commitMessage).onChange(async f=>{f===""?n.settings.commitMessage=et.commitMessage:n.settings.commitMessage=f,await n.saveSettings()}),this.setNonDefaultValue({text:u,settingsProperty:"commitMessage"})}),new U.Setting(r).setName("Commit message script").setDesc("A script that is run using 'sh -c' to generate the commit message. May be used to generate commit messages using AI tools. Available placeholders: {{hostname}}, {{date}}.").addText(u=>{u.onChange(async f=>{f===""?n.settings.commitMessageScript=et.commitMessageScript:n.settings.commitMessageScript=f,await n.saveSettings()}),this.setNonDefaultValue({text:u,settingsProperty:"commitMessageScript"})});let c=new U.Setting(r).setName("{{date}} placeholder format").addMomentFormat(u=>u.setDefaultFormat(n.settings.commitDateFormat).setValue(n.settings.commitDateFormat).onChange(async f=>{n.settings.commitDateFormat=f,await n.saveSettings()}));c.descEl.innerHTML=`
            Specify custom date format. E.g. "${wv}. See <a href="https://momentjs.com">Moment.js</a> for more formats.`,new U.Setting(r).setName("{{hostname}} placeholder replacement").setDesc("Specify custom hostname for every device.").addText(u=>{var f;return u.setValue((f=n.localStorage.getHostname())!=null?f:"").onChange(d=>{n.localStorage.setHostname(d)})}),new U.Setting(r).setName("Preview commit message").addButton(u=>u.setButtonText("Preview").onClick(async()=>{let f=await n.gitManager.formatCommitMessage(n.settings.commitMessage);new U.Notice(`${f}`)})),new U.Setting(r).setName("List filenames affected by commit in the commit body").addToggle(u=>u.setValue(n.settings.listChangedFilesInMessageBody).onChange(async f=>{n.settings.listChangedFilesInMessageBody=f,await n.saveSettings()})),new U.Setting(r).setName("Pull").setHeading(),n.gitManager instanceof Ee&&new U.Setting(r).setName("Merge strategy").setDesc("Decide how to integrate commits from your remote branch into your local branch.").addDropdown(u=>{let f={merge:"Merge",rebase:"Rebase",reset:"Other sync service (Only updates the HEAD without touching the working directory)"};u.addOptions(f),u.setValue(n.settings.syncMethod),u.onChange(async d=>{n.settings.syncMethod=d,await n.saveSettings()})}),new U.Setting(r).setName("Merge strategy on conflicts").setDesc("Decide how to solve conflicts when pulling remote changes. This can be used to favor your local changes or the remote changes automatically.").addDropdown(u=>{let f={none:"None (git default)",ours:"Our changes",theirs:"Their changes"};u.addOptions(f),u.setValue(n.settings.mergeStrategy),u.onChange(async d=>{n.settings.mergeStrategy=d,await n.saveSettings()})}),new U.Setting(r).setName("Pull on startup").setDesc("Automatically pull commits when Obsidian starts.").addToggle(u=>u.setValue(n.settings.autoPullOnBoot).onChange(async f=>{n.settings.autoPullOnBoot=f,await n.saveSettings()})),new U.Setting(r).setName("Commit-and-sync").setDesc("Commit-and-sync with default settings means staging everything -> committing -> pulling -> pushing. Ideally this is a single action that you do regularly to keep your local and remote repository in sync.").setHeading(),s=new U.Setting(r).setName("Push on commit-and-sync").setDesc(`Most of the time you want to push after committing. Turning this off turns a commit-and-sync action into commit ${n.settings.pullBeforePush?"and pull ":""}only. It will still be called commit-and-sync.`).addToggle(u=>u.setValue(!n.settings.disablePush).onChange(async f=>{n.settings.disablePush=!f,this.refreshDisplayWithDelay(),await n.saveSettings()})),new U.Setting(r).setName("Pull on commit-and-sync").setDesc(`On commit-and-sync, pull commits as well. Turning this off turns a commit-and-sync action into commit ${n.settings.disablePush?"":"and push "}only.`).addToggle(u=>u.setValue(n.settings.pullBeforePush).onChange(async f=>{n.settings.pullBeforePush=f,this.refreshDisplayWithDelay(),await n.saveSettings()})),n.gitManager instanceof Ee&&(new U.Setting(r).setName("Hunk management").setDesc("Hunks are sections of grouped line changes right in your editor.").setHeading(),new U.Setting(r).setName("Signs").setDesc("This allows you to see your changes right in your editor via colored markers and stage/reset/preview individual hunks.").addToggle(u=>u.setValue(n.settings.hunks.showSigns).onChange(async f=>{n.settings.hunks.showSigns=f,await n.saveSettings(),n.editorIntegration.refreshSignsSettings()})),new U.Setting(r).setName("Hunk commands").setDesc("Adds commands to stage/reset individual Git diff hunks and navigate between them via 'Go to next/prev hunk' commands.").addToggle(u=>u.setValue(n.settings.hunks.hunkCommands).onChange(async f=>{n.settings.hunks.hunkCommands=f,await n.saveSettings(),n.editorIntegration.refreshSignsSettings()})),new U.Setting(r).setName("Status bar with summary of line changes").addDropdown(u=>u.addOptions({disabled:"Disabled",colored:"Colored",monochrome:"Monochrome"}).setValue(n.settings.hunks.statusBar).onChange(async f=>{n.settings.hunks.statusBar=f,await n.saveSettings(),n.editorIntegration.refreshSignsSettings()})),new U.Setting(r).setName("Line author information").setHeading(),this.addLineAuthorInfoSettings())}new U.Setting(r).setName("History view").setHeading(),new U.Setting(r).setName("Show Author").setDesc("Show the author of the commit in the history view.").addDropdown(c=>{let u={hide:"Hide",full:"Full",initials:"Initials"};c.addOptions(u),c.setValue(n.settings.authorInHistoryView),c.onChange(async f=>{n.settings.authorInHistoryView=f,await n.saveSettings(),await n.refresh()})}),new U.Setting(r).setName("Show Date").setDesc("Show the date of the commit in the history view. The {{date}} placeholder format is used to display the date.").addToggle(c=>c.setValue(n.settings.dateInHistoryView).onChange(async u=>{n.settings.dateInHistoryView=u,await n.saveSettings(),await n.refresh()})),new U.Setting(r).setName("Source control view").setHeading(),new U.Setting(r).setName("Automatically refresh source control view on file changes").setDesc("On slower machines this may cause lags. If so, just disable this option.").addToggle(c=>c.setValue(n.settings.refreshSourceControl).onChange(async u=>{n.settings.refreshSourceControl=u,await n.saveSettings()})),new U.Setting(r).setName("Source control view refresh interval").setDesc("Milliseconds to wait after file change before refreshing the Source Control View.").addText(c=>{c.inputEl.type="number",this.setNonDefaultValue({text:c,settingsProperty:"refreshSourceControlTimer"}),c.setPlaceholder(String(et.refreshSourceControlTimer)),c.onChange(async f=>{f!==""&&Number.isInteger(Number(f))?n.settings.refreshSourceControlTimer=Math.max(Number(f),500):n.settings.refreshSourceControlTimer=et.refreshSourceControlTimer,await n.saveSettings(),n.setRefreshDebouncer()})}),new U.Setting(r).setName("Miscellaneous").setHeading(),n.gitManager instanceof Ee&&new U.Setting(r).setName("Diff view style").setDesc('Set the style for the diff view. Note that the actual diff in "Split" mode is not generated by Git, but the editor itself instead so it may differ from the diff generated by Git. One advantage of this is that you can edit the text in that view.').addDropdown(c=>{let u={split:"Split",git_unified:"Unified"};c.addOptions(u),c.setValue(n.settings.diffStyle),c.onChange(async f=>{n.settings.diffStyle=f,await n.saveSettings()})}),new U.Setting(r).setName("Disable informative notifications").setDesc("Disable informative notifications for git operations to minimize distraction (refer to status bar for updates).").addToggle(c=>c.setValue(n.settings.disablePopups).onChange(async u=>{n.settings.disablePopups=u,this.refreshDisplayWithDelay(),await n.saveSettings()})),new U.Setting(r).setName("Disable error notifications").setDesc("Disable error notifications of any kind to minimize distraction (refer to status bar for updates).").addToggle(c=>c.setValue(!n.settings.showErrorNotices).onChange(async u=>{n.settings.showErrorNotices=!u,await n.saveSettings()})),n.settings.disablePopups||new U.Setting(r).setName("Hide notifications for no changes").setDesc("Don't show notifications when there are no changes to commit or push.").addToggle(c=>c.setValue(n.settings.disablePopupsForNoChanges).onChange(async u=>{n.settings.disablePopupsForNoChanges=u,await n.saveSettings()})),new U.Setting(r).setName("Show status bar").setDesc("Obsidian must be restarted for the changes to take affect.").addToggle(c=>c.setValue(n.settings.showStatusBar).onChange(async u=>{n.settings.showStatusBar=u,await n.saveSettings()})),new U.Setting(r).setName("File menu integration").setDesc('Add "Stage", "Unstage" and "Add to .gitignore" actions to the file menu.').addToggle(c=>c.setValue(n.settings.showFileMenu).onChange(async u=>{n.settings.showFileMenu=u,await n.saveSettings()})),new U.Setting(r).setName("Show branch status bar").setDesc("Obsidian must be restarted for the changes to take affect.").addToggle(c=>c.setValue(n.settings.showBranchStatusBar).onChange(async u=>{n.settings.showBranchStatusBar=u,await n.saveSettings()})),new U.Setting(r).setName("Show the count of modified files in the status bar").addToggle(c=>c.setValue(n.settings.changedFilesInStatusBar).onChange(async u=>{n.settings.changedFilesInStatusBar=u,await n.saveSettings()})),n.gitManager instanceof Ln?new U.Setting(r).setName("Authentication/commit author").setHeading():new U.Setting(r).setName("Commit author").setHeading(),n.gitManager instanceof Ln&&new U.Setting(r).setName("Username on your git server. E.g. your username on GitHub").addText(c=>{var u;c.setValue((u=n.localStorage.getUsername())!=null?u:""),c.onChange(f=>{n.localStorage.setUsername(f)})}),n.gitManager instanceof Ln&&new U.Setting(r).setName("Password/Personal access token").setDesc("Type in your password. You won't be able to see it again.").addText(c=>{c.inputEl.autocapitalize="off",c.inputEl.autocomplete="off",c.inputEl.spellcheck=!1,c.onChange(u=>{n.localStorage.setPassword(u)})}),n.gitReady&&new U.Setting(r).setName("Author name for commit").addText(async c=>{var u;c.setValue((u=await n.gitManager.getConfig("user.name"))!=null?u:""),c.onChange(async f=>{await n.gitManager.setConfig("user.name",f==""?void 0:f)})}),n.gitReady&&new U.Setting(r).setName("Author email for commit").addText(async c=>{var u;c.setValue((u=await n.gitManager.getConfig("user.email"))!=null?u:""),c.onChange(async f=>{await n.gitManager.setConfig("user.email",f==""?void 0:f)})}),new U.Setting(r).setName("Advanced").setDesc("These settings usually don't need to be changed, but may be required for special setups.").setHeading(),n.gitManager instanceof Ee&&(new U.Setting(r).setName("Update submodules").setDesc('"Commit-and-sync" and "pull" takes care of submodules. Missing features: Conflicted files, count of pulled/pushed/committed files. Tracking branch needs to be set for each submodule.').addToggle(c=>c.setValue(n.settings.updateSubmodules).onChange(async u=>{n.settings.updateSubmodules=u,await n.saveSettings()})),n.settings.updateSubmodules&&new U.Setting(r).setName("Submodule recurse checkout/switch").setDesc("Whenever a checkout happens on the root repository, recurse the checkout on the submodules (if the branches exist).").addToggle(c=>c.setValue(n.settings.submoduleRecurseCheckout).onChange(async u=>{n.settings.submoduleRecurseCheckout=u,await n.saveSettings()}))),n.gitManager instanceof Ee&&new U.Setting(r).setName("Custom Git binary path").setDesc("Specify the path to the Git binary/executable. Git should already be in your PATH. Should only be necessary for a custom Git installation.").addText(c=>{var u;c.setValue((u=n.localStorage.getGitPath())!=null?u:""),c.setPlaceholder("git"),c.onChange(f=>{n.localStorage.setGitPath(f),n.gitManager.updateGitPath(f||"git").catch(d=>n.displayError(d))})}),n.gitManager instanceof Ee&&new U.Setting(r).setName("Additional environment variables").setDesc("Use each line for a new environment variable in the format KEY=VALUE .").addTextArea(c=>{c.setPlaceholder("GIT_DIR=/path/to/git/dir"),c.setValue(n.localStorage.getEnvVars().join(`
`)),c.onChange(u=>{n.localStorage.setEnvVars(u.split(`
`))})}),n.gitManager instanceof Ee&&new U.Setting(r).setName("Additional PATH environment variable paths").setDesc("Use each line for one path").addTextArea(c=>{c.setValue(n.localStorage.getPATHPaths().join(`
`)),c.onChange(u=>{n.localStorage.setPATHPaths(u.split(`
`))})}),n.gitManager instanceof Ee&&new U.Setting(r).setName("Reload with new environment variables").setDesc("Removing previously added environment variables will not take effect until Obsidian is restarted.").addButton(c=>{c.setButtonText("Reload"),c.setCta(),c.onClick(async()=>{await n.gitManager.setGitInstance()})}),new U.Setting(r).setName("Custom base path (Git repository path)").setDesc(`
            Sets the relative path to the vault from which the Git binary should be executed.
             Mostly used to set the path to the Git repository, which is only required if the Git repository is below the vault root directory. Use "\\" instead of "/" on Windows.
            `).addText(c=>{c.setValue(n.settings.basePath),c.setPlaceholder("directory/directory-with-git-repo"),c.onChange(async u=>{n.settings.basePath=u,await n.saveSettings(),n.gitManager.updateBasePath(u||"").catch(f=>n.displayError(f))})}),new U.Setting(r).setName("Custom Git directory path (Instead of '.git')").setDesc('Corresponds to the GIT_DIR environment variable. Requires restart of Obsidian to take effect. Use "\\" instead of "/" on Windows.').addText(c=>{c.setValue(n.settings.gitDir),c.setPlaceholder(".git"),c.onChange(async u=>{n.settings.gitDir=u,await n.saveSettings()})}),new U.Setting(r).setName("Disable on this device").setDesc("Disables the plugin on this device. This setting is not synced.").addToggle(c=>c.setValue(n.localStorage.getPluginDisabled()).onChange(u=>{n.localStorage.setPluginDisabled(u),u?n.unloadPlugin():n.init({fromReload:!0}).catch(f=>n.displayError(f)),new U.Notice("Obsidian must be restarted for the changes to take affect.")})),new U.Setting(r).setName("Support").setHeading(),new U.Setting(r).setName("Donate").setDesc("If you like this Plugin, consider donating to support continued development.").addButton(c=>{c.buttonEl.outerHTML="<a href='https://ko-fi.com/F1F195IQ5' target='_blank'><img height='36' style='border:0px;height:36px;' src='https://cdn.ko-fi.com/cdn/kofi3.png?v=3' border='0' alt='Buy Me a Coffee at ko-fi.com' /></a>"});let o=r.createDiv();o.setAttr("align","center"),o.setAttr("style","margin: var(--size-4-2)");let l=o.createEl("button");if(l.setText("Copy Debug Information"),l.onclick=async()=>{await window.navigator.clipboard.writeText(JSON.stringify({settings:this.plugin.settings,pluginVersion:this.plugin.manifest.version},null,4)),new U.Notice("Debug information copied to clipboard. May contain sensitive information!")},U.Platform.isDesktopApp){let c=r.createDiv();c.setAttr("align","center"),c.setText(`Debugging and logging:
You can always see the logs of this and every other plugin by opening the console with`);let u=r.createDiv();u.setAttr("align","center"),u.addClass("obsidian-git-shortcuts"),U.Platform.isMacOS===!0?u.createEl("kbd",{text:"CMD (\u2318) + OPTION (\u2325) + I"}):u.createEl("kbd",{text:"CTRL + SHIFT + I"})}}mayDisableSetting(r,n){n&&(r.setDisabled(n),r.setClass("obsidian-git-disabled"))}configureLineAuthorShowStatus(r){this.settings.lineAuthor.show=r,this.plugin.saveSettings(),r?this.plugin.editorIntegration.activateLineAuthoring():this.plugin.editorIntegration.deactiveLineAuthoring()}async lineAuthorSettingHandler(r,n){this.settings.lineAuthor[r]=n,await this.plugin.saveSettings(),this.plugin.editorIntegration.lineAuthoringFeature.refreshLineAuthorViews()}beforeSaveSettings(){let r=this.settings.lineAuthor;r.authorDisplay!=="hide"&&(r.lastShownAuthorDisplay=r.authorDisplay),r.dateTimeFormatOptions!=="hide"&&(r.lastShownDateTimeFormatOptions=r.dateTimeFormatOptions)}addLineAuthorInfoSettings(){let r=new U.Setting(this.containerEl).setName("Show commit authoring information next to each line");if(this.plugin.editorIntegration.lineAuthoringFeature.isAvailableOnCurrentPlatform()||r.setDesc("Only available on desktop currently.").setDisabled(!0),r.descEl.innerHTML=`
            <a href="${Wz}">Feature guide and quick examples</a></br>
            The commit hash, author name and authoring date can all be individually toggled.</br>Hide everything, to only show the age-colored sidebar.`,r.addToggle(n=>n.setValue(this.settings.lineAuthor.show).onChange(i=>{this.configureLineAuthorShowStatus(i),this.refreshDisplayWithDelay()})),this.settings.lineAuthor.show){let n=new U.Setting(this.containerEl).setName("Follow movement and copies across files and commits").setDesc("").addDropdown(a=>{a.addOptions({inactive:"Do not follow (default)","same-commit":"Follow within same commit","all-commits":"Follow within all commits (maybe slow)"}),a.setValue(this.settings.lineAuthor.followMovement),a.onChange(s=>this.lineAuthorSettingHandler("followMovement",s))});if(n.descEl.innerHTML=`
                By default (deactivated), each line only shows the newest commit where it was changed.
                <br/>
                With <i>same commit</i>, cut-copy-paste-ing of text is followed within the same commit and the original commit of authoring will be shown.
                <br/>
                With <i>all commits</i>, cut-copy-paste-ing text inbetween multiple commits will be detected.
                <br/>
                It uses <a href="https://git-scm.com/docs/git-blame">git-blame</a> and
                for matches (at least ${$d} characters) within the same (or all) commit(s), <em>the originating</em> commit's information is shown.`,new U.Setting(this.containerEl).setName("Show commit hash").addToggle(a=>{a.setValue(this.settings.lineAuthor.showCommitHash),a.onChange(s=>this.lineAuthorSettingHandler("showCommitHash",s))}),new U.Setting(this.containerEl).setName("Author name display").setDesc("If and how the author is displayed").addDropdown(a=>{let s={hide:"Hide",initials:"Initials (default)","first name":"First name","last name":"Last name",full:"Full name"};a.addOptions(s),a.setValue(this.settings.lineAuthor.authorDisplay),a.onChange(async o=>this.lineAuthorSettingHandler("authorDisplay",o))}),new U.Setting(this.containerEl).setName("Authoring date display").setDesc("If and how the date and time of authoring the line is displayed").addDropdown(a=>{let s={hide:"Hide",date:"Date (default)",datetime:"Date and time","natural language":"Natural language",custom:"Custom"};a.addOptions(s),a.setValue(this.settings.lineAuthor.dateTimeFormatOptions),a.onChange(async o=>{await this.lineAuthorSettingHandler("dateTimeFormatOptions",o),this.refreshDisplayWithDelay()})}),this.settings.lineAuthor.dateTimeFormatOptions==="custom"){let a=new U.Setting(this.containerEl);a.setName("Custom authoring date format").addText(s=>{s.setValue(this.settings.lineAuthor.dateTimeFormatCustomString),s.setPlaceholder("YYYY-MM-DD HH:mm"),s.onChange(async o=>{await this.lineAuthorSettingHandler("dateTimeFormatCustomString",o),a.descEl.innerHTML=this.previewCustomDateTimeDescriptionHtml(o)})}),a.descEl.innerHTML=this.previewCustomDateTimeDescriptionHtml(this.settings.lineAuthor.dateTimeFormatCustomString)}new U.Setting(this.containerEl).setName("Authoring date display timezone").addDropdown(a=>{let s={"viewer-local":"My local (default)","author-local":"Author's local",utc0000:"UTC+0000/Z"};a.addOptions(s),a.setValue(this.settings.lineAuthor.dateTimeTimezone),a.onChange(async o=>this.lineAuthorSettingHandler("dateTimeTimezone",o))}).descEl.innerHTML=`
                    The time-zone in which the authoring date should be shown.
                    Either your local time-zone (default),
                    the author's time-zone during commit creation or
                    <a href="https://en.wikipedia.org/wiki/UTC%C2%B100:00">UTC\xB100:00</a>.
            `;let i=new U.Setting(this.containerEl).setName("Oldest age in coloring");i.descEl.innerHTML=this.previewOldestAgeDescriptionHtml(this.settings.lineAuthor.coloringMaxAge)[0],i.addText(a=>{a.setPlaceholder("1y"),a.setValue(this.settings.lineAuthor.coloringMaxAge),a.onChange(async s=>{let[o,l]=this.previewOldestAgeDescriptionHtml(s);i.descEl.innerHTML=o,l&&(await this.lineAuthorSettingHandler("coloringMaxAge",s),this.refreshColorSettingsName("oldest"))})}),this.createColorSetting("newest"),this.createColorSetting("oldest"),new U.Setting(this.containerEl).setName("Text color").addText(a=>{a.setValue(this.settings.lineAuthor.textColorCss),a.onChange(async s=>{await this.lineAuthorSettingHandler("textColorCss",s)})}).descEl.innerHTML=`
                    The CSS color of the gutter text.<br/>

                    It is highly recommended to use
                    <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties">
                    CSS variables</a>
                    defined by themes
                    (e.g. <pre style="display:inline">var(--text-muted)</pre> or
                    <pre style="display:inline">var(--text-on-accent)</pre>,
                    because they automatically adapt to theme changes.<br/>

                    See: <a href="https://github.com/obsidian-community/obsidian-theme-template/blob/main/obsidian.css">
                    List of available CSS variables in Obsidian
                    <a/>
                `,new U.Setting(this.containerEl).setName("Ignore whitespace and newlines in changes").addToggle(a=>{a.setValue(this.settings.lineAuthor.ignoreWhitespace),a.onChange(s=>this.lineAuthorSettingHandler("ignoreWhitespace",s))}).descEl.innerHTML=`
                    Whitespace and newlines are interpreted as
                    part of the document and in changes
                    by default (hence not ignored).
                    This makes the last line being shown as 'changed'
                    when a new subsequent line is added,
                    even if the previously last line's text is the same.
                    <br>
                    If you don't care about purely-whitespace changes
                    (e.g. list nesting / quote indentation changes),
                    then activating this will provide more meaningful change detection.
                `}}createColorSetting(r){let n=new U.Setting(this.containerEl).setName("").addText(i=>{let a=$0(r,this.settings.lineAuthor),s=$0(r,et.lineAuthor);i.setPlaceholder(Cw(s)),i.setValue(Cw(a)),i.onChange(async o=>{let l=kP(o);if(l!==void 0){let c=r==="newest"?"colorNew":"colorOld";await this.lineAuthorSettingHandler(c,l)}this.refreshColorSettingsDesc(r,l)})});this.lineAuthorColorSettings.set(r,n),this.refreshColorSettingsName(r),this.refreshColorSettingsDesc(r,$0(r,this.settings.lineAuthor))}refreshColorSettingsName(r){let n=this.lineAuthorColorSettings.get(r);if(n){let i=r==="oldest"?`oldest (${this.settings.lineAuthor.coloringMaxAge} or older)`:"newest";n.nameEl.innerText=`Color for ${i} commits`}}refreshColorSettingsDesc(r,n){let i=this.lineAuthorColorSettings.get(r);i&&(i.descEl.innerHTML=this.colorSettingPreviewDescHtml(r,this.settings.lineAuthor,n!==void 0))}colorSettingPreviewDescHtml(r,n,i){let a=i?zh(r,n):"rgba(127,127,127,0.3)",s=U.moment.unix(U.moment.now()/1e3).format("YYYY-MM-DD"),o=i?`abcdef Author Name ${s}`:"invalid color";return`Supports 'rgb(r,g,b)', 'hsl(h,s,l)', hex (#) and
            named colors (e.g. 'black', 'purple'). Color preview: ${`<div
            class="line-author-settings-preview"
            style="background-color: ${a}; width: 30ch;"
            >${o}</div>`}`}previewCustomDateTimeDescriptionHtml(r){let n=(0,U.moment)().format(r);return`<a href="${Vz}">Format string</a> to display the authoring date.</br>Currently: ${n}`}previewOldestAgeDescriptionHtml(r){let n=Mh(r);return[`The oldest age in the line author coloring. Everything older will have the same color.
            </br>Smallest valid age is "1d". Currently: ${n!==void 0?`${n.asDays()} days`:"invalid!"}`,n]}setNonDefaultValue({settingsProperty:r,text:n}){let i=this.plugin.settings[r];et[r]!==i&&(typeof i=="string"||typeof i=="number"||typeof i=="boolean"?n.setValue(String(i)):n.setValue(JSON.stringify(i)))}refreshDisplayWithDelay(r=80){setTimeout(()=>this.display(),r)}};function $0(t,e){return t==="oldest"?e.colorOld:e.colorNew}function Mh(t){let e=U.moment.duration("P"+t.toUpperCase());return e.isValid()&&e.asDays()&&e.asDays()>=1?e:void 0}p();var Qr=require("obsidian");var Xh=class{constructor(e,r){this.statusBarEl=e;this.plugin=r;this.messages=[];this.base="obsidian-git-statusbar-";this.statusBarEl.setAttribute("data-tooltip-position","top"),r.registerEvent(r.app.workspace.on("obsidian-git:refreshed",()=>{this.refreshCommitTimestamp().catch(console.error)}))}displayMessage(e,r){this.messages.push({message:`Git: ${e.slice(0,100)}`,timeout:r}),this.display()}display(){this.messages.length>0&&!this.currentMessage?(this.currentMessage=this.messages.shift(),this.statusBarEl.addClass(this.base+"message"),this.statusBarEl.ariaLabel="",this.statusBarEl.setText(this.currentMessage.message),this.lastMessageTimestamp=Date.now()):this.currentMessage?Date.now()-this.lastMessageTimestamp>=this.currentMessage.timeout&&(this.currentMessage=null,this.lastMessageTimestamp=null):this.displayState()}displayState(){switch((this.statusBarEl.getText().length>3||!this.statusBarEl.hasChildNodes())&&(this.statusBarEl.empty(),this.conflictEl=this.statusBarEl.createDiv(),this.conflictEl.setAttribute("data-tooltip-position","top"),this.conflictEl.style.float="left",this.pausedEl=this.statusBarEl.createDiv(),this.pausedEl.setAttribute("data-tooltip-position","top"),this.pausedEl.style.float="left",this.iconEl=this.statusBarEl.createDiv(),this.iconEl.style.float="left",this.textEl=this.statusBarEl.createDiv(),this.textEl.style.float="right",this.textEl.style.marginLeft="5px"),this.plugin.localStorage.getConflict()?((0,Qr.setIcon)(this.conflictEl,"alert-circle"),this.conflictEl.ariaLabel="You have merge conflicts. Resolve them and commit afterwards.",this.conflictEl.style.marginRight="5px",this.conflictEl.addClass(this.base+"conflict")):(this.conflictEl.empty(),this.conflictEl.style.marginRight=""),this.plugin.localStorage.getPausedAutomatics()?((0,Qr.setIcon)(this.pausedEl,"pause-circle"),this.pausedEl.ariaLabel="Automatic routines are currently paused.",this.pausedEl.style.marginRight="5px",this.pausedEl.addClass(this.base+"paused")):(this.pausedEl.empty(),this.pausedEl.style.marginRight=""),this.plugin.state.gitAction){case 0:this.displayFromNow();break;case 1:this.statusBarEl.ariaLabel="Checking repository status...",(0,Qr.setIcon)(this.iconEl,"refresh-cw"),this.statusBarEl.addClass(this.base+"status");break;case 3:this.statusBarEl.ariaLabel="Adding files...",(0,Qr.setIcon)(this.iconEl,"archive"),this.statusBarEl.addClass(this.base+"add");break;case 4:this.statusBarEl.ariaLabel="Committing changes...",(0,Qr.setIcon)(this.iconEl,"git-commit"),this.statusBarEl.addClass(this.base+"commit");break;case 5:this.statusBarEl.ariaLabel="Pushing changes...",(0,Qr.setIcon)(this.iconEl,"upload"),this.statusBarEl.addClass(this.base+"push");break;case 2:this.statusBarEl.ariaLabel="Pulling changes...",(0,Qr.setIcon)(this.iconEl,"download"),this.statusBarEl.addClass(this.base+"pull");break;default:this.statusBarEl.ariaLabel="Failed on initialization!",(0,Qr.setIcon)(this.iconEl,"alert-triangle"),this.statusBarEl.addClass(this.base+"failed-init");break}}displayFromNow(){var n;let e=this.lastCommitTimestamp,r=this.plugin.state.offlineMode;if(e){let i=(0,Qr.moment)(e).fromNow();this.statusBarEl.ariaLabel=`${r?"Offline: ":""}Last Commit: ${i}`,(n=this.unPushedCommits)!=null&&n&&(this.statusBarEl.ariaLabel+=`
(${this.unPushedCommits} unpushed commits)`)}else this.statusBarEl.ariaLabel=r?"Git is offline":"Git is ready";r?(0,Qr.setIcon)(this.iconEl,"globe"):(0,Qr.setIcon)(this.iconEl,"check"),this.plugin.settings.changedFilesInStatusBar&&this.plugin.cachedStatus&&this.textEl.setText(this.plugin.cachedStatus.changed.length.toString()),this.statusBarEl.addClass(this.base+"idle")}async refreshCommitTimestamp(){this.lastCommitTimestamp=await this.plugin.gitManager.getLastCommitTime(),this.unPushedCommits=await this.plugin.gitManager.getUnpushedCommits()}remove(){this.statusBarEl.remove()}};p();var Kh=require("obsidian"),Zh=class extends Kh.SuggestModal{constructor(r){super(r.app);this.plugin=r;this.resolve=null;this.setPlaceholder("Type your message and select optional the version with the added date.")}openAndGetResult(){return new Promise(r=>{this.resolve=r,this.open()})}onClose(){new Promise(r=>setTimeout(r,10)).then(()=>{this.resolve&&this.resolve(void 0)})}getSuggestions(r){let n=(0,Kh.moment)().format(this.plugin.settings.commitDateFormat);return r==""&&(r="..."),[r,`${n}: ${r}`,`${r}: ${n}`]}renderSuggestion(r,n){n.innerText=r}onChooseSuggestion(r,n){this.resolve&&this.resolve(r)}};p();var n$=require("obsidian"),Pu=class{constructor(e){this.plugin=e}saveLastAuto(e,r){r==="backup"?this.plugin.localStorage.setLastAutoBackup(e.toString()):r==="pull"?this.plugin.localStorage.setLastAutoPull(e.toString()):r==="push"&&this.plugin.localStorage.setLastAutoPush(e.toString())}loadLastAuto(){var e,r,n;return{backup:new Date((e=this.plugin.localStorage.getLastAutoBackup())!=null?e:""),pull:new Date((r=this.plugin.localStorage.getLastAutoPull())!=null?r:""),push:new Date((n=this.plugin.localStorage.getLastAutoPush())!=null?n:"")}}async init(){await this.setUpAutoCommitAndSync();let e=this.loadLastAuto();if(this.plugin.settings.differentIntervalCommitAndPush&&this.plugin.settings.autoPushInterval>0){let r=this.diff(this.plugin.settings.autoPushInterval,e.push);this.startAutoPush(r)}if(this.plugin.settings.autoPullInterval>0){let r=this.diff(this.plugin.settings.autoPullInterval,e.pull);this.startAutoPull(r)}}unload(){this.clearAutoPull(),this.clearAutoPush(),this.clearAutoCommitAndSync()}reload(...e){this.plugin.localStorage.getPausedAutomatics()||(e.contains("commit")&&(this.clearAutoCommitAndSync(),this.plugin.settings.autoSaveInterval>0&&this.startAutoCommitAndSync(this.plugin.settings.autoSaveInterval)),e.contains("push")&&(this.clearAutoPush(),this.plugin.settings.differentIntervalCommitAndPush&&this.plugin.settings.autoPushInterval>0&&this.startAutoPush(this.plugin.settings.autoPushInterval)),e.contains("pull")&&(this.clearAutoPull(),this.plugin.settings.autoPullInterval>0&&this.startAutoPull(this.plugin.settings.autoPullInterval)))}async setUpAutoCommitAndSync(){if(this.plugin.settings.setLastSaveToLastCommit){this.clearAutoCommitAndSync();let e=await this.plugin.gitManager.getLastCommitTime();e&&this.saveLastAuto(e,"backup")}if(!this.timeoutIDCommitAndSync&&!this.plugin.autoCommitDebouncer){let e=this.loadLastAuto();if(this.plugin.settings.autoSaveInterval>0){let r=this.diff(this.plugin.settings.autoSaveInterval,e.backup);this.startAutoCommitAndSync(r)}}}startAutoCommitAndSync(e){let r=(e!=null?e:this.plugin.settings.autoSaveInterval)*6e4;this.plugin.settings.autoBackupAfterFileChange?e===0?this.doAutoCommitAndSync():this.plugin.autoCommitDebouncer=(0,n$.debounce)(()=>this.doAutoCommitAndSync(),r,!0):(r>2147483647&&(r=2147483647),this.timeoutIDCommitAndSync=window.setTimeout(()=>this.doAutoCommitAndSync(),r))}doAutoCommitAndSync(){this.plugin.promiseQueue.addTask(async()=>{if(this.plugin.settings.setLastSaveToLastCommit){let r=await this.plugin.gitManager.getLastCommitTime();if(r){this.saveLastAuto(r,"backup");let n=this.diff(this.plugin.settings.autoSaveInterval,r);if(n>0)return this.startAutoCommitAndSync(n),!1}}let e=this.plugin.settings.autoCommitOnlyStaged;return this.plugin.settings.differentIntervalCommitAndPush?await this.plugin.commit({fromAuto:!0,onlyStaged:e}):await this.plugin.commitAndSync({fromAutoBackup:!0,onlyStaged:e}),!0},e=>{e!==!1&&(this.saveLastAuto(new Date,"backup"),this.startAutoCommitAndSync())})}startAutoPull(e){let r=(e!=null?e:this.plugin.settings.autoPullInterval)*6e4;r>2147483647&&(r=2147483647),this.timeoutIDPull=window.setTimeout(()=>this.doAutoPull(),r)}doAutoPull(){this.plugin.promiseQueue.addTask(()=>this.plugin.pullChangesFromRemote(),()=>{this.saveLastAuto(new Date,"pull"),this.startAutoPull()})}startAutoPush(e){let r=(e!=null?e:this.plugin.settings.autoPushInterval)*6e4;r>2147483647&&(r=2147483647),this.timeoutIDPush=window.setTimeout(()=>this.doAutoPush(),r)}doAutoPush(){this.plugin.promiseQueue.addTask(()=>this.plugin.push(),()=>{this.saveLastAuto(new Date,"push"),this.startAutoPush()})}clearAutoCommitAndSync(){var r;let e=!1;return this.timeoutIDCommitAndSync&&(window.clearTimeout(this.timeoutIDCommitAndSync),this.timeoutIDCommitAndSync=void 0,e=!0),this.plugin.autoCommitDebouncer&&((r=this.plugin.autoCommitDebouncer)==null||r.cancel(),this.plugin.autoCommitDebouncer=void 0,e=!0),e}clearAutoPull(){return this.timeoutIDPull?(window.clearTimeout(this.timeoutIDPull),this.timeoutIDPull=void 0,!0):!1}clearAutoPush(){return this.timeoutIDPush?(window.clearTimeout(this.timeoutIDPush),this.timeoutIDPush=void 0,!0):!1}diff(e,r){let i=e-Math.round((new Date().getTime()-r.getTime())/1e3/60);return Math.max(0,i)}};p();var Un=require("obsidian");p();var Ru=require("obsidian");async function i$(t,e,r){let n=await s$(e,r);if(n.result==="failure"){new Ru.Notice(n.reason);return}let{isGitHub:i,branch:a,repo:s,user:o,filePath:l}=n;if(i){let c=t.getCursor("from").line+1,u=t.getCursor("to").line+1;c===u?window.open(`https://github.com/${o}/${s}/blob/${a}/${l}?plain=1#L${c}`):window.open(`https://github.com/${o}/${s}/blob/${a}/${l}?plain=1#L${c}-L${u}`)}else new Ru.Notice("It seems like you are not using GitHub")}async function a$(t,e){let r=await s$(t,e);if(r.result==="failure"){new Ru.Notice(r.reason);return}let{isGitHub:n,branch:i,repo:a,user:s,filePath:o}=r;n?window.open(`https://github.com/${s}/${a}/commits/${i}/${o}`):new Ru.Notice("It seems like you are not using GitHub")}async function s$(t,e){let r=await e.branchInfo(),n=r.tracking,i=r.current,a,s=e.getRelativeRepoPath(t.path);if(e instanceof Ee){let l=await e.getSubmoduleOfFile(e.getRelativeRepoPath(t.path));if(l){s=l.relativeFilepath;let c=await e.git.cwd({path:l.submodule,root:!1}).status();if(n=c.tracking||void 0,i=c.current||void 0,n){let u=n.substring(0,n.indexOf("/")),f=await e.git.cwd({path:l.submodule,root:!1}).getConfig(`remote.${u}.url`,"local");if(f.value!=null)a=f.value;else return{result:"failure",reason:"Failed to get remote url of submodule"}}}}if(n==null)return{result:"failure",reason:"Remote branch is not configured"};if(i==null)return{result:"failure",reason:"Failed to get current branch name"};if(a==null){let l=n.substring(0,n.indexOf("/"));if(a=await e.getConfig(`remote.${l}.url`),a==null)return{result:"failure",reason:"Failed to get remote url"}}let o=a.match(/(?:^https:\/\/github\.com\/(.+)\/(.+?)(?:\.git)?$)|(?:^[a-zA-Z]+@github\.com:(.+)\/(.+?)(?:\.git)?$)/);if(o==null)return{result:"failure",reason:"Could not parse remote url"};{let[l,c,u,f,d]=o;return{result:"success",isGitHub:!!l,repo:u||d,user:c||f,branch:i,filePath:s}}}p();var o$=require("obsidian"),Jh=class extends o$.FuzzySuggestModal{constructor(e,r){super(e.app),this.plugin=e,this.changedFiles=r,this.setPlaceholder("Not supported files will be opened by default app!")}getItems(){return this.changedFiles}getItemText(e){if(e.index=="U"&&e.workingDir=="U")return`Untracked | ${e.vaultPath}`;let r="",n="";return e.workingDir!=" "&&(r=`Working Dir: ${e.workingDir} `),e.index!=" "&&(n=`Index: ${e.index}`),`${r}${n} | ${e.vaultPath}`}onChooseItem(e,r){this.plugin.app.metadataCache.getFirstLinkpathDest(e.vaultPath,"")==null?this.app.openWithDefaultApp(e.vaultPath):this.plugin.app.workspace.openLinkText(e.vaultPath,"/")}};p();var l$=require("obsidian"),Qh=class extends l$.Modal{constructor(r,n){super(r);this.content=n;this.resolve=null}openAndGetReslt(){return new Promise(r=>{this.resolve=r,this.open()})}onOpen(){let{contentEl:r,titleEl:n}=this;n.setText("Edit .gitignore");let i=r.createDiv(),a=i.createEl("textarea",{text:this.content,cls:["obsidian-git-textarea"],attr:{rows:10,cols:30,wrap:"off"}});i.createEl("button",{cls:["mod-cta","obsidian-git-center-button"],text:"Save"}).addEventListener("click",()=>{this.resolve(a.value),this.close()})}onClose(){let{contentEl:r}=this;r.empty(),this.resolve&&this.resolve(void 0)}};p();var Gu=require("@codemirror/state"),vp=require("@codemirror/view");p();var El=require("@codemirror/state");p();var Dt=class t{static createHunk(e,r,n,i){return{removed:{start:e,count:r,lines:[]},added:{start:n,count:i,lines:[]},head:`@@ -${e}${r>0?`,${r}`:""} +${n}${i>0?`,${i}`:""} @@`,vend:n+Math.max(i-1,0),type:i===0?"delete":r===0?"add":"change"}}static createPartialHunk(e,r,n){let i=r,a=n-r+1,s=0;for(let o of e){let l=o.added.count-o.removed.count,c=0;if(o.added.start>=r&&o.vend<=n)c=l;else{let u=Math.max(0,n+1-(o.added.start+o.removed.count)),f=Math.max(0,r-(o.added.start+o.removed.count));o.added.start>=r&&o.added.start<=n?c=u:o.vend>=r&&o.vend<=n?(c=l-f,i=i-f):o.added.start<=r&&o.vend>=n?(c=u-f,i=i-f):s++,r>o.vend&&(i=i-l)}a=a-c}if(s!==e.length)return a===0&&(i=i-1),this.createHunk(i,a,r,n-r+1)}patchLines(e,r=!1){let n=[];for(let i of e.removed.lines)n.push("-"+i);for(let i of e.added.lines)n.push("+"+i);return r?n.map(i=>i.replace(/\r$/,"")):n}static parseDiffLine(e){let i=e.split("@@")[1].trim().split(" "),a=i[0].substring(1).split(","),s=i[1].substring(1).split(","),o=this.createHunk(parseInt(a[0]),parseInt(a[1]||"1"),parseInt(s[0]),parseInt(s[1]||"1"));return o.head=e,o}static changeEnd(e){return e.added.count===0?e.added.start:e.removed.count===0?e.added.start+e.added.count-1:e.added.start+Math.min(e.added.count,e.removed.count)-1}static calcSigns(e,r,n,i=1,a=1/0,s){if(s&&r.type!=="add")return console.error(`Invalid hunk with untracked=${s} hunk="${r.head}"`),[];i=Math.max(1,i);let{start:o,added:l,removed:c}={start:r.added.start,added:r.added.count,removed:r.removed.count},u=this.changeEnd(r),f=r.type==="delete"&&(o===0||e&&this.changeEnd(e)===o)&&(!n||n.added.start!==o+1);f&&i===1&&(i=0);let d=[];for(let h=Math.max(o,i);h<=Math.min(u,a);h++){let m=r.type==="change"&&(c>l&&h===u||e&&e.added.start===0);d.push({type:f?"topdelete":m?"changedelete":s?"untracked":r.type,count:h===o?r.type==="add"?l:c:void 0,lnum:h+(f?1:0)})}if(r.type==="change"&&l>c&&r.vend>=i&&u<=a)for(let h=Math.max(u,i);h<=Math.min(r.vend,a);h++)d.push({type:"add",count:h===r.vend?l-c:void 0,lnum:h});return d}static createPatch(e,r,n,i=!1){let a=[`diff --git a/${e} b/${e}`,`index 000000..000000 ${n}`,`--- a/${e}`,`+++ b/${e}`],s=0;r=structuredClone(r);for(let o of r){let l=o.removed.start,c=o.removed.count,u=o.added.count;o.type==="add"&&(l=l+1);let f=o.removed.lines,d=o.added.lines;i&&([c,u]=[u,c],[f,d]=[d,f]),a.push(`@@ -${l},${c} +${l+s},${u} @@`);for(let h of f)a.push("-"+h);(i?o.added:o.removed).no_nl_at_eof&&a.push("\\ No newline at end of file");for(let h of d)a.push("+"+h);(i?o.removed:o.added).no_nl_at_eof&&a.push("\\ No newline at end of file"),o.removed.start=l+s,s=s+(u-c)}return a}getSummary(e){let r={added:0,changed:0,removed:0};for(let n of e)if(n.type==="add")r.added+=n.added.count;else if(n.type==="delete")r.removed+=n.removed.count;else if(n.type==="change"){let i=n.added.count,a=n.removed.count,s=Math.min(i,a);r.changed+=s,r.added+=i-s,r.removed+=a-s}return r}static findHunk(e,r){if(!r)return[void 0,void 0];for(let n=0;n<r.length;n++){let i=r[n];if(e===1&&i.added.start===0&&i.vend===0)return[i,n];if(i.added.start<=e&&i.vend>=e)return[i,n]}return[void 0,void 0]}static findNearestHunk(e,r,n,i){if(r.length!==0){if(n==="first")return 0;if(n==="last")return r.length-1;if(n==="next"){if(r[0].added.start>e)return 0;for(let a=r.length-1;a>=0;a--)if(r[a].added.start<=e){if(a+1<r.length&&r[a+1].added.start>e)return a+1;if(i)return 0}}else if(n==="prev"){if(Math.max(r[r.length-1].vend)<e)return r.length-1;for(let a=0;a<r.length;a++)if(e<=Math.max(r[a].vend,1)){if(a>0&&Math.max(r[a-1].vend,1)<e)return a-1;if(i)return r.length-1}}}}compareHeads(e,r){if(e===void 0!=(r===void 0))return!0;if(e&&r&&e.length!==r.length)return!0;for(let n=0;n<(e||[]).length;n++)if(r[n].head!==e[n].head)return!0;return!1}static compare(e,r){if(e.added.start!==r.added.start||e.added.count!==r.added.count)return!1;for(let n=0;n<e.added.count;n++)if(e.added.lines[n]!==r.added.lines[n])return!1;return!0}static filterCommon(e,r){if(!e&&!r)return;e=e||[],r=r||[];let n=0,i=0,a=[];for(let s=0;s<Math.max(e.length,r.length)+1;s++){let o=e[n],l=r[i];if(!o)break;if(!l){for(let c=n;c<e.length;c++)a.push(e[c]);break}o.added.start>l.added.start?i++:o.added.start<l.added.start?(a.push(o),n++):(this.compare(o,l)||a.push(o),n++,i++)}return a}static computeStagedHunks(e,r,n){return t.filterCommon(e,r)}linespecForHunk(e,r=!1){let n=[],i=e.removed.lines,a=e.added.lines;r&&(i=i.map(s=>s.replace(/\r$/,"")),a=a.map(s=>s.replace(/\r$/,"")));for(let s of[{sym:"-",lines:i,hl:"GitSignsDeletePreview"},{sym:"+",lines:a,hl:"GitSignsAddPreview"}])for(let o of s.lines){let l={start_row:0,hl_group:s.hl,end_row:1};n.push([[s.sym+o,[l]]])}return n}};p();p();var Le=require("@codemirror/view"),Re=require("@codemirror/state");p();var O0="\u037C",c$=typeof Symbol=="undefined"?"__"+O0:Symbol.for(O0),M0=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),u$=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{},ep=class{constructor(e,r){this.rules=[];let{finish:n}=r||{};function i(s){return/^@/.test(s)?[s]:s.split(/,\s*/)}function a(s,o,l,c){let u=[],f=/^@(\w+)\b/.exec(s[0]),d=f&&f[1]=="keyframes";if(f&&o==null)return l.push(s[0]+";");for(let h in o){let m=o[h];if(/&/.test(h))a(h.split(/,\s*/).map(g=>s.map(v=>g.replace(/&/,v))).reduce((g,v)=>g.concat(v)),m,l);else if(m&&typeof m=="object"){if(!f)throw new RangeError("The value of a property ("+h+") should be a primitive value.");a(i(h),m,u,d)}else m!=null&&u.push(h.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+m+";")}(u.length||d)&&l.push((n&&!f&&!c?s.map(n):s).join(", ")+" {"+u.join(" ")+"}")}for(let s in e)a(i(s),e[s],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=u$[c$]||1;return u$[c$]=e+1,O0+e.toString(36)}static mount(e,r,n){let i=e[M0],a=n&&n.nonce;i?a&&i.setNonce(a):i=new D0(e,a),i.mount(Array.isArray(r)?r:[r],e)}},f$=new Map,D0=class{constructor(e,r){let n=e.ownerDocument||e,i=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let a=f$.get(n);if(a)return e[M0]=a;this.sheet=new i.CSSStyleSheet,f$.set(n,this)}else this.styleTag=n.createElement("style"),r&&this.styleTag.setAttribute("nonce",r);this.modules=[],e[M0]=this}mount(e,r){let n=this.sheet,i=0,a=0;for(let s=0;s<e.length;s++){let o=e[s],l=this.modules.indexOf(o);if(l<a&&l>-1&&(this.modules.splice(l,1),a--,l=-1),l==-1){if(this.modules.splice(a++,0,o),n)for(let c=0;c<o.rules.length;c++)n.insertRule(o.rules[c],i++)}else{for(;a<l;)i+=this.modules[a++].rules.length;i+=o.rules.length,a++}}if(n)r.adoptedStyleSheets.indexOf(this.sheet)<0&&(r.adoptedStyleSheets=[this.sheet,...r.adoptedStyleSheets]);else{let s="";for(let l=0;l<this.modules.length;l++)s+=this.modules[l].getRules()+`
`;this.styleTag.textContent=s;let o=r.head||r;this.styleTag.parentNode!=o&&o.insertBefore(this.styleTag,o.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}};var P$=require("@codemirror/language"),Yz=require("@lezer/highlight"),_t=class t{constructor(e,r,n,i){this.fromA=e,this.toA=r,this.fromB=n,this.toB=i}offset(e,r=e){return new t(this.fromA+e,this.toA+e,this.fromB+r,this.toB+r)}};function Ms(t,e,r,n,i,a){if(t==n)return[];let s=q0(t,e,r,n,i,a),o=z0(t,e+s,r,n,i+s,a);e+=s,r-=o,i+=s,a-=o;let l=r-e,c=a-i;if(!l||!c)return[new _t(e,r,i,a)];if(l>c){let f=t.slice(e,r).indexOf(n.slice(i,a));if(f>-1)return[new _t(e,e+f,i,i),new _t(e+f+c,r,a,a)]}else if(c>l){let f=n.slice(i,a).indexOf(t.slice(e,r));if(f>-1)return[new _t(e,e,i,i+f),new _t(r,r,i+f+l,a)]}if(l==1||c==1)return[new _t(e,r,i,a)];let u=I$(t,e,r,n,i,a);if(u){let[f,d,h]=u;return Ms(t,e,f,n,i,d).concat(Ms(t,f+h,r,n,d+h,a))}return Xz(t,e,r,n,i,a)}var Iu=1e9,Fu=0,j0=!1;function Xz(t,e,r,n,i,a){let s=r-e,o=a-i;if(Iu<1e9&&Math.min(s,o)>Iu*16||Fu>0&&Date.now()>Fu)return Math.min(s,o)>Iu*64?[new _t(e,r,i,a)]:d$(t,e,r,n,i,a);let l=Math.ceil((s+o)/2);L0.reset(l),N0.reset(l);let c=(h,m)=>t.charCodeAt(e+h)==n.charCodeAt(i+m),u=(h,m)=>t.charCodeAt(r-h-1)==n.charCodeAt(a-m-1),f=(s-o)%2!=0?N0:null,d=f?null:L0;for(let h=0;h<l;h++){if(h>Iu||Fu>0&&!(h&63)&&Date.now()>Fu)return d$(t,e,r,n,i,a);let m=L0.advance(h,s,o,l,f,!1,c)||N0.advance(h,s,o,l,d,!0,u);if(m)return Zz(t,e,r,e+m[0],n,i,a,i+m[1])}return[new _t(e,r,i,a)]}var ap=class{constructor(){this.vec=[]}reset(e){this.len=e<<1;for(let r=0;r<this.len;r++)this.vec[r]=-1;this.vec[e+1]=0,this.start=this.end=0}advance(e,r,n,i,a,s,o){for(let l=-e+this.start;l<=e-this.end;l+=2){let c=i+l,u=l==-e||l!=e&&this.vec[c-1]<this.vec[c+1]?this.vec[c+1]:this.vec[c-1]+1,f=u-l;for(;u<r&&f<n&&o(u,f);)u++,f++;if(this.vec[c]=u,u>r)this.end+=2;else if(f>n)this.start+=2;else if(a){let d=i+(r-n)-l;if(d>=0&&d<this.len&&a.vec[d]!=-1)if(s){let h=a.vec[d];if(h>=r-u)return[h,i+h-d]}else{let h=r-a.vec[d];if(u>=h)return[u,f]}}}return null}},L0=new ap,N0=new ap;function Zz(t,e,r,n,i,a,s,o){let l=!1;return!Sl(t,n)&&++n==r&&(l=!0),!Sl(i,o)&&++o==s&&(l=!0),l?[new _t(e,r,a,s)]:Ms(t,e,n,i,a,o).concat(Ms(t,n,r,i,o,s))}function R$(t,e){let r=1,n=Math.min(t,e);for(;r<n;)r=r<<1;return r}function q0(t,e,r,n,i,a){if(e==r||e==a||t.charCodeAt(e)!=n.charCodeAt(i))return 0;let s=R$(r-e,a-i);for(let o=e,l=i;;){let c=o+s,u=l+s;if(c>r||u>a||t.slice(o,c)!=n.slice(l,u)){if(s==1)return o-e-(Sl(t,o)?0:1);s=s>>1}else{if(c==r||u==a)return c-e;o=c,l=u}}}function z0(t,e,r,n,i,a){if(e==r||i==a||t.charCodeAt(r-1)!=n.charCodeAt(a-1))return 0;let s=R$(r-e,a-i);for(let o=r,l=a;;){let c=o-s,u=l-s;if(c<e||u<i||t.slice(c,o)!=n.slice(u,l)){if(s==1)return r-o-(Sl(t,o)?0:1);s=s>>1}else{if(c==e||u==i)return r-c;o=c,l=u}}}function B0(t,e,r,n,i,a,s,o){let l=n.slice(i,a),c=null;for(;;){if(c||s<o)return c;for(let u=e+s;;){Sl(t,u)||u++;let f=u+s;if(Sl(t,f)||(f+=f==u+1?1:-1),f>=r)break;let d=t.slice(u,f),h=-1;for(;(h=l.indexOf(d,h+1))!=-1;){let m=q0(t,f,r,n,i+h+d.length,a),g=z0(t,e,u,n,i,i+h),v=d.length+m+g;(!c||c[2]<v)&&(c=[u-g,i+h-g,v])}u=f}if(o<0)return c;s=s>>1}}function I$(t,e,r,n,i,a){let s=r-e,o=a-i;if(s<o){let l=I$(n,i,a,t,e,r);return l&&[l[1],l[0],l[2]]}return s<4||o*2<s?null:B0(t,e,r,n,i,a,Math.floor(s/4),-1)}function d$(t,e,r,n,i,a){j0=!0;let s=r-e,o=a-i,l;if(s<o){let d=B0(n,i,a,t,e,r,Math.floor(s/6),50);l=d&&[d[1],d[0],d[2]]}else l=B0(t,e,r,n,i,a,Math.floor(o/6),50);if(!l)return[new _t(e,r,i,a)];let[c,u,f]=l;return Ms(t,e,c,n,i,u).concat(Ms(t,c+f,r,n,u+f,a))}function F$(t,e){for(let r=1;r<t.length;r++){let n=t[r-1],i=t[r];n.toA>i.fromA-e&&n.toB>i.fromB-e&&(t[r-1]=new _t(n.fromA,i.toA,n.fromB,i.toB),t.splice(r--,1))}}function Kz(t,e,r){for(;;){F$(r,1);let n=!1;for(let i=0;i<r.length;i++){let a=r[i],s,o;(s=q0(t,a.fromA,a.toA,e,a.fromB,a.toB))&&(a=r[i]=new _t(a.fromA+s,a.toA,a.fromB+s,a.toB)),(o=z0(t,a.fromA,a.toA,e,a.fromB,a.toB))&&(a=r[i]=new _t(a.fromA,a.toA-o,a.fromB,a.toB-o));let l=a.toA-a.fromA,c=a.toB-a.fromB;if(l&&c)continue;let u=a.fromA-(i?r[i-1].toA:0),f=(i<r.length-1?r[i+1].fromA:t.length)-a.toA;if(!u||!f)continue;let d=l?t.slice(a.fromA,a.toA):e.slice(a.fromB,a.toB);u<=d.length&&t.slice(a.fromA-u,a.fromA)==d.slice(d.length-u)?(r[i]=new _t(a.fromA-u,a.toA-u,a.fromB-u,a.toB-u),n=!0):f<=d.length&&t.slice(a.toA,a.toA+f)==d.slice(0,f)&&(r[i]=new _t(a.fromA+f,a.toA+f,a.fromB+f,a.toB+f),n=!0)}if(!n)break}return r}function Jz(t,e,r){for(let n=0,i=0;i<t.length;i++){let a=t[i],s=a.toA-a.fromA,o=a.toB-a.fromB;if(s&&o||s>3||o>3){let l=i==t.length-1?e.length:t[i+1].fromA,c=a.fromA-n,u=l-a.toA,f=p$(e,a.fromA,c),d=h$(e,a.toA,u),h=a.fromA-f,m=d-a.toA;if((!s||!o)&&h&&m){let g=Math.max(s,o),[v,w,b]=s?[e,a.fromA,a.toA]:[r,a.fromB,a.toB];g>h&&e.slice(f,a.fromA)==v.slice(b-h,b)?(a=t[i]=new _t(f,f+s,a.fromB-h,a.toB-h),f=a.fromA,d=h$(e,a.toA,l-a.toA)):g>m&&e.slice(a.toA,d)==v.slice(w,w+m)&&(a=t[i]=new _t(d-s,d,a.fromB+m,a.toB+m),d=a.toA,f=p$(e,a.fromA,a.fromA-n)),h=a.fromA-f,m=d-a.toA}if(h||m)a=t[i]=new _t(a.fromA-h,a.toA+m,a.fromB-h,a.toB+m);else if(s){if(!o){let g=g$(e,a.fromA,a.toA),v,w=g<0?-1:m$(e,a.toA,a.fromA);g>-1&&(v=g-a.fromA)<=u&&e.slice(a.fromA,g)==e.slice(a.toA,a.toA+v)?a=t[i]=a.offset(v):w>-1&&(v=a.toA-w)<=c&&e.slice(a.fromA-v,a.fromA)==e.slice(w,a.toA)&&(a=t[i]=a.offset(-v))}}else{let g=g$(r,a.fromB,a.toB),v,w=g<0?-1:m$(r,a.toB,a.fromB);g>-1&&(v=g-a.fromB)<=u&&r.slice(a.fromB,g)==r.slice(a.toB,a.toB+v)?a=t[i]=a.offset(v):w>-1&&(v=a.toB-w)<=c&&r.slice(a.fromB-v,a.fromB)==r.slice(w,a.toB)&&(a=t[i]=a.offset(-v))}}n=a.toA}return F$(t,3),t}var Os;try{Os=new RegExp("[\\p{Alphabetic}\\p{Number}]","u")}catch(t){}function $$(t){return t>48&&t<58||t>64&&t<91||t>96&&t<123}function O$(t,e){if(e==t.length)return 0;let r=t.charCodeAt(e);return r<192?$$(r)?1:0:Os?!L$(r)||e==t.length-1?Os.test(String.fromCharCode(r))?1:0:Os.test(t.slice(e,e+2))?2:0:0}function M$(t,e){if(!e)return 0;let r=t.charCodeAt(e-1);return r<192?$$(r)?1:0:Os?!N$(r)||e==1?Os.test(String.fromCharCode(r))?1:0:Os.test(t.slice(e-2,e))?2:0:0}var D$=8;function h$(t,e,r){if(e==t.length||!M$(t,e))return e;for(let n=e,i=e+r,a=0;a<D$;a++){let s=O$(t,n);if(!s||n+s>i)return n;n+=s}return e}function p$(t,e,r){if(!e||!O$(t,e))return e;for(let n=e,i=e-r,a=0;a<D$;a++){let s=M$(t,n);if(!s||n-s<i)return n;n-=s}return e}function m$(t,e,r){for(;e!=r;e--)if(t.charCodeAt(e-1)==10)return e;return-1}function g$(t,e,r){for(;e!=r;e++)if(t.charCodeAt(e)==10)return e;return-1}var L$=t=>t>=55296&&t<=56319,N$=t=>t>=56320&&t<=57343;function Sl(t,e){return!e||e==t.length||!L$(t.charCodeAt(e-1))||!N$(t.charCodeAt(e))}function Qz(t,e,r){var n;return Iu=((n=r==null?void 0:r.scanLimit)!==null&&n!==void 0?n:1e9)>>1,Fu=r!=null&&r.timeout?Date.now()+r.timeout:0,j0=!1,Kz(t,e,Ms(t,0,t.length,e,0,e.length))}function B$(){return!j0}function H$(t,e,r){return Jz(Qz(t,e,r),t,e)}var Nn=Re.Facet.define({combine:t=>t[0]}),H0=Re.StateEffect.define(),e9=Re.Facet.define(),Ds=Re.StateField.define({create(t){return null},update(t,e){for(let r of e.effects)r.is(H0)&&(t=r.value);for(let r of e.state.facet(e9))t=r(t,e);return t}});function V0(t){let e=t.field(Ds,!1);if(!e)return null;let r=t.facet(Nn);return{chunks:e,side:r?r.side:null}}var Ji=class t{constructor(e,r,n,i,a,s=!0){this.changes=e,this.fromA=r,this.toA=n,this.fromB=i,this.toB=a,this.precise=s}offset(e,r){return e||r?new t(this.changes,this.fromA+e,this.toA+e,this.fromB+r,this.toB+r,this.precise):this}get endA(){return Math.max(this.fromA,this.toA-1)}get endB(){return Math.max(this.fromB,this.toB-1)}static build(e,r,n){let i=H$(e.toString(),r.toString(),n);return U$(i,e,r,0,0,B$())}static updateA(e,r,n,i,a){return _$(b$(e,i,!0,n.length),e,r,n,a)}static updateB(e,r,n,i,a){return _$(b$(e,i,!1,r.length),e,r,n,a)}};function v$(t,e,r,n){let i=r.lineAt(t),a=n.lineAt(e);return i.to==t&&a.to==e&&t<r.length&&e<n.length?[t+1,e+1]:[i.from,a.from]}function w$(t,e,r,n){let i=r.lineAt(t),a=n.lineAt(e);return i.from==t&&a.from==e?[t,e]:[i.to+1,a.to+1]}function U$(t,e,r,n,i,a){let s=[];for(let o=0;o<t.length;o++){let l=t[o],[c,u]=v$(l.fromA+n,l.fromB+i,e,r),[f,d]=w$(l.toA+n,l.toB+i,e,r),h=[l.offset(-c+n,-u+i)];for(;o<t.length-1;){let m=t[o+1],[g,v]=v$(m.fromA+n,m.fromB+i,e,r);if(g>f+1&&v>d+1)break;h.push(m.offset(-c+n,-u+i)),[f,d]=w$(m.toA+n,m.toB+i,e,r),o++}s.push(new Ji(h,c,Math.max(c,f),u,Math.max(u,d),a))}return s}var tp=1e3;function y$(t,e,r,n){let i=0,a=t.length;for(;;){if(i==a){let u=0,f=0;i&&({toA:u,toB:f}=t[i-1]);let d=e-(r?u:f);return[u+d,f+d]}let s=i+a>>1,o=t[s],[l,c]=r?[o.fromA,o.toA]:[o.fromB,o.toB];if(l>e)a=s;else if(c<=e)i=s+1;else return n?[o.fromA,o.fromB]:[o.toA,o.toB]}}function b$(t,e,r,n){let i=[];return e.iterChangedRanges((a,s,o,l)=>{let c=0,u=r?e.length:n,f=0,d=r?n:e.length;a>tp&&([c,f]=y$(t,a-tp,r,!0)),s<e.length-tp&&([u,d]=y$(t,s+tp,r,!1));let h=l-o-(s-a),m,[g,v]=r?[h,0]:[0,h];i.length&&(m=i[i.length-1]).toA>=c?i[i.length-1]={fromA:m.fromA,fromB:m.fromB,toA:u,toB:d,diffA:m.diffA+g,diffB:m.diffB+v}:i.push({fromA:c,toA:u,fromB:f,toB:d,diffA:g,diffB:v})}),i}function _$(t,e,r,n,i){if(!t.length)return e;let a=[];for(let s=0,o=0,l=0,c=0;;s++){let u=s==t.length?null:t[s],f=u?u.fromA+o:r.length,d=u?u.fromB+l:n.length;for(;c<e.length;){let v=e[c];if(Math.min(r.length,v.toA+o)>f||Math.min(n.length,v.toB+l)>d)break;a.push(v.offset(o,l)),c++}if(!u)break;let h=u.toA+o+u.diffA,m=u.toB+l+u.diffB,g=H$(r.sliceString(f,h),n.sliceString(d,m),i);for(let v of U$(g,r,n,f,d,B$()))a.push(v);for(o+=u.diffA,l+=u.diffB;c<e.length;){let v=e[c];if(v.fromA+o>h&&v.fromB+l>m)break;c++}}return a}var t9={scanLimit:500},G$=Le.ViewPlugin.fromClass(class{constructor(t){({deco:this.deco,gutter:this.gutter}=E$(t))}update(t){(t.docChanged||t.viewportChanged||r9(t.startState,t.state)||n9(t.startState,t.state))&&({deco:this.deco,gutter:this.gutter}=E$(t.view))}},{decorations:t=>t.deco}),rp=Re.Prec.low((0,Le.gutter)({class:"cm-changeGutter",markers:t=>{var e;return((e=t.plugin(G$))===null||e===void 0?void 0:e.gutter)||Re.RangeSet.empty}}));function r9(t,e){return t.field(Ds,!1)!=e.field(Ds,!1)}function n9(t,e){return t.facet(Nn)!=e.facet(Nn)}var x$=Le.Decoration.line({class:"cm-changedLine"}),i9=Le.Decoration.mark({class:"cm-changedText"}),a9=Le.Decoration.mark({tagName:"ins",class:"cm-insertedLine"}),s9=Le.Decoration.mark({tagName:"del",class:"cm-deletedLine"}),S$=new class extends Le.GutterMarker{constructor(){super(...arguments),this.elementClass="cm-changedLineGutter"}};function o9(t,e,r,n,i,a){let s=r?t.fromA:t.fromB,o=r?t.toA:t.toB,l=0;if(s!=o){i.add(s,s,x$),i.add(s,o,r?s9:a9),a&&a.add(s,s,S$);for(let c=e.iterRange(s,o-1),u=s;!c.next().done;){if(c.lineBreak){u++,i.add(u,u,x$),a&&a.add(u,u,S$);continue}let f=u+c.value.length;if(n)for(;l<t.changes.length;){let d=t.changes[l],h=s+(r?d.fromA:d.fromB),m=s+(r?d.toA:d.toB),g=Math.max(u,h),v=Math.min(f,m);if(g<v&&i.add(g,v,i9),m<f)l++;else break}u=f}}}function E$(t){let e=t.state.field(Ds),{side:r,highlightChanges:n,markGutter:i,overrideChunk:a}=t.state.facet(Nn),s=r=="a",o=new Re.RangeSetBuilder,l=i?new Re.RangeSetBuilder:null,{from:c,to:u}=t.viewport;for(let f of e){if((s?f.fromA:f.fromB)>=u)break;(s?f.toA:f.toB)>c&&(!a||!a(t.state,f,o,l))&&o9(f,t.state.doc,s,n,o,l)}return{deco:o.finish(),gutter:l&&l.finish()}}var xl=class extends Le.WidgetType{constructor(e){super(),this.height=e}eq(e){return this.height==e.height}toDOM(){let e=document.createElement("div");return e.className="cm-mergeSpacer",e.style.height=this.height+"px",e}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}},sp=Re.StateEffect.define({map:(t,e)=>t.map(e)}),$u=Re.StateField.define({create:()=>Le.Decoration.none,update:(t,e)=>{for(let r of e.effects)if(r.is(sp))return r.value;return t.map(e.changes)},provide:t=>Le.EditorView.decorations.from(t)}),np=.01;function k$(t,e){if(t.size!=e.size)return!1;let r=t.iter(),n=e.iter();for(;r.value;){if(r.from!=n.from||Math.abs(r.value.spec.widget.height-n.value.spec.widget.height)>1)return!1;r.next(),n.next()}return!0}function l9(t,e,r){let n=new Re.RangeSetBuilder,i=new Re.RangeSetBuilder,a=t.state.field($u).iter(),s=e.state.field($u).iter(),o=0,l=0,c=0,u=0,f=t.viewport,d=e.viewport;for(let v=0;;v++){let w=v<r.length?r[v]:null,b=w?w.fromA:t.state.doc.length,k=w?w.fromB:e.state.doc.length;if(o<b){let E=t.lineBlockAt(o).top+c,S=e.lineBlockAt(l).top+u,A=E-S;A<-np?(c-=A,n.add(o,o,Le.Decoration.widget({widget:new xl(-A),block:!0,side:-1}))):A>np&&(u+=A,i.add(l,l,Le.Decoration.widget({widget:new xl(A),block:!0,side:-1})))}if(b>o+1e3&&o<f.from&&b>f.from&&l<d.from&&k>d.from){let E=Math.min(f.from-o,d.from-l);o+=E,l+=E,v--}else if(w)o=w.toA,l=w.toB;else break;for(;a.value&&a.from<o;)c-=a.value.spec.widget.height,a.next();for(;s.value&&s.from<l;)u-=s.value.spec.widget.height,s.next()}for(;a.value;)c-=a.value.spec.widget.height,a.next();for(;s.value;)u-=s.value.spec.widget.height,s.next();let h=t.contentHeight+c-(e.contentHeight+u);h<np?n.add(t.state.doc.length,t.state.doc.length,Le.Decoration.widget({widget:new xl(-h),block:!0,side:1})):h>np&&i.add(e.state.doc.length,e.state.doc.length,Le.Decoration.widget({widget:new xl(h),block:!0,side:1}));let m=n.finish(),g=i.finish();k$(m,t.state.field($u))||t.dispatch({effects:sp.of(m)}),k$(g,e.state.field($u))||e.dispatch({effects:sp.of(g)})}var U0=Re.StateEffect.define({map:(t,e)=>e.mapPos(t)});var G0=class extends Le.WidgetType{constructor(e){super(),this.lines=e}eq(e){return this.lines==e.lines}toDOM(e){let r=document.createElement("div");return r.className="cm-collapsedLines",r.textContent=e.state.phrase("$ unchanged lines",this.lines),r.addEventListener("click",n=>{let i=e.posAtDOM(n.target);e.dispatch({effects:U0.of(i)});let{side:a,sibling:s}=e.state.facet(Nn);s&&s().dispatch({effects:U0.of(c9(i,e.state.field(Ds),a=="a"))})}),r}ignoreEvent(e){return e instanceof MouseEvent}get estimatedHeight(){return 27}get type(){return"collapsed-unchanged-code"}};function c9(t,e,r){let n=0,i=0;for(let a=0;;a++){let s=a<e.length?e[a]:null;if(!s||(r?s.fromA:s.fromB)>=t)return i+(t-n);[n,i]=r?[s.toA,s.toB]:[s.toB,s.toA]}}var u9=Re.StateField.define({create(t){return Le.Decoration.none},update(t,e){t=t.map(e.changes);for(let r of e.effects)r.is(U0)&&(t=t.update({filter:n=>n!=r.value}));return t},provide:t=>Le.EditorView.decorations.from(t)});function A$({margin:t=3,minSize:e=4}){return u9.init(r=>f9(r,t,e))}function f9(t,e,r){let n=new Re.RangeSetBuilder,i=t.facet(Nn).side=="a",a=t.field(Ds),s=1;for(let o=0;;o++){let l=o<a.length?a[o]:null,c=o?s+e:1,u=l?t.doc.lineAt(i?l.fromA:l.fromB).number-1-e:t.doc.lines,f=u-c+1;if(f>=r&&n.add(t.doc.line(c).from,t.doc.line(u).to,Le.Decoration.replace({widget:new G0(f),block:!0})),!l)break;s=t.doc.lineAt(Math.min(t.doc.length,i?l.toA:l.toB)).number}return n.finish()}var d9=Le.EditorView.styleModule.of(new ep({".cm-mergeView":{overflowY:"auto"},".cm-mergeViewEditors":{display:"flex",alignItems:"stretch"},".cm-mergeViewEditor":{flexGrow:1,flexBasis:0,overflow:"hidden"},".cm-merge-revert":{width:"1.6em",flexGrow:0,flexShrink:0,position:"relative"},".cm-merge-revert button":{position:"absolute",display:"block",width:"100%",boxSizing:"border-box",textAlign:"center",background:"none",border:"none",font:"inherit",cursor:"pointer"}})),h9=Le.EditorView.baseTheme({".cm-mergeView & .cm-scroller, .cm-mergeView &":{height:"auto !important",overflowY:"visible !important"},"&.cm-merge-a .cm-changedLine, .cm-deletedChunk":{backgroundColor:"rgba(160, 128, 100, .08)"},"&.cm-merge-b .cm-changedLine, .cm-inlineChangedLine":{backgroundColor:"rgba(100, 160, 128, .08)"},"&light.cm-merge-a .cm-changedText, &light .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ee443366, #ee443366) bottom/100% 2px no-repeat"},"&dark.cm-merge-a .cm-changedText, &dark .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ffaa9966, #ffaa9966) bottom/100% 2px no-repeat"},"&light.cm-merge-b .cm-changedText":{background:"linear-gradient(#22bb22aa, #22bb22aa) bottom/100% 2px no-repeat"},"&dark.cm-merge-b .cm-changedText":{background:"linear-gradient(#88ff88aa, #88ff88aa) bottom/100% 2px no-repeat"},"&.cm-merge-b .cm-deletedText":{background:"#ff000033"},".cm-insertedLine, .cm-deletedLine, .cm-deletedLine del":{textDecoration:"none"},".cm-deletedChunk":{paddingLeft:"6px","& .cm-chunkButtons":{position:"absolute",insetInlineEnd:"5px"},"& button":{border:"none",cursor:"pointer",color:"white",margin:"0 2px",borderRadius:"3px","&[name=accept]":{background:"#2a2"},"&[name=reject]":{background:"#d43"}}},".cm-collapsedLines":{padding:"5px 5px 5px 10px",cursor:"pointer","&:before":{content:'"\u299A"',marginInlineEnd:"7px"},"&:after":{content:'"\u299A"',marginInlineStart:"7px"}},"&light .cm-collapsedLines":{color:"#444",background:"linear-gradient(to bottom, transparent 0, #f3f3f3 30%, #f3f3f3 70%, transparent 100%)"},"&dark .cm-collapsedLines":{color:"#ddd",background:"linear-gradient(to bottom, transparent 0, #222 30%, #222 70%, transparent 100%)"},".cm-changeGutter":{width:"3px",paddingLeft:"1px"},"&light.cm-merge-a .cm-changedLineGutter, &light .cm-deletedLineGutter":{background:"#e43"},"&dark.cm-merge-a .cm-changedLineGutter, &dark .cm-deletedLineGutter":{background:"#fa9"},"&light.cm-merge-b .cm-changedLineGutter":{background:"#2b2"},"&dark.cm-merge-b .cm-changedLineGutter":{background:"#8f8"},".cm-inlineChangedLineGutter":{background:"#75d"}}),T$=new Re.Compartment,ip=new Re.Compartment,op=class{constructor(e){this.revertDOM=null,this.revertToA=!1,this.revertToLeft=!1,this.measuring=-1,this.diffConf=e.diffConfig||t9;let r=[Re.Prec.low(G$),h9,d9,$u,Le.EditorView.updateListener.of(f=>{this.measuring<0&&(f.heightChanged||f.viewportChanged)&&!f.transactions.some(d=>d.effects.some(h=>h.is(sp)))&&this.measure()})],n=[Nn.of({side:"a",sibling:()=>this.b,highlightChanges:e.highlightChanges!==!1,markGutter:e.gutter!==!1})];e.gutter!==!1&&n.push(rp);let i=Re.EditorState.create({doc:e.a.doc,selection:e.a.selection,extensions:[e.a.extensions||[],Le.EditorView.editorAttributes.of({class:"cm-merge-a"}),ip.of(n),r]}),a=[Nn.of({side:"b",sibling:()=>this.a,highlightChanges:e.highlightChanges!==!1,markGutter:e.gutter!==!1})];e.gutter!==!1&&a.push(rp);let s=Re.EditorState.create({doc:e.b.doc,selection:e.b.selection,extensions:[e.b.extensions||[],Le.EditorView.editorAttributes.of({class:"cm-merge-b"}),ip.of(a),r]});this.chunks=Ji.build(i.doc,s.doc,this.diffConf);let o=[Ds.init(()=>this.chunks),T$.of(e.collapseUnchanged?A$(e.collapseUnchanged):[])];i=i.update({effects:Re.StateEffect.appendConfig.of(o)}).state,s=s.update({effects:Re.StateEffect.appendConfig.of(o)}).state,this.dom=document.createElement("div"),this.dom.className="cm-mergeView",this.editorDOM=this.dom.appendChild(document.createElement("div")),this.editorDOM.className="cm-mergeViewEditors";let l=e.orientation||"a-b",c=document.createElement("div");c.className="cm-mergeViewEditor";let u=document.createElement("div");u.className="cm-mergeViewEditor",this.editorDOM.appendChild(l=="a-b"?c:u),this.editorDOM.appendChild(l=="a-b"?u:c),this.a=new Le.EditorView({state:i,parent:c,root:e.root,dispatchTransactions:f=>this.dispatch(f,this.a)}),this.b=new Le.EditorView({state:s,parent:u,root:e.root,dispatchTransactions:f=>this.dispatch(f,this.b)}),this.setupRevertControls(!!e.revertControls,e.revertControls=="b-to-a",e.renderRevertControl),e.parent&&e.parent.appendChild(this.dom),this.scheduleMeasure()}dispatch(e,r){if(e.some(n=>n.docChanged)){let n=e[e.length-1],i=e.reduce((s,o)=>s.compose(o.changes),Re.ChangeSet.empty(e[0].startState.doc.length));this.chunks=r==this.a?Ji.updateA(this.chunks,n.newDoc,this.b.state.doc,i,this.diffConf):Ji.updateB(this.chunks,this.a.state.doc,n.newDoc,i,this.diffConf),r.update([...e,n.state.update({effects:H0.of(this.chunks)})]);let a=r==this.a?this.b:this.a;a.update([a.state.update({effects:H0.of(this.chunks)})]),this.scheduleMeasure()}else r.update(e)}reconfigure(e){if("diffConfig"in e&&(this.diffConf=e.diffConfig),"orientation"in e){let a=e.orientation!="b-a";if(a!=(this.editorDOM.firstChild==this.a.dom.parentNode)){let s=this.a.dom.parentNode,o=this.b.dom.parentNode;s.remove(),o.remove(),this.editorDOM.insertBefore(a?s:o,this.editorDOM.firstChild),this.editorDOM.appendChild(a?o:s),this.revertToLeft=!this.revertToLeft,this.revertDOM&&(this.revertDOM.textContent="")}}if("revertControls"in e||"renderRevertControl"in e){let a=!!this.revertDOM,s=this.revertToA,o=this.renderRevert;"revertControls"in e&&(a=!!e.revertControls,s=e.revertControls=="b-to-a"),"renderRevertControl"in e&&(o=e.renderRevertControl),this.setupRevertControls(a,s,o)}let r="highlightChanges"in e,n="gutter"in e,i="collapseUnchanged"in e;if(r||n||i){let a=[],s=[];if(r||n){let o=this.a.state.facet(Nn),l=n?e.gutter!==!1:o.markGutter,c=r?e.highlightChanges!==!1:o.highlightChanges;a.push(ip.reconfigure([Nn.of({side:"a",sibling:()=>this.b,highlightChanges:c,markGutter:l}),l?rp:[]])),s.push(ip.reconfigure([Nn.of({side:"b",sibling:()=>this.a,highlightChanges:c,markGutter:l}),l?rp:[]]))}if(i){let o=T$.reconfigure(e.collapseUnchanged?A$(e.collapseUnchanged):[]);a.push(o),s.push(o)}this.a.dispatch({effects:a}),this.b.dispatch({effects:s})}this.scheduleMeasure()}setupRevertControls(e,r,n){this.revertToA=r,this.revertToLeft=this.revertToA==(this.editorDOM.firstChild==this.a.dom.parentNode),this.renderRevert=n,!e&&this.revertDOM?(this.revertDOM.remove(),this.revertDOM=null):e&&!this.revertDOM?(this.revertDOM=this.editorDOM.insertBefore(document.createElement("div"),this.editorDOM.firstChild.nextSibling),this.revertDOM.addEventListener("mousedown",i=>this.revertClicked(i)),this.revertDOM.className="cm-merge-revert"):this.revertDOM&&(this.revertDOM.textContent="")}scheduleMeasure(){if(this.measuring<0){let e=this.dom.ownerDocument.defaultView||window;this.measuring=e.requestAnimationFrame(()=>{this.measuring=-1,this.measure()})}}measure(){l9(this.a,this.b,this.chunks),this.revertDOM&&this.updateRevertButtons()}updateRevertButtons(){let e=this.revertDOM,r=e.firstChild,n=this.a.viewport,i=this.b.viewport;for(let a=0;a<this.chunks.length;a++){let s=this.chunks[a];if(s.fromA>n.to||s.fromB>i.to)break;if(s.fromA<n.from||s.fromB<i.from)continue;let o=this.a.lineBlockAt(s.fromA).top+"px";for(;r&&+r.dataset.chunk<a;)r=C$(r);r&&r.dataset.chunk==String(a)?(r.style.top!=o&&(r.style.top=o),r=r.nextSibling):e.insertBefore(this.renderRevertButton(o,a),r)}for(;r;)r=C$(r)}renderRevertButton(e,r){let n;if(this.renderRevert)n=this.renderRevert();else{n=document.createElement("button");let i=this.a.state.phrase("Revert this chunk");n.setAttribute("aria-label",i),n.setAttribute("title",i),n.textContent=this.revertToLeft?"\u21DC":"\u21DD"}return n.style.top=e,n.setAttribute("data-chunk",String(r)),n}revertClicked(e){let r=e.target,n;for(;r&&r.parentNode!=this.revertDOM;)r=r.parentNode;if(r&&(n=this.chunks[r.dataset.chunk])){let[i,a,s,o,l,c]=this.revertToA?[this.b,this.a,n.fromB,n.toB,n.fromA,n.toA]:[this.a,this.b,n.fromA,n.toA,n.fromB,n.toB],u=i.state.sliceDoc(s,Math.max(s,o-1));s!=o&&c<=a.state.doc.length&&(u+=i.state.lineBreak),a.dispatch({changes:{from:l,to:Math.min(a.state.doc.length,c),insert:u},userEvent:"revert"}),e.preventDefault()}}destroy(){this.a.destroy(),this.b.destroy(),this.measuring>-1&&(this.dom.ownerDocument.defaultView||window).cancelAnimationFrame(this.measuring),this.dom.remove()}};function C$(t){let e=t.nextSibling;return t.remove(),e}var W0=require("@codemirror/state");function Y0(t,e,r){let n=[],i=t.split(`
`),a=e.split(`
`);for(let s of r){let{oldStart:o,oldLines:l,newStart:c,newLines:u}=s,f=Dt.createHunk(o,l,c,u);if(s.oldLines>0){for(let d=o;d<o+l;d++)f.removed.lines.push(i[d-1]);o+l>i.length&&i.last()!=""&&(f.removed.no_nl_at_eof=!0)}if(s.newLines>0){for(let d=c;d<c+u;d++)f.added.lines.push(a[d-1]);c+u>a.length&&a.last()!=""&&(f.added.no_nl_at_eof=!0)}n.push(f)}return n}function X0(t,e,r){let n=e.lineAt(t.fromA).number,i=t.fromA==t.toA?0:lp(e,t.endA)-n+1,a=r.lineAt(t.fromB).number,s=t.fromB==t.toB?0:lp(r,t.endB)-a+1,o={oldStart:n,oldLines:i,newStart:a,newLines:s};return o.oldLines==0&&(o.oldStart-=1),o.newLines==0&&(o.newStart-=1),o}var j$={scanLimit:1e3,timeout:200};function p9(t,e,r,n){let i=W0.Text.of(t.split(`
`)),a=W0.Text.of(e.split(`
`)),s=r&&n?Ji.updateB(r,i,a,n,j$):Ji.build(i,a,j$),o=[];for(let l=0;l<s.length;l++){let c=s[l],u=X0(c,i,a);o.push(u)}return{hunks:Y0(t,e,o),chunks:s}}function q$(t,e,r,n){return p9(t,e,r,n)}var kl=require("obsidian");function lp(t,e){let r=t.lineAt(e);return!(r.text.length==0&&r.number==t.lines)?r.number:r.number-1}var Bn=class{static hasHunksData(e){let r=e.field(Fr,!1);return!!r&&!r.isDirty}static getHunks(e,r){let n=e.field(Fr);return n?r?n.stagedHunks:n.hunks:[]}static getHunkAtPos(e,r,n){if(!e.field(Fr))return;let a=e.doc.lineAt(r).number,s=this.getHunks(e,n);return Dt.findHunk(a,s)[0]}static getCursorHunk(e,r){if(!e.field(Fr))return;let i=e.selection.main.head;return this.getHunkAtPos(e,i,r)}static getHunk(e,r,n){if(n!=null)return this.getHunkAtPos(e,n,r);if(e.selection.main.empty)return this.getCursorHunk(e,r);let i=e.selection.main.from,a=e.selection.main.to,s=e.doc.lineAt(i).number,o=lp(e.doc,a),l=this.getHunks(e,r),c=Dt.createPartialHunk(l,s,o);if(!c)return;let u=e.field(Fr);if(r){let f=s,d=o;for(let h of u.hunks)s>h.vend&&(f=f-(h.added.count-h.removed.count)),o>h.vend&&(d=d-(h.added.count-h.removed.count));c.added.lines=u.compareText.split(`
`).slice(f-1,d),u.compareTextHead?c.removed.lines=u.compareTextHead.split(`
`).slice(c.removed.start-1,c.removed.start-1+c.removed.count):c.removed.lines=[]}else c.added.lines=e.doc.toString().split(`
`).slice(s-1,o),o===e.doc.lines&&!e.doc.toString().endsWith(`
`)&&(c.added.no_nl_at_eof=!0),c.removed.lines=u.compareText.split(`
`).slice(c.removed.start-1,c.removed.start-1+c.removed.count),c.removed.start+c.removed.count-1===u.compareText.split(`
`).length&&!u.compareText.endsWith(`
`)&&(c.removed.no_nl_at_eof=!0);return c}},Fr=El.StateField.define({create:t=>{},update:(t,e)=>{let r=t?{...t}:{maxDiffTimeMs:0,hunks:[],stagedHunks:[],chunks:void 0,isDirty:!1},n=!1;for(let i of e.effects)i.is(Al)&&(r.compareText=i.value.compareText,r.compareTextHead=i.value.compareTextHead,n=(t==null?void 0:t.compareText)!==i.value.compareText,n&&(r.chunks=void 0)),i.is(Ou)&&z$(r,i.value,e.state);if(r.compareText!==void 0){if(n||e.docChanged){r.isDirty=!0;let i=m9(e,r.compareText,r.chunks,r.maxDiffTimeMs);i&&z$(r,i,e.state)}}else r.compareText=void 0,r.compareTextHead=void 0,r.chunks=void 0,r.hunks=[],r.stagedHunks=[],r.isDirty=!1;return r}});function z$(t,e,r){var i,a;t.hunks=e.hunks,t.chunks=e.chunks,t.isDirty=!1,t.maxDiffTimeMs=Math.max(.95*t.maxDiffTimeMs,e.diffDuration);let n=r.field(kl.editorInfoField).file;(a=(i=ui.plugin)==null?void 0:i.editorIntegration.signsFeature.changeStatusBar)==null||a.display(t.hunks,n)}var Z0=El.StateField.define({create:()=>({debouncer:(0,kl.debounce)(t=>{let{state:e,compareText:r,previousChunks:n,changeDesc:i}=t,a=V$(e,r,n,i);e.field(kl.editorEditorField).dispatch({effects:Ou.of(a)})},1e3,!0),maxDiffTimeMs:0}),update:(t,e)=>{var r;for(let n of e.effects)if(n.is(Ou))return t.changeDesc=void 0,t;return!t.changeDesc&&e.changes?t.changeDesc=e.changes:t.changeDesc=(r=t.changeDesc)==null?void 0:r.composeDesc(e.changes),t}});function V$(t,e,r,n){let i=t.doc.toString(),a=performance.now(),{hunks:s,chunks:o}=q$(e,i,r,n),l=performance.now()-a;return{hunks:s,chunks:o,diffDuration:l}}function m9(t,e,r,n){let i=t.state,a=Math.abs(t.changes.length-t.changes.newLength),s=i.field(Z0);if(a>1e3||n>16)s.debouncer({state:i,compareText:e,previousChunks:r,changeDesc:s.changeDesc});else return s.changeDesc=void 0,V$(i,e,r,t.changes)}var Al=El.StateEffect.define(),Ou=El.StateEffect.define();function W$(t,e){return e.update({effects:Al.of(t)})}p();p();p();var tt;(function(t){t.INSERT="insert",t.DELETE="delete",t.CONTEXT="context"})(tt||(tt={}));var Y$={LINE_BY_LINE:"line-by-line",SIDE_BY_SIDE:"side-by-side"},X$={LINES:"lines",WORDS:"words",NONE:"none"},Z$={WORD:"word",CHAR:"char"},Ls;(function(t){t.AUTO="auto",t.DARK="dark",t.LIGHT="light"})(Ls||(Ls={}));p();var g9=["-","[","]","/","{","}","(",")","*","+","?",".","\\","^","$","|"],v9=RegExp("["+g9.join("\\")+"]","g");function K$(t){return t.replace(v9,"\\$&")}function K0(t){return t&&t.replace(/\\/g,"/")}function J$(t){let e,r,n,i=0;for(e=0,n=t.length;e<n;e++)r=t.charCodeAt(e),i=(i<<5)-i+r,i|=0;return i}function cp(t){let e=t.length,r=-1/0;for(let n=0;n<e;n++)r=Math.max(r,t[n]);return r}function Q$(t,e){let r=t.split(".");return r.length>1?r[r.length-1]:e}function eO(t,e){return e.reduce((r,n)=>r||t.startsWith(n),!1)}var tO=["a/","b/","i/","w/","c/","o/"];function qa(t,e,r){let n=r!==void 0?[...tO,r]:tO,i=e?new RegExp(`^${K$(e)} "?(.+?)"?$`):new RegExp('^"?(.+?)"?$'),[,a=""]=i.exec(t)||[],s=n.find(l=>a.indexOf(l)===0);return(s?a.slice(s.length):a).replace(/\s+\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}(?:\.\d+)? [+-]\d{4}.*$/,"")}function w9(t,e){return qa(t,"---",e)}function y9(t,e){return qa(t,"+++",e)}function rO(t,e={}){let r=[],n=null,i=null,a=null,s=null,o=null,l=null,c=null,u="--- ",f="+++ ",d="@@",h=/^old mode (\d{6})/,m=/^new mode (\d{6})/,g=/^deleted file mode (\d{6})/,v=/^new file mode (\d{6})/,w=/^copy from "?(.+)"?/,b=/^copy to "?(.+)"?/,k=/^rename from "?(.+)"?/,E=/^rename to "?(.+)"?/,S=/^similarity index (\d+)%/,A=/^dissimilarity index (\d+)%/,y=/^index ([\da-z]+)\.\.([\da-z]+)\s*(\d{6})?/,x=/^Binary files (.*) and (.*) differ/,_=/^GIT binary patch/,T=/^index ([\da-z]+),([\da-z]+)\.\.([\da-z]+)/,P=/^mode (\d{6}),(\d{6})\.\.(\d{6})/,D=/^new file mode (\d{6})/,B=/^deleted file mode (\d{6}),(\d{6})/,N=t.replace(/\\ No newline at end of file/g,"").replace(/\r\n?/g,`
`).split(`
`);function le(){i!==null&&n!==null&&(n.blocks.push(i),i=null)}function Ae(){n!==null&&(!n.oldName&&l!==null&&(n.oldName=l),!n.newName&&c!==null&&(n.newName=c),n.newName&&(r.push(n),n=null)),l=null,c=null}function we(){le(),Ae(),n={blocks:[],deletedLines:0,addedLines:0}}function fe(j){le();let J;n!==null&&((J=/^@@ -(\d+)(?:,\d+)? \+(\d+)(?:,\d+)? @@.*/.exec(j))?(n.isCombined=!1,a=parseInt(J[1],10),o=parseInt(J[2],10)):(J=/^@@@ -(\d+)(?:,\d+)? -(\d+)(?:,\d+)? \+(\d+)(?:,\d+)? @@@.*/.exec(j))?(n.isCombined=!0,a=parseInt(J[1],10),s=parseInt(J[2],10),o=parseInt(J[3],10)):(j.startsWith(d)&&console.error("Failed to parse lines, starting in 0!"),a=0,o=0,n.isCombined=!1)),i={lines:[],oldStartLine:a,oldStartLine2:s,newStartLine:o,header:j}}function Ie(j){if(n===null||i===null||a===null||o===null)return;let J={content:j},H=n.isCombined?["+ "," +","++"]:["+"],Fe=n.isCombined?["- "," -","--"]:["-"];eO(j,H)?(n.addedLines++,J.type=tt.INSERT,J.oldNumber=void 0,J.newNumber=o++):eO(j,Fe)?(n.deletedLines++,J.type=tt.DELETE,J.oldNumber=a++,J.newNumber=void 0):(J.type=tt.CONTEXT,J.oldNumber=a++,J.newNumber=o++),i.lines.push(J)}function ce(j,J){let H=J;for(;H<N.length-3;){if(j.startsWith("diff"))return!1;if(N[H].startsWith(u)&&N[H+1].startsWith(f)&&N[H+2].startsWith(d))return!0;H++}return!1}return N.forEach((j,J)=>{if(!j||j.startsWith("*"))return;let H,Fe=N[J-1],or=N[J+1],Rt=N[J+2];if(j.startsWith("diff --git")||j.startsWith("diff --combined")){if(we(),(H=/^diff --git "?([a-ciow]\/.+)"? "?([a-ciow]\/.+)"?/.exec(j))&&(l=qa(H[1],void 0,e.dstPrefix),c=qa(H[2],void 0,e.srcPrefix)),n===null)throw new Error("Where is my file !!!");n.isGitDiff=!0;return}if(j.startsWith("Binary files")&&!(n!=null&&n.isGitDiff)){if(we(),(H=/^Binary files "?([a-ciow]\/.+)"? and "?([a-ciow]\/.+)"? differ/.exec(j))&&(l=qa(H[1],void 0,e.dstPrefix),c=qa(H[2],void 0,e.srcPrefix)),n===null)throw new Error("Where is my file !!!");n.isBinary=!0;return}if((!n||!n.isGitDiff&&n&&j.startsWith(u)&&or.startsWith(f)&&Rt.startsWith(d))&&we(),n!=null&&n.isTooBig)return;if(n&&(typeof e.diffMaxChanges=="number"&&n.addedLines+n.deletedLines>e.diffMaxChanges||typeof e.diffMaxLineLength=="number"&&j.length>e.diffMaxLineLength)){n.isTooBig=!0,n.addedLines=0,n.deletedLines=0,n.blocks=[],i=null;let kt=typeof e.diffTooBigMessage=="function"?e.diffTooBigMessage(r.length):"Diff too big to be displayed";fe(kt);return}if(j.startsWith(u)&&or.startsWith(f)||j.startsWith(f)&&Fe.startsWith(u)){if(n&&!n.oldName&&j.startsWith("--- ")&&(H=w9(j,e.srcPrefix))){n.oldName=H,n.language=Q$(n.oldName,n.language);return}if(n&&!n.newName&&j.startsWith("+++ ")&&(H=y9(j,e.dstPrefix))){n.newName=H,n.language=Q$(n.newName,n.language);return}}if(n&&(j.startsWith(d)||n.isGitDiff&&n.oldName&&n.newName&&!i)){fe(j);return}if(i&&(j.startsWith("+")||j.startsWith("-")||j.startsWith(" "))){Ie(j);return}let $e=!ce(j,J);if(n===null)throw new Error("Where is my file !!!");(H=h.exec(j))?n.oldMode=H[1]:(H=m.exec(j))?n.newMode=H[1]:(H=g.exec(j))?(n.deletedFileMode=H[1],n.isDeleted=!0):(H=v.exec(j))?(n.newFileMode=H[1],n.isNew=!0):(H=w.exec(j))?($e&&(n.oldName=H[1]),n.isCopy=!0):(H=b.exec(j))?($e&&(n.newName=H[1]),n.isCopy=!0):(H=k.exec(j))?($e&&(n.oldName=H[1]),n.isRename=!0):(H=E.exec(j))?($e&&(n.newName=H[1]),n.isRename=!0):(H=x.exec(j))?(n.isBinary=!0,n.oldName=qa(H[1],void 0,e.srcPrefix),n.newName=qa(H[2],void 0,e.dstPrefix),fe("Binary file")):_.test(j)?(n.isBinary=!0,fe(j)):(H=S.exec(j))?n.unchangedPercentage=parseInt(H[1],10):(H=A.exec(j))?n.changedPercentage=parseInt(H[1],10):(H=y.exec(j))?(n.checksumBefore=H[1],n.checksumAfter=H[2],H[3]&&(n.mode=H[3])):(H=T.exec(j))?(n.checksumBefore=[H[2],H[3]],n.checksumAfter=H[1]):(H=P.exec(j))?(n.oldMode=[H[2],H[3]],n.newMode=H[1]):(H=D.exec(j))?(n.newFileMode=H[1],n.isNew=!0):(H=B.exec(j))&&(n.deletedFileMode=H[1],n.isDeleted=!0)}),le(),Ae(),r}p();p();p();function Hn(){}Hn.prototype={diff:function(e,r){var n,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.callback;typeof i=="function"&&(a=i,i={});var s=this;function o(E){return E=s.postProcess(E,i),a?(setTimeout(function(){a(E)},0),!0):E}e=this.castInput(e,i),r=this.castInput(r,i),e=this.removeEmpty(this.tokenize(e,i)),r=this.removeEmpty(this.tokenize(r,i));var l=r.length,c=e.length,u=1,f=l+c;i.maxEditLength!=null&&(f=Math.min(f,i.maxEditLength));var d=(n=i.timeout)!==null&&n!==void 0?n:1/0,h=Date.now()+d,m=[{oldPos:-1,lastComponent:void 0}],g=this.extractCommon(m[0],r,e,0,i);if(m[0].oldPos+1>=c&&g+1>=l)return o(nO(s,m[0].lastComponent,r,e,s.useLongestToken));var v=-1/0,w=1/0;function b(){for(var E=Math.max(v,-u);E<=Math.min(w,u);E+=2){var S=void 0,A=m[E-1],y=m[E+1];A&&(m[E-1]=void 0);var x=!1;if(y){var _=y.oldPos-E;x=y&&0<=_&&_<l}var T=A&&A.oldPos+1<c;if(!x&&!T){m[E]=void 0;continue}if(!T||x&&A.oldPos<y.oldPos?S=s.addToPath(y,!0,!1,0,i):S=s.addToPath(A,!1,!0,1,i),g=s.extractCommon(S,r,e,E,i),S.oldPos+1>=c&&g+1>=l)return o(nO(s,S.lastComponent,r,e,s.useLongestToken));m[E]=S,S.oldPos+1>=c&&(w=Math.min(w,E-1)),g+1>=l&&(v=Math.max(v,E+1))}u++}if(a)(function E(){setTimeout(function(){if(u>f||Date.now()>h)return a();b()||E()},0)})();else for(;u<=f&&Date.now()<=h;){var k=b();if(k)return k}},addToPath:function(e,r,n,i,a){var s=e.lastComponent;return s&&!a.oneChangePerToken&&s.added===r&&s.removed===n?{oldPos:e.oldPos+i,lastComponent:{count:s.count+1,added:r,removed:n,previousComponent:s.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:r,removed:n,previousComponent:s}}},extractCommon:function(e,r,n,i,a){for(var s=r.length,o=n.length,l=e.oldPos,c=l-i,u=0;c+1<s&&l+1<o&&this.equals(n[l+1],r[c+1],a);)c++,l++,u++,a.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return u&&!a.oneChangePerToken&&(e.lastComponent={count:u,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=l,c},equals:function(e,r,n){return n.comparator?n.comparator(e,r):e===r||n.ignoreCase&&e.toLowerCase()===r.toLowerCase()},removeEmpty:function(e){for(var r=[],n=0;n<e.length;n++)e[n]&&r.push(e[n]);return r},castInput:function(e){return e},tokenize:function(e){return Array.from(e)},join:function(e){return e.join("")},postProcess:function(e){return e}};function nO(t,e,r,n,i){for(var a=[],s;e;)a.push(e),s=e.previousComponent,delete e.previousComponent,e=s;a.reverse();for(var o=0,l=a.length,c=0,u=0;o<l;o++){var f=a[o];if(f.removed)f.value=t.join(n.slice(u,u+f.count)),u+=f.count;else{if(!f.added&&i){var d=r.slice(c,c+f.count);d=d.map(function(h,m){var g=n[u+m];return g.length>h.length?g:h}),f.value=t.join(d)}else f.value=t.join(r.slice(c,c+f.count));c+=f.count,f.added||(u+=f.count)}}return a}var _9=new Hn;function lO(t,e,r){return _9.diff(t,e,r)}function iO(t,e){var r;for(r=0;r<t.length&&r<e.length;r++)if(t[r]!=e[r])return t.slice(0,r);return t.slice(0,r)}function aO(t,e){var r;if(!t||!e||t[t.length-1]!=e[e.length-1])return"";for(r=0;r<t.length&&r<e.length;r++)if(t[t.length-(r+1)]!=e[e.length-(r+1)])return t.slice(-r);return t.slice(-r)}function J0(t,e,r){if(t.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return r+t.slice(e.length)}function Q0(t,e,r){if(!e)return t+r;if(t.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return t.slice(0,-e.length)+r}function Mu(t,e){return J0(t,e,"")}function up(t,e){return Q0(t,e,"")}function sO(t,e){return e.slice(0,x9(t,e))}function x9(t,e){var r=0;t.length>e.length&&(r=t.length-e.length);var n=e.length;t.length<e.length&&(n=t.length);var i=Array(n),a=0;i[0]=0;for(var s=1;s<n;s++){for(e[s]==e[a]?i[s]=i[a]:i[s]=a;a>0&&e[s]!=e[a];)a=i[a];e[s]==e[a]&&a++}a=0;for(var o=r;o<t.length;o++){for(;a>0&&t[o]!=e[a];)a=i[a];t[o]==e[a]&&a++}return a}var fp="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",S9=new RegExp("[".concat(fp,"]+|\\s+|[^").concat(fp,"]"),"ug"),dp=new Hn;dp.equals=function(t,e,r){return r.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t.trim()===e.trim()};dp.tokenize=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');r=Array.from(e.intlSegmenter.segment(t),function(a){return a.segment})}else r=t.match(S9)||[];var n=[],i=null;return r.forEach(function(a){/\s/.test(a)?i==null?n.push(a):n.push(n.pop()+a):/\s/.test(i)?n[n.length-1]==i?n.push(n.pop()+a):n.push(i+a):n.push(a),i=a}),n};dp.join=function(t){return t.map(function(e,r){return r==0?e:e.replace(/^\s+/,"")}).join("")};dp.postProcess=function(t,e){if(!t||e.oneChangePerToken)return t;var r=null,n=null,i=null;return t.forEach(function(a){a.added?n=a:a.removed?i=a:((n||i)&&oO(r,i,n,a),r=a,n=null,i=null)}),(n||i)&&oO(r,i,n,null),t};function oO(t,e,r,n){if(e&&r){var i=e.value.match(/^\s*/)[0],a=e.value.match(/\s*$/)[0],s=r.value.match(/^\s*/)[0],o=r.value.match(/\s*$/)[0];if(t){var l=iO(i,s);t.value=Q0(t.value,s,l),e.value=Mu(e.value,l),r.value=Mu(r.value,l)}if(n){var c=aO(a,o);n.value=J0(n.value,o,c),e.value=up(e.value,c),r.value=up(r.value,c)}}else if(r)t&&(r.value=r.value.replace(/^\s*/,"")),n&&(n.value=n.value.replace(/^\s*/,""));else if(t&&n){var u=n.value.match(/^\s*/)[0],f=e.value.match(/^\s*/)[0],d=e.value.match(/\s*$/)[0],h=iO(u,f);e.value=Mu(e.value,h);var m=aO(Mu(u,h),d);e.value=up(e.value,m),n.value=J0(n.value,u,m),t.value=Q0(t.value,u,u.slice(0,u.length-m.length))}else if(n){var g=n.value.match(/^\s*/)[0],v=e.value.match(/\s*$/)[0],w=sO(v,g);e.value=up(e.value,w)}else if(t){var b=t.value.match(/\s*$/)[0],k=e.value.match(/^\s*/)[0],E=sO(b,k);e.value=Mu(e.value,E)}}var cO=new Hn;cO.tokenize=function(t){var e=new RegExp("(\\r?\\n)|[".concat(fp,"]+|[^\\S\\n\\r]+|[^").concat(fp,"]"),"ug");return t.match(e)||[]};function uO(t,e,r){return cO.diff(t,e,r)}var ny=new Hn;ny.tokenize=function(t,e){e.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var r=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var i=0;i<n.length;i++){var a=n[i];i%2&&!e.newlineIsToken?r[r.length-1]+=a:r.push(a)}return r};ny.equals=function(t,e,r){return r.ignoreWhitespace?((!r.newlineIsToken||!t.includes(`
`))&&(t=t.trim()),(!r.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):r.ignoreNewlineAtEof&&!r.newlineIsToken&&(t.endsWith(`
`)&&(t=t.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),Hn.prototype.equals.call(this,t,e,r)};var E9=new Hn;E9.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var k9=new Hn;k9.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function ey(t){"@babel/helpers - typeof";return ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ey(t)}var Du=new Hn;Du.useLongestToken=!0;Du.tokenize=ny.tokenize;Du.castInput=function(t,e){var r=e.undefinedReplacement,n=e.stringifyReplacer,i=n===void 0?function(a,s){return typeof s=="undefined"?r:s}:n;return typeof t=="string"?t:JSON.stringify(ty(t,null,null,i),i,"  ")};Du.equals=function(t,e,r){return Hn.prototype.equals.call(Du,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),r)};function ty(t,e,r,n,i){e=e||[],r=r||[],n&&(t=n(i,t));var a;for(a=0;a<e.length;a+=1)if(e[a]===t)return r[a];var s;if(Object.prototype.toString.call(t)==="[object Array]"){for(e.push(t),s=new Array(t.length),r.push(s),a=0;a<t.length;a+=1)s[a]=ty(t[a],e,r,n,i);return e.pop(),r.pop(),s}if(t&&t.toJSON&&(t=t.toJSON()),ey(t)==="object"&&t!==null){e.push(t),s={},r.push(s);var o=[],l;for(l in t)Object.prototype.hasOwnProperty.call(t,l)&&o.push(l);for(o.sort(),a=0;a<o.length;a+=1)l=o[a],s[l]=ty(t[l],e,r,n,l);e.pop(),r.pop()}else s=t;return s}var ry=new Hn;ry.tokenize=function(t){return t.slice()};ry.join=ry.removeEmpty=function(t){return t};p();function T9(t,e){if(t.length===0)return e.length;if(e.length===0)return t.length;let r=[],n;for(n=0;n<=e.length;n++)r[n]=[n];let i;for(i=0;i<=t.length;i++)r[0][i]=i;for(n=1;n<=e.length;n++)for(i=1;i<=t.length;i++)e.charAt(n-1)===t.charAt(i-1)?r[n][i]=r[n-1][i-1]:r[n][i]=Math.min(r[n-1][i-1]+1,Math.min(r[n][i-1]+1,r[n-1][i]+1));return r[e.length][t.length]}function Tl(t){return(e,r)=>{let n=t(e).trim(),i=t(r).trim();return T9(n,i)/(n.length+i.length)}}function Cl(t){function e(n,i,a=new Map){let s=1/0,o;for(let l=0;l<n.length;++l)for(let c=0;c<i.length;++c){let u=JSON.stringify([n[l],i[c]]),f;a.has(u)&&(f=a.get(u))||(f=t(n[l],i[c]),a.set(u,f)),f<s&&(s=f,o={indexA:l,indexB:c,score:s})}return o}function r(n,i,a=0,s=new Map){let o=e(n,i,s);if(!o||n.length+i.length<3)return[[n,i]];let l=n.slice(0,o.indexA),c=i.slice(0,o.indexB),u=[n[o.indexA]],f=[i[o.indexB]],d=o.indexA+1,h=o.indexB+1,m=n.slice(d),g=i.slice(h),v=r(l,c,a+1,s),w=r(u,f,a+1,s),b=r(m,g,a+1,s),k=w;return(o.indexA>0||o.indexB>0)&&(k=v.concat(k)),(n.length>d||i.length>h)&&(k=k.concat(b)),k}return r}var qt={INSERTS:"d2h-ins",DELETES:"d2h-del",CONTEXT:"d2h-cntx",INFO:"d2h-info",INSERT_CHANGES:"d2h-ins d2h-change",DELETE_CHANGES:"d2h-del d2h-change"},Ns={matching:X$.NONE,matchWordsThreshold:.25,maxLineLengthHighlight:1e4,diffStyle:Z$.WORD,colorScheme:Ls.LIGHT},vi="/",fO=Tl(t=>t.value),C9=Cl(fO);function ay(t){return t.indexOf("dev/null")!==-1}function P9(t){return t.replace(/(<ins[^>]*>((.|\n)*?)<\/ins>)/g,"")}function R9(t){return t.replace(/(<del[^>]*>((.|\n)*?)<\/del>)/g,"")}function Pl(t){switch(t){case tt.CONTEXT:return qt.CONTEXT;case tt.INSERT:return qt.INSERTS;case tt.DELETE:return qt.DELETES}}function Rl(t){switch(t){case Ls.DARK:return"d2h-dark-color-scheme";case Ls.AUTO:return"d2h-auto-color-scheme";case Ls.LIGHT:default:return"d2h-light-color-scheme"}}function I9(t){return t?2:1}function za(t){return t.slice(0).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}function yn(t,e,r=!0){let n=I9(e);return{prefix:t.substring(0,n),content:r?za(t.substring(n)):t.substring(n)}}function Bs(t){let e=K0(t.oldName),r=K0(t.newName);if(e!==r&&!ay(e)&&!ay(r)){let n=[],i=[],a=e.split(vi),s=r.split(vi),o=a.length,l=s.length,c=0,u=o-1,f=l-1;for(;c<u&&c<f&&a[c]===s[c];)n.push(s[c]),c+=1;for(;u>c&&f>c&&a[u]===s[f];)i.unshift(s[f]),u-=1,f-=1;let d=n.join(vi),h=i.join(vi),m=a.slice(c,u+1).join(vi),g=s.slice(c,f+1).join(vi);return d.length&&h.length?d+vi+"{"+m+" \u2192 "+g+"}"+vi+h:d.length?d+vi+"{"+m+" \u2192 "+g+"}":h.length?"{"+m+" \u2192 "+g+"}"+vi+h:e+" \u2192 "+r}else return ay(r)?e:r}function Il(t){return`d2h-${J$(Bs(t)).toString().slice(-6)}`}function Fl(t){let e="file-changed";return t.isRename||t.isCopy?e="file-renamed":t.isNew?e="file-added":t.isDeleted?e="file-deleted":t.newName!==t.oldName&&(e="file-renamed"),e}function hp(t,e,r,n={}){let{matching:i,maxLineLengthHighlight:a,matchWordsThreshold:s,diffStyle:o}=Object.assign(Object.assign({},Ns),n),l=yn(t,r,!1),c=yn(e,r,!1);if(l.content.length>a||c.content.length>a)return{oldLine:{prefix:l.prefix,content:za(l.content)},newLine:{prefix:c.prefix,content:za(c.content)}};let u=o==="char"?lO(l.content,c.content):uO(l.content,c.content),f=[];if(o==="word"&&i==="words"){let h=u.filter(v=>v.removed),m=u.filter(v=>v.added);C9(m,h).forEach(v=>{v[0].length===1&&v[1].length===1&&fO(v[0][0],v[1][0])<s&&(f.push(v[0][0]),f.push(v[1][0]))})}let d=u.reduce((h,m)=>{let g=m.added?"ins":m.removed?"del":null,v=f.indexOf(m)>-1?' class="d2h-change"':"",w=za(m.value);return g!==null?`${h}<${g}${v}>${w}</${g}>`:`${h}${w}`},"");return{oldLine:{prefix:l.prefix,content:P9(d)},newLine:{prefix:c.prefix,content:R9(d)}}}var dO="file-summary",F9="icon",$9={colorScheme:Ns.colorScheme},pp=class{constructor(e,r={}){this.hoganUtils=e,this.config=Object.assign(Object.assign({},$9),r)}render(e){let r=e.map(n=>this.hoganUtils.render(dO,"line",{fileHtmlId:Il(n),oldName:n.oldName,newName:n.newName,fileName:Bs(n),deletedLines:"-"+n.deletedLines,addedLines:"+"+n.addedLines},{fileIcon:this.hoganUtils.template(F9,Fl(n))})).join(`
`);return this.hoganUtils.render(dO,"wrapper",{colorScheme:Rl(this.config.colorScheme),filesNumber:e.length,files:r})}};p();var oy=Object.assign(Object.assign({},Ns),{renderNothingWhenEmpty:!1,matchingMaxComparisons:2500,maxLineSizeInBlockForComparison:200}),Lu="generic",hO="line-by-line",O9="icon",M9="tag",Nu=class{constructor(e,r={}){this.hoganUtils=e,this.config=Object.assign(Object.assign({},oy),r)}render(e){let r=e.map(n=>{let i;return n.blocks.length?i=this.generateFileHtml(n):i=this.generateEmptyDiff(),this.makeFileDiffHtml(n,i)}).join(`
`);return this.hoganUtils.render(Lu,"wrapper",{colorScheme:Rl(this.config.colorScheme),content:r})}makeFileDiffHtml(e,r){if(this.config.renderNothingWhenEmpty&&Array.isArray(e.blocks)&&e.blocks.length===0)return"";let n=this.hoganUtils.template(hO,"file-diff"),i=this.hoganUtils.template(Lu,"file-path"),a=this.hoganUtils.template(O9,"file"),s=this.hoganUtils.template(M9,Fl(e));return n.render({file:e,fileHtmlId:Il(e),diffs:r,filePath:i.render({fileDiffName:Bs(e)},{fileIcon:a,fileTag:s})})}generateEmptyDiff(){return this.hoganUtils.render(Lu,"empty-diff",{contentClass:"d2h-code-line",CSSLineClass:qt})}generateFileHtml(e){let r=Cl(Tl(n=>yn(n.content,e.isCombined).content));return e.blocks.map(n=>{let i=this.hoganUtils.render(Lu,"block-header",{CSSLineClass:qt,blockHeader:e.isTooBig?n.header:za(n.header),lineClass:"d2h-code-linenumber",contentClass:"d2h-code-line"});return this.applyLineGroupping(n).forEach(([a,s,o])=>{if(s.length&&o.length&&!a.length)this.applyRematchMatching(s,o,r).map(([l,c])=>{let{left:u,right:f}=this.processChangedLines(e,e.isCombined,l,c);i+=u,i+=f});else if(a.length)a.forEach(l=>{let{prefix:c,content:u}=yn(l.content,e.isCombined);i+=this.generateSingleLineHtml(e,{type:qt.CONTEXT,prefix:c,content:u,oldNumber:l.oldNumber,newNumber:l.newNumber})});else if(s.length||o.length){let{left:l,right:c}=this.processChangedLines(e,e.isCombined,s,o);i+=l,i+=c}else console.error("Unknown state reached while processing groups of lines",a,s,o)}),i}).join(`
`)}applyLineGroupping(e){let r=[],n=[],i=[];for(let a=0;a<e.lines.length;a++){let s=e.lines[a];(s.type!==tt.INSERT&&i.length||s.type===tt.CONTEXT&&n.length>0)&&(r.push([[],n,i]),n=[],i=[]),s.type===tt.CONTEXT?r.push([[s],[],[]]):s.type===tt.INSERT&&n.length===0?r.push([[],[],[s]]):s.type===tt.INSERT&&n.length>0?i.push(s):s.type===tt.DELETE&&n.push(s)}return(n.length||i.length)&&(r.push([[],n,i]),n=[],i=[]),r}applyRematchMatching(e,r,n){let i=e.length*r.length,a=cp(e.concat(r).map(o=>o.content.length));return i<this.config.matchingMaxComparisons&&a<this.config.maxLineSizeInBlockForComparison&&(this.config.matching==="lines"||this.config.matching==="words")?n(e,r):[[e,r]]}processChangedLines(e,r,n,i){let a={right:"",left:""},s=Math.max(n.length,i.length);for(let o=0;o<s;o++){let l=n[o],c=i[o],u=l!==void 0&&c!==void 0?hp(l.content,c.content,r,this.config):void 0,f=l!==void 0&&l.oldNumber!==void 0?Object.assign(Object.assign({},u!==void 0?{prefix:u.oldLine.prefix,content:u.oldLine.content,type:qt.DELETE_CHANGES}:Object.assign(Object.assign({},yn(l.content,r)),{type:Pl(l.type)})),{oldNumber:l.oldNumber,newNumber:l.newNumber}):void 0,d=c!==void 0&&c.newNumber!==void 0?Object.assign(Object.assign({},u!==void 0?{prefix:u.newLine.prefix,content:u.newLine.content,type:qt.INSERT_CHANGES}:Object.assign(Object.assign({},yn(c.content,r)),{type:Pl(c.type)})),{oldNumber:c.oldNumber,newNumber:c.newNumber}):void 0,{left:h,right:m}=this.generateLineHtml(e,f,d);a.left+=h,a.right+=m}return a}generateLineHtml(e,r,n){return{left:this.generateSingleLineHtml(e,r),right:this.generateSingleLineHtml(e,n)}}generateSingleLineHtml(e,r){if(r===void 0)return"";let n=this.hoganUtils.render(hO,"numbers",{oldNumber:r.oldNumber||"",newNumber:r.newNumber||""});return this.hoganUtils.render(Lu,"line",{type:r.type,lineClass:"d2h-code-linenumber",contentClass:"d2h-code-line",prefix:r.prefix===" "?"&nbsp;":r.prefix,content:r.content,lineNumber:n,line:r,file:e})}};p();var ly=Object.assign(Object.assign({},Ns),{renderNothingWhenEmpty:!1,matchingMaxComparisons:2500,maxLineSizeInBlockForComparison:200}),Bu="generic",D9="side-by-side",L9="icon",N9="tag",Hu=class{constructor(e,r={}){this.hoganUtils=e,this.config=Object.assign(Object.assign({},ly),r)}render(e){let r=e.map(n=>{let i;return n.blocks.length?i=this.generateFileHtml(n):i=this.generateEmptyDiff(),this.makeFileDiffHtml(n,i)}).join(`
`);return this.hoganUtils.render(Bu,"wrapper",{colorScheme:Rl(this.config.colorScheme),content:r})}makeFileDiffHtml(e,r){if(this.config.renderNothingWhenEmpty&&Array.isArray(e.blocks)&&e.blocks.length===0)return"";let n=this.hoganUtils.template(D9,"file-diff"),i=this.hoganUtils.template(Bu,"file-path"),a=this.hoganUtils.template(L9,"file"),s=this.hoganUtils.template(N9,Fl(e));return n.render({file:e,fileHtmlId:Il(e),diffs:r,filePath:i.render({fileDiffName:Bs(e)},{fileIcon:a,fileTag:s})})}generateEmptyDiff(){return{right:"",left:this.hoganUtils.render(Bu,"empty-diff",{contentClass:"d2h-code-side-line",CSSLineClass:qt})}}generateFileHtml(e){let r=Cl(Tl(n=>yn(n.content,e.isCombined).content));return e.blocks.map(n=>{let i={left:this.makeHeaderHtml(n.header,e),right:this.makeHeaderHtml("")};return this.applyLineGroupping(n).forEach(([a,s,o])=>{if(s.length&&o.length&&!a.length)this.applyRematchMatching(s,o,r).map(([l,c])=>{let{left:u,right:f}=this.processChangedLines(e.isCombined,l,c);i.left+=u,i.right+=f});else if(a.length)a.forEach(l=>{let{prefix:c,content:u}=yn(l.content,e.isCombined),{left:f,right:d}=this.generateLineHtml({type:qt.CONTEXT,prefix:c,content:u,number:l.oldNumber},{type:qt.CONTEXT,prefix:c,content:u,number:l.newNumber});i.left+=f,i.right+=d});else if(s.length||o.length){let{left:l,right:c}=this.processChangedLines(e.isCombined,s,o);i.left+=l,i.right+=c}else console.error("Unknown state reached while processing groups of lines",a,s,o)}),i}).reduce((n,i)=>({left:n.left+i.left,right:n.right+i.right}),{left:"",right:""})}applyLineGroupping(e){let r=[],n=[],i=[];for(let a=0;a<e.lines.length;a++){let s=e.lines[a];(s.type!==tt.INSERT&&i.length||s.type===tt.CONTEXT&&n.length>0)&&(r.push([[],n,i]),n=[],i=[]),s.type===tt.CONTEXT?r.push([[s],[],[]]):s.type===tt.INSERT&&n.length===0?r.push([[],[],[s]]):s.type===tt.INSERT&&n.length>0?i.push(s):s.type===tt.DELETE&&n.push(s)}return(n.length||i.length)&&(r.push([[],n,i]),n=[],i=[]),r}applyRematchMatching(e,r,n){let i=e.length*r.length,a=cp(e.concat(r).map(o=>o.content.length));return i<this.config.matchingMaxComparisons&&a<this.config.maxLineSizeInBlockForComparison&&(this.config.matching==="lines"||this.config.matching==="words")?n(e,r):[[e,r]]}makeHeaderHtml(e,r){return this.hoganUtils.render(Bu,"block-header",{CSSLineClass:qt,blockHeader:r!=null&&r.isTooBig?e:za(e),lineClass:"d2h-code-side-linenumber",contentClass:"d2h-code-side-line"})}processChangedLines(e,r,n){let i={right:"",left:""},a=Math.max(r.length,n.length);for(let s=0;s<a;s++){let o=r[s],l=n[s],c=o!==void 0&&l!==void 0?hp(o.content,l.content,e,this.config):void 0,u=o!==void 0&&o.oldNumber!==void 0?Object.assign(Object.assign({},c!==void 0?{prefix:c.oldLine.prefix,content:c.oldLine.content,type:qt.DELETE_CHANGES}:Object.assign(Object.assign({},yn(o.content,e)),{type:Pl(o.type)})),{number:o.oldNumber}):void 0,f=l!==void 0&&l.newNumber!==void 0?Object.assign(Object.assign({},c!==void 0?{prefix:c.newLine.prefix,content:c.newLine.content,type:qt.INSERT_CHANGES}:Object.assign(Object.assign({},yn(l.content,e)),{type:Pl(l.type)})),{number:l.newNumber}):void 0,{left:d,right:h}=this.generateLineHtml(u,f);i.left+=d,i.right+=h}return i}generateLineHtml(e,r){return{left:this.generateSingleHtml(e),right:this.generateSingleHtml(r)}}generateSingleHtml(e){let r="d2h-code-side-linenumber",n="d2h-code-side-line";return this.hoganUtils.render(Bu,"line",{type:(e==null?void 0:e.type)||`${qt.CONTEXT} d2h-emptyplaceholder`,lineClass:e!==void 0?r:`${r} d2h-code-side-emptyplaceholder`,contentClass:e!==void 0?n:`${n} d2h-code-side-emptyplaceholder`,prefix:(e==null?void 0:e.prefix)===" "?"&nbsp;":e==null?void 0:e.prefix,content:e==null?void 0:e.content,lineNumber:e==null?void 0:e.number})}};p();var dy=Ft(fy());p();var xt=Ft(fy()),yt={};yt["file-summary-line"]=new xt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<li class="d2h-file-list-line">'),n.b(`
`+r),n.b('    <span class="d2h-file-name-wrapper">'),n.b(`
`+r),n.b(n.rp("<fileIcon0",t,e,"      ")),n.b('      <a href="#'),n.b(n.v(n.f("fileHtmlId",t,e,0))),n.b('" class="d2h-file-name">'),n.b(n.v(n.f("fileName",t,e,0))),n.b("</a>"),n.b(`
`+r),n.b('      <span class="d2h-file-stats">'),n.b(`
`+r),n.b('          <span class="d2h-lines-added">'),n.b(n.v(n.f("addedLines",t,e,0))),n.b("</span>"),n.b(`
`+r),n.b('          <span class="d2h-lines-deleted">'),n.b(n.v(n.f("deletedLines",t,e,0))),n.b("</span>"),n.b(`
`+r),n.b("      </span>"),n.b(`
`+r),n.b("    </span>"),n.b(`
`+r),n.b("</li>"),n.fl()},partials:{"<fileIcon0":{name:"fileIcon",partials:{},subs:{}}},subs:{}});yt["file-summary-wrapper"]=new xt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<div class="d2h-file-list-wrapper '),n.b(n.v(n.f("colorScheme",t,e,0))),n.b('">'),n.b(`
`+r),n.b('    <div class="d2h-file-list-header">'),n.b(`
`+r),n.b('        <span class="d2h-file-list-title">Files changed ('),n.b(n.v(n.f("filesNumber",t,e,0))),n.b(")</span>"),n.b(`
`+r),n.b('        <a class="d2h-file-switch d2h-hide">hide</a>'),n.b(`
`+r),n.b('        <a class="d2h-file-switch d2h-show">show</a>'),n.b(`
`+r),n.b("    </div>"),n.b(`
`+r),n.b('    <ol class="d2h-file-list">'),n.b(`
`+r),n.b("    "),n.b(n.t(n.f("files",t,e,0))),n.b(`
`+r),n.b("    </ol>"),n.b(`
`+r),n.b("</div>"),n.fl()},partials:{},subs:{}});yt["generic-block-header"]=new xt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b("<tr>"),n.b(`
`+r),n.b('    <td class="'),n.b(n.v(n.f("lineClass",t,e,0))),n.b(" "),n.b(n.v(n.d("CSSLineClass.INFO",t,e,0))),n.b('"></td>'),n.b(`
`+r),n.b('    <td class="'),n.b(n.v(n.d("CSSLineClass.INFO",t,e,0))),n.b('">'),n.b(`
`+r),n.b('        <div class="'),n.b(n.v(n.f("contentClass",t,e,0))),n.b('">'),n.s(n.f("blockHeader",t,e,1),t,e,0,156,173,"{{ }}")&&(n.rs(t,e,function(i,a,s){s.b(s.t(s.f("blockHeader",i,a,0)))}),t.pop()),n.s(n.f("blockHeader",t,e,1),t,e,1,0,0,"")||n.b("&nbsp;"),n.b("</div>"),n.b(`
`+r),n.b("    </td>"),n.b(`
`+r),n.b("</tr>"),n.fl()},partials:{},subs:{}});yt["generic-empty-diff"]=new xt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b("<tr>"),n.b(`
`+r),n.b('    <td class="'),n.b(n.v(n.d("CSSLineClass.INFO",t,e,0))),n.b('">'),n.b(`
`+r),n.b('        <div class="'),n.b(n.v(n.f("contentClass",t,e,0))),n.b('">'),n.b(`
`+r),n.b("            File without changes"),n.b(`
`+r),n.b("        </div>"),n.b(`
`+r),n.b("    </td>"),n.b(`
`+r),n.b("</tr>"),n.fl()},partials:{},subs:{}});yt["generic-file-path"]=new xt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<span class="d2h-file-name-wrapper">'),n.b(`
`+r),n.b(n.rp("<fileIcon0",t,e,"    ")),n.b('    <span class="d2h-file-name">'),n.b(n.v(n.f("fileDiffName",t,e,0))),n.b("</span>"),n.b(`
`+r),n.b(n.rp("<fileTag1",t,e,"    ")),n.b("</span>"),n.b(`
`+r),n.b('<label class="d2h-file-collapse">'),n.b(`
`+r),n.b('    <input class="d2h-file-collapse-input" type="checkbox" name="viewed" value="viewed">'),n.b(`
`+r),n.b("    Viewed"),n.b(`
`+r),n.b("</label>"),n.fl()},partials:{"<fileIcon0":{name:"fileIcon",partials:{},subs:{}},"<fileTag1":{name:"fileTag",partials:{},subs:{}}},subs:{}});yt["generic-line"]=new xt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b("<tr>"),n.b(`
`+r),n.b('    <td class="'),n.b(n.v(n.f("lineClass",t,e,0))),n.b(" "),n.b(n.v(n.f("type",t,e,0))),n.b('">'),n.b(`
`+r),n.b("      "),n.b(n.t(n.f("lineNumber",t,e,0))),n.b(`
`+r),n.b("    </td>"),n.b(`
`+r),n.b('    <td class="'),n.b(n.v(n.f("type",t,e,0))),n.b('">'),n.b(`
`+r),n.b('        <div class="'),n.b(n.v(n.f("contentClass",t,e,0))),n.b('">'),n.b(`
`+r),n.s(n.f("prefix",t,e,1),t,e,0,162,238,"{{ }}")&&(n.rs(t,e,function(i,a,s){s.b('            <span class="d2h-code-line-prefix">'),s.b(s.t(s.f("prefix",i,a,0))),s.b("</span>"),s.b(`
`+r)}),t.pop()),n.s(n.f("prefix",t,e,1),t,e,1,0,0,"")||(n.b('            <span class="d2h-code-line-prefix">&nbsp;</span>'),n.b(`
`+r)),n.s(n.f("content",t,e,1),t,e,0,371,445,"{{ }}")&&(n.rs(t,e,function(i,a,s){s.b('            <span class="d2h-code-line-ctn">'),s.b(s.t(s.f("content",i,a,0))),s.b("</span>"),s.b(`
`+r)}),t.pop()),n.s(n.f("content",t,e,1),t,e,1,0,0,"")||(n.b('            <span class="d2h-code-line-ctn"><br></span>'),n.b(`
`+r)),n.b("        </div>"),n.b(`
`+r),n.b("    </td>"),n.b(`
`+r),n.b("</tr>"),n.fl()},partials:{},subs:{}});yt["generic-wrapper"]=new xt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<div class="d2h-wrapper '),n.b(n.v(n.f("colorScheme",t,e,0))),n.b('">'),n.b(`
`+r),n.b("    "),n.b(n.t(n.f("content",t,e,0))),n.b(`
`+r),n.b("</div>"),n.fl()},partials:{},subs:{}});yt["icon-file-added"]=new xt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<svg aria-hidden="true" class="d2h-icon d2h-added" height="16" title="added" version="1.1" viewBox="0 0 14 16"'),n.b(`
`+r),n.b('     width="14">'),n.b(`
`+r),n.b('    <path d="M13 1H1C0.45 1 0 1.45 0 2v12c0 0.55 0.45 1 1 1h12c0.55 0 1-0.45 1-1V2c0-0.55-0.45-1-1-1z m0 13H1V2h12v12zM6 9H3V7h3V4h2v3h3v2H8v3H6V9z"></path>'),n.b(`
`+r),n.b("</svg>"),n.fl()},partials:{},subs:{}});yt["icon-file-changed"]=new xt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<svg aria-hidden="true" class="d2h-icon d2h-changed" height="16" title="modified" version="1.1"'),n.b(`
`+r),n.b('     viewBox="0 0 14 16" width="14">'),n.b(`
`+r),n.b('    <path d="M13 1H1C0.45 1 0 1.45 0 2v12c0 0.55 0.45 1 1 1h12c0.55 0 1-0.45 1-1V2c0-0.55-0.45-1-1-1z m0 13H1V2h12v12zM4 8c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z"></path>'),n.b(`
`+r),n.b("</svg>"),n.fl()},partials:{},subs:{}});yt["icon-file-deleted"]=new xt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<svg aria-hidden="true" class="d2h-icon d2h-deleted" height="16" title="removed" version="1.1"'),n.b(`
`+r),n.b('     viewBox="0 0 14 16" width="14">'),n.b(`
`+r),n.b('    <path d="M13 1H1C0.45 1 0 1.45 0 2v12c0 0.55 0.45 1 1 1h12c0.55 0 1-0.45 1-1V2c0-0.55-0.45-1-1-1z m0 13H1V2h12v12zM11 9H3V7h8v2z"></path>'),n.b(`
`+r),n.b("</svg>"),n.fl()},partials:{},subs:{}});yt["icon-file-renamed"]=new xt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<svg aria-hidden="true" class="d2h-icon d2h-moved" height="16" title="renamed" version="1.1"'),n.b(`
`+r),n.b('     viewBox="0 0 14 16" width="14">'),n.b(`
`+r),n.b('    <path d="M6 9H3V7h3V4l5 4-5 4V9z m8-7v12c0 0.55-0.45 1-1 1H1c-0.55 0-1-0.45-1-1V2c0-0.55 0.45-1 1-1h12c0.55 0 1 0.45 1 1z m-1 0H1v12h12V2z"></path>'),n.b(`
`+r),n.b("</svg>"),n.fl()},partials:{},subs:{}});yt["icon-file"]=new xt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<svg aria-hidden="true" class="d2h-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12">'),n.b(`
`+r),n.b('    <path d="M6 5H2v-1h4v1zM2 8h7v-1H2v1z m0 2h7v-1H2v1z m0 2h7v-1H2v1z m10-7.5v9.5c0 0.55-0.45 1-1 1H1c-0.55 0-1-0.45-1-1V2c0-0.55 0.45-1 1-1h7.5l3.5 3.5z m-1 0.5L8 2H1v12h10V5z"></path>'),n.b(`
`+r),n.b("</svg>"),n.fl()},partials:{},subs:{}});yt["line-by-line-file-diff"]=new xt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<div id="'),n.b(n.v(n.f("fileHtmlId",t,e,0))),n.b('" class="d2h-file-wrapper" data-lang="'),n.b(n.v(n.d("file.language",t,e,0))),n.b('">'),n.b(`
`+r),n.b('    <div class="d2h-file-header">'),n.b(`
`+r),n.b("    "),n.b(n.t(n.f("filePath",t,e,0))),n.b(`
`+r),n.b("    </div>"),n.b(`
`+r),n.b('    <div class="d2h-file-diff">'),n.b(`
`+r),n.b('        <div class="d2h-code-wrapper">'),n.b(`
`+r),n.b('            <table class="d2h-diff-table">'),n.b(`
`+r),n.b('                <tbody class="d2h-diff-tbody">'),n.b(`
`+r),n.b("                "),n.b(n.t(n.f("diffs",t,e,0))),n.b(`
`+r),n.b("                </tbody>"),n.b(`
`+r),n.b("            </table>"),n.b(`
`+r),n.b("        </div>"),n.b(`
`+r),n.b("    </div>"),n.b(`
`+r),n.b("</div>"),n.fl()},partials:{},subs:{}});yt["line-by-line-numbers"]=new xt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<div class="line-num1">'),n.b(n.v(n.f("oldNumber",t,e,0))),n.b("</div>"),n.b(`
`+r),n.b('<div class="line-num2">'),n.b(n.v(n.f("newNumber",t,e,0))),n.b("</div>"),n.fl()},partials:{},subs:{}});yt["side-by-side-file-diff"]=new xt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<div id="'),n.b(n.v(n.f("fileHtmlId",t,e,0))),n.b('" class="d2h-file-wrapper" data-lang="'),n.b(n.v(n.d("file.language",t,e,0))),n.b('">'),n.b(`
`+r),n.b('    <div class="d2h-file-header">'),n.b(`
`+r),n.b("      "),n.b(n.t(n.f("filePath",t,e,0))),n.b(`
`+r),n.b("    </div>"),n.b(`
`+r),n.b('    <div class="d2h-files-diff">'),n.b(`
`+r),n.b('        <div class="d2h-file-side-diff">'),n.b(`
`+r),n.b('            <div class="d2h-code-wrapper">'),n.b(`
`+r),n.b('                <table class="d2h-diff-table">'),n.b(`
`+r),n.b('                    <tbody class="d2h-diff-tbody">'),n.b(`
`+r),n.b("                    "),n.b(n.t(n.d("diffs.left",t,e,0))),n.b(`
`+r),n.b("                    </tbody>"),n.b(`
`+r),n.b("                </table>"),n.b(`
`+r),n.b("            </div>"),n.b(`
`+r),n.b("        </div>"),n.b(`
`+r),n.b('        <div class="d2h-file-side-diff">'),n.b(`
`+r),n.b('            <div class="d2h-code-wrapper">'),n.b(`
`+r),n.b('                <table class="d2h-diff-table">'),n.b(`
`+r),n.b('                    <tbody class="d2h-diff-tbody">'),n.b(`
`+r),n.b("                    "),n.b(n.t(n.d("diffs.right",t,e,0))),n.b(`
`+r),n.b("                    </tbody>"),n.b(`
`+r),n.b("                </table>"),n.b(`
`+r),n.b("            </div>"),n.b(`
`+r),n.b("        </div>"),n.b(`
`+r),n.b("    </div>"),n.b(`
`+r),n.b("</div>"),n.fl()},partials:{},subs:{}});yt["tag-file-added"]=new xt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<span class="d2h-tag d2h-added d2h-added-tag">ADDED</span>'),n.fl()},partials:{},subs:{}});yt["tag-file-changed"]=new xt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<span class="d2h-tag d2h-changed d2h-changed-tag">CHANGED</span>'),n.fl()},partials:{},subs:{}});yt["tag-file-deleted"]=new xt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<span class="d2h-tag d2h-deleted d2h-deleted-tag">DELETED</span>'),n.fl()},partials:{},subs:{}});yt["tag-file-renamed"]=new xt.Template({code:function(t,e,r){var n=this;return n.b(r=r||""),n.b('<span class="d2h-tag d2h-moved d2h-moved-tag">RENAMED</span>'),n.fl()},partials:{},subs:{}});var Uu=class{constructor({compiledTemplates:e={},rawTemplates:r={}}){let n=Object.entries(r).reduce((i,[a,s])=>{let o=dy.compile(s,{asString:!1});return Object.assign(Object.assign({},i),{[a]:o})},{});this.preCompiledTemplates=Object.assign(Object.assign(Object.assign({},yt),e),n)}static compile(e){return dy.compile(e,{asString:!1})}render(e,r,n,i,a){let s=this.templateKey(e,r);try{return this.preCompiledTemplates[s].render(n,i,a)}catch(o){throw new Error(`Could not find template to render '${s}'`)}}template(e,r){return this.preCompiledTemplates[this.templateKey(e,r)]}templateKey(e,r){return`${e}-${r}`}};var H9=Object.assign(Object.assign(Object.assign({},oy),ly),{outputFormat:Y$.LINE_BY_LINE,drawFileList:!0});function gp(t,e={}){let r=Object.assign(Object.assign({},H9),e),n=typeof t=="string"?rO(t,r):t,i=new Uu(r),{colorScheme:a}=r,s={colorScheme:a},o=r.drawFileList?new pp(i,s).render(n):"",l=r.outputFormat==="side-by-side"?new Hu(i,r).render(n):new Nu(i,r).render(n);return o+l}var _O=Ft(yO());var ju=require("obsidian"),hy=Gu.StateEffect.define();function Hs(t,e){let r=t.state,n=r.field(wp),i=r.field(Fr),a=r.doc.lineAt(e!=null?e:r.selection.main.head).number,s=Dt.findHunk(a,i==null?void 0:i.hunks)[0];if(!s)return;let o=r.doc.line(Math.max(1,s.added.start)).from,l=n.has(o);return r.field(ju.editorEditorField).dispatch({effects:hy.of({pos:o,add:!l})})}var wp=Gu.StateField.define({create:()=>new Set,update(t,e){let r=new Set;for(let n of e.effects)n.is(hy)&&(n.value.add?t.add(n.value.pos):t.delete(n.value.pos));for(let n of t)r.add(e.changes.mapPos(n));return r}}),xO=Gu.StateField.define({create:t=>bO(t),update(t,e){return e.docChanged||e.effects.some(r=>r.is(Al)||r.is(hy))?bO(e.state):t},provide:t=>vp.showTooltip.computeN([t],e=>e.field(t))}),SO=vp.EditorView.baseTheme({".cm-tooltip.git-diff-tooltip":{"z-index":"var(--layer-popover)",backgroundColor:"var(--background-primary-alt)",border:"var(--border-width) solid var(--background-primary-alt)",borderRadius:"var(--radius-s)"},".cm-tooltip.git-diff-tooltip .tooltip-toolbar":{display:"flex",padding:"var(--size-2-1)"}});function bO(t){let e=t.field(Fr);return e?[...t.field(wp)].map(n=>{let i=t.doc.lineAt(n),a=Dt.findHunk(i.number,e.hunks)[0];if(a)return{pos:n,above:!1,arrow:!1,strictSide:!0,clip:!1,create:()=>U9(a,t,n)}}).filter(n=>n!==void 0):[]}function U9(t,e,r){let n=Dt.createPatch("file",[t],"10064",!1).join(`
`)+`
`,i=gp(n,{colorScheme:_O.ColorSchemeType.AUTO,diffStyle:"word",drawFileList:!1}),a=new DOMParser().parseFromString(i,"text/html").querySelector(".d2h-file-diff"),s=document.createElement("div"),o=document.createElement("div");o.addClass("tooltip-toolbar");let l=(h,m)=>{let g=document.createElement("div");return(0,ju.setIcon)(g,h),g.setAttr("aria-label",m),g.addClass("clickable-icon"),g},c=l("x","Close hunk"),u=l("plus","Stage hunk"),f=l("undo","Reset hunk");o.appendChild(c),o.appendChild(u),o.appendChild(f),s.appendChild(o),s.appendChild(a),s.addClass("git-diff-tooltip","git-diff");let d=e.field(ju.editorEditorField);return c.onclick=()=>{Hs(d,r)},u.onclick=()=>{let h=ui.plugin;h&&(h.promiseQueue.addTask(()=>h.hunkActions.stageHunk(r)),Hs(d,r))},f.onclick=()=>{let h=ui.plugin;h&&(h.hunkActions.resetHunk(r),Hs(d,r))},{dom:s,update:h=>{r=h.changes.mapPos(r)}}}function EO(t){let e=t.app;t.addCommand({id:"edit-gitignore",name:"Edit .gitignore",callback:async()=>{let r=t.gitManager.getRelativeVaultPath(".gitignore");await e.vault.adapter.exists(r)||await e.vault.adapter.write(r,"");let n=await e.vault.adapter.read(r),a=await new Qh(e,n).openAndGetReslt();a!==void 0&&(await e.vault.adapter.write(r,a),await t.refresh())}}),t.addCommand({id:"open-git-view",name:"Open source control view",callback:async()=>{var i;let r=e.workspace.getLeavesOfType(jt.type),n;r.length===0?(n=(i=e.workspace.getRightLeaf(!1))!=null?i:e.workspace.getLeaf(),await n.setViewState({type:jt.type})):n=r.first(),await e.workspace.revealLeaf(n),e.workspace.trigger("obsidian-git:refresh")}}),t.addCommand({id:"open-history-view",name:"Open history view",callback:async()=>{var i;let r=e.workspace.getLeavesOfType(gn.type),n;r.length===0?(n=(i=e.workspace.getRightLeaf(!1))!=null?i:e.workspace.getLeaf(),await n.setViewState({type:gn.type})):n=r.first(),await e.workspace.revealLeaf(n),e.workspace.trigger("obsidian-git:refresh")}}),t.addCommand({id:"open-diff-view",name:"Open diff view",checkCallback:r=>{let n=e.workspace.getActiveFile();if(r)return n!==null;{let i=t.gitManager.getRelativeRepoPath(n.path,!0);t.tools.openDiff({aFile:i,aRef:""})}}}),t.addCommand({id:"view-file-on-github",name:"Open file on GitHub",editorCallback:(r,{file:n})=>{if(n)return i$(r,n,t.gitManager)}}),t.addCommand({id:"view-history-on-github",name:"Open file history on GitHub",editorCallback:(r,{file:n})=>{if(n)return a$(n,t.gitManager)}}),t.addCommand({id:"pull",name:"Pull",callback:()=>t.promiseQueue.addTask(()=>t.pullChangesFromRemote())}),t.addCommand({id:"fetch",name:"Fetch",callback:()=>t.promiseQueue.addTask(()=>t.fetch())}),t.addCommand({id:"switch-to-remote-branch",name:"Switch to remote branch",callback:()=>t.promiseQueue.addTask(()=>t.switchRemoteBranch())}),t.addCommand({id:"add-to-gitignore",name:"Add file to .gitignore",checkCallback:r=>{let n=e.workspace.getActiveFile();if(r)return n!==null;t.addFileToGitignore(n.path,n instanceof Un.TFolder).catch(i=>t.displayError(i))}}),t.addCommand({id:"push",name:"Commit-and-sync",callback:()=>t.promiseQueue.addTask(()=>t.commitAndSync({fromAutoBackup:!1}))}),t.addCommand({id:"backup-and-close",name:"Commit-and-sync and then close Obsidian",callback:()=>t.promiseQueue.addTask(async()=>{await t.commitAndSync({fromAutoBackup:!1}),window.close()})}),t.addCommand({id:"commit-push-specified-message",name:"Commit-and-sync with specific message",callback:()=>t.promiseQueue.addTask(()=>t.commitAndSync({fromAutoBackup:!1,requestCustomMessage:!0}))}),t.addCommand({id:"commit",name:"Commit all changes",callback:()=>t.promiseQueue.addTask(()=>t.commit({fromAuto:!1}))}),t.addCommand({id:"commit-specified-message",name:"Commit all changes with specific message",callback:()=>t.promiseQueue.addTask(()=>t.commit({fromAuto:!1,requestCustomMessage:!0}))}),t.addCommand({id:"commit-smart",name:"Commit",callback:()=>t.promiseQueue.addTask(async()=>{let n=(await t.updateCachedStatus()).staged.length>0;return t.commit({fromAuto:!1,requestCustomMessage:!1,onlyStaged:n})})}),t.addCommand({id:"commit-staged",name:"Commit staged",checkCallback:function(r){if(r)return!1;t.promiseQueue.addTask(async()=>t.commit({fromAuto:!1,requestCustomMessage:!1}))}}),Un.Platform.isDesktopApp&&t.addCommand({id:"commit-amend-staged-specified-message",name:"Amend staged",callback:()=>t.promiseQueue.addTask(()=>t.commit({fromAuto:!1,requestCustomMessage:!0,onlyStaged:!0,amend:!0}))}),t.addCommand({id:"commit-smart-specified-message",name:"Commit with specific message",callback:()=>t.promiseQueue.addTask(async()=>{let n=(await t.updateCachedStatus()).staged.length>0;return t.commit({fromAuto:!1,requestCustomMessage:!0,onlyStaged:n})})}),t.addCommand({id:"commit-staged-specified-message",name:"Commit staged with specific message",checkCallback:function(r){return r?!1:t.promiseQueue.addTask(()=>t.commit({fromAuto:!1,requestCustomMessage:!0,onlyStaged:!0}))}}),t.addCommand({id:"push2",name:"Push",callback:()=>t.promiseQueue.addTask(()=>t.push())}),t.addCommand({id:"stage-current-file",name:"Stage current file",checkCallback:r=>{let n=e.workspace.getActiveFile();if(r)return n!==null;t.promiseQueue.addTask(()=>t.stageFile(n))}}),t.addCommand({id:"unstage-current-file",name:"Unstage current file",checkCallback:r=>{let n=e.workspace.getActiveFile();if(r)return n!==null;t.promiseQueue.addTask(()=>t.unstageFile(n))}}),t.addCommand({id:"edit-remotes",name:"Edit remotes",callback:()=>t.editRemotes().catch(r=>t.displayError(r))}),t.addCommand({id:"remove-remote",name:"Remove remote",callback:()=>t.removeRemote().catch(r=>t.displayError(r))}),t.addCommand({id:"set-upstream-branch",name:"Set upstream branch",callback:()=>t.setUpstreamBranch().catch(r=>t.displayError(r))}),t.addCommand({id:"delete-repo",name:"CAUTION: Delete repository",callback:async()=>{await e.vault.adapter.exists(`${t.settings.basePath}/.git`)?await new Ke(t,{options:["NO","YES"],placeholder:"Do you really want to delete the repository (.git directory)? plugin action cannot be undone.",onlySelection:!0}).openAndGetResult()==="YES"&&(await e.vault.adapter.rmdir(`${t.settings.basePath}/.git`,!0),new Un.Notice("Successfully deleted repository. Reloading plugin..."),t.unloadPlugin(),await t.init({fromReload:!0})):new Un.Notice("No repository found")}}),t.addCommand({id:"init-repo",name:"Initialize a new repo",callback:()=>t.createNewRepo().catch(r=>t.displayError(r))}),t.addCommand({id:"clone-repo",name:"Clone an existing remote repo",callback:()=>t.cloneNewRepo().catch(r=>t.displayError(r))}),t.addCommand({id:"list-changed-files",name:"List changed files",callback:async()=>{if(await t.isAllInitialized())try{let r=await t.updateCachedStatus();if(r.changed.length+r.staged.length>500){t.displayError("Too many changes to display");return}new Jh(t,r.all).open()}catch(r){t.displayError(r)}}}),t.addCommand({id:"switch-branch",name:"Switch branch",callback:()=>{t.switchBranch().catch(r=>t.displayError(r))}}),t.addCommand({id:"create-branch",name:"Create new branch",callback:()=>{t.createBranch().catch(r=>t.displayError(r))}}),t.addCommand({id:"delete-branch",name:"Delete branch",callback:()=>{t.deleteBranch().catch(r=>t.displayError(r))}}),t.addCommand({id:"discard-all",name:"CAUTION: Discard all changes",callback:async()=>{let r=await t.discardAll();switch(r){case"discard":new Un.Notice("Discarded all changes in tracked files.");break;case"delete":new Un.Notice("Discarded all files.");break;case!1:break;default:uh(r)}}}),t.addCommand({id:"pause-automatic-routines",name:"Pause/Resume automatic routines",callback:()=>{let r=!t.localStorage.getPausedAutomatics();t.localStorage.setPausedAutomatics(r),r?(t.automaticsManager.unload(),new Un.Notice("Paused automatic routines.")):(t.automaticsManager.reload("commit","push","pull"),new Un.Notice("Resumed automatic routines."))}}),t.addCommand({id:"raw-command",name:"Raw command",checkCallback:r=>{let n=t.gitManager;if(r)return n instanceof Ee;t.tools.runRawCommand().catch(i=>t.displayError(i))}}),t.addCommand({id:"toggle-line-author-info",name:"Toggle line author information",callback:()=>{var r;return(r=t.settingsTab)==null?void 0:r.configureLineAuthorShowStatus(!t.settings.lineAuthor.show)}}),t.addCommand({id:"reset-hunk",name:"Reset hunk",editorCheckCallback(r,n,i){if(r)return t.settings.hunks.hunkCommands&&t.hunkActions.editor!==void 0;t.hunkActions.resetHunk()}}),t.addCommand({id:"stage-hunk",name:"Stage hunk",editorCheckCallback:(r,n,i)=>{if(r)return t.settings.hunks.hunkCommands&&t.hunkActions.editor!==void 0;t.promiseQueue.addTask(()=>t.hunkActions.stageHunk())}}),t.addCommand({id:"preview-hunk",name:"Preview hunk",editorCheckCallback:(r,n,i)=>{if(r)return t.settings.hunks.hunkCommands&&t.hunkActions.editor!==void 0;let a=t.hunkActions.editor.editor;Hs(a)}}),t.addCommand({id:"next-hunk",name:"Go to next hunk",editorCheckCallback:(r,n,i)=>{if(r)return t.settings.hunks.hunkCommands&&t.hunkActions.editor!==void 0;t.hunkActions.goToHunk("next")}}),t.addCommand({id:"prev-hunk",name:"Go to previous hunk",editorCheckCallback:(r,n,i)=>{if(r)return t.settings.hunks.hunkCommands&&t.hunkActions.editor!==void 0;t.hunkActions.goToHunk("prev")}})}p();var yp=class{constructor(e){this.plugin=e;this.prefix=this.plugin.manifest.id+":",this.app=e.app}migrate(){let e=["password","hostname","conflict","lastAutoPull","lastAutoBackup","lastAutoPush","gitPath","pluginDisabled"];for(let r of e){let n=localStorage.getItem(this.prefix+r);this.app.loadLocalStorage(this.prefix+r)==null&&n!=null&&n!=null&&(this.app.saveLocalStorage(this.prefix+r,n),localStorage.removeItem(this.prefix+r))}}getPassword(){return this.app.loadLocalStorage(this.prefix+"password")}setPassword(e){return this.app.saveLocalStorage(this.prefix+"password",e)}getUsername(){return this.app.loadLocalStorage(this.prefix+"username")}setUsername(e){return this.app.saveLocalStorage(this.prefix+"username",e)}getHostname(){return this.app.loadLocalStorage(this.prefix+"hostname")}setHostname(e){return this.app.saveLocalStorage(this.prefix+"hostname",e)}getConflict(){return this.app.loadLocalStorage(this.prefix+"conflict")=="true"}setConflict(e){return this.app.saveLocalStorage(this.prefix+"conflict",`${e}`)}getLastAutoPull(){return this.app.loadLocalStorage(this.prefix+"lastAutoPull")}setLastAutoPull(e){return this.app.saveLocalStorage(this.prefix+"lastAutoPull",e)}getLastAutoBackup(){return this.app.loadLocalStorage(this.prefix+"lastAutoBackup")}setLastAutoBackup(e){return this.app.saveLocalStorage(this.prefix+"lastAutoBackup",e)}getLastAutoPush(){return this.app.loadLocalStorage(this.prefix+"lastAutoPush")}setLastAutoPush(e){return this.app.saveLocalStorage(this.prefix+"lastAutoPush",e)}getGitPath(){return this.app.loadLocalStorage(this.prefix+"gitPath")}setGitPath(e){return this.app.saveLocalStorage(this.prefix+"gitPath",e)}getPATHPaths(){var e,r;return(r=(e=this.app.loadLocalStorage(this.prefix+"PATHPaths"))==null?void 0:e.split(":"))!=null?r:[]}setPATHPaths(e){return this.app.saveLocalStorage(this.prefix+"PATHPaths",e.join(":"))}getEnvVars(){var e;return JSON.parse((e=this.app.loadLocalStorage(this.prefix+"envVars"))!=null?e:"[]")}setEnvVars(e){return this.app.saveLocalStorage(this.prefix+"envVars",JSON.stringify(e))}getPluginDisabled(){return this.app.loadLocalStorage(this.prefix+"pluginDisabled")=="true"}setPluginDisabled(e){return this.app.saveLocalStorage(this.prefix+"pluginDisabled",`${e}`)}getPausedAutomatics(){return this.app.loadLocalStorage(this.prefix+"pausedAutomatics")=="true"}setPausedAutomatics(e){return this.app.saveLocalStorage(this.prefix+"pausedAutomatics",`${e}`)}};p();var $l=require("obsidian");var qu=class{constructor(e){this.plugin=e}async hasTooBigFiles(e){let r=await this.plugin.gitManager.branchInfo(),n=r.tracking?Yi(r.tracking)[0]:null;if(!n)return!1;let i=await this.plugin.gitManager.getRemoteUrl(n);if(i!=null&&i.includes("github.com")){let a=[],s=this.plugin.gitManager;for(let o of e){let l=this.plugin.app.vault.getAbstractFileByPath(o.vaultPath),c=!1;if(l instanceof $l.TFile)l.stat.size>=1e8&&(c=!0);else{let u=await this.plugin.app.vault.adapter.stat(o.vaultPath);u&&u.size>=1e8&&(c=!0)}if(c){let u=!1;s instanceof Ee&&(u=await s.isFileTrackedByLFS(o.path)),u||a.push(o)}}if(a.length>0)return this.plugin.displayError(`Aborted commit, because the following files are too big:
- ${a.map(o=>o.vaultPath).join(`
- `)}
Please remove them or add to .gitignore.`),!0}return!1}async writeAndOpenFile(e){e!==void 0&&await this.plugin.app.vault.adapter.write(tl,e);let r=!1;this.plugin.app.workspace.iterateAllLeaves(n=>{n.getDisplayText()!=""&&tl.startsWith(n.getDisplayText())&&(r=!0)}),r||await this.plugin.app.workspace.openLinkText(tl,"/",!0)}openDiff({aFile:e,bFile:r,aRef:n,bRef:i,event:a}){var l,c;let s=this.plugin.settings.diffStyle;$l.Platform.isMobileApp&&(s="git_unified");let o={aFile:e,bFile:r!=null?r:e,aRef:n,bRef:i};s=="split"?(l=Dn(this.plugin.app,a))==null||l.setViewState({type:Ma.type,active:!0,state:o}):s=="git_unified"&&((c=Dn(this.plugin.app,a))==null||c.setViewState({type:Da.type,active:!0,state:o}))}async runRawCommand(){let e=this.plugin.gitManager;if(!(e instanceof Ee))return;let n=await new Ke(this.plugin,{placeholder:"push origin master",allowEmpty:!1}).openAndGetResult();n!==void 0&&this.plugin.promiseQueue.addTask(async()=>{let i=new $l.Notice(`Running '${n}'...`,999999);try{let a=await e.rawCommand(n);a?(i.setMessage(a),window.setTimeout(()=>i.hide(),5e3)):i.hide()}catch(a){throw i.hide(),a}})}};p();var bp=require("obsidian");var Us=class extends bp.ItemView{constructor(r,n){super(r);this.plugin=n;this.gettingDiff=!1;this.parser=new DOMParser,this.navigation=!0,this.contentEl.addClass("git-diff"),this.gitRefreshRef=this.app.workspace.on("obsidian-git:status-changed",()=>{this.refresh().catch(console.error)})}getViewType(){return Da.type}getDisplayText(){var r;if(((r=this.state)==null?void 0:r.bFile)!=null){let n=this.state.bFile.split("/").last();return n!=null&&n.endsWith(".md")&&(n=n.slice(0,-3)),`Diff: ${n}`}return Da.name}getIcon(){return Da.icon}async setState(r,n){this.state=r,bp.Platform.isMobile&&(this.leaf.view.titleEl.textContent=this.getDisplayText()),await this.refresh()}getState(){return this.state}onClose(){return this.app.workspace.offref(this.gitRefreshRef),this.app.workspace.offref(this.gitViewRefreshRef),super.onClose()}async onOpen(){return await this.refresh(),super.onOpen()}async refresh(){var r;if((r=this.state)!=null&&r.bFile&&!this.gettingDiff&&this.plugin.gitManager){this.gettingDiff=!0;try{let n=await this.plugin.gitManager.getDiffString(this.state.bFile,this.state.aRef=="HEAD",this.state.bRef);this.contentEl.empty();let i=this.plugin.gitManager.getRelativeVaultPath(this.state.bFile);if(!n){if(this.plugin.gitManager instanceof Ee&&await this.plugin.gitManager.isTracked(this.state.bFile))n=[`--- ${this.state.aFile}`,`+++ ${this.state.bFile}`,""].join(`
`);else if(await this.app.vault.adapter.exists(i)){let a=await this.app.vault.adapter.read(i);n=[...`--- /dev/null
+++ ${this.state.bFile}
@@ -0,0 +1,${a.split(`
`).length} @@`.split(`
`),...a.split(`
`).map(o=>`+${o}`)].join(`
`)}}if(n){let a=this.parser.parseFromString(gp(n),"text/html").querySelector(".d2h-file-diff");this.contentEl.append(a)}else{let a=this.contentEl.createDiv({cls:"obsidian-git-center"});a.createSpan({text:"\u26A0\uFE0F",attr:{style:"font-size: 2em"}}),a.createEl("br"),a.createSpan({text:"File not found: "+this.state.bFile})}}finally{this.gettingDiff=!1}}}};p();var Qi=require("obsidian");var Ml=require("@codemirror/commands");var _p=require("@codemirror/search"),Ol=require("@codemirror/state"),_n=require("@codemirror/view");var Gs=class extends Qi.ItemView{constructor(r,n){super(r);this.plugin=n;this.refreshing=!1;this.ignoreNextModification=!1;this.navigation=!0,this.registerEvent(this.app.workspace.on("obsidian-git:status-changed",()=>{this.mergeView?this.updateRefEditors().catch(console.error):this.createMergeView().catch(console.error)})),this.intervalRef=window.setInterval(()=>{this.mergeView&&this.updateRefEditors().catch(console.error)},30*1e3),this.registerEvent(this.app.vault.on("modify",i=>{this.state.bRef==null&&i.path===this.state.bFile&&(this.ignoreNextModification?this.ignoreNextModification=!1:this.updateModifiableEditor().catch(console.error))})),this.registerEvent(this.app.vault.on("delete",i=>{this.state.bRef==null&&i.path===this.state.bFile&&this.createMergeView().catch(console.error)})),this.registerEvent(this.app.vault.on("create",i=>{this.state.bRef==null&&i.path===this.state.bFile&&this.createMergeView().catch(console.error)})),this.registerEvent(this.app.vault.on("rename",(i,a)=>{this.state.bRef==null&&(i.path===this.state.bFile||a===this.state.bFile)&&this.createMergeView().catch(console.error)})),this.fileSaveDebouncer=(0,Qi.debounce)(i=>{let a=this.state.bFile;a&&(this.ignoreNextModification=!0,this.plugin.app.vault.adapter.write(this.plugin.gitManager.getRelativeVaultPath(a),i).catch(s=>this.plugin.displayError(s)))},1e3,!1)}getViewType(){return Ma.type}getDisplayText(){var r;if(((r=this.state)==null?void 0:r.bFile)!=null){let n=this.state.bFile.split("/").last();n!=null&&n.endsWith(".md")&&(n=n.slice(0,-3));let i;return this.state.bRef==null?i=" (Working Tree)":this.state.bRef==""?i=" (Index)":i="("+this.state.bRef.substring(0,7)+")",`Diff: ${n} ${i}`}return Ma.name}getIcon(){return Ma.icon}async setState(r,n){this.state=r,Qi.Platform.isMobile&&(this.leaf.view.titleEl.textContent=this.getDisplayText()),await super.setState(r,n),await this.createMergeView()}getState(){return this.state}onClose(){return window.clearInterval(this.intervalRef),super.onClose()}async onOpen(){return await this.createMergeView(),super.onOpen()}async gitShow(r,n){try{return await this.plugin.gitManager.show(r,n,!1)}catch(i){if(i instanceof Rr&&(i.message.includes("does not exist")||i.message.includes("unknown revision or path")||i.message.includes("exists on disk, but not in")||i.message.includes("fatal: bad object")))return i.message.includes("fatal: bad object")&&this.plugin.displayError(i.message),"";throw i}}async bShouldBeEditable(){if(this.state.bRef!=null)return!1;let r=this.plugin.gitManager.getRelativeVaultPath(this.state.bFile);return await this.app.vault.adapter.exists(r)}async updateModifiableEditor(){if(!this.mergeView||this.refreshing)return;let r=this.mergeView.b;this.refreshing=!0;let n=await this.app.vault.adapter.read(this.state.bFile);if(n!=r.state.doc.toString()){let i=r.state.update({changes:{from:0,to:r.state.doc.length,insert:n},annotations:[Ol.Transaction.remote.of(!0)]});r.dispatch(i)}this.refreshing=!1}async updateRefEditors(){if(!this.mergeView||this.refreshing)return;let r=this.mergeView.a,n=this.mergeView.b;this.refreshing=!0;let i=await this.gitShow(this.state.aRef,this.state.aFile),a;if(this.state.bRef!=null&&(a=await this.gitShow(this.state.bRef,this.state.bFile)),i!=r.state.doc.toString()){let s=r.state.update({changes:{from:0,to:r.state.doc.length,insert:i}});r.dispatch(s)}if(a!=null&&a!=n.state.doc.toString()){let s=n.state.update({changes:{from:0,to:n.state.doc.length,insert:a}});n.dispatch(s)}this.refreshing=!1}renderButtons(){let r=document.createElement("div"),n=r.createDiv();if(n.addClass("clickable-icon"),n.setAttr("aria-label",this.state.bRef==null?"Stage hunk":"Unstage hunk"),(0,Qi.setIcon)(n,this.state.bRef==null?"plus":"minus"),n.onmousedown=async i=>{var h;let a=this.mergeView.b,s=this.mergeView.a,o=V0(a.state),l=(h=r.parentElement)==null?void 0:h.indexOf(r),c=o.chunks[l],u=X0(c,s.state.doc,a.state.doc),f=Y0(this.mergeView.a.state.doc.toString(),this.mergeView.b.state.doc.toString(),[u])[0],d=Dt.createPatch(this.state.bFile,[f],"100644",this.state.bRef!=null).join(`
`)+`
`;await this.plugin.gitManager.applyPatch(d),this.plugin.app.workspace.trigger("obsidian-git:refresh")},this.state.bRef==null){let i=r.createDiv();i.addClass("clickable-icon"),i.setAttr("aria-label","Reset hunk"),(0,Qi.setIcon)(i,"undo"),i.onmousedown=a=>{var f;let s=this.mergeView.a,o=this.mergeView.b,l=V0(o.state),c=(f=r.parentElement)==null?void 0:f.indexOf(r),u=l.chunks[c];if(u){let d=u.fromA,h=u.toA,m=u.fromB,g=u.toB,v=s.state.sliceDoc(d,Math.max(d,h-1));d!=h&&g<=o.state.doc.length&&(v+=s.state.lineBreak),o.dispatch({changes:{from:m,to:Math.min(o.state.doc.length,g),insert:v},userEvent:"revert"})}}}return r.onmousedown=i=>{i.preventDefault(),i.stopPropagation()},r}async createMergeView(){var r,n,i;if((r=this.state)!=null&&r.aFile&&((n=this.state)!=null&&n.bFile)&&!this.refreshing&&this.plugin.gitManager){this.refreshing=!0,(i=this.mergeView)==null||i.destroy();let a=this.containerEl.children[1];a.empty(),this.contentEl.addClass("git-split-diff-view","git-diff"),this.bIsEditable=await this.bShouldBeEditable();let s=await this.gitShow(this.state.aRef,this.state.aFile),o;if(this.state.bRef!=null)o=await this.gitShow(this.state.bRef,this.state.bFile);else{let g=this.plugin.gitManager.getRelativeVaultPath(this.state.bFile);await this.app.vault.adapter.exists(g)?o=await this.app.vault.adapter.read(g):o=""}let l=[(0,_n.lineNumbers)(),(0,_p.highlightSelectionMatches)(),(0,_n.drawSelection)(),_n.keymap.of([...Ml.standardKeymap,Ml.indentWithTab]),(0,Ml.history)(),(0,_p.search)(),_n.EditorView.lineWrapping],c=this,u=_n.ViewPlugin.define(g=>({update(v){if(v.docChanged&&!v.transactions.some(w=>w.annotation(Ol.Transaction.remote))){let w=g.state.doc.toString();c.fileSaveDebouncer(w)}}})),f={doc:s,extensions:[...l,_n.EditorView.editable.of(!1),Ol.EditorState.readOnly.of(!0)]},d=[...l];this.bIsEditable?d.push(u):d.push(_n.EditorView.editable.of(!1),Ol.EditorState.readOnly.of(!0));let h={doc:o,extensions:d};a.addClasses(["cm-s-obsidian","mod-cm6","markdown-source-view","cm-content"]);let m=this.plugin.gitManager instanceof Ee&&(this.state.bRef===void 0||this.state.bRef==="");this.mergeView=new op({b:h,a:f,collapseUnchanged:{minSize:6,margin:4},renderRevertControl:m?()=>this.renderButtons():void 0,revertControls:m?"a-to-b":void 0,diffConfig:{scanLimit:this.bIsEditable?1e3:1e4},parent:a}),this.refreshing=!1}}};p();var tD=require("obsidian");p();p();p();var kO="5";var AO,TO,CO;typeof window!="undefined"&&((CO=(TO=(AO=window.__svelte)!=null?AO:window.__svelte={}).v)!=null?CO:TO.v=new Set).add(kO);p();p();p();var zu="[",wi="[!",js="]",ea={};var Je=Symbol(),xn=Symbol("filename"),PO=Symbol("hmr"),RO="http://www.w3.org/1999/xhtml";p();p();p();p();var xp=!0;p();var L=!1;p();var yi=Array.isArray,IO=Array.prototype.indexOf,Dl=Array.from,py=Object.keys,er=Object.defineProperty,$r=Object.getOwnPropertyDescriptor,my=Object.getOwnPropertyDescriptors,gy=Object.prototype,FO=Array.prototype,Ll=Object.getPrototypeOf,vy=Object.isExtensible;function wy(t){return typeof t=="function"}var Or=()=>{};function Sp(t){for(var e=0;e<t.length;e++)t[e]()}function Ep(){var t,e,r=new Promise((n,i)=>{t=n,e=i});return{promise:r,resolve:t,reject:e}}p();p();var tr=Symbol("$state"),Vu=Symbol("legacy props"),$O=Symbol(""),kp=Symbol("proxy path"),bi=new class extends Error{constructor(){super(...arguments);ze(this,"name","StaleReactionError");ze(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};var Wu=3,Mr=8;p();p();function Yu(t){if(L){let e=new Error(`lifecycle_outside_component
\`${t}(...)\` can only be used during component initialisation
https://svelte.dev/e/lifecycle_outside_component`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function OO(){if(L){let t=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function yy(){if(L){let t=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/bind_invalid_checkbox_value")}function MO(){if(L){let t=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/derived_references_self")}function DO(t){if(L){let e=new Error(`effect_in_teardown
\`${t}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function LO(){if(L){let t=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function NO(t){if(L){let e=new Error(`effect_orphan
\`${t}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_orphan")}function BO(){if(L){let t=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function HO(){if(L){let t=new Error(`hydration_failed
Failed to hydrate the application
https://svelte.dev/e/hydration_failed`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/hydration_failed")}function UO(t){if(L){let e=new Error(`props_invalid_value
Cannot do \`bind:${t}={undefined}\` when \`${t}\` has a fallback value
https://svelte.dev/e/props_invalid_value`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/props_invalid_value")}function GO(t){if(L){let e=new Error(`rune_outside_svelte
The \`${t}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function jO(){if(L){let t=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function qO(){if(L){let t=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function zO(){if(L){let t=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function VO(){if(L){let t=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}p();p();p();var Va="font-weight: bold",Wa="font-weight: normal";function WO(t,e){L?console.warn(`%c[svelte] await_waterfall
%cAn async derived, \`${t}\` (${e}) was not read immediately after it resolved. This often indicates an unnecessary waterfall, which can slow down your app
https://svelte.dev/e/await_waterfall`,Va,Wa):console.warn("https://svelte.dev/e/await_waterfall")}function YO(t,e,r){L?console.warn(`%c[svelte] hydration_attribute_changed
%cThe \`${t}\` attribute on \`${e}\` changed its value between server and client renders. The client value, \`${r}\`, will be ignored in favour of the server value
https://svelte.dev/e/hydration_attribute_changed`,Va,Wa):console.warn("https://svelte.dev/e/hydration_attribute_changed")}function qs(t){L?console.warn(`%c[svelte] hydration_mismatch
%c${t?`Hydration failed because the initial UI does not match what was rendered on the server. The error occurred near ${t}`:"Hydration failed because the initial UI does not match what was rendered on the server"}
https://svelte.dev/e/hydration_mismatch`,Va,Wa):console.warn("https://svelte.dev/e/hydration_mismatch")}function XO(){L?console.warn(`%c[svelte] lifecycle_double_unmount
%cTried to unmount a component that was not mounted
https://svelte.dev/e/lifecycle_double_unmount`,Va,Wa):console.warn("https://svelte.dev/e/lifecycle_double_unmount")}function Ap(t){L?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${t}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,Va,Wa):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function ZO(){L?console.warn(`%c[svelte] state_proxy_unmount
%cTried to unmount a state proxy, rather than a component
https://svelte.dev/e/state_proxy_unmount`,Va,Wa):console.warn("https://svelte.dev/e/state_proxy_unmount")}function KO(){L?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",Va,Wa):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function JO(t){L?console.warn(`%c[svelte] transition_slide_display
%cThe \`slide\` transition does not work correctly for elements with \`display: ${t}\`
https://svelte.dev/e/transition_slide_display`,Va,Wa):console.warn("https://svelte.dev/e/transition_slide_display")}var ie=!1;function Wt(t){ie=t}var ge;function We(t){if(t===null)throw qs(),ea;return ge=t}function rr(){return We(Yt(ge))}function G(t){if(ie){if(Yt(ge)!==null)throw qs(),ea;ge=t}}function zs(t=1){if(ie){for(var e=t,r=ge;e--;)r=Yt(r);ge=r}}function ta(t=!0){for(var e=0,r=ge;;){if(r.nodeType===Mr){var n=r.data;if(n===js){if(e===0)return r;e-=1}else(n===zu||n===wi)&&(e+=1)}var i=Yt(r);t&&r.remove(),r=i}}function Tp(t){if(!t||t.nodeType!==Mr)throw qs(),ea;return t.data}p();p();p();p();function Cp(t){return t===this.v}function by(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Pp(t){return!by(t,this.v)}p();var nr=!1,ra=!1,Gn=!1;p();p();p();var Xu=null;function Dr(t,e){return t.label=e,Rp(t.v,e),t}function Rp(t,e){var r;return(r=t==null?void 0:t[kp])==null||r.call(t,e),t}p();function _i(t){let e=new Error,r=j9();return r.length===0?null:(r.unshift(`
`),er(e,"stack",{value:r.join(`
`)}),er(e,"name",{value:t}),e)}function j9(){let t=Error.stackTraceLimit;Error.stackTraceLimit=1/0;let e=new Error().stack;if(Error.stackTraceLimit=t,!e)return[];let r=e.split(`
`),n=[];for(let i=0;i<r.length;i++){let a=r[i],s=a.replaceAll("\\","/");if(a.trim()!=="Error"){if(a.includes("validate_each_keys"))return[];s.includes("svelte/src/internal")||s.includes("node_modules/.vite")||n.push(a)}}return n}p();var _e=null;function na(t){_e=t}var xi=null;function Nl(t){xi=t}var jn=null;function Ip(t){jn=t}function st(t,e=!1,r){_e={p:_e,i:!1,c:null,e:null,s:t,x:null,l:ra&&!e?{s:null,u:null,$:[]}:null},L&&(_e.function=r,jn=r)}function ot(t){var i;var e=_e,r=e.e;if(r!==null){e.e=null;for(var n of r)xy(n)}return t!==void 0&&(e.x=t),e.i=!0,_e=e.p,L&&(jn=(i=_e==null?void 0:_e.function)!=null?i:null),t!=null?t:{}}function Si(){return!ra||_e!==null&&_e.l===null}p();p();var Vs=[];function eM(){var t=Vs;Vs=[],Sp(t)}function Lt(t){if(Vs.length===0&&!Ws){var e=Vs;queueMicrotask(()=>{e===Vs&&eM()})}Vs.push(t)}function tM(){for(;Vs.length>0;)eM()}p();var Sy=new WeakMap;function Fp(t){var e=ne;if(e===null)return oe.f|=8388608,t;if(L&&t instanceof Error&&!Sy.has(t)&&Sy.set(t,q9(t,e)),e.f&32768)ki(t,e);else{if(!(e.f&128))throw L&&!e.parent&&t instanceof Error&&rM(t),t;e.b.error(t)}}function ki(t,e){for(;e!==null;){if(e.f&128)try{e.b.error(t);return}catch(r){t=r}e=e.parent}throw L&&t instanceof Error&&rM(t),t}function q9(t,e){var s,o,l;let r=$r(t,"message");if(!(r&&!r.configurable)){for(var n=Zu?"  ":"	",i=`
${n}in ${((s=e.fn)==null?void 0:s.name)||"<unknown>"}`,a=e.ctx;a!==null;)i+=`
${n}in ${(o=a.function)==null?void 0:o[xn].split("/").pop()}`,a=a.p;return{message:t.message+`
${i}
`,stack:(l=t.stack)==null?void 0:l.split(`
`).filter(c=>!c.includes("svelte/src/internal")).join(`
`)}}}function rM(t){let e=Sy.get(t);e&&(er(t,"message",{value:e.message}),er(t,"stack",{value:e.stack}))}p();p();var z9=-7169;function Ye(t,e){t.f=t.f&z9|e}function Hl(t){t.f&512||t.deps===null?Ye(t,1024):Ye(t,4096)}function nM(t){if(t!==null)for(let e of t)!(e.f&2)||!(e.f&32768)||(e.f^=32768,nM(e.deps))}function $p(t,e,r){t.f&2048?e.add(t):t.f&4096&&r.add(t),nM(t.deps),Ye(t,1024)}var Ul=new Set,ye=null,Gl=null,Ct=null,Sn=[],Dp=null,Ey=!1,Ws=!1,jl,ql,Ys,Xs,Qu,zl,Vl,En,ky,Ay,aM,sM,Op=class Op{constructor(){ve(this,En);ze(this,"committed",!1);ze(this,"current",new Map);ze(this,"previous",new Map);ve(this,jl,new Set);ve(this,ql,new Set);ve(this,Ys,0);ve(this,Xs,0);ve(this,Qu,null);ve(this,zl,new Set);ve(this,Vl,new Set);ze(this,"skipped_effects",new Set);ze(this,"is_fork",!1)}is_deferred(){return this.is_fork||F(this,Xs)>0}process(e){var i;Sn=[],Gl=null,this.apply();var r=[],n=[];for(let a of e)pt(this,En,ky).call(this,a,r,n);this.is_fork||pt(this,En,aM).call(this),this.is_deferred()?(pt(this,En,Ay).call(this,n),pt(this,En,Ay).call(this,r)):(Gl=this,ye=null,iM(n),iM(r),Gl=null,(i=F(this,Qu))==null||i.resolve()),Ct=null}capture(e,r){r!==Je&&!this.previous.has(e)&&this.previous.set(e,r),e.f&8388608||(this.current.set(e,e.v),Ct==null||Ct.set(e,e.v))}activate(){ye=this,this.apply()}deactivate(){ye===this&&(ye=null,Ct=null)}flush(){if(this.activate(),Sn.length>0){if(Ty(),ye!==null&&ye!==this)return}else F(this,Ys)===0&&this.process([]);this.deactivate()}discard(){for(let e of F(this,ql))e(this);F(this,ql).clear()}increment(e){me(this,Ys,F(this,Ys)+1),e&&me(this,Xs,F(this,Xs)+1)}decrement(e){me(this,Ys,F(this,Ys)-1),e&&me(this,Xs,F(this,Xs)-1),this.revive()}revive(){for(let e of F(this,zl))F(this,Vl).delete(e),Ye(e,2048),tn(e);for(let e of F(this,Vl))Ye(e,4096),tn(e);this.flush()}oncommit(e){F(this,jl).add(e)}ondiscard(e){F(this,ql).add(e)}settled(){var e;return((e=F(this,Qu))!=null?e:me(this,Qu,Ep())).promise}static ensure(){if(ye===null){let e=ye=new Op;Ul.add(ye),Ws||Op.enqueue(()=>{ye===e&&e.flush()})}return ye}static enqueue(e){Lt(e)}apply(){if(!(!nr||!this.is_fork&&Ul.size===1)){Ct=new Map(this.current);for(let e of Ul)if(e!==this)for(let[r,n]of e.previous)Ct.has(r)||Ct.set(r,n)}}};jl=new WeakMap,ql=new WeakMap,Ys=new WeakMap,Xs=new WeakMap,Qu=new WeakMap,zl=new WeakMap,Vl=new WeakMap,En=new WeakSet,ky=function(e,r,n){var d;e.f^=1024;for(var i=e.first,a=null;i!==null;){var s=i.f,o=(s&96)!==0,l=o&&(s&1024)!==0,c=l||(s&8192)!==0||this.skipped_effects.has(i);if(nr&&a===null&&s&128&&((d=i.b)!=null&&d.is_pending)&&(a=i),!c&&i.fn!==null){o?i.f^=1024:a!==null&&s&16777228?a.b.defer_effect(i):s&4?r.push(i):nr&&s&16777224?n.push(i):Ka(i)&&(s&16&&F(this,zl).add(i),Za(i));var u=i.first;if(u!==null){i=u;continue}}var f=i.parent;for(i=i.next;i===null&&f!==null;)f===a&&(a=null),i=f.next,f=f.parent}},Ay=function(e){for(var r=0;r<e.length;r+=1)$p(e[r],F(this,zl),F(this,Vl))},aM=function(){if(F(this,Xs)===0){for(let e of F(this,jl))e();F(this,jl).clear()}F(this,Ys)===0&&pt(this,En,sM).call(this)},sM=function(){var i;if(Ul.size>1){this.previous.clear();var e=Ct,r=!0;for(let a of Ul){if(a===this){r=!1;continue}let s=[];for(let[l,c]of this.current){if(a.current.has(l))if(r&&c!==a.current.get(l))a.current.set(l,c);else continue;s.push(l)}if(s.length===0)continue;let o=[...a.current.keys()].filter(l=>!this.current.has(l));if(o.length>0){var n=Sn;Sn=[];let l=new Set,c=new Map;for(let u of s)oM(u,o,l,c);if(Sn.length>0){ye=a,a.apply();for(let u of Sn)pt(i=a,En,ky).call(i,u,[],[]);a.deactivate()}Sn=n}}ye=null,Ct=e}this.committed=!0,Ul.delete(this)};var vr=Op;function Zs(t){var e=Ws;Ws=!0;try{var r;for(t&&(ye!==null&&Ty(),r=t());;){if(tM(),Sn.length===0&&(ye==null||ye.flush(),Sn.length===0))return Dp=null,r;Ty()}}finally{Ws=e}}function Ty(){var s;var t=ia;Ey=!0;var e=L?new Set:null;try{var r=0;for(Yl(!0);Sn.length>0;){var n=vr.ensure();if(r++>1e3){if(L){var i=new Map;for(let o of n.current.keys())for(let[l,c]of(s=o.updated)!=null?s:[]){var a=i.get(l);a||(a={error:c.error,count:0},i.set(l,a)),a.count+=c.count}for(let o of i.values())o.error&&console.error(o.error)}W9()}if(n.process(Sn),Ai.clear(),L)for(let o of n.current.keys())e.add(o)}}finally{if(Ey=!1,Yl(t),Dp=null,L)for(let o of e)o.updated=null}}function W9(){try{BO()}catch(t){L&&er(t,"stack",{value:""}),ki(t,Dp)}}var Lr=null;function iM(t){var e=t.length;if(e!==0){for(var r=0;r<e;){var n=t[r++];if(!(n.f&24576)&&Ka(n)&&(Lr=new Set,Za(n),n.deps===null&&n.first===null&&n.nodes===null&&(n.teardown===null&&n.ac===null?Cy(n):n.fn=null),(Lr==null?void 0:Lr.size)>0)){Ai.clear();for(let i of Lr){if(i.f&24576)continue;let a=[i],s=i.parent;for(;s!==null;)Lr.has(s)&&(Lr.delete(s),a.push(s)),s=s.parent;for(let o=a.length-1;o>=0;o--){let l=a[o];l.f&24576||Za(l)}}Lr.clear()}}Lr=null}}function oM(t,e,r,n){if(!r.has(t)&&(r.add(t),t.reactions!==null))for(let i of t.reactions){let a=i.f;a&2?oM(i,e,r,n):a&4194320&&!(a&2048)&&lM(i,e,n)&&(Ye(i,2048),tn(i))}}function lM(t,e,r){let n=r.get(t);if(n!==void 0)return n;if(t.deps!==null)for(let i of t.deps){if(e.includes(i))return!0;if(i.f&2&&lM(i,e,r))return r.set(i,!0),!0}return r.set(t,!1),!1}function tn(t){for(var e=Dp=t;e.parent!==null;){e=e.parent;var r=e.f;if(Ey&&e===ne&&r&16&&!(r&262144))return;if(r&96){if(!(r&1024))return;e.f^=1024}}Sn.push(e)}p();p();p();function uM(t){let e=0,r=ir(0),n;return L&&Dr(r,"createSubscriber version"),()=>{Xa()&&(R(r),Zt(()=>(e===0&&(n=je(()=>t(()=>Ks(r)))),e+=1,()=>{Lt(()=>{e-=1,e===0&&(n==null||n(),n=void 0,Ks(r))})})))}}var X9=589952;function Fy(t,e,r){new Py(t,e,r)}var rn,ef,Ti,Js,Ci,kn,Hr,Pi,aa,Ja,Qs,sa,eo,Kl,Jl,oa,Up,St,fM,dM,Ry,Bp,Hp,Iy,Py=class{constructor(e,r,n){ve(this,St);ze(this,"parent");ze(this,"is_pending",!1);ve(this,rn);ve(this,ef,ie?ge:null);ve(this,Ti);ve(this,Js);ve(this,Ci);ve(this,kn,null);ve(this,Hr,null);ve(this,Pi,null);ve(this,aa,null);ve(this,Ja,null);ve(this,Qs,0);ve(this,sa,0);ve(this,eo,!1);ve(this,Kl,new Set);ve(this,Jl,new Set);ve(this,oa,null);ve(this,Up,uM(()=>(me(this,oa,ir(F(this,Qs))),L&&Dr(F(this,oa),"$effect.pending()"),()=>{me(this,oa,null)})));me(this,rn,e),me(this,Ti,r),me(this,Js,n),this.parent=ne.b,this.is_pending=!!F(this,Ti).pending,me(this,Ci,nn(()=>{if(ne.b=this,ie){let a=F(this,ef);rr(),a.nodeType===Mr&&a.data===wi?pt(this,St,dM).call(this):(pt(this,St,fM).call(this),F(this,sa)===0&&(this.is_pending=!1))}else{var i=pt(this,St,Ry).call(this);try{me(this,kn,Nt(()=>n(i)))}catch(a){this.error(a)}F(this,sa)>0?pt(this,St,Hp).call(this):this.is_pending=!1}return()=>{var a;(a=F(this,Ja))==null||a.remove()}},X9)),ie&&me(this,rn,ge)}defer_effect(e){$p(e,F(this,Kl),F(this,Jl))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!F(this,Ti).pending}update_pending_count(e){pt(this,St,Iy).call(this,e),me(this,Qs,F(this,Qs)+e),F(this,oa)&&Wn(F(this,oa),F(this,Qs))}get_effect_pending(){return F(this,Up).call(this),R(F(this,oa))}error(e){var r=F(this,Ti).onerror;let n=F(this,Ti).failed;if(F(this,eo)||!r&&!n)throw e;F(this,kn)&&(dt(F(this,kn)),me(this,kn,null)),F(this,Hr)&&(dt(F(this,Hr)),me(this,Hr,null)),F(this,Pi)&&(dt(F(this,Pi)),me(this,Pi,null)),ie&&(We(F(this,ef)),zs(),We(ta()));var i=!1,a=!1;let s=()=>{if(i){KO();return}i=!0,a&&VO(),vr.ensure(),me(this,Qs,0),F(this,Pi)!==null&&Ri(F(this,Pi),()=>{me(this,Pi,null)}),this.is_pending=this.has_pending_snippet(),me(this,kn,pt(this,St,Bp).call(this,()=>(me(this,eo,!1),Nt(()=>F(this,Js).call(this,F(this,rn)))))),F(this,sa)>0?pt(this,St,Hp).call(this):this.is_pending=!1};var o=oe;try{bt(null),a=!0,r==null||r(e,s),a=!1}catch(l){ki(l,F(this,Ci)&&F(this,Ci).parent)}finally{bt(o)}n&&Lt(()=>{me(this,Pi,pt(this,St,Bp).call(this,()=>{vr.ensure(),me(this,eo,!0);try{return Nt(()=>{n(F(this,rn),()=>e,()=>s)})}catch(l){return ki(l,F(this,Ci).parent),null}finally{me(this,eo,!1)}}))})}};rn=new WeakMap,ef=new WeakMap,Ti=new WeakMap,Js=new WeakMap,Ci=new WeakMap,kn=new WeakMap,Hr=new WeakMap,Pi=new WeakMap,aa=new WeakMap,Ja=new WeakMap,Qs=new WeakMap,sa=new WeakMap,eo=new WeakMap,Kl=new WeakMap,Jl=new WeakMap,oa=new WeakMap,Up=new WeakMap,St=new WeakSet,fM=function(){try{me(this,kn,Nt(()=>F(this,Js).call(this,F(this,rn))))}catch(e){this.error(e)}},dM=function(){let e=F(this,Ti).pending;e&&(me(this,Hr,Nt(()=>e(F(this,rn)))),vr.enqueue(()=>{var r=pt(this,St,Ry).call(this);me(this,kn,pt(this,St,Bp).call(this,()=>(vr.ensure(),Nt(()=>F(this,Js).call(this,r))))),F(this,sa)>0?pt(this,St,Hp).call(this):(Ri(F(this,Hr),()=>{me(this,Hr,null)}),this.is_pending=!1)}))},Ry=function(){var e=F(this,rn);return this.is_pending&&(me(this,Ja,Pt()),F(this,rn).before(F(this,Ja)),e=F(this,Ja)),e},Bp=function(e){var r=ne,n=oe,i=_e;Bt(F(this,Ci)),bt(F(this,Ci)),na(F(this,Ci).ctx);try{return e()}catch(a){return Fp(a),null}finally{Bt(r),bt(n),na(i)}},Hp=function(){let e=F(this,Ti).pending;F(this,kn)!==null&&(me(this,aa,document.createDocumentFragment()),F(this,aa).append(F(this,Ja)),Gp(F(this,kn),F(this,aa))),F(this,Hr)===null&&me(this,Hr,Nt(()=>e(F(this,rn))))},Iy=function(e){var r;if(!this.has_pending_snippet()){this.parent&&pt(r=this.parent,St,Iy).call(r,e);return}if(me(this,sa,F(this,sa)+e),F(this,sa)===0){this.is_pending=!1;for(let n of F(this,Kl))Ye(n,2048),tn(n);for(let n of F(this,Jl))Ye(n,4096),tn(n);F(this,Kl).clear(),F(this,Jl).clear(),F(this,Hr)&&Ri(F(this,Hr),()=>{me(this,Hr,null)}),F(this,aa)&&(F(this,rn).before(F(this,aa)),me(this,aa,null))}};p();function jp(t,e,r,n){let i=Si()?to:ro;if(r.length===0&&t.length===0){n(e.map(i));return}var a=ye,s=ne,o=hM();function l(){Promise.all(r.map(c=>Oy(c))).then(c=>{o();try{n([...e.map(i),...c])}catch(u){s.f&16384||ki(u,s)}a==null||a.deactivate(),Ql()}).catch(c=>{ki(c,s)})}t.length>0?Promise.all(t).then(()=>{o();try{return l()}finally{a==null||a.deactivate(),Ql()}}):l()}function hM(){var t=ne,e=oe,r=_e,n=ye;if(L)var i=xi;return function(s=!0){Bt(t),bt(e),na(r),s&&(n==null||n.activate()),L&&($y(null),Nl(i))}}function Ql(){Bt(null),bt(null),na(null),L&&($y(null),Nl(null))}var tf=null;function $y(t){tf=t}var rf=new Set;function to(t){var e=2050,r=oe!==null&&oe.f&2?oe:null;ne!==null&&(ne.f|=524288);let n={ctx:_e,deps:null,effects:null,equals:Cp,f:e,fn:t,reactions:null,rv:0,v:Je,wv:0,parent:r!=null?r:ne,ac:null};return L&&Gn&&(n.created=_i("created at")),n}function Oy(t,e,r){let n=ne;n===null&&OO();var i=n.b,a=void 0,s=ir(Je);L&&(s.label=e);var o=!oe,l=new Map;return pM(()=>{var h;L&&(tf=ne);var c=Ep();a=c.promise;try{Promise.resolve(t()).then(c.resolve,c.reject).then(()=>{u===ye&&u.committed&&u.deactivate(),Ql()})}catch(m){c.reject(m),Ql()}L&&(tf=null);var u=ye;if(o){var f=i.is_rendered();i.update_pending_count(1),u.increment(f),(h=l.get(u))==null||h.reject(bi),l.delete(u),l.set(u,c)}let d=(m,g=void 0)=>{if(tf=null,u.activate(),g)g!==bi&&(s.f|=8388608,Wn(s,g));else{s.f&8388608&&(s.f^=8388608),Wn(s,m);for(let[v,w]of l){if(l.delete(v),v===u)break;w.reject(bi)}L&&r!==void 0&&(rf.add(s),setTimeout(()=>{rf.has(s)&&(WO(s.label,r),rf.delete(s))}))}o&&(i.update_pending_count(-1),u.decrement(f))};c.promise.then(d,m=>d(null,m||"unknown"))}),ar(()=>{for(let c of l.values())c.reject(bi)}),L&&(s.f|=4194304),new Promise(c=>{function u(f){function d(){f===a?c(s):u(a)}f.then(d,d)}u(a)})}function Ht(t){let e=to(t);return nr||Vp(e),e}function ro(t){let e=to(t);return e.equals=Pp,e}function qp(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)dt(e[r])}}var My=[];function J9(t){for(var e=t.parent;e!==null;){if(!(e.f&2))return e.f&16384?null:e;e=e.parent}return null}function nf(t){var e,r=ne;if(Bt(J9(t)),L){let n=no;Lp(new Set);try{My.includes(t)&&MO(),My.push(t),t.f&=-32769,qp(t),e=zp(t)}finally{Bt(r),Lp(n),My.pop()}}else try{t.f&=-32769,qp(t),e=zp(t)}finally{Bt(r)}return e}function Dy(t){var r,n;var e=nf(t);if(!t.equals(e)&&(t.wv=Zl(),(!((r=ye)!=null&&r.is_fork)||t.deps===null)&&(t.v=e,t.deps===null))){Ye(t,1024);return}An||(Ct!==null?(Xa()||(n=ye)!=null&&n.is_fork)&&Ct.set(t,e):Hl(t))}var no=new Set,Ai=new Map;function Lp(t){no=t}var Ly=!1;function mM(){Ly=!0}function ir(t,e){var r={f:0,v:t,reactions:null,equals:Cp,rv:0,wv:0};return L&&Gn&&(r.created=e!=null?e:_i("created at"),r.updated=null,r.set_during_effect=!1,r.trace=null),r}function Oe(t,e){let r=ir(t,e);return Vp(r),r}function io(t,e=!1,r=!0){var i,a;let n=ir(t);return e||(n.equals=Pp),ra&&r&&_e!==null&&_e.l!==null&&((a=(i=_e.l).s)!=null?a:i.s=[]).push(n),n}function ae(t,e,r=!1){var i;oe!==null&&(!Gr||oe.f&131072)&&Si()&&oe.f&4325394&&!((i=jr)!=null&&i.includes(t))&&zO();let n=r?He(e):e;return L&&Rp(n,t.label),Wn(t,n)}function Wn(t,e){var i,a,s;if(!t.equals(e)){var r=t.v;An?Ai.set(t,e):Ai.set(t,r),t.v=e;var n=vr.ensure();if(n.capture(t,r),L){if(Gn||ne!==null){(i=t.updated)!=null||(t.updated=new Map);let o=((s=(a=t.updated.get(""))==null?void 0:a.count)!=null?s:0)+1;if(t.updated.set("",{error:null,count:o}),Gn||o>5){let l=_i("updated at");if(l!==null){let c=t.updated.get(l.stack);c||(c={error:l,count:0},t.updated.set(l.stack,c)),c.count++}}}ne!==null&&(t.set_during_effect=!0)}if(t.f&2){let o=t;t.f&2048&&nf(o),Hl(o)}t.wv=Zl(),gM(t,2048),Si()&&ne!==null&&ne.f&1024&&!(ne.f&96)&&(an===null?vM([t]):an.push(t)),!n.is_fork&&no.size>0&&!Ly&&Np()}return e}function Np(){Ly=!1;var t=ia;Yl(!0);let e=Array.from(no);try{for(let r of e)r.f&1024&&Ye(r,4096),Ka(r)&&Za(r)}finally{Yl(t)}no.clear()}function Ks(t){ae(t,t.v+1)}function gM(t,e){var u;var r=t.reactions;if(r!==null)for(var n=Si(),i=r.length,a=0;a<i;a++){var s=r[a],o=s.f;if(!(!n&&s===ne)){if(L&&o&131072){no.add(s);continue}var l=(o&2048)===0;if(l&&Ye(s,e),o&2){var c=s;(u=Ct)==null||u.delete(c),o&32768||(o&512&&(s.f|=32768),gM(c,4096))}else l&&(o&16&&Lr!==null&&Lr.add(s),tn(s))}}}var Q9=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function He(t){if(typeof t!="object"||t===null||tr in t)return t;let e=Ll(t);if(e!==gy&&e!==FO)return t;var r=new Map,n=yi(t),i=Oe(0),a=L&&Gn?_i("created at"):null,s=Qa,o=f=>{if(Qa===s)return f();var d=oe,h=Qa;bt(null),Ny(s);var m=f();return bt(d),Ny(h),m};n&&(r.set("length",Oe(t.length,a)),L&&(t=tV(t)));var l="";let c=!1;function u(f){if(!c){c=!0,l=f,Dr(i,`${l} version`);for(let[d,h]of r)Dr(h,ao(l,d));c=!1}}return new Proxy(t,{defineProperty(f,d,h){(!("value"in h)||h.configurable===!1||h.enumerable===!1||h.writable===!1)&&jO();var m=r.get(d);return m===void 0?m=o(()=>{var g=Oe(h.value,a);return r.set(d,g),L&&typeof d=="string"&&Dr(g,ao(l,d)),g}):ae(m,h.value,!0),!0},deleteProperty(f,d){var h=r.get(d);if(h===void 0){if(d in f){let m=o(()=>Oe(Je,a));r.set(d,m),Ks(i),L&&Dr(m,ao(l,d))}}else ae(h,Je),Ks(i);return!0},get(f,d,h){var w;if(d===tr)return t;if(L&&d===kp)return u;var m=r.get(d),g=d in f;if(m===void 0&&(!g||(w=$r(f,d))!=null&&w.writable)&&(m=o(()=>{var b=He(g?f[d]:Je),k=Oe(b,a);return L&&Dr(k,ao(l,d)),k}),r.set(d,m)),m!==void 0){var v=R(m);return v===Je?void 0:v}return Reflect.get(f,d,h)},getOwnPropertyDescriptor(f,d){var h=Reflect.getOwnPropertyDescriptor(f,d);if(h&&"value"in h){var m=r.get(d);m&&(h.value=R(m))}else if(h===void 0){var g=r.get(d),v=g==null?void 0:g.v;if(g!==void 0&&v!==Je)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return h},has(f,d){var v;if(d===tr)return!0;var h=r.get(d),m=h!==void 0&&h.v!==Je||Reflect.has(f,d);if(h!==void 0||ne!==null&&(!m||(v=$r(f,d))!=null&&v.writable)){h===void 0&&(h=o(()=>{var w=m?He(f[d]):Je,b=Oe(w,a);return L&&Dr(b,ao(l,d)),b}),r.set(d,h));var g=R(h);if(g===Je)return!1}return m},set(f,d,h,m){var y;var g=r.get(d),v=d in f;if(n&&d==="length")for(var w=h;w<g.v;w+=1){var b=r.get(w+"");b!==void 0?ae(b,Je):w in f&&(b=o(()=>Oe(Je,a)),r.set(w+"",b),L&&Dr(b,ao(l,w)))}if(g===void 0)(!v||(y=$r(f,d))!=null&&y.writable)&&(g=o(()=>Oe(void 0,a)),L&&Dr(g,ao(l,d)),ae(g,He(h)),r.set(d,g));else{v=g.v!==Je;var k=o(()=>He(h));ae(g,k)}var E=Reflect.getOwnPropertyDescriptor(f,d);if(E!=null&&E.set&&E.set.call(m,h),!v){if(n&&typeof d=="string"){var S=r.get("length"),A=Number(d);Number.isInteger(A)&&A>=S.v&&ae(S,A+1)}Ks(i)}return!0},ownKeys(f){R(i);var d=Reflect.ownKeys(f).filter(g=>{var v=r.get(g);return v===void 0||v.v!==Je});for(var[h,m]of r)m.v!==Je&&!(h in f)&&d.push(h);return d},setPrototypeOf(){qO()}})}function ao(t,e){var r;return typeof e=="symbol"?`${t}[Symbol(${(r=e.description)!=null?r:""})]`:Q9.test(e)?`${t}.${e}`:/^\d+$/.test(e)?`${t}[${e}]`:`${t}['${e}']`}function Wp(t){try{if(t!==null&&typeof t=="object"&&tr in t)return t[tr]}catch(e){}return t}var eV=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function tV(t){return new Proxy(t,{get(e,r,n){var i=Reflect.get(e,r,n);return eV.has(r)?function(...a){mM();var s=i.apply(this,a);return Np(),s}:i}})}function wM(){let t=Array.prototype,e=Array.__svelte_cleanup;e&&e();let{indexOf:r,lastIndexOf:n,includes:i}=t;t.indexOf=function(a,s){let o=r.call(this,a,s);if(o===-1){for(let l=s!=null?s:0;l<this.length;l+=1)if(Wp(this[l])===a){Ap("array.indexOf(...)");break}}return o},t.lastIndexOf=function(a,s){let o=n.call(this,a,s!=null?s:this.length-1);if(o===-1){for(let l=0;l<=(s!=null?s:this.length-1);l+=1)if(Wp(this[l])===a){Ap("array.lastIndexOf(...)");break}}return o},t.includes=function(a,s){let o=i.call(this,a,s);if(!o){for(let l=0;l<this.length;l+=1)if(Wp(this[l])===a){Ap("array.includes(...)");break}}return o},Array.__svelte_cleanup=()=>{t.indexOf=r,t.lastIndexOf=n,t.includes=i}}var By,yM,Zu,bM,_M;function Yp(){if(By===void 0){By=window,yM=document,Zu=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;bM=$r(e,"firstChild").get,_M=$r(e,"nextSibling").get,vy(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),vy(r)&&(r.__t=void 0),L&&(t.__svelte_meta=null,wM())}}function Pt(t=""){return document.createTextNode(t)}function Kt(t){return bM.call(t)}function Yt(t){return _M.call(t)}function q(t,e){if(!ie)return Kt(t);var r=Kt(ge);if(r===null)r=ge.appendChild(Pt());else if(e&&r.nodeType!==Wu){var n=Pt();return r==null||r.before(n),We(n),n}return We(r),r}function qr(t,e=!1){var i,a;if(!ie){var r=Kt(t);return r instanceof Comment&&r.data===""?Yt(r):r}if(e&&((i=ge)==null?void 0:i.nodeType)!==Wu){var n=Pt();return(a=ge)==null||a.before(n),We(n),n}return ge}function te(t,e=1,r=!1){let n=ie?ge:t;for(var i;e--;)i=n,n=Yt(n);if(!ie)return n;if(r&&(n==null?void 0:n.nodeType)!==Wu){var a=Pt();return n===null?i==null||i.after(a):n.before(a),We(a),a}return We(n),n}function ec(t){t.textContent=""}function Xp(){if(!nr||Lr!==null)return!1;var t=ne.f;return(t&32768)!==0}p();p();function Hy(t){ie&&Kt(t)!==null&&ec(t)}var xM=!1;function Uy(){xM||(xM=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(let r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function Yn(t){var e=oe,r=ne;bt(null),Bt(null);try{return t()}finally{bt(e),Bt(r)}}function Gy(t,e,r,n=r){t.addEventListener(e,()=>Yn(r));let i=t.__on_r;i?t.__on_r=()=>{i(),n(!0)}:t.__on_r=()=>n(!0),Uy()}function SM(t){ne===null&&(oe===null&&NO(t),LO()),An&&DO(t)}function nV(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function Ii(t,e,r){var o;var n=ne;if(L)for(;n!==null&&n.f&131072;)n=n.parent;n!==null&&n.f&8192&&(t|=8192);var i={ctx:_e,deps:null,nodes:null,f:t|2048|512,first:null,fn:e,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,wv:0,ac:null};if(L&&(i.component_function=jn),r)try{Za(i),i.f|=32768}catch(l){throw dt(i),l}else e!==null&&tn(i);var a=i;if(r&&a.deps===null&&a.teardown===null&&a.nodes===null&&a.first===a.last&&!(a.f&524288)&&(a=a.first,t&16&&t&65536&&a!==null&&(a.f|=65536)),a!==null&&(a.parent=n,n!==null&&nV(a,n),oe!==null&&oe.f&2&&!(t&64))){var s=oe;((o=s.effects)!=null?o:s.effects=[]).push(a)}return i}function Xa(){return oe!==null&&!Gr}function ar(t){let e=Ii(8,null,!1);return Ye(e,1024),e.teardown=t,e}function sr(t){var i;SM("$effect"),L&&er(t,"name",{value:"$effect"});var e=ne.f,r=!oe&&(e&32)!==0&&(e&32768)===0;if(r){var n=_e;((i=n.e)!=null?i:n.e=[]).push(t)}else return xy(t)}function xy(t){return Ii(1048580,t,!1)}function qy(t){vr.ensure();let e=Ii(524352,t,!0);return()=>{dt(e)}}function EM(t){vr.ensure();let e=Ii(524352,t,!0);return(r={})=>new Promise(n=>{r.outro?Ri(e,()=>{dt(e),n(void 0)}):(dt(e),n(void 0))})}function zr(t){return Ii(4,t,!1)}function pM(t){return Ii(4718592,t,!0)}function Zt(t,e=0){return Ii(8|e,t,!0)}function Ne(t,e=[],r=[],n=[]){jp(n,e,r,i=>{Ii(8,()=>t(...i.map(R)),!0)})}function nn(t,e=0){var r=Ii(16|e,t,!0);return L&&(r.dev_stack=xi),r}function Nt(t){return Ii(524320,t,!0)}function zy(t){var e=t.teardown;if(e!==null){let r=An,n=oe;jy(!0),bt(null);try{e.call(null)}finally{jy(r),bt(n)}}}function Vy(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){let i=r.ac;i!==null&&Yn(()=>{i.abort(bi)});var n=r.next;r.f&64?r.parent=null:dt(r,e),r=n}}function kM(t){for(var e=t.first;e!==null;){var r=e.next;e.f&32||dt(e),e=r}}function dt(t,e=!0){var r=!1;(e||t.f&262144)&&t.nodes!==null&&t.nodes.end!==null&&(AM(t.nodes.start,t.nodes.end),r=!0),Vy(t,e&&!r),sf(t,0),Ye(t,16384);var n=t.nodes&&t.nodes.t;if(n!==null)for(let a of n)a.stop();zy(t);var i=t.parent;i!==null&&i.first!==null&&Cy(t),L&&(t.component_function=null),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function AM(t,e){for(;t!==null;){var r=t===e?null:Yt(t);t.remove(),t=r}}function Cy(t){var e=t.parent,r=t.prev,n=t.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),e!==null&&(e.first===t&&(e.first=n),e.last===t&&(e.last=r))}function Ri(t,e,r=!0){var n=[];TM(t,n,!0);var i=()=>{r&&dt(t),e&&e()},a=n.length;if(a>0){var s=()=>--a||i();for(var o of n)o.out(s)}else i()}function TM(t,e,r){if(!(t.f&8192)){t.f^=8192;var n=t.nodes&&t.nodes.t;if(n!==null)for(let o of n)(o.is_global||r)&&e.push(o);for(var i=t.first;i!==null;){var a=i.next,s=(i.f&65536)!==0||(i.f&32)!==0&&(t.f&16)!==0;TM(i,e,s?r:!1),i=a}}}function af(t){CM(t,!0)}function CM(t,e){if(t.f&8192){t.f^=8192,t.f&1024||(Ye(t,2048),tn(t));for(var r=t.first;r!==null;){var n=r.next,i=(r.f&65536)!==0||(r.f&32)!==0;CM(r,i?e:!1),r=n}var a=t.nodes&&t.nodes.t;if(a!==null)for(let s of a)(s.is_global||e)&&s.in()}}function Gp(t,e){if(t.nodes)for(var r=t.nodes.start,n=t.nodes.end;r!==null;){var i=r===n?null:Yt(r);e.append(r),r=i}}p();var PM=null;var ia=!1;function Yl(t){ia=t}var An=!1;function jy(t){An=t}var oe=null,Gr=!1;function bt(t){oe=t}var ne=null;function Bt(t){ne=t}var jr=null;function Vp(t){oe!==null&&(!nr||oe.f&2)&&(jr===null?jr=[t]:jr.push(t))}var wr=null,sn=0,an=null;function vM(t){an=t}var RM=1,of=0,Qa=of;function Ny(t){Qa=t}function Zl(){return++RM}function Ka(t){var e=t.f;if(e&2048)return!0;if(e&2&&(t.f&=-32769),e&4096){for(var r=t.deps,n=r.length,i=0;i<n;i++){var a=r[i];if(Ka(a)&&Dy(a),a.wv>t.wv)return!0}e&512&&Ct===null&&Ye(t,1024)}return!1}function IM(t,e,r=!0){var n=t.reactions;if(n!==null&&!(!nr&&(jr!=null&&jr.includes(t))))for(var i=0;i<n.length;i++){var a=n[i];a.f&2?IM(a,e,!1):e===a&&(r?Ye(a,2048):a.f&1024&&Ye(a,4096),tn(a))}}function zp(t){var m,g;var e=wr,r=sn,n=an,i=oe,a=jr,s=_e,o=Gr,l=Qa,c=t.f;wr=null,sn=0,an=null,oe=c&96?null:t,jr=null,na(t.ctx),Gr=!1,Qa=++of,t.ac!==null&&(Yn(()=>{t.ac.abort(bi)}),t.ac=null);try{t.f|=2097152;var u=t.fn,f=u(),d=t.deps;if(wr!==null){var h;if(sf(t,sn),d!==null&&sn>0)for(d.length=sn+wr.length,h=0;h<wr.length;h++)d[sn+h]=wr[h];else t.deps=d=wr;if(Xa()&&t.f&512)for(h=sn;h<d.length;h++)((g=(m=d[h]).reactions)!=null?g:m.reactions=[]).push(t)}else d!==null&&sn<d.length&&(sf(t,sn),d.length=sn);if(Si()&&an!==null&&!Gr&&d!==null&&!(t.f&6146))for(h=0;h<an.length;h++)IM(an[h],t);return i!==null&&i!==t&&(of++,an!==null&&(n===null?n=an:n.push(...an))),t.f&8388608&&(t.f^=8388608),f}catch(v){return Fp(v)}finally{t.f^=2097152,wr=e,sn=r,an=n,oe=i,jr=a,na(s),Gr=o,Qa=l}}function iV(t,e){let r=e.reactions;if(r!==null){var n=IO.call(r,t);if(n!==-1){var i=r.length-1;i===0?r=e.reactions=null:(r[n]=r[i],r.pop())}}if(r===null&&e.f&2&&(wr===null||!wr.includes(e))){var a=e;a.f&512&&(a.f^=512,a.f&=-32769),Hl(a),qp(a),sf(a,0)}}function sf(t,e){var r=t.deps;if(r!==null)for(var n=e;n<r.length;n++)iV(t,r[n])}function Za(t){var l;var e=t.f;if(!(e&16384)){Ye(t,1024);var r=ne,n=ia;if(ne=t,ia=!0,L){var i=jn;Ip(t.component_function);var a=xi;Nl((l=t.dev_stack)!=null?l:xi)}try{e&16777232?kM(t):Vy(t),zy(t);var s=zp(t);if(t.teardown=typeof s=="function"?s:null,t.wv=RM,L&&Gn&&t.f&2048&&t.deps!==null)for(var o of t.deps)o.set_during_effect&&(o.wv=Zl(),o.set_during_effect=!1)}finally{ia=n,ne=r,L&&(Ip(i),Nl(a))}}}async function Zp(){if(nr)return new Promise(t=>{requestAnimationFrame(()=>t()),setTimeout(()=>t())});await Promise.resolve(),Zs()}function R(t){var h,m,g;var e=t.f,r=(e&2)!==0;if((h=PM)==null||h.add(t),oe!==null&&!Gr){var n=ne!==null&&(ne.f&16384)!==0;if(!n&&!(jr!=null&&jr.includes(t))){var i=oe.deps;if(oe.f&2097152)t.rv<of&&(t.rv=of,wr===null&&i!==null&&i[sn]===t?sn++:wr===null?wr=[t]:wr.includes(t)||wr.push(t));else{((m=oe.deps)!=null?m:oe.deps=[]).push(t);var a=t.reactions;a===null?t.reactions=[oe]:a.includes(oe)||a.push(oe)}}}if(L&&(rf.delete(t),Gn&&!Gr&&Xu!==null&&oe!==null&&Xu.reaction===oe))if(t.trace)t.trace();else{var s=_i("traced at");if(s){var o=Xu.entries.get(t);o===void 0&&(o={traces:[]},Xu.entries.set(t,o));var l=o.traces[o.traces.length-1];s.stack!==(l==null?void 0:l.stack)&&o.traces.push(s)}}if(An&&Ai.has(t))return Ai.get(t);if(r){var c=t;if(An){var u=c.v;return(!(c.f&1024)&&c.reactions!==null||$M(c))&&(u=nf(c)),Ai.set(c,u),u}var f=(c.f&512)===0&&!Gr&&oe!==null&&(ia||(oe.f&512)!==0),d=c.deps===null;Ka(c)&&(f&&(c.f|=512),Dy(c)),f&&!d&&FM(c)}if((g=Ct)!=null&&g.has(t))return Ct.get(t);if(t.f&8388608)throw t.v;return t.v}function FM(t){var e;if(t.deps!==null){t.f|=512;for(let r of t.deps)((e=r.reactions)!=null?e:r.reactions=[]).push(t),r.f&2&&!(r.f&512)&&FM(r)}}function $M(t){if(t.v===Je)return!0;if(t.deps===null)return!1;for(let e of t.deps)if(Ai.has(e)||e.f&2&&$M(e))return!0;return!1}function je(t){var e=Gr;try{return Gr=!0,t()}finally{Gr=e}}p();p();p();var Yy=new Set,Kp=new Set;function MM(t,e,r,n={}){function i(a){if(n.capture||tc.call(e,a),!a.cancelBubble)return Yn(()=>r==null?void 0:r.call(this,a))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Lt(()=>{e.addEventListener(t,i,n)}):e.addEventListener(t,i,n),i}function on(t,e,r,n,i){var a={capture:n,passive:i},s=MM(t,e,r,a);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&ar(()=>{e.removeEventListener(t,s,a)})}function Et(t){for(var e=0;e<t.length;e++)Yy.add(t[e]);for(var r of Kp)r(t)}var OM=null;function tc(t){var v;var e=this,r=e.ownerDocument,n=t.type,i=((v=t.composedPath)==null?void 0:v.call(t))||[],a=i[0]||t.target;OM=t;var s=0,o=OM===t&&t.__root;if(o){var l=i.indexOf(o);if(l!==-1&&(e===document||e===window)){t.__root=e;return}var c=i.indexOf(e);if(c===-1)return;l<=c&&(s=l)}if(a=i[s]||t.target,a!==e){er(t,"currentTarget",{configurable:!0,get(){return a||r}});var u=oe,f=ne;bt(null),Bt(null);try{for(var d,h=[];a!==null;){var m=a.assignedSlot||a.parentNode||a.host||null;try{var g=a["__"+n];g!=null&&(!a.disabled||t.target===a)&&g.call(a,t)}catch(w){d?h.push(w):d=w}if(t.cancelBubble||m===e||m===null)break;a=m}if(d){for(let w of h)queueMicrotask(()=>{throw w});throw d}}finally{t.__root=e,delete t.currentTarget,bt(u),Bt(f)}}}p();p();function Jp(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Fi(t,e){var r=ne;r.nodes===null&&(r.nodes={start:t,end:e,a:null,t:null})}function ue(t,e){var r=(e&1)!==0,n=(e&2)!==0,i,a=!t.startsWith("<!>");return()=>{if(ie)return Fi(ge,null),ge;i===void 0&&(i=Jp(a?t:"<!>"+t),r||(i=Kt(i)));var s=n||Zu?document.importNode(i,!0):i.cloneNode(!0);if(r){var o=Kt(s),l=s.lastChild;Fi(o,l)}else Fi(s,s);return s}}function ca(){if(ie)return Fi(ge,null),ge;var t=document.createDocumentFragment(),e=document.createComment(""),r=Pt();return t.append(e,r),Fi(e,r),t}function se(t,e){if(ie){var r=ne;(!(r.f&32768)||r.nodes.end===null)&&(r.nodes.end=ge),rr();return}t!==null&&t.before(e)}p();var lV=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","webkitdirectory","defer","disablepictureinpicture","disableremoteplayback"];var ple=[...lV,"formNoValidate","isMap","noModule","playsInline","readOnly","value","volume","defaultValue","defaultChecked","srcObject","noValidate","allowFullscreen","disablePictureInPicture","disableRemotePlayback"];var cV=["touchstart","touchmove"];function LM(t){return cV.includes(t)}var uV=["$state","$state.raw","$derived","$derived.by"],mle=[...uV,"$state.eager","$state.snapshot","$props","$props.id","$bindable","$effect","$effect.pre","$effect.tracking","$effect.root","$effect.pending","$inspect","$inspect().with","$inspect.trace","$host"];var Qp=!0;function Ue(t,e){var n;var r=e==null?"":typeof e=="object"?e+"":e;r!==((n=t.__t)!=null?n:t.__t=t.nodeValue)&&(t.__t=r,t.nodeValue=r+"")}function es(t,e){return NM(t,e)}function Zy(t,e){var s;Yp(),e.intro=(s=e.intro)!=null?s:!1;let r=e.target,n=ie,i=ge;try{for(var a=Kt(r);a&&(a.nodeType!==Mr||a.data!==zu);)a=Yt(a);if(!a)throw ea;Wt(!0),We(a);let o=NM(t,{...e,anchor:a});return Wt(!1),o}catch(o){if(o instanceof Error&&o.message.split(`
`).some(l=>l.startsWith("https://svelte.dev/e/")))throw o;return o!==ea&&console.warn("Failed to hydrate: ",o),e.recover===!1&&HO(),Yp(),ec(r),Wt(!1),es(t,e)}finally{Wt(n),We(i)}}var rc=new Map;function NM(t,{target:e,anchor:r,props:n={},events:i,context:a,intro:s=!0}){Yp();var o=new Set,l=f=>{for(var d=0;d<f.length;d++){var h=f[d];if(!o.has(h)){o.add(h);var m=LM(h);e.addEventListener(h,tc,{passive:m});var g=rc.get(h);g===void 0?(document.addEventListener(h,tc,{passive:m}),rc.set(h,1)):rc.set(h,g+1)}}};l(Dl(Yy)),Kp.add(l);var c=void 0,u=EM(()=>{var f=r!=null?r:e.appendChild(Pt());return Fy(f,{pending:()=>{}},d=>{if(a){st({});var h=_e;h.c=a}if(i&&(n.$$events=i),ie&&Fi(d,null),Qp=s,c=t(d,n)||{},Qp=!0,ie&&(ne.nodes.end=ge,ge===null||ge.nodeType!==Mr||ge.data!==js))throw qs(),ea;a&&ot()}),()=>{var m;for(var d of o){e.removeEventListener(d,tc);var h=rc.get(d);--h===0?(document.removeEventListener(d,tc),rc.delete(d)):rc.set(d,h)}Kp.delete(l),f!==r&&((m=f.parentNode)==null||m.removeChild(f))}});return Xy.set(c,u),c}var Xy=new WeakMap;function ua(t,e){let r=Xy.get(t);return r?(Xy.delete(t),r(e)):(L&&(tr in t?ZO():XO()),Promise.resolve())}p();p();p();var Xn,$i,ln,so,lf,cf,em,fa=class{constructor(e,r=!0){ze(this,"anchor");ve(this,Xn,new Map);ve(this,$i,new Map);ve(this,ln,new Map);ve(this,so,new Set);ve(this,lf,!0);ve(this,cf,()=>{var e=ye;if(F(this,Xn).has(e)){var r=F(this,Xn).get(e),n=F(this,$i).get(r);if(n)af(n),F(this,so).delete(r);else{var i=F(this,ln).get(r);i&&(F(this,$i).set(r,i.effect),F(this,ln).delete(r),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),n=i.effect)}for(let[a,s]of F(this,Xn)){if(F(this,Xn).delete(a),a===e)break;let o=F(this,ln).get(s);o&&(dt(o.effect),F(this,ln).delete(s))}for(let[a,s]of F(this,$i)){if(a===r||F(this,so).has(a))continue;let o=()=>{if(Array.from(F(this,Xn).values()).includes(a)){var c=document.createDocumentFragment();Gp(s,c),c.append(Pt()),F(this,ln).set(a,{effect:s,fragment:c})}else dt(s);F(this,so).delete(a),F(this,$i).delete(a)};F(this,lf)||!n?(F(this,so).add(a),Ri(s,o,!1)):o()}}});ve(this,em,e=>{F(this,Xn).delete(e);let r=Array.from(F(this,Xn).values());for(let[n,i]of F(this,ln))r.includes(n)||(dt(i.effect),F(this,ln).delete(n))});this.anchor=e,me(this,lf,r)}ensure(e,r){var n=ye,i=Xp();if(r&&!F(this,$i).has(e)&&!F(this,ln).has(e))if(i){var a=document.createDocumentFragment(),s=Pt();a.append(s),F(this,ln).set(e,{effect:Nt(()=>r(s)),fragment:a})}else F(this,$i).set(e,Nt(()=>r(this.anchor)));if(F(this,Xn).set(n,e),i){for(let[o,l]of F(this,$i))o===e?n.skipped_effects.delete(l):n.skipped_effects.add(l);for(let[o,l]of F(this,ln))o===e?n.skipped_effects.delete(l.effect):n.skipped_effects.add(l.effect);n.oncommit(F(this,cf)),n.ondiscard(F(this,em))}else ie&&(this.anchor=ge),F(this,cf).call(this)}};Xn=new WeakMap,$i=new WeakMap,ln=new WeakMap,so=new WeakMap,lf=new WeakMap,cf=new WeakMap,em=new WeakMap;if(L){let t=function(e){if(!(e in globalThis)){let r;Object.defineProperty(globalThis,e,{configurable:!0,get:()=>{if(r!==void 0)return r;GO(e)},set:n=>{r=n}})}};t("$state"),t("$effect"),t("$derived"),t("$inspect"),t("$props"),t("$bindable")}function Ky(t){_e===null&&Yu("onMount"),ra&&_e.l!==null?hV(_e).m.push(t):sr(()=>{let e=je(t);if(typeof e=="function")return e})}function HM(t){_e===null&&Yu("onDestroy"),Ky(()=>()=>je(t))}function hV(t){var r;var e=t.l;return(r=e.u)!=null?r:e.u={a:[],b:[],m:[]}}p();p();var GM=new Map;function jM(t,e){var r=GM.get(t);r||(r=new Set,GM.set(t,r)),r.add(e)}p();p();p();p();p();p();p();p();p();function ke(t,e,r=!1){ie&&rr();var n=new fa(t),i=r?65536:0;function a(s,o){if(ie){let c=Tp(t)===wi;if(s===c){var l=ta();We(l),n.anchor=l,Wt(!1),n.ensure(s,o),Wt(!0);return}}n.ensure(s,o)}nn(()=>{var s=!1;e((o,l=!0)=>{s=!0,a(l,o)}),s||a(!1,null)},i)}p();p();p();function cn(t,e){return e}function bV(t,e,r){var f;for(var n=[],i=e.length,a,s=e.length,o=0;o<i;o++){let d=e[o];Ri(d,()=>{if(a){if(a.pending.delete(d),a.done.add(d),a.pending.size===0){var h=t.outrogroups;Jy(Dl(a.done)),h.delete(a),h.size===0&&(t.outrogroups=null)}}else s-=1},!1)}if(s===0){var l=n.length===0&&r!==null;if(l){var c=r,u=c.parentNode;ec(u),u.append(c),t.items.clear()}Jy(e,!l)}else a={pending:new Set(e),done:new Set},((f=t.outrogroups)!=null?f:t.outrogroups=new Set).add(a)}function Jy(t,e=!0){for(var r=0;r<t.length;r++)dt(t[r],e)}var nc;function un(t,e,r,n,i,a=null){var s=t,o=new Map,l=(e&4)!==0;if(l){var c=t;s=ie?We(Kt(c)):c.appendChild(Pt())}ie&&rr();var u=null,f=ro(()=>{var w=r();return yi(w)?w:w==null?[]:Dl(w)}),d,h=!0;function m(){v.fallback=u,_V(v,d,s,e,n),u!==null&&(d.length===0?u.f&33554432?(u.f^=33554432,uf(u,null,s)):af(u):Ri(u,()=>{u=null}))}var g=nn(()=>{d=R(f);var w=d.length;let b=!1;if(ie){var k=Tp(s)===wi;k!==(w===0)&&(s=ta(),We(s),Wt(!1),b=!0)}for(var E=new Set,S=ye,A=Xp(),y=0;y<w;y+=1){ie&&ge.nodeType===Mr&&ge.data===js&&(s=ge,b=!0,Wt(!1));var x=d[y],_=n(x,y),T=h?null:o.get(_);T?(T.v&&Wn(T.v,x),T.i&&Wn(T.i,y),A&&S.skipped_effects.delete(T.e)):(T=xV(o,h?s:nc!=null?nc:nc=Pt(),x,_,y,i,e,r),h||(T.e.f|=33554432),o.set(_,T)),E.add(_)}if(w===0&&a&&!u&&(h?u=Nt(()=>a(s)):(u=Nt(()=>a(nc!=null?nc:nc=Pt())),u.f|=33554432)),ie&&w>0&&We(ta()),!h)if(A){for(let[P,D]of o)E.has(P)||S.skipped_effects.add(D.e);S.oncommit(m),S.ondiscard(()=>{})}else m();b&&Wt(!0),R(f)}),v={effect:g,flags:e,items:o,outrogroups:null,fallback:u};h=!1,ie&&(s=ge)}function _V(t,e,r,n,i){var T,P,D,B,N,le,Ae,we,fe;var a=(n&8)!==0,s=e.length,o=t.items,l=t.effect.first,c,u=null,f,d=[],h=[],m,g,v,w;if(a)for(w=0;w<s;w+=1)m=e[w],g=i(m,w),v=o.get(g).e,v.f&33554432||((P=(T=v.nodes)==null?void 0:T.a)==null||P.measure(),(f!=null?f:f=new Set).add(v));for(w=0;w<s;w+=1){if(m=e[w],g=i(m,w),v=o.get(g).e,t.outrogroups!==null)for(let Ie of t.outrogroups)Ie.pending.delete(v),Ie.done.delete(v);if(v.f&33554432)if(v.f^=33554432,v===l)uf(v,null,r);else{var b=u?u.next:l;v===t.effect.last&&(t.effect.last=v.prev),v.prev&&(v.prev.next=v.next),v.next&&(v.next.prev=v.prev),ts(t,u,v),ts(t,v,b),uf(v,b,r),u=v,d=[],h=[],l=u.next;continue}if(v.f&8192&&(af(v),a&&((B=(D=v.nodes)==null?void 0:D.a)==null||B.unfix(),(f!=null?f:f=new Set).delete(v))),v!==l){if(c!==void 0&&c.has(v)){if(d.length<h.length){var k=h[0],E;u=k.prev;var S=d[0],A=d[d.length-1];for(E=0;E<d.length;E+=1)uf(d[E],k,r);for(E=0;E<h.length;E+=1)c.delete(h[E]);ts(t,S.prev,A.next),ts(t,u,S),ts(t,A,k),l=k,u=A,w-=1,d=[],h=[]}else c.delete(v),uf(v,l,r),ts(t,v.prev,v.next),ts(t,v,u===null?t.effect.first:u.next),ts(t,u,v),u=v;continue}for(d=[],h=[];l!==null&&l!==v;)(c!=null?c:c=new Set).add(l),h.push(l),l=l.next;if(l===null)continue}v.f&33554432||d.push(v),u=v,l=v.next}if(t.outrogroups!==null){for(let Ie of t.outrogroups)Ie.pending.size===0&&(Jy(Dl(Ie.done)),(N=t.outrogroups)==null||N.delete(Ie));t.outrogroups.size===0&&(t.outrogroups=null)}if(l!==null||c!==void 0){var y=[];if(c!==void 0)for(v of c)v.f&8192||y.push(v);for(;l!==null;)!(l.f&8192)&&l!==t.fallback&&y.push(l),l=l.next;var x=y.length;if(x>0){var _=n&4&&s===0?r:null;if(a){for(w=0;w<x;w+=1)(Ae=(le=y[w].nodes)==null?void 0:le.a)==null||Ae.measure();for(w=0;w<x;w+=1)(fe=(we=y[w].nodes)==null?void 0:we.a)==null||fe.fix()}bV(t,y,_)}}a&&Lt(()=>{var Ie,ce;if(f!==void 0)for(v of f)(ce=(Ie=v.nodes)==null?void 0:Ie.a)==null||ce.apply()})}function xV(t,e,r,n,i,a,s,o){var l=s&1?s&16?ir(r):io(r,!1,!1):null,c=s&2?ir(i):null;return L&&l&&(l.trace=()=>{var u;o()[(u=c==null?void 0:c.v)!=null?u:i]}),{v:l,i:c,e:Nt(()=>(a(e,l!=null?l:r,c!=null?c:i,o),()=>{t.delete(n)}))}}function uf(t,e,r){if(t.nodes)for(var n=t.nodes.start,i=t.nodes.end,a=e&&!(e.f&33554432)?e.nodes.start:r;n!==null;){var s=Yt(n);if(a.before(n),n===i)return;n=s}}function ts(t,e,r){e===null?t.effect.first=r:e.next=r,r===null?t.effect.last=e:r.prev=e}p();p();p();p();p();p();p();var SV=xp?()=>performance.now():()=>Date.now(),Zn={tick:t=>(xp?requestAnimationFrame:Or)(t),now:()=>SV(),tasks:new Set};function zM(){let t=Zn.now();Zn.tasks.forEach(e=>{e.c(t)||(Zn.tasks.delete(e),e.f())}),Zn.tasks.size!==0&&Zn.tick(zM)}function VM(t){let e;return Zn.tasks.size===0&&Zn.tick(zM),{promise:new Promise(r=>{Zn.tasks.add(e={c:t,f:r})}),abort(){Zn.tasks.delete(e)}}}function tm(t,e){Yn(()=>{t.dispatchEvent(new CustomEvent(e))})}function TV(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;let e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function WM(t){let e={},r=t.split(";");for(let n of r){let[i,a]=n.split(":");if(!i||a===void 0)break;let s=TV(i.trim());e[s]=a.trim()}return e}var CV=t=>t;function Kn(t,e,r,n){var k,E;var i=(t&1)!==0,a=(t&2)!==0,s=i&&a,o=(t&4)!==0,l=s?"both":i?"in":"out",c,u=e.inert,f=e.style.overflow,d,h;function m(){return Yn(()=>{var S;return c!=null?c:c=r()(e,(S=n==null?void 0:n())!=null?S:{},{direction:l})})}var g={is_global:o,in(){var S;if(e.inert=u,!i){h==null||h.abort(),(S=h==null?void 0:h.reset)==null||S.call(h);return}a||d==null||d.abort(),tm(e,"introstart"),d=Qy(e,m(),h,1,()=>{tm(e,"introend"),d==null||d.abort(),d=c=void 0,e.style.overflow=f})},out(S){if(!a){S==null||S(),c=void 0;return}e.inert=!0,tm(e,"outrostart"),h=Qy(e,m(),d,0,()=>{tm(e,"outroend"),S==null||S()})},stop:()=>{d==null||d.abort(),h==null||h.abort()}},v=ne;if(((E=(k=v.nodes).t)!=null?E:k.t=[]).push(g),i&&Qp){var w=o;if(!w){for(var b=v.parent;b&&b.f&65536;)for(;(b=b.parent)&&!(b.f&16););w=!b||(b.f&32768)!==0}w&&zr(()=>{je(()=>g.in())})}}function Qy(t,e,r,n,i){var a=n===1;if(wy(e)){var s,o=!1;return Lt(()=>{if(!o){var v=e({direction:a?"in":"out"});s=Qy(t,v,r,n,i)}}),{abort:()=>{o=!0,s==null||s.abort()},deactivate:()=>s.deactivate(),reset:()=>s.reset(),t:()=>s.t()}}if(r==null||r.deactivate(),!(e!=null&&e.duration))return i(),{abort:Or,deactivate:Or,reset:Or,t:()=>n};let{delay:l=0,css:c,tick:u,easing:f=CV}=e;var d=[];if(a&&r===void 0&&(u&&u(0,1),c)){var h=WM(c(0,1));d.push(h,h)}var m=()=>1-n,g=t.animate(d,{duration:l,fill:"forwards"});return g.onfinish=()=>{var _;g.cancel();var v=(_=r==null?void 0:r.t())!=null?_:1-n;r==null||r.abort();var w=n-v,b=e.duration*Math.abs(w),k=[];if(b>0){var E=!1;if(c)for(var S=Math.ceil(b/16.666666666666668),A=0;A<=S;A+=1){var y=v+w*f(A/S),x=WM(c(y,1-y));k.push(x),E||(E=x.overflow==="hidden")}E&&(t.style.overflow="hidden"),m=()=>{var T=g.currentTime;return v+w*f(T/b)},u&&VM(()=>{if(g.playState!=="running")return!1;var T=m();return u(T,1-T),!0})}g=t.animate(k,{duration:b,fill:"forwards"}),g.onfinish=()=>{m=()=>n,u==null||u(n,1-n),i()}},{abort:()=>{g&&(g.cancel(),g.effect=null,g.onfinish=Or)},deactivate:()=>{i=Or},reset:()=>{n===0&&(u==null||u(1,0))},t:()=>m()}}p();p();function Jn(t,e){zr(()=>{var i;var r=t.getRootNode(),n=r.host?r:(i=r.head)!=null?i:r.ownerDocument.head;if(!n.querySelector("#"+e.hash)){let a=document.createElement("style");a.id=e.hash,a.textContent=e.code,n.appendChild(a),L&&jM(e.hash,a)}})}p();p();p();p();p();p();var XM=[...` 	
\r\f\xA0\v\uFEFF`];function ZM(t,e,r){var n=t==null?"":""+t;if(e&&(n=n?n+" "+e:e),r){for(var i in r)if(r[i])n=n?n+" "+i:i;else if(n.length)for(var a=i.length,s=0;(s=n.indexOf(i,s))>=0;){var o=s+a;(s===0||XM.includes(n[s-1]))&&(o===n.length||XM.includes(n[o]))?n=(s===0?"":n.substring(0,s))+n.substring(o+1):s=o}}return n===""?null:n}p();function ht(t,e,r,n,i,a){var s=t.__className;if(ie||s!==r||s===void 0){var o=ZM(r,n,a);(!ie||o!==t.getAttribute("class"))&&(o==null?t.removeAttribute("class"):e?t.className=o:t.setAttribute("class",o)),t.__className=r}else if(a&&i!==a)for(var l in a){var c=!!a[l];(i==null||c!==!!i[l])&&t.classList.toggle(l,c)}return a}p();p();var LV=Symbol("class"),NV=Symbol("style"),BV=Symbol("is custom element"),HV=Symbol("is html");function be(t,e,r,n){var i=UV(t);if(ie&&(i[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")){n||jV(t,e,r!=null?r:"");return}i[e]!==(i[e]=r)&&(e==="loading"&&(t[$O]=r),r==null?t.removeAttribute(e):typeof r!="string"&&GV(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function UV(t){var e;return(e=t.__attributes)!=null?e:t.__attributes={[BV]:t.nodeName.includes("-"),[HV]:t.namespaceURI===RO}}var KM=new Map;function GV(t){var e=t.getAttribute("is")||t.nodeName,r=KM.get(e);if(r)return r;KM.set(e,r=[]);for(var n,i=t,a=Element.prototype;a!==i;){n=my(i);for(var s in n)n[s].set&&r.push(s);i=Ll(i)}return r}function jV(t,e,r){var n;L&&(e==="srcset"&&qV(t,r)||eb((n=t.getAttribute(e))!=null?n:"",r)||YO(e,t.outerHTML.replace(t.innerHTML,t.innerHTML&&"..."),String(r)))}function eb(t,e){return t===e?!0:new URL(t,document.baseURI).href===new URL(e,document.baseURI).href}function JM(t){return t.split(",").map(e=>e.trim().split(" ").filter(Boolean))}function qV(t,e){var r=JM(t.srcset),n=JM(e);return n.length===r.length&&n.every(([i,a],s)=>a===r[s][1]&&(eb(r[s][0],i)||eb(i,r[s][0])))}p();p();function nb(t,e,r=e){var n=new WeakSet;Gy(t,"input",async i=>{L&&t.type==="checkbox"&&yy();var a=i?t.defaultValue:t.value;if(a=tb(t)?rb(a):a,r(a),ye!==null&&n.add(ye),await Zp(),a!==(a=e())){var s=t.selectionStart,o=t.selectionEnd,l=t.value.length;if(t.value=a!=null?a:"",o!==null){var c=t.value.length;s===o&&o===l&&c>l?(t.selectionStart=c,t.selectionEnd=c):(t.selectionStart=s,t.selectionEnd=Math.min(o,c))}}}),(ie&&t.defaultValue!==t.value||je(e)==null&&t.value)&&(r(tb(t)?rb(t.value):t.value),ye!==null&&n.add(ye)),Zt(()=>{var s;L&&t.type==="checkbox"&&yy();var i=e();if(t===document.activeElement){var a=(s=Gl)!=null?s:ye;if(n.has(a))return}tb(t)&&i===rb(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i!=null?i:"")})}function tb(t){var e=t.type;return e==="number"||e==="range"}function rb(t){return t===""?null:+t}p();p();p();p();p();function QM(t,e){return t===e||(t==null?void 0:t[tr])===e}function it(t={},e,r,n){return zr(()=>{var i,a;return Zt(()=>{i=a,a=(n==null?void 0:n())||[],je(()=>{t!==r(...a)&&(e(t,...a),i&&QM(r(...i),t)&&e(null,...i))})}),()=>{Lt(()=>{a&&QM(r(...a),t)&&e(null,...a)})}}),t}p();p();p();p();p();p();p();p();p();var nm=!1,Ame=Symbol();function ab(t){var e=nm;try{return nm=!1,[t(),nm]}finally{nm=e}}function Tn(t,e,r,n){var k,E;var i=!ra||(r&2)!==0,a=(r&8)!==0,s=(r&16)!==0,o=n,l=!0,c=()=>(l&&(l=!1,o=s?je(n):n),o),u;if(a){var f=tr in t||Vu in t;u=(E=(k=$r(t,e))==null?void 0:k.set)!=null?E:f&&e in t?S=>t[e]=S:void 0}var d,h=!1;a?[d,h]=ab(()=>t[e]):d=t[e],d===void 0&&n!==void 0&&(d=c(),u&&(i&&UO(e),u(d)));var m;if(i?m=()=>{var S=t[e];return S===void 0?c():(l=!0,S)}:m=()=>{var S=t[e];return S!==void 0&&(o=void 0),S===void 0?o:S},i&&!(r&4))return m;if(u){var g=t.$$legacy;return function(S,A){return arguments.length>0?((!i||!A||g||h)&&u(A?m():S),S):m()}}var v=!1,w=(r&1?to:ro)(()=>(v=!1,m()));L&&(w.label=e),a&&R(w);var b=ne;return function(S,A){if(arguments.length>0){let y=A?R(w):i&&a?He(S):S;return ae(w,y),v=!0,o!==void 0&&(o=y),S}return An&&v||b.f&16384?w.v:R(w)}}p();p();p();function eD(t){return new sb(t)}var ha,Cn,sb=class{constructor(e){ve(this,ha);ve(this,Cn);var a,s;var r=new Map,n=(o,l)=>{var c=io(l,!1,!1);return r.set(o,c),c};let i=new Proxy({...e.props||{},$$events:{}},{get(o,l){var c;return R((c=r.get(l))!=null?c:n(l,Reflect.get(o,l)))},has(o,l){var c;return l===Vu?!0:(R((c=r.get(l))!=null?c:n(l,Reflect.get(o,l))),Reflect.has(o,l))},set(o,l,c){var u;return ae((u=r.get(l))!=null?u:n(l,c),c),Reflect.set(o,l,c)}});me(this,Cn,(e.hydrate?Zy:es)(e.component,{target:e.target,anchor:e.anchor,props:i,context:e.context,intro:(a=e.intro)!=null?a:!1,recover:e.recover})),!nr&&(!((s=e==null?void 0:e.props)!=null&&s.$$host)||e.sync===!1)&&Zs(),me(this,ha,i.$$events);for(let o of Object.keys(F(this,Cn)))o==="$set"||o==="$destroy"||o==="$on"||er(this,o,{get(){return F(this,Cn)[o]},set(l){F(this,Cn)[o]=l},enumerable:!0});F(this,Cn).$set=o=>{Object.assign(i,o)},F(this,Cn).$destroy=()=>{ua(F(this,Cn))}}$set(e){F(this,Cn).$set(e)}$on(e,r){F(this,ha)[e]=F(this,ha)[e]||[];let n=(...i)=>r.call(this,...i);return F(this,ha)[e].push(n),()=>{F(this,ha)[e]=F(this,ha)[e].filter(i=>i!==n)}}$destroy(){F(this,Cn).$destroy()}};ha=new WeakMap,Cn=new WeakMap;var iW;typeof HTMLElement=="function"&&(iW=class extends HTMLElement{constructor(e,r,n){super();ze(this,"$$ctor");ze(this,"$$s");ze(this,"$$c");ze(this,"$$cn",!1);ze(this,"$$d",{});ze(this,"$$r",!1);ze(this,"$$p_d",{});ze(this,"$$l",{});ze(this,"$$l_u",new Map);ze(this,"$$me");this.$$ctor=e,this.$$s=r,n&&this.attachShadow({mode:"open"})}addEventListener(e,r,n){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(r),this.$$c){let i=this.$$c.$on(e,r);this.$$l_u.set(r,i)}super.addEventListener(e,r,n)}removeEventListener(e,r,n){if(super.removeEventListener(e,r,n),this.$$c){let i=this.$$l_u.get(r);i&&(i(),this.$$l_u.delete(r))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let e=function(i){return a=>{let s=document.createElement("slot");i!=="default"&&(s.name=i),se(a,s)}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;let r={},n=aW(this);for(let i of this.$$s)i in n&&(i==="default"&&!this.$$d.children?(this.$$d.children=e(i),r.default=!0):r[i]=e(i));for(let i of this.attributes){let a=this.$$g_p(i.name);a in this.$$d||(this.$$d[a]=ob(a,i.value,this.$$p_d,"toProp"))}for(let i in this.$$p_d)!(i in this.$$d)&&this[i]!==void 0&&(this.$$d[i]=this[i],delete this[i]);this.$$c=eD({component:this.$$ctor,target:this.shadowRoot||this,props:{...this.$$d,$$slots:r,$$host:this}}),this.$$me=qy(()=>{Zt(()=>{var i;this.$$r=!0;for(let a of py(this.$$c)){if(!((i=this.$$p_d[a])!=null&&i.reflect))continue;this.$$d[a]=this.$$c[a];let s=ob(a,this.$$d[a],this.$$p_d,"toAttribute");s==null?this.removeAttribute(this.$$p_d[a].attribute||a):this.setAttribute(this.$$p_d[a].attribute||a,s)}this.$$r=!1})});for(let i in this.$$l)for(let a of this.$$l[i]){let s=this.$$c.$on(i,a);this.$$l_u.set(a,s)}this.$$l={}}}attributeChangedCallback(e,r,n){var i;this.$$r||(e=this.$$g_p(e),this.$$d[e]=ob(e,n,this.$$p_d,"toProp"),(i=this.$$c)==null||i.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$me(),this.$$c=void 0)})}$$g_p(e){return py(this.$$p_d).find(r=>this.$$p_d[r].attribute===e||!this.$$p_d[r].attribute&&r.toLowerCase()===e)||e}});function ob(t,e,r,n){var a;let i=(a=r[t])==null?void 0:a.type;if(e=i==="Boolean"&&typeof e!="boolean"?e!=null:e,!n||!r[t])return e;if(n==="toAttribute")switch(i){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e==null?null:e;default:return e}else switch(i){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}function aW(t){let e={};return t.childNodes.forEach(r=>{e[r.slot||"default"]=!0}),e}p();p();function oo(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(u){try{c(n.next(u))}catch(f){s(f)}}function l(u){try{c(n.throw(u))}catch(f){s(f)}}function c(u){u.done?a(u.value):i(u.value).then(o,l)}c((n=n.apply(t,e||[])).next())})}var fb=require("obsidian");p();var cb=require("obsidian");p();function sW(t){let e=t-1;return e*e*e+1}var lb=!1;function Mi(t,{delay:e=0,duration:r=400,easing:n=sW,axis:i="y"}={}){let a=getComputedStyle(t);L&&!lb&&/(contents|inline|table)/.test(a.display)&&(lb=!0,Promise.resolve().then(()=>lb=!1),JO(a.display));let s=+a.opacity,o=i==="y"?"height":"width",l=parseFloat(a[o]),c=i==="y"?["top","bottom"]:["left","right"],u=c.map(w=>`${w[0].toUpperCase()}${w.slice(1)}`),f=parseFloat(a[`padding${u[0]}`]),d=parseFloat(a[`padding${u[1]}`]),h=parseFloat(a[`margin${u[0]}`]),m=parseFloat(a[`margin${u[1]}`]),g=parseFloat(a[`border${u[0]}Width`]),v=parseFloat(a[`border${u[1]}Width`]);return{delay:e,duration:r,easing:n,css:w=>`overflow: hidden;opacity: ${Math.min(w*20,1)*s};${o}: ${w*l}px;padding-${c[0]}: ${w*f}px;padding-${c[1]}: ${w*d}px;margin-${c[0]}: ${w*h}px;margin-${c[1]}: ${w*m}px;border-${c[0]}-width: ${w*g}px;border-${c[1]}-width: ${w*v}px;min-${o}: 0`}}p();var im=require("obsidian");var oW=ue('<div data-icon="go-to-file" aria-label="Open File" class="clickable-icon"></div>'),lW=ue('<main class="tree-item nav-file svelte-1c0jiav"><div class="tree-item-self is-clickable nav-file-title svelte-1c0jiav"><div class="tree-item-inner nav-file-title-content"> </div> <div class="git-tools"><div class="buttons"><!></div> <span class="type"> </span></div></div></main>'),cW={hash:"svelte-1c0jiav",code:"main.svelte-1c0jiav .nav-file-title:where(.svelte-1c0jiav) {align-items:center;}"};function ff(t,e){st(e,!0),Jn(t,cW);let r=He([]),n=Ht(()=>e.view.leaf.getRoot().side=="left"?"right":"left");sr(()=>{for(let w of r)w&&(0,im.setIcon)(w,w.getAttr("data-icon"))});function i(w){w.stopPropagation(),ol(e.diff.path)?a(w):s(w)}function a(w){var b;w.stopPropagation();let k=e.view.app.vault.getAbstractFileByPath(e.diff.vaultPath);k instanceof im.TFile&&((b=Dn(e.view.app,w))===null||b===void 0||b.openFile(k).catch(E=>e.view.plugin.displayError(E)))}function s(w){var b;e.view.plugin.tools.openDiff({event:w,aFile:(b=e.diff.fromPath)!==null&&b!==void 0?b:e.diff.path,aRef:`${e.diff.hash}^`,bFile:e.diff.path,bRef:e.diff.hash})}var o=lW();o.__click=i;var l=q(o),c=q(l),u=q(c,!0);G(c);var f=te(c,2),d=q(f),h=q(d);{var m=w=>{var b=oW();b.__click=a,it(b,k=>r[0]=k,()=>r==null?void 0:r[0]),on("auxclick",b,a),se(w,b)};ke(h,w=>{ll(e.diff.vaultPath,e.view.app)&&w(m)})}G(d);var g=te(d,2),v=q(g,!0);G(g),G(f),G(l),G(o),Ne(w=>{be(l,"data-path",e.diff.vaultPath),be(l,"data-tooltip-position",R(n)),be(l,"aria-label",e.diff.vaultPath),Ue(u,w),be(g,"data-type",e.diff.status),Ue(v,e.diff.status)},[()=>pi(e.diff.vaultPath)]),on("auxclick",o,w=>{w.stopPropagation(),w.button==2?hi(e.view.app,w,e.diff.vaultPath,e.view.leaf,"git-history"):i(w)}),se(t,o),ot()}Et(["click"]);p();var uW=ue("<div><!></div>"),fW=ue('<div class="tree-item-children nav-folder-children"><!></div>'),dW=ue('<div><div class="tree-item-self is-clickable nav-folder-title"><div data-icon="folder" style="padding-right: 5px; display: flex; "></div> <div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div> <div class="tree-item-inner nav-folder-title-content svelte-d9h7mp"> </div></div> <!></div>'),hW=ue("<main></main>"),pW={hash:"svelte-d9h7mp",code:"main.svelte-d9h7mp .nav-folder-title-content:where(.svelte-d9h7mp) {display:flex;align-items:center;}"};function df(t,e){st(e,!0),Jn(t,pW);let r=Tn(e,"topLevel",3,!1),n=Tn(e,"closed",15),i=Ht(()=>e.view.leaf.getRoot().side=="left"?"right":"left");function a(l,c){l.stopPropagation(),n(n()[c.path]=!n()[c.path],!0)}var s=hW();let o;un(s,21,()=>e.hierarchy.children,cn,(l,c)=>{var u=ca(),f=qr(u);{var d=m=>{var g=uW(),v=q(g);ff(v,{get diff(){return R(c).data},get view(){return e.view}}),G(g),se(m,g)},h=m=>{var g=dW();let v;var w=q(g);w.__click=x=>a(x,R(c));var b=te(q(w),2);let k;var E=te(b,2),S=q(E,!0);G(E),G(w);var A=te(w,2);{var y=x=>{var _=fW(),T=q(_);df(T,{get hierarchy(){return R(c)},get plugin(){return e.plugin},get view(){return e.view},get closed(){return n()},set closed(P){n(P)}}),G(_),Kn(3,_,()=>Mi,()=>({duration:150})),se(x,_)};ke(A,x=>{n()[R(c).path]||x(y)})}G(g),Ne(()=>{v=ht(g,1,"tree-item nav-folder",null,v,{"is-collapsed":n()[R(c).path]}),be(w,"data-tooltip-position",R(i)),be(w,"aria-label",R(c).vaultPath),k=ht(b,1,"tree-item-icon nav-folder-collapse-indicator collapse-icon",null,k,{"is-collapsed":n()[R(c).path]}),Ue(S,R(c).title)}),se(m,g)};ke(f,m=>{R(c).data?m(d):m(h,!1)})}se(l,u)}),G(s),Ne(()=>o=ht(s,1,"svelte-d9h7mp",null,o,{topLevel:r()})),se(t,s),ot()}Et(["click"]);var mW=ue('<div class="git-ref"> </div>'),gW=ue('<div class="git-author"> </div>'),vW=ue('<div class="git-date"> </div>'),wW=ue('<div class="tree-item-children nav-folder-children"><!></div>'),yW=ue('<main><div><div class="tree-item-self is-clickable nav-folder-title"><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div> <div><!> <!> <!> <div class="tree-item-inner nav-folder-title-content"> </div></div></div> <!></div></main>'),bW={hash:"svelte-1edsiy5",code:""};function ub(t,e){st(e,!0),Jn(t,bW);let r=Ht(()=>({title:"",path:"",vaultPath:"",children:e.plugin.gitManager.getTreeStructure(e.log.diff.files)})),n=Ht(()=>e.view.leaf.getRoot().side=="left"?"right":"left"),i=Oe(!0),a=Oe(He({}));function s(x){let _=x.author.name;if(e.plugin.settings.authorInHistoryView=="full")return _;if(e.plugin.settings.authorInHistoryView=="initials")return _.split(" ").filter(P=>P.length>0).map(P=>P[0].toUpperCase()).join("")}var o=yW(),l=q(o);let c;var u=q(l);u.__click=()=>ae(i,!R(i));var f=q(u);let d;var h=te(f,2),m=q(h);{var g=x=>{var _=mW(),T=q(_,!0);G(_),Ne(P=>Ue(T,P),[()=>e.log.refs.join(", ")]),se(x,_)};ke(m,x=>{e.log.refs.length>0&&x(g)})}var v=te(m,2);{var w=x=>{var _=gW(),T=q(_,!0);G(_),Ne(P=>Ue(T,P),[()=>s(e.log)]),se(x,_)};ke(v,x=>{var _;e.plugin.settings.authorInHistoryView!="hide"&&((_=e.log.author)!=null&&_.name)&&x(w)})}var b=te(v,2);{var k=x=>{var _=vW(),T=q(_,!0);G(_),Ne(P=>Ue(T,P),[()=>(0,cb.moment)(e.log.date).format(e.plugin.settings.commitDateFormat)]),se(x,_)};ke(b,x=>{e.plugin.settings.dateInHistoryView&&x(k)})}var E=te(b,2),S=q(E,!0);G(E),G(h),G(u);var A=te(u,2);{var y=x=>{var _=wW(),T=q(_);{var P=B=>{df(B,{get hierarchy(){return R(r)},get plugin(){return e.plugin},get view(){return e.view},topLevel:!0,get closed(){return R(a)},set closed(N){ae(a,N,!0)}})},D=B=>{var N=ca(),le=qr(N);un(le,17,()=>e.log.diff.files,cn,(Ae,we)=>{ff(Ae,{get view(){return e.view},get diff(){return R(we)}})}),se(B,N)};ke(T,B=>{e.showTree?B(P):B(D,!1)})}G(_),Kn(3,_,()=>Mi,()=>({duration:150})),se(x,_)};ke(A,x=>{R(i)||x(y)})}G(l),G(o),Ne(x=>{c=ht(l,1,"tree-item nav-folder",null,c,{"is-collapsed":R(i)}),be(u,"aria-label",x),be(u,"data-tooltip-position",R(n)),d=ht(f,1,"tree-item-icon nav-folder-collapse-indicator collapse-icon",null,d,{"is-collapsed":R(i)}),Ue(S,e.log.message)},[()=>{var x;return`${e.log.refs.length>0?e.log.refs.join(", ")+`
`:""}${(x=e.log.author)==null?void 0:x.name}
${(0,cb.moment)(e.log.date).format(e.plugin.settings.commitDateFormat)}
${e.log.message}`}]),se(t,o),ot()}Et(["click"]);var _W=ue('<div class="tree-item nav-folder mod-root"></div>'),xW=ue('<main class="git-view"><div class="nav-header"><div class="nav-buttons-container"><div id="layoutChange" class="clickable-icon nav-action-button" aria-label="Change Layout"></div> <div id="refresh" data-icon="refresh-cw" aria-label="Refresh"></div></div></div> <div class="nav-files-container" style="position: relative;"><!> <div id="sentinel"></div> <div style="margin-bottom:40px"></div></div></main>'),SW={hash:"svelte-12n6twc",code:""};function db(t,e){st(e,!0),Jn(t,SW);let r=Tn(e,"plugin",15),n=Oe(!1),i=He([]),a=Oe(void 0),s=Oe(He(r().settings.treeStructure)),o,l;sr(()=>{l&&l.empty()}),o=e.view.app.workspace.on("obsidian-git:head-change",()=>void u().catch(console.error)),sr(()=>{i.forEach(S=>(0,fb.setIcon)(S,S.getAttr("data-icon")))}),HM(()=>{e.view.app.workspace.offref(o)}),Ky(()=>{let S=new IntersectionObserver(y=>{y[0].isIntersecting&&!R(n)&&f().catch(console.error)}),A=document.querySelector("#sentinel");return A&&S.observe(A),()=>{S.disconnect()}}),u().catch(console.error);function c(){u().catch(console.error)}function u(){return oo(this,void 0,void 0,function*(){var S;if(!r().gitReady){ae(a,void 0);return}ae(n,!0);let A=r().gitManager instanceof Ee,y;((S=R(a)===null||R(a)===void 0?void 0:R(a).length)!==null&&S!==void 0?S:0)==0?y=A?50:10:y=R(a).length,ae(a,yield r().gitManager.log(void 0,!1,y),!0),ae(n,!1)})}function f(){return oo(this,void 0,void 0,function*(){var S;if(!r().gitReady||R(a)===void 0)return;ae(n,!0);let y=r().gitManager instanceof Ee?50:10,x=yield r().gitManager.log(void 0,!1,y,(S=R(a).last())===null||S===void 0?void 0:S.hash);R(a).push(...x.slice(1)),ae(n,!1)})}var d=xW(),h=q(d),m=q(h),g=q(m);g.__click=()=>{ae(s,!R(s)),(0,fb.setIcon)(i[0],R(s)?"list":"folder"),r(r().settings.treeStructure=R(s),!0),r().saveSettings()},it(g,S=>i[0]=S,()=>i==null?void 0:i[0]);var v=te(g,2);let w;v.__click=c,it(v,S=>i[1]=S,()=>i==null?void 0:i[1]),G(m),G(h);var b=te(h,2),k=q(b);{var E=S=>{var A=_W();un(A,21,()=>R(a),cn,(y,x)=>{ub(y,{get view(){return e.view},get showTree(){return R(s)},get log(){return R(x)},get plugin(){return r()}})}),G(A),se(S,A)};ke(k,S=>{R(a)&&S(E)})}zs(4),G(b),G(d),Ne(()=>{be(g,"data-icon",R(s)?"list":"folder"),w=ht(v,1,"clickable-icon nav-action-button",null,w,{loading:R(n)})}),se(t,d),ot()}Et(["click"]);var hf=class extends tD.ItemView{constructor(e,r){super(e),this.plugin=r,this.hoverPopover=null}getViewType(){return gn.type}getDisplayText(){return gn.name}getIcon(){return gn.icon}onClose(){return this._view&&ua(this._view),super.onClose()}reload(){this._view&&ua(this._view),this._view=es(db,{target:this.contentEl,props:{plugin:this.plugin,view:this}})}onOpen(){return this.reload(),super.onOpen()}};p();var rD=require("obsidian"),am=class extends rD.FuzzySuggestModal{constructor(r,n){super(r.app);this.branches=n;this.setPlaceholder("Select branch to checkout")}getItems(){return this.branches}getItemText(r){return r}onChooseItem(r,n){this.resolve(r)}openAndGetReslt(){return new Promise(r=>{this.resolve=r,this.open()})}onClose(){new Promise(r=>setTimeout(r,10)).then(()=>{this.resolve&&this.resolve(void 0)})}};p();var aD=require("obsidian");p();var uo=require("obsidian");p();var pf=require("obsidian");p();var nD=require("obsidian");var ic=class extends nD.Modal{constructor({app:r,path:n,filesToDeleteCount:i,filesToDiscardCount:a}){super(r);this.resolve=null;this.path=n,this.deleteCount=i,this.discardCount=a}openAndGetResult(){return this.open(),new Promise(r=>{this.resolve=r})}onOpen(){let r=this.deleteCount+this.discardCount,{contentEl:n,titleEl:i}=this,a="";this.path!=""&&(r>1?a=`files in "${this.path}"`:a=`"${this.path}"`),i.setText(`${this.discardCount==0?"Delete":"Discard"} ${a}`),this.deleteCount>0&&n.createEl("p").setText(`Are you sure you want to DELETE the ${gu(this.deleteCount,"untracked file")}? They are deleted according to your Obsidian trash settting.`),this.discardCount>0&&n.createEl("p").setText(`Are you sure you want to discard ALL changes in ${gu(this.discardCount,"tracked file")}?`);let s=n.createDiv({cls:"modal-button-container"});if(this.deleteCount>0){let l=s.createEl("button",{cls:"mod-warning",text:`${this.discardCount>0?"Discard":"Delete"} all ${gu(r,"file")}`});l.addEventListener("click",()=>{this.resolve&&this.resolve("delete"),this.close()}),l.addEventListener("keypress",()=>{this.resolve&&this.resolve("delete"),this.close()})}if(this.discardCount>0){let l=s.createEl("button",{cls:"mod-warning",text:`Discard all ${gu(this.discardCount,"tracked file")}`});l.addEventListener("click",()=>{this.resolve&&this.resolve("discard"),this.close()}),l.addEventListener("keypress",()=>{this.resolve&&this.resolve("discard"),this.close()})}let o=s.createEl("button",{text:"Cancel"});o.addEventListener("click",()=>(this.resolve&&this.resolve(!1),this.close())),o.addEventListener("keypress",()=>(this.resolve&&this.resolve(!1),this.close()))}onClose(){let{contentEl:r}=this;r.empty()}};var EW=ue('<div data-icon="go-to-file" aria-label="Open File" class="clickable-icon"></div>'),kW=ue('<main class="tree-item nav-file"><div class="tree-item-self is-clickable nav-file-title"><div class="tree-item-inner nav-file-title-content"> </div> <div class="git-tools"><div class="buttons"><!> <div data-icon="undo" aria-label="Discard" class="clickable-icon"></div> <div data-icon="plus" aria-label="Stage" class="clickable-icon"></div></div> <div class="type"> </div></div></div></main>');function mf(t,e){st(e,!0);let r=He([]),n=Ht(()=>e.view.leaf.getRoot().side=="left"?"right":"left");sr(()=>{for(let A of r)A&&(0,pf.setIcon)(A,A.getAttr("data-icon"))});function i(A){A.stopPropagation(),ol(e.change.path)?s(A):l(A)}function a(A){e.view.app.vault.getAbstractFileByPath(e.change.vaultPath)&&cl(e.view.app,A,e.view,e.change.vaultPath)}function s(A){var y;A.stopPropagation();let x=e.view.app.vault.getAbstractFileByPath(e.change.vaultPath);x instanceof pf.TFile&&((y=Dn(e.view.app,A))===null||y===void 0||y.openFile(x).catch(_=>e.view.plugin.displayError(_)))}function o(A){A.stopPropagation(),e.manager.stage(e.change.path,!1).catch(y=>e.view.plugin.displayError(y)).finally(()=>{e.view.app.workspace.trigger("obsidian-git:refresh")})}function l(A){A.stopPropagation(),e.view.plugin.tools.openDiff({aFile:e.change.path,aRef:"",event:A})}function c(A){A.stopPropagation();let y=e.change.workingDir=="U";new ic({app:e.view.app,filesToDeleteCount:y?1:0,filesToDiscardCount:y?0:1,path:e.change.vaultPath}).openAndGetResult().then(x=>oo(this,void 0,void 0,function*(){if(x=="delete"){let _=e.view.app.vault.getAbstractFileByPath(e.change.vaultPath);_ instanceof pf.TFile?yield e.view.app.fileManager.trashFile(_):yield e.view.app.vault.adapter.remove(e.change.vaultPath)}else x=="discard"&&(yield e.manager.discard(e.change.path).finally(()=>{e.view.app.workspace.trigger("obsidian-git:refresh")}));e.view.app.workspace.trigger("obsidian-git:refresh")}),x=>e.view.plugin.displayError(x))}var u=kW();u.__mouseover=a,u.__click=i;var f=q(u),d=q(f),h=q(d,!0);G(d);var m=te(d,2),g=q(m),v=q(g);{var w=A=>{var y=EW();y.__click=s,it(y,x=>r[0]=x,()=>r==null?void 0:r[0]),on("auxclick",y,s),se(A,y)};ke(v,A=>{ll(e.change.vaultPath,e.view.app)&&A(w)})}var b=te(v,2);b.__click=c,it(b,A=>r[1]=A,()=>r==null?void 0:r[1]);var k=te(b,2);k.__click=o,it(k,A=>r[2]=A,()=>r==null?void 0:r[2]),G(g);var E=te(g,2),S=q(E,!0);G(E),G(m),G(f),G(u),Ne(A=>{be(f,"data-path",e.change.vaultPath),be(f,"data-tooltip-position",R(n)),be(f,"aria-label",e.change.vaultPath),Ue(h,A),be(E,"data-type",e.change.workingDir),Ue(S,e.change.workingDir)},[()=>pi(e.change.vaultPath)]),on("auxclick",u,A=>{A.stopPropagation(),A.button==2?hi(e.view.app,A,e.change.vaultPath,e.view.leaf,"git-source-control"):i(A)}),se(t,u),ot()}Et(["mouseover","click"]);p();var iD=require("obsidian");var AW=ue('<main class="tree-item nav-file"><div class="tree-item-self is-clickable nav-file-title"><div class="tree-item-inner nav-file-title-content"> </div> <div class="git-tools"><span class="type"> </span></div></div></main>');function gf(t,e){st(e,!0);let r=Ht(()=>e.view.leaf.getRoot().side=="left"?"right":"left");function n(d){e.view.app.vault.getAbstractFileByPath(e.change.vaultPath)&&cl(e.view.app,d,e.view,e.change.vaultPath)}function i(d){var h;d.stopPropagation();let m=e.view.app.vault.getAbstractFileByPath(e.change.vaultPath);m instanceof iD.TFile&&((h=Dn(e.view.app,d))===null||h===void 0||h.openFile(m).catch(g=>e.view.plugin.displayError(g)))}var a=AW();a.__mouseover=n,a.__click=i;var s=q(a),o=q(s),l=q(o,!0);G(o);var c=te(o,2),u=q(c),f=q(u,!0);G(u),G(c),G(s),G(a),Ne(d=>{be(s,"data-path",e.change.vaultPath),be(s,"data-tooltip-position",R(r)),be(s,"aria-label",e.change.vaultPath),Ue(l,d),be(u,"data-type",e.change.workingDir),Ue(f,e.change.workingDir)},[()=>pi(e.change.vaultPath)]),on("auxclick",a,d=>{d.stopPropagation(),d.button==2?hi(e.view.app,d,e.change.vaultPath,e.view.leaf,"git-source-control"):i(d)}),se(t,a),ot()}Et(["mouseover","click"]);p();var sm=require("obsidian");var TW=ue('<div data-icon="go-to-file" aria-label="Open File" class="clickable-icon"></div>'),CW=ue('<main class="tree-item nav-file"><div class="tree-item-self is-clickable nav-file-title"><div class="tree-item-inner nav-file-title-content"> </div> <div class="git-tools"><div class="buttons"><!> <div data-icon="minus" aria-label="Unstage" class="clickable-icon"></div></div> <div class="type"> </div></div></div></main>');function vf(t,e){st(e,!0);let r=He([]),n=Ht(()=>e.view.leaf.getRoot().side=="left"?"right":"left");sr(()=>{for(let E of r)E&&(0,sm.setIcon)(E,E.getAttr("data-icon"))});function i(E){E.stopPropagation(),ol(e.change.path)?s(E):o(E)}function a(E){e.view.app.vault.getFileByPath(e.change.vaultPath)&&cl(e.view.app,E,e.view,e.change.vaultPath)}function s(E){var S;E.stopPropagation();let A=e.view.app.vault.getAbstractFileByPath(e.change.vaultPath);A instanceof sm.TFile&&((S=Dn(e.view.app,E))===null||S===void 0||S.openFile(A).catch(y=>e.view.plugin.displayError(y)))}function o(E){var S;E.stopPropagation(),e.view.plugin.tools.openDiff({aFile:(S=e.change.from)!==null&&S!==void 0?S:e.change.path,bFile:e.change.path,aRef:"HEAD",bRef:"",event:E})}function l(E){E.stopPropagation(),e.manager.unstage(e.change.path,!1).catch(S=>e.view.plugin.displayError(S)).finally(()=>{e.view.app.workspace.trigger("obsidian-git:refresh")})}var c=CW();c.__mouseover=a,c.__click=i;var u=q(c),f=q(u),d=q(f,!0);G(f);var h=te(f,2),m=q(h),g=q(m);{var v=E=>{var S=TW();S.__click=s,it(S,A=>r[0]=A,()=>r==null?void 0:r[0]),se(E,S)};ke(g,E=>{ll(e.change.vaultPath,e.view.app)&&E(v)})}var w=te(g,2);w.__click=l,it(w,E=>r[1]=E,()=>r==null?void 0:r[1]),G(m);var b=te(m,2),k=q(b,!0);G(b),G(h),G(u),G(c),Ne(E=>{be(u,"data-path",e.change.vaultPath),be(u,"data-tooltip-position",R(n)),be(u,"aria-label",e.change.vaultPath),Ue(d,E),be(b,"data-type",e.change.index),Ue(k,e.change.index)},[()=>pi(e.change.vaultPath)]),on("auxclick",c,E=>{E.stopPropagation(),E.button==2?hi(e.view.app,E,e.change.vaultPath,e.view.leaf,"git-source-control"):i(E)}),se(t,c),ot()}Et(["mouseover","click"]);p();p();var PW=ue('<div class="tree-item nav-file"><div class="tree-item-self nav-file-title"><div class="tree-item-inner nav-file-title-content"> </div></div></div>'),RW=ue("<main><!></main>");function lo(t,e){st(e,!0);var r=RW(),n=q(r);{var i=a=>{var s=PW(),o=q(s),l=q(o),c=q(l,!0);G(l),G(o),G(s),Ne(()=>{be(o,"aria-label","And "+(e.files.length-500)+" more files"),Ue(c,"And "+(e.files.length-500)+" more files")}),se(a,s)};ke(n,a=>{e.files.length>500&&a(i)})}G(r),se(t,r),ot()}var FW=ue("<div><!></div>"),$W=ue('<div data-icon="minus" aria-label="Unstage" class="clickable-icon"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-minus"><line x1="4" y1="9" x2="14" y2="9"></line></svg></div>'),OW=ue('<div data-icon="undo" aria-label="Discard" class="clickable-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-undo"><path d="M3 7v6h6"></path><path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"></path></svg></div> <div data-icon="plus" aria-label="Stage" class="clickable-icon"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-plus"><line x1="9" y1="4" x2="9" y2="14"></line><line x1="4" y1="9" x2="14" y2="9"></line></svg></div>',1),MW=ue('<div class="tree-item-children nav-folder-children"><!></div>'),DW=ue('<div><div class="tree-item-self is-clickable nav-folder-title"><div data-icon="folder" style="padding-right: 5px; display: flex; "></div> <div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div> <div class="tree-item-inner nav-folder-title-content"> </div> <div class="git-tools"><div class="buttons"><!> <div style="width:11px"></div></div></div></div> <!></div>'),LW=ue("<main><!> <!></main>");function co(t,e){st(e,!0);var r,n;let i=Tn(e,"topLevel",3,!1),a=Tn(e,"closed",15);for(let g of e.hierarchy.children)((n=(r=g.children)===null||r===void 0?void 0:r.length)!==null&&n!==void 0?n:0)>100&&a(a()[g.title]=!0,!0);let s=Ht(()=>e.view.leaf.getRoot().side=="left"?"right":"left");function o(g,v){g.stopPropagation(),e.plugin.gitManager.stageAll({dir:v}).catch(w=>e.plugin.displayError(w)).finally(()=>{e.view.app.workspace.trigger("obsidian-git:refresh")})}function l(g,v){g.stopPropagation(),e.plugin.gitManager.unstageAll({dir:v}).catch(w=>e.plugin.displayError(w)).finally(()=>{e.view.app.workspace.trigger("obsidian-git:refresh")})}function c(g,v){g.stopPropagation(),e.plugin.discardAll(v.vaultPath)}function u(g,v){g.stopPropagation(),a(a()[v.path]=!a()[v.path],!0)}var f=LW();let d;var h=q(f);un(h,17,()=>vu(e.hierarchy.children,500),cn,(g,v)=>{var w=ca(),b=qr(w);{var k=S=>{var A=FW(),y=q(A);{var x=T=>{vf(T,{get change(){return R(v).data},get manager(){return e.plugin.gitManager},get view(){return e.view}})},_=T=>{var P=ca(),D=qr(P);{var B=le=>{mf(le,{get change(){return R(v).data},get manager(){return e.plugin.gitManager},get view(){return e.view}})},N=le=>{var Ae=ca(),we=qr(Ae);{var fe=Ie=>{gf(Ie,{get change(){return R(v).data},get view(){return e.view}})};ke(we,Ie=>{e.fileType==2&&Ie(fe)},!0)}se(le,Ae)};ke(D,le=>{e.fileType==1?le(B):le(N,!1)},!0)}se(T,P)};ke(y,T=>{e.fileType==0?T(x):T(_,!1)})}G(A),se(S,A)},E=S=>{var A=DW();A.__click=ce=>u(ce,R(v));let y;var x=q(A),_=te(q(x),2);let T;var P=te(_,2),D=q(P,!0);G(P);var B=te(P,2),N=q(B),le=q(N);{var Ae=ce=>{var j=$W();j.__click=J=>l(J,R(v).path),se(ce,j)},we=ce=>{var j=OW(),J=qr(j);J.__click=Fe=>c(Fe,R(v));var H=te(J,2);H.__click=Fe=>o(Fe,R(v).path),se(ce,j)};ke(le,ce=>{e.fileType==0?ce(Ae):ce(we,!1)})}zs(2),G(N),G(B),G(x);var fe=te(x,2);{var Ie=ce=>{var j=MW(),J=q(j);co(J,{get hierarchy(){return R(v)},get plugin(){return e.plugin},get view(){return e.view},get fileType(){return e.fileType},get closed(){return a()},set closed(H){a(H)}}),G(j),Kn(3,j,()=>Mi,()=>({duration:150})),se(ce,j)};ke(fe,ce=>{a()[R(v).path]||ce(Ie)})}G(A),Ne(()=>{y=ht(A,1,"tree-item nav-folder",null,y,{"is-collapsed":a()[R(v).path]}),be(x,"data-tooltip-position",R(s)),be(x,"aria-label",R(v).vaultPath),T=ht(_,1,"tree-item-icon nav-folder-collapse-indicator collapse-icon",null,T,{"is-collapsed":a()[R(v).path]}),Ue(D,R(v).title)}),on("auxclick",A,ce=>hi(e.view.app,ce,R(v).vaultPath,e.view.leaf,"git-source-control")),se(S,A)};ke(b,S=>{R(v).data?S(k):S(E,!1)})}se(g,w)});var m=te(h,2);lo(m,{get files(){return e.hierarchy.children}}),G(f),Ne(()=>d=ht(f,1,"",null,d,{topLevel:i()})),se(t,f),ot()}Et(["click"]);var NW=ue('<div class="git-commit-msg-clear-button svelte-5wq9p"></div>'),BW=ue("<!> <!>",1),HW=ue('<div class="tree-item-children nav-folder-children"><!></div>'),UW=ue("<!> <!>",1),GW=ue('<div class="tree-item-children nav-folder-children"><!></div>'),jW=ue("<!> <!>",1),qW=ue('<div class="tree-item-children nav-folder-children"><!></div>'),zW=ue('<div><div class="tree-item-self is-clickable nav-folder-title svelte-5wq9p"><div class="tree-item-icon nav-folder-collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div> <div class="tree-item-inner nav-folder-title-content">Recently Pulled Files</div> <span class="tree-item-flair"> </span></div> <!></div>'),VW=ue('<div class="tree-item nav-folder mod-root"><div><div class="tree-item-self is-clickable nav-folder-title svelte-5wq9p"><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div> <div class="tree-item-inner nav-folder-title-content">Staged Changes</div> <div class="git-tools svelte-5wq9p"><div class="buttons"><div data-icon="minus" aria-label="Unstage" class="clickable-icon"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-minus"><line x1="4" y1="9" x2="14" y2="9"></line></svg></div></div> <div class="files-count svelte-5wq9p"> </div></div></div> <!></div> <div><div class="tree-item-self is-clickable nav-folder-title svelte-5wq9p"><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div> <div class="tree-item-inner nav-folder-title-content">Changes</div> <div class="git-tools svelte-5wq9p"><div class="buttons"><div data-icon="undo" aria-label="Discard" class="clickable-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-undo"><path d="M3 7v6h6"></path><path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"></path></svg></div> <div data-icon="plus" aria-label="Stage" class="clickable-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-plus"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg></div></div> <div class="files-count svelte-5wq9p"> </div></div></div> <!></div> <!></div>'),WW=ue('<main class="git-view svelte-5wq9p"><div class="nav-header"><div class="nav-buttons-container"><div id="backup-btn" data-icon="arrow-up-circle" class="clickable-icon nav-action-button" aria-label="Commit-and-sync"></div> <div id="commit-btn" data-icon="check" class="clickable-icon nav-action-button" aria-label="Commit"></div> <div id="stage-all" class="clickable-icon nav-action-button" data-icon="plus-circle" aria-label="Stage all"></div> <div id="unstage-all" class="clickable-icon nav-action-button" data-icon="minus-circle" aria-label="Unstage all"></div> <div id="push" class="clickable-icon nav-action-button" data-icon="upload" aria-label="Push"></div> <div id="pull" class="clickable-icon nav-action-button" data-icon="download" aria-label="Pull"></div> <div id="layoutChange" class="clickable-icon nav-action-button" aria-label="Change Layout"></div> <div id="refresh" data-icon="refresh-cw" aria-label="Refresh"></div></div></div> <div class="git-commit-msg svelte-5wq9p"><textarea class="commit-msg-input svelte-5wq9p" spellcheck="true" placeholder="Commit Message"></textarea> <!></div> <div class="nav-files-container" style="position: relative;"><!></div></main>'),YW={hash:"svelte-5wq9p",code:`.commit-msg-input.svelte-5wq9p {width:100%;overflow:hidden;resize:none;padding:7px 5px;background-color:var(--background-modifier-form-field);}.git-commit-msg.svelte-5wq9p {position:relative;padding:0;width:calc(100% - var(--size-4-8));margin:4px auto;}main.svelte-5wq9p .git-tools:where(.svelte-5wq9p) .files-count:where(.svelte-5wq9p) {padding-left:var(--size-2-1);width:11px;display:flex;align-items:center;justify-content:center;}.nav-folder-title.svelte-5wq9p {align-items:center;}.git-commit-msg-clear-button.svelte-5wq9p {position:absolute;background:transparent;border-radius:50%;color:var(--search-clear-button-color);cursor:var(--cursor);top:-4px;right:2px;bottom:0px;line-height:0;height:var(--input-height);width:28px;margin:auto;padding:0 0;text-align:center;display:flex;justify-content:center;align-items:center;transition:color 0.15s ease-in-out;}.git-commit-msg-clear-button.svelte-5wq9p:after {content:"";height:var(--search-clear-button-size);width:var(--search-clear-button-size);display:block;background-color:currentColor;mask-image:url("data:image/svg+xml,<svg viewBox='0 0 12 12' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M6 12C9.31371 12 12 9.31371 12 6C12 2.68629 9.31371 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12ZM3.8705 3.09766L6.00003 5.22718L8.12955 3.09766L8.9024 3.8705L6.77287 6.00003L8.9024 8.12955L8.12955 8.9024L6.00003 6.77287L3.8705 8.9024L3.09766 8.12955L5.22718 6.00003L3.09766 3.8705L3.8705 3.09766Z' fill='currentColor'/></svg>");mask-repeat:no-repeat;-webkit-mask-image:url("data:image/svg+xml,<svg viewBox='0 0 12 12' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M6 12C9.31371 12 12 9.31371 12 6C12 2.68629 9.31371 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12ZM3.8705 3.09766L6.00003 5.22718L8.12955 3.09766L8.9024 3.8705L6.77287 6.00003L8.9024 8.12955L8.12955 8.9024L6.00003 6.77287L3.8705 8.9024L3.09766 8.12955L5.22718 6.00003L3.09766 3.8705L3.8705 3.09766Z' fill='currentColor'/></svg>");-webkit-mask-repeat:no-repeat;}`};function hb(t,e){st(e,!0),Jn(t,YW);let r=Tn(e,"plugin",7),n=Tn(e,"view",7),i=Oe(!1),a=Oe(void 0),s=Oe(He([])),o=Oe(He(r().settings.commitMessage)),l=He([]),c=Oe(void 0),u=Oe(void 0),f=Oe(void 0),d=Oe(!0),h=Oe(!0),m=Oe(!0),g=Oe(0),v=Oe(He({})),w=Oe(He({})),b=Oe(He({})),k=Oe(He(r().settings.treeStructure));n().registerEvent(n().app.workspace.on("obsidian-git:loading-status",()=>ae(i,!0))),n().registerEvent(n().app.workspace.on("obsidian-git:status-changed",()=>void A().catch(console.error))),n().plugin.cachedStatus==null?n().plugin.refresh().catch(console.error):A().catch(console.error),sr(()=>{l.forEach(Z=>(0,uo.setIcon)(Z,Z.getAttr("data-icon")))}),sr(()=>{l.forEach(Z=>{var M,V;!Z||Z.id!="push"||(uo.Platform.isMobile?(Z.removeClass("button-border"),R(g)>0&&Z.addClass("button-border")):((M=Z.firstElementChild)===null||M===void 0||M.removeAttribute("color"),R(g)>0&&((V=Z.firstElementChild)===null||V===void 0||V.setAttr("color","var(--text-accent)"))))})}),n().scope=new uo.Scope(r().app.scope),n().scope.register(["Ctrl"],"Enter",Z=>S());function E(){if(ae(i,!0),R(a)){let Z=R(a).staged.length>0;r().promiseQueue.addTask(()=>r().commit({fromAuto:!1,commitMessage:R(o),onlyStaged:Z}).then(()=>ae(o,r().settings.commitMessage,!0)).finally(y))}}function S(){if(ae(i,!0),R(a)){let Z=R(a).staged.length>0;r().promiseQueue.addTask(()=>r().commitAndSync({fromAutoBackup:!1,commitMessage:R(o),onlyStaged:Z}).then(()=>{ae(o,r().settings.commitMessage,!0)}).finally(y))}}function A(){return oo(this,void 0,void 0,function*(){if(!r().gitReady){ae(a,void 0);return}if(ae(g,yield r().gitManager.getUnpushedCommits(),!0),ae(a,r().cachedStatus,!0),ae(i,!1),r().lastPulledFiles&&r().lastPulledFiles!=R(s)&&(ae(s,r().lastPulledFiles,!0),ae(f,{title:"",path:"",vaultPath:"",children:r().gitManager.getTreeStructure(R(s))},!0)),R(a)){let Z=(M,V)=>M.vaultPath.split("/").last().localeCompare(pi(V.vaultPath));R(a).changed.sort(Z),R(a).staged.sort(Z),ae(c,{title:"",path:"",vaultPath:"",children:r().gitManager.getTreeStructure(R(a).changed)},!0),ae(u,{title:"",path:"",vaultPath:"",children:r().gitManager.getTreeStructure(R(a).staged)},!0)}else ae(c,void 0),ae(u,void 0)})}function y(){n().app.workspace.trigger("obsidian-git:refresh")}function x(Z){Z.stopPropagation(),ae(i,!0),r().promiseQueue.addTask(()=>r().gitManager.stageAll({status:R(a)}).finally(y))}function _(Z){Z.stopPropagation(),ae(i,!0),r().promiseQueue.addTask(()=>r().gitManager.unstageAll({status:R(a)}).finally(y))}function T(){ae(i,!0),r().promiseQueue.addTask(()=>r().push().finally(y))}function P(){ae(i,!0),r().promiseQueue.addTask(()=>r().pullChangesFromRemote().finally(y))}function D(Z){Z.stopPropagation(),r().discardAll()}let B=Ht(()=>(R(o).match(/\n/g)||[]).length+1||1);var N=WW(),le=q(N),Ae=q(le),we=q(Ae);we.__click=S,it(we,Z=>l[0]=Z,()=>l==null?void 0:l[0]);var fe=te(we,2);fe.__click=E,it(fe,Z=>l[1]=Z,()=>l==null?void 0:l[1]);var Ie=te(fe,2);Ie.__click=x,it(Ie,Z=>l[2]=Z,()=>l==null?void 0:l[2]);var ce=te(Ie,2);ce.__click=_,it(ce,Z=>l[3]=Z,()=>l==null?void 0:l[3]);var j=te(ce,2);j.__click=T,it(j,Z=>l[4]=Z,()=>l==null?void 0:l[4]);var J=te(j,2);J.__click=P,it(J,Z=>l[5]=Z,()=>l==null?void 0:l[5]);var H=te(J,2);H.__click=()=>{ae(k,!R(k)),(0,uo.setIcon)(l[6],R(k)?"list":"folder"),r().settings.treeStructure=R(k),r().saveSettings()},it(H,Z=>l[6]=Z,()=>l==null?void 0:l[6]);var Fe=te(H,2);let or;Fe.__click=y,it(Fe,Z=>l[7]=Z,()=>l==null?void 0:l[7]),G(Ae),G(le);var Rt=te(le,2),$e=q(Rt);Hy($e);var kt=te($e,2);{var At=Z=>{var M=NW();M.__click=()=>ae(o,""),be(M,"aria-label","Clear"),se(Z,M)};ke(kt,Z=>{R(o)&&Z(At)})}G(Rt);var Ut=te(Rt,2),Xe=q(Ut);{var z=Z=>{var M=VW(),V=q(M);let Te;var qe=q(V);qe.__click=()=>ae(h,!R(h));var It=q(qe);let po;var wb=te(It,4),wm=q(wb),yb=q(wm);yb.__click=_,it(yb,lr=>l[8]=lr,()=>l==null?void 0:l[8]),G(wm);var bb=te(wm,2),pD=q(bb,!0);G(bb),G(wb),G(qe);var mD=te(qe,2);{var gD=lr=>{var yr=HW(),mo=q(yr);{var pa=cr=>{co(cr,{get hierarchy(){return R(u)},get plugin(){return r()},get view(){return n()},get fileType(){return 0},topLevel:!0,get closed(){return R(v)},set closed(Pn){ae(v,Pn,!0)}})},go=cr=>{var Pn=BW(),rs=qr(Pn);un(rs,17,()=>vu(R(a).staged,500),cn,(ma,sc)=>{vf(ma,{get change(){return R(sc)},get view(){return n()},get manager(){return r().gitManager}})});var ns=te(rs,2);lo(ns,{get files(){return R(a).staged}}),se(cr,Pn)};ke(mo,cr=>{R(k)?cr(pa):cr(go,!1)})}G(yr),Kn(3,yr,()=>Mi,()=>({duration:150})),se(lr,yr)};ke(mD,lr=>{R(h)&&lr(gD)})}G(V);var yf=te(V,2);let _b;var bf=q(yf);bf.__click=()=>ae(d,!R(d));var xb=q(bf);let Sb;var Eb=te(xb,4),ym=q(Eb),kb=q(ym);kb.__click=D;var Ab=te(kb,2);Ab.__click=x,it(Ab,lr=>l[9]=lr,()=>l==null?void 0:l[9]),G(ym);var Tb=te(ym,2),vD=q(Tb,!0);G(Tb),G(Eb),G(bf);var wD=te(bf,2);{var yD=lr=>{var yr=GW(),mo=q(yr);{var pa=cr=>{co(cr,{get hierarchy(){return R(c)},get plugin(){return r()},get view(){return n()},get fileType(){return 1},topLevel:!0,get closed(){return R(w)},set closed(Pn){ae(w,Pn,!0)}})},go=cr=>{var Pn=UW(),rs=qr(Pn);un(rs,17,()=>vu(R(a).changed,500),cn,(ma,sc)=>{mf(ma,{get change(){return R(sc)},get view(){return n()},get manager(){return r().gitManager}})});var ns=te(rs,2);lo(ns,{get files(){return R(a).changed}}),se(cr,Pn)};ke(mo,cr=>{R(k)?cr(pa):cr(go,!1)})}G(yr),Kn(3,yr,()=>Mi,()=>({duration:150})),se(lr,yr)};ke(wD,lr=>{R(d)&&lr(yD)})}G(yf);var bD=te(yf,2);{var _D=lr=>{var yr=zW();let mo;var pa=q(yr);pa.__click=()=>ae(m,!R(m));var go=te(q(pa),4),cr=q(go,!0);G(go),G(pa);var Pn=te(pa,2);{var rs=ns=>{var ma=qW(),sc=q(ma);{var xD=vo=>{co(vo,{get hierarchy(){return R(f)},get plugin(){return r()},get view(){return n()},get fileType(){return 2},topLevel:!0,get closed(){return R(b)},set closed(_f){ae(b,_f,!0)}})},SD=vo=>{var _f=jW(),Cb=qr(_f);un(Cb,17,()=>R(s),cn,(kD,AD)=>{gf(kD,{get change(){return R(AD)},get view(){return n()}})});var ED=te(Cb,2);lo(ED,{get files(){return R(s)}}),se(vo,_f)};ke(sc,vo=>{R(k)?vo(xD):vo(SD,!1)})}G(ma),Kn(3,ma,()=>Mi,()=>({duration:150})),se(ns,ma)};ke(Pn,ns=>{R(m)&&ns(rs)})}G(yr),Ne(()=>{mo=ht(yr,1,"pulled nav-folder",null,mo,{"is-collapsed":!R(m)}),Ue(cr,R(s).length)}),se(lr,yr)};ke(bD,lr=>{R(s).length>0&&R(f)&&lr(_D)})}G(M),Ne(()=>{Te=ht(V,1,"staged tree-item nav-folder",null,Te,{"is-collapsed":!R(h)}),po=ht(It,1,"tree-item-icon nav-folder-collapse-indicator collapse-icon",null,po,{"is-collapsed":!R(h)}),Ue(pD,R(a).staged.length),_b=ht(yf,1,"changes tree-item nav-folder",null,_b,{"is-collapsed":!R(d)}),Sb=ht(xb,1,"tree-item-icon nav-folder-collapse-indicator collapse-icon",null,Sb,{"is-collapsed":!R(d)}),Ue(vD,R(a).changed.length)}),se(Z,M)};ke(Xe,Z=>{R(a)&&R(u)&&R(c)&&Z(z)})}G(Ut),G(N),Ne(()=>{be(N,"data-type",jt.type),be(H,"data-icon",R(k)?"list":"folder"),or=ht(Fe,1,"clickable-icon nav-action-button",null,or,{loading:R(i)}),be($e,"rows",R(B))}),nb($e,()=>R(o),Z=>ae(o,Z)),se(t,N),ot()}Et(["click"]);var wf=class extends aD.ItemView{constructor(e,r){super(e),this.plugin=r,this.hoverPopover=null}getViewType(){return jt.type}getDisplayText(){return jt.name}getIcon(){return jt.icon}onClose(){return this._view&&ua(this._view),super.onClose()}reload(){this._view&&ua(this._view),this._view=es(hb,{target:this.contentEl,props:{plugin:this.plugin,view:this}})}onOpen(){return this.reload(),super.onOpen()}};p();var om=class{constructor(e,r){this.statusBarEl=e;this.plugin=r;this.statusBarEl.addClass("mod-clickable"),this.statusBarEl.onClickEvent(n=>{this.plugin.switchBranch().catch(i=>r.displayError(i))})}async display(){if(this.plugin.gitReady){let e=await this.plugin.gitManager.branchInfo();e.current!=null?this.statusBarEl.setText(e.current):this.statusBarEl.empty()}else this.statusBarEl.empty()}remove(){this.statusBarEl.remove()}};p();var sD=require("obsidian");var lm=class{constructor(e){this.plugin=e}get editor(){var n;let e=(n=this.plugin.app.workspace.activeEditor)==null?void 0:n.editor,r=e==null?void 0:e.cm;if(!(!e||!Bn.hasHunksData(r.state)))return{editor:r,obEditor:e}}get gitManager(){return this.plugin.gitManager}resetHunk(e){if(!this.editor)return;let{editor:r,obEditor:n}=this.editor,i=Bn.getHunk(r.state,!1,e);if(i){let a,s;i.type==="delete"?(a=i.added.start+1,s=i.added.start+1):(a=i.added.start-0,s=i.added.start-1+i.added.count);let o=r.state.doc.line(a).from,l=i.type==="delete"?r.state.doc.line(s).from:r.state.doc.line(s).to+1,c=i.removed.lines.join(`
`);i.removed.lines.length>0&&!i.removed.no_nl_at_eof&&(c+=`
`),n.replaceRange(c,n.offsetToPos(o),n.offsetToPos(l)),n.setSelection(n.offsetToPos(o))}}async stageHunk(e){if(!await this.plugin.isAllInitialized()||!this.editor)return;let{editor:r}=this.editor,n=Bn.getHunk(r.state,!1,e),i=!1;if(n||(n=Bn.getHunk(r.state,!0,e),i=!0),!n)return;let a=r.state.field(sD.editorInfoField).file.path,s=Dt.createPatch(a,[n],"100644",i).join(`
`)+`
`;await this.gitManager.applyPatch(s),this.plugin.app.workspace.trigger("obsidian-git:refresh")}goToHunk(e){if(!this.editor)return;let{editor:r,obEditor:n}=this.editor,i=Bn.getHunks(r.state,!1),a=n.getCursor().line+1,s=Dt.findNearestHunk(a,i,e,!0);if(s==null)return;let o=i[s];if(o){let l=o.added.start-1;n.setCursor(l,0),n.scrollIntoView({from:{line:l,ch:0},to:{line:l+1,ch:0}},!0)}}};p();p();var fo=require("obsidian");var cm=class{constructor(e){this.plg=e;this.codeMirrorExtensions=[];this.handleWorkspaceLeaf=e=>{if(!this.lineAuthorInfoProvider){console.warn("Git: undefined lineAuthorInfoProvider. Unexpected situation.");return}let r=e==null?void 0:e.view;!(r instanceof fo.MarkdownView)||r.file==null||(r==null?void 0:r.allowNoFile)===!0||this.lineAuthorInfoProvider.trackChanged(r.file).catch(console.error)}}onLoadPlugin(){this.plg.registerEditorExtension(this.codeMirrorExtensions),MF(()=>this.plg.settings.lineAuthor,e=>{this.plg.settings.lineAuthor=e,this.plg.saveSettings()})}conditionallyActivateBySettings(){this.plg.settings.lineAuthor.show&&this.activateFeature()}activateFeature(){try{if(!this.isAvailableOnCurrentPlatform().available)return;zF(this.plg.settings.lineAuthor),this.lineAuthorInfoProvider=new Wh(this.plg),this.createEventHandlers(),this.activateCodeMirrorExtensions(),console.log(this.plg.manifest.name+": Enabled line authoring.")}catch(e){console.warn("Git: Error while loading line authoring feature.",e),this.deactivateFeature()}}deactivateFeature(){var e;this.destroyEventHandlers(),this.deactivateCodeMirrorExtensions(),(e=this.lineAuthorInfoProvider)==null||e.destroy(),this.lineAuthorInfoProvider=void 0,console.log(this.plg.manifest.name+": Disabled line authoring.")}isAvailableOnCurrentPlatform(){return{available:this.plg.useSimpleGit&&fo.Platform.isDesktopApp,gitManager:this.plg.gitManager instanceof Ee?this.plg.gitManager:void 0}}refreshLineAuthorViews(){this.plg.settings.lineAuthor.show&&(this.deactivateFeature(),this.activateFeature())}activateCodeMirrorExtensions(){this.codeMirrorExtensions.push(r$),this.plg.app.workspace.updateOptions(),this.plg.app.workspace.iterateAllLeaves(this.handleWorkspaceLeaf)}deactivateCodeMirrorExtensions(){for(let e of this.codeMirrorExtensions)this.codeMirrorExtensions.remove(e);this.plg.app.workspace.updateOptions()}createEventHandlers(){this.gutterContextMenuEvent=this.createGutterContextMenuHandler(),this.fileOpenEvent=this.createFileOpenEvent(),this.workspaceLeafChangeEvent=this.createWorkspaceLeafChangeEvent(),this.fileModificationEvent=this.createVaultFileModificationHandler(),this.headChangeEvent=this.createHeadChangeEvent(),this.refreshOnCssChangeEvent=this.createCssRefreshHandler(),this.fileRenameEvent=this.createFileRenameEvent(),HF(),this.plg.registerEvent(this.gutterContextMenuEvent),this.plg.registerEvent(this.refreshOnCssChangeEvent),this.plg.registerEvent(this.fileOpenEvent),this.plg.registerEvent(this.workspaceLeafChangeEvent),this.plg.registerEvent(this.fileModificationEvent),this.plg.registerEvent(this.headChangeEvent),this.plg.registerEvent(this.fileRenameEvent)}destroyEventHandlers(){this.plg.app.workspace.offref(this.gutterContextMenuEvent),this.plg.app.workspace.offref(this.refreshOnCssChangeEvent),this.plg.app.workspace.offref(this.fileOpenEvent),this.plg.app.workspace.offref(this.workspaceLeafChangeEvent),this.plg.app.workspace.offref(this.refreshOnCssChangeEvent),this.plg.app.vault.offref(this.fileModificationEvent),this.plg.app.workspace.offref(this.headChangeEvent),this.plg.app.vault.offref(this.fileRenameEvent)}createFileOpenEvent(){return this.plg.app.workspace.on("file-open",e=>{var r;return void((r=this.lineAuthorInfoProvider)==null?void 0:r.trackChanged(e).catch(console.error))})}createWorkspaceLeafChangeEvent(){return this.plg.app.workspace.on("active-leaf-change",this.handleWorkspaceLeaf)}createFileRenameEvent(){return this.plg.app.vault.on("rename",(e,r)=>{var n;return e instanceof fo.TFile&&((n=this.lineAuthorInfoProvider)==null?void 0:n.trackChanged(e))})}createVaultFileModificationHandler(){return this.plg.app.vault.on("modify",e=>{var r;return e instanceof fo.TFile&&((r=this.lineAuthorInfoProvider)==null?void 0:r.trackChanged(e))})}createHeadChangeEvent(){return this.plg.app.workspace.on("obsidian-git:head-change",()=>{this.refreshLineAuthorViews()})}createCssRefreshHandler(){return this.plg.app.workspace.on("css-change",()=>this.refreshLineAuthorViews())}createGutterContextMenuHandler(){return this.plg.app.workspace.on("editor-menu",jF)}};p();var ac=require("obsidian");p();p();var ho=require("@codemirror/state"),fm=require("@codemirror/view");var um=class extends fm.GutterMarker{constructor(r,n){super();this.type=r;this.staged=n}toDOM(r){let n=document.createElement("div");return n.className=`git-gutter-marker git-${this.type} ${this.staged?"staged":"unstaged"}`,this.type=="changedelete"&&n.setText("~"),n}},pb=ho.StateField.define({create:()=>ho.RangeSet.empty,update:(t,e)=>{let r=e.state.field(Fr,!1);if(!r)return ho.RangeSet.empty;let n=e.effects.some(a=>a.is(Ou)),i=e.effects.some(a=>a.is(Al));if(n||i||(e.docChanged||t.size==0)&&r.isDirty==!1){let a=new Set,s=oD(e,r.hunks,!1,a),o=oD(e,r.stagedHunks,!0,a);return t=ho.RangeSet.of([...s,...o],!0),t}else e.docChanged&&(t=t.map(e.changes));return t}});function oD(t,e,r,n){let i=[];for(let s=0;s<e.length;s++){let o=s>0?e[s-1]:void 0,l=s<e.length-1?e[s+1]:void 0,c=e[s];i.push(...Dt.calcSigns(o,c,l))}let a=[];for(let s of i){if(n.has(s.lnum))continue;let o=t.state.doc.line(s.lnum);n.add(s.lnum),a.push(new um(s.type,r).range(o.from,o.to))}return a}var lD=(0,fm.gutter)({class:"git-signs-gutter",markers:t=>{var e;return(e=t.state.field(pb,!1))!=null?e:ho.RangeSet.empty},initialSpacer:t=>new um("delete",!1),domEventHandlers:{click:(t,e,r)=>{var i;return((i=Bn.getHunkAtPos(t.state,e.from,!1))!=null?i:Bn.getHunkAtPos(t.state,e.from,!0))&&(Hs(t,e.from),r.preventDefault()),!1}}});var dm=class{constructor(e){this.plugin=e}async trackChanged(e){return this.trackChangedHelper(e).catch(r=>(console.warn("Git: Error in trackChanged."+r),Promise.reject(r)))}async trackChangedHelper(e){if(e){if(e.path===void 0){console.warn("Git: Attempted to track change of undefined filepath. Unforeseen situation.");return}return this.computeSigns(e.path)}}destroy(){}async computeSigns(e){let n=await this.plugin.editorIntegration.lineAuthoringFeature.isAvailableOnCurrentPlatform().gitManager.show("",e).catch(()=>{});this.notifySignComputationResultToSubscribers(e,{compareText:n,compareTextHead:void 0})}notifySignComputationResultToSubscribers(e,r){Ki.ifFilepathDefinedTransformSubscribers(e,n=>n.forEach(i=>i.notifyGitCompare(r)))}},cD=[xO,SO,lD,pb,wp],uD=[Fr,Z0];p();var mb=require("obsidian"),hm=class{constructor(e,r){this.statusBarEl=e;this.plugin=r;e.addClass("git-changes-status-bar"),r.settings.hunks.statusBar==="colored"&&e.addClass("git-changes-status-bar-colored"),e.setAttr("aria-label","Git diff of the current editor"),this.statusBarEl.setAttribute("data-tooltip-position","top"),r.app.workspace.on("active-leaf-change",n=>{(!n||n.getRoot()==r.app.workspace.rootSplit&&!(n.view instanceof mb.MarkdownView))&&this.statusBarEl.empty()})}display(e,r){var o;let n=this.plugin.app.workspace.getActiveViewOfType(mb.MarkdownView);if(!n||((o=n.file)==null?void 0:o.path)!==(r==null?void 0:r.path))return;let i=0,a=0,s=0;for(let l of e)i+=Math.max(0,l.added.count-l.removed.count),a+=Math.min(l.added.count,l.removed.count),s+=Math.max(0,l.removed.count-l.added.count);this.statusBarEl.empty(),i>0&&this.statusBarEl.createSpan({text:`+${i} `,cls:"git-add"}),a>0&&this.statusBarEl.createSpan({text:`~${a} `,cls:"git-change"}),s>0&&this.statusBarEl.createSpan({text:`-${s}`,cls:"git-delete"})}remove(){this.statusBarEl.remove()}};var pm=class{constructor(e){this.plg=e;this.codeMirrorExtensions=[];this.handleWorkspaceLeaf=e=>{if(!this.signsProvider){console.warn("Git: undefined signsProvider. Unexpected situation.");return}let r=e==null?void 0:e.view;!(r instanceof ac.MarkdownView)||r.file==null||(r==null?void 0:r.allowNoFile)===!0||this.signsProvider.trackChanged(r.file).catch(console.error)}}onLoadPlugin(){this.plg.registerEditorExtension(this.codeMirrorExtensions)}conditionallyActivateBySettings(){(this.plg.settings.hunks.showSigns||this.plg.settings.hunks.statusBar!="disabled"||this.plg.settings.hunks.hunkCommands)&&this.activateFeature()}activateFeature(){try{if(!this.isAvailableOnCurrentPlatform().available)return;if(this.signsProvider=new dm(this.plg),this.createEventHandlers(),this.activateCodeMirrorExtensions(),this.plg.settings.hunks.statusBar!="disabled"){let e=this.plg.addStatusBarItem();this.changeStatusBar=new hm(e,this.plg)}}catch(e){console.warn("Git: Error while loading signs feature.",e),this.deactivateFeature()}}deactivateFeature(){var e,r;this.destroyEventHandlers(),this.deactivateCodeMirrorExtensions(),(e=this.signsProvider)==null||e.destroy(),this.signsProvider=void 0,(r=this.changeStatusBar)==null||r.remove(),this.changeStatusBar=void 0}isAvailableOnCurrentPlatform(){return{available:this.plg.useSimpleGit&&ac.Platform.isDesktopApp,gitManager:this.plg.gitManager instanceof Ee?this.plg.gitManager:void 0}}refresh(){this.plg.settings.hunks.showSigns&&this.plg.app.workspace.iterateAllLeaves(this.handleWorkspaceLeaf)}activateCodeMirrorExtensions(){this.codeMirrorExtensions.push(uD),this.plg.settings.hunks.showSigns&&this.codeMirrorExtensions.push(...cD),this.plg.app.workspace.updateOptions(),this.plg.app.workspace.iterateAllLeaves(this.handleWorkspaceLeaf)}deactivateCodeMirrorExtensions(){for(let e of this.codeMirrorExtensions)this.codeMirrorExtensions.remove(e);this.plg.app.workspace.updateOptions()}createEventHandlers(){this.workspaceLeafChangeEvent=this.createWorkspaceLeafChangeEvent(),this.fileRenameEvent=this.createFileRenameEvent(),this.pluginRefreshedEvent=this.createPluginRefreshedEvent(),this.intervalRefreshEvent=this.createIntervalRefreshEvent(),this.plg.registerEvent(this.workspaceLeafChangeEvent),this.plg.registerEvent(this.fileRenameEvent),this.plg.registerEvent(this.pluginRefreshedEvent),this.plg.registerInterval(this.intervalRefreshEvent)}destroyEventHandlers(){this.plg.app.workspace.offref(this.workspaceLeafChangeEvent),this.plg.app.vault.offref(this.fileRenameEvent),this.plg.app.workspace.offref(this.pluginRefreshedEvent),this.plg.app.workspace.offref(this.gutterContextMenuEvent),window.clearInterval(this.intervalRefreshEvent)}createWorkspaceLeafChangeEvent(){return this.plg.app.workspace.on("active-leaf-change",this.handleWorkspaceLeaf)}createFileRenameEvent(){return this.plg.app.vault.on("rename",(e,r)=>{var n;return Ki.ifFilepathDefinedTransformSubscribers(r,i=>i.forEach(a=>{a.changeToNewFilepath(e.path)})),e instanceof ac.TFile&&((n=this.signsProvider)==null?void 0:n.trackChanged(e))})}createPluginRefreshedEvent(){return this.plg.app.workspace.on("obsidian-git:refresh",()=>{this.refresh()})}createIntervalRefreshEvent(){return window.setInterval(()=>{var e,r;(e=this.plg.app.workspace.activeEditor)!=null&&e.file&&((r=this.signsProvider)==null||r.trackChanged(this.plg.app.workspace.activeEditor.file).catch(console.error))},10*1e3)}};p();var fD=require("@codemirror/state"),mm=require("obsidian");var gb=class{constructor(e){this.state=e;this.subscribeMe()}notifyLineAuthoring(e,r){if(this.view===void 0){console.warn(`Git: View is not defined for editor cache key. Unforeseen situation. id: ${e}`);return}let n=this.view.state,i=OF(e,r,n);this.view.dispatch(i)}notifyGitCompare(e){if(this.view===void 0){console.warn("Git: View is not defined for editor cache key. Unforeseen situation. id: ");return}if(this.removeIfStale())return;let r=this.view.state,n=r.field(Fr);if(!n||n.compareText!=e.compareText||n.compareTextHead!=e.compareTextHead){let i=W$(e,r);this.view.dispatch(i)}}updateToNewState(e){return this.state=e,!this.lastSeenPath&&this.filepath&&this.subscribeMe(),this}removeIfStale(){var e;return((e=this.view)==null?void 0:e.state.field(vb,!1))!=this||this.view.destroyed?(this.unsubscribeMe(this.lastSeenPath),!0):!1}changeToNewFilepath(e){this.unsubscribeMe(this.lastSeenPath),this.subscribeMe(e)}subscribeMe(e){e!=null||(e=this.filepath),e!==void 0&&(Ki.ifFilepathDefinedTransformSubscribers(e,r=>r.add(this)),this.lastSeenPath=e)}unsubscribeMe(e){Ki.ifFilepathDefinedTransformSubscribers(e,r=>r.delete(this))}get filepath(){var e,r;return(r=(e=this.state.field(mm.editorInfoField))==null?void 0:e.file)==null?void 0:r.path}get view(){return this.state.field(mm.editorEditorField)}},vb=fD.StateField.define({create:t=>new gb(t),update:(t,e)=>t.updateToNewState(e.state),compare:(t,e)=>t===e});var gm=class{constructor(e){this.plg=e;this.lineAuthoringFeature=new cm(this.plg);this.signsFeature=new pm(this.plg)}onUnloadPlugin(){this.lineAuthoringFeature.deactivateFeature(),this.signsFeature.deactivateFeature()}onLoadPlugin(){this.plg.registerEditorExtension(vb),this.lineAuthoringFeature.onLoadPlugin(),this.signsFeature.onLoadPlugin()}onReady(){this.lineAuthoringFeature.conditionallyActivateBySettings(),this.signsFeature.conditionallyActivateBySettings()}activateLineAuthoring(){this.lineAuthoringFeature.activateFeature()}deactiveLineAuthoring(){this.lineAuthoringFeature.deactivateFeature()}refreshSignsSettings(){let e=this.plg.settings.hunks;e.showSigns||e.statusBar!="disabled"||e.hunkCommands?(this.signsFeature.deactivateFeature(),this.signsFeature.activateFeature()):this.signsFeature.deactivateFeature()}};var vm=class extends xe.Plugin{constructor(){super(...arguments);this.automaticsManager=new Pu(this);this.tools=new qu(this);this.localStorage=new yp(this);this.state={gitAction:0,offlineMode:!1};this.gitReady=!1;this.promiseQueue=new Id(this);this.intervalsToClear=[];this.editorIntegration=new gm(this);this.hunkActions=new lm(this)}setPluginState(r){var n;this.state=Object.assign(this.state,r),(n=this.statusBar)==null||n.display()}async updateCachedStatus(){var r,n;return this.app.workspace.trigger("obsidian-git:loading-status"),this.cachedStatus=await this.gitManager.status(),this.cachedStatus.conflicted.length>0?(this.localStorage.setConflict(!0),await((r=this.branchBar)==null?void 0:r.display())):(this.localStorage.setConflict(!1),await((n=this.branchBar)==null?void 0:n.display())),this.app.workspace.trigger("obsidian-git:status-changed",this.cachedStatus),this.cachedStatus}async refresh(){if(!this.gitReady)return;let r=this.app.workspace.getLeavesOfType(jt.type),n=this.app.workspace.getLeavesOfType(gn.type);(this.settings.changedFilesInStatusBar||r.some(i=>{var a;return!((a=i.isDeferred)!=null&&a)})||n.some(i=>{var a;return!((a=i.isDeferred)!=null&&a)}))&&await this.updateCachedStatus().catch(i=>this.displayError(i)),this.app.workspace.trigger("obsidian-git:refreshed")}refreshUpdatedHead(){}async onload(){console.log("loading "+this.manifest.name+" plugin: v"+this.manifest.version),ui.plugin=this,this.localStorage.migrate(),await this.loadSettings(),await this.migrateSettings(),this.settingsTab=new Yh(this.app,this),this.addSettingTab(this.settingsTab),this.localStorage.getPluginDisabled()||(this.registerStuff(),this.app.workspace.onLayoutReady(()=>this.init({fromReload:!1}).catch(r=>this.displayError(r))))}onExternalSettingsChange(){this.reloadSettings().catch(r=>this.displayError(r))}async reloadSettings(){let r=JSON.stringify(this.settings);await this.loadSettings();let n=JSON.stringify(this.settings);r!==n&&(this.log("Reloading settings"),this.unloadPlugin(),await this.init({fromReload:!0}),this.app.workspace.getLeavesOfType(jt.type).forEach(i=>{var a;if(!((a=i.isDeferred)!=null&&a))return i.view.reload()}),this.app.workspace.getLeavesOfType(gn.type).forEach(i=>{var a;if(!((a=i.isDeferred)!=null&&a))return i.view.reload()}))}registerStuff(){this.registerEvent(this.app.workspace.on("obsidian-git:refresh",()=>{this.refresh().catch(r=>this.displayError(r))})),this.registerEvent(this.app.workspace.on("obsidian-git:head-change",()=>{this.refreshUpdatedHead()})),this.registerEvent(this.app.workspace.on("file-menu",(r,n,i)=>{this.handleFileMenu(r,n,i,"file-manu")})),this.registerEvent(this.app.workspace.on("obsidian-git:menu",(r,n,i)=>{this.handleFileMenu(r,n,i,"obsidian-git:menu")})),this.registerEvent(this.app.workspace.on("active-leaf-change",r=>{this.onActiveLeafChange(r)})),this.registerEvent(this.app.vault.on("modify",()=>{var r;this.debRefresh(),(r=this.autoCommitDebouncer)==null||r.call(this)})),this.registerEvent(this.app.vault.on("delete",()=>{var r;this.debRefresh(),(r=this.autoCommitDebouncer)==null||r.call(this)})),this.registerEvent(this.app.vault.on("create",()=>{var r;this.debRefresh(),(r=this.autoCommitDebouncer)==null||r.call(this)})),this.registerEvent(this.app.vault.on("rename",()=>{var r;this.debRefresh(),(r=this.autoCommitDebouncer)==null||r.call(this)})),this.registerView(jt.type,r=>new wf(r,this)),this.registerView(gn.type,r=>new hf(r,this)),this.registerView(Da.type,r=>new Us(r,this)),this.registerView(Ma.type,r=>new Gs(r,this)),this.addRibbonIcon("git-pull-request","Open Git source control",async()=>{var i;let r=this.app.workspace.getLeavesOfType(jt.type),n;r.length===0?(n=(i=this.app.workspace.getRightLeaf(!1))!=null?i:this.app.workspace.getLeaf(),await n.setViewState({type:jt.type})):n=r.first(),await this.app.workspace.revealLeaf(n)}),this.registerHoverLinkSource(jt.type,{display:"Git View",defaultMod:!0}),this.editorIntegration.onLoadPlugin(),this.setRefreshDebouncer(),EO(this)}setRefreshDebouncer(){var r;(r=this.debRefresh)==null||r.cancel(),this.debRefresh=(0,xe.debounce)(()=>{this.settings.refreshSourceControl&&this.refresh().catch(console.error)},this.settings.refreshSourceControlTimer,!0)}async addFileToGitignore(r,n){let i=this.gitManager.getRelativeRepoPath(r,!0),a=FP({isFolder:n,gitRelativePath:i});await this.app.vault.adapter.append(this.gitManager.getRelativeVaultPath(".gitignore"),`
`+a),this.app.workspace.trigger("obsidian-git:refresh")}handleFileMenu(r,n,i,a){if(!this.gitReady||!this.settings.showFileMenu||!n)return;let s;if(typeof n=="string"?s=n:s=n.path,i=="file-explorer-context-menu"&&(r.addItem(o=>{o.setTitle("Git: Stage").setIcon("plus-circle").setSection("action").onClick(l=>{this.promiseQueue.addTask(async()=>{n instanceof xe.TFile?await this.stageFile(n):(await this.gitManager.stageAll({dir:this.gitManager.getRelativeRepoPath(s,!0)}),this.app.workspace.trigger("obsidian-git:refresh"))})})}),r.addItem(o=>{o.setTitle("Git: Unstage").setIcon("minus-circle").setSection("action").onClick(l=>{this.promiseQueue.addTask(async()=>{n instanceof xe.TFile?await this.unstageFile(n):(await this.gitManager.unstageAll({dir:this.gitManager.getRelativeRepoPath(s,!0)}),this.app.workspace.trigger("obsidian-git:refresh"))})})}),r.addItem(o=>{o.setTitle("Git: Add to .gitignore").setIcon("file-x").setSection("action").onClick(l=>{this.addFileToGitignore(s,n instanceof xe.TFolder).catch(c=>this.displayError(c))})})),i=="git-source-control"){r.addItem(l=>{l.setTitle("Git: Add to .gitignore").setIcon("file-x").setSection("action").onClick(c=>{this.addFileToGitignore(s,n instanceof xe.TFolder).catch(u=>this.displayError(u))})});let o=this.app.vault.adapter;a==="obsidian-git:menu"&&o instanceof xe.FileSystemAdapter&&(r.addItem(l=>{l.setTitle("Open in default app").setIcon("arrow-up-right").setSection("action").onClick(c=>{this.app.openWithDefaultApp(s)})}),r.addItem(l=>{l.setTitle("Show in system explorer").setIcon("arrow-up-right").setSection("action").onClick(c=>{window.electron.shell.showItemInFolder(hD.join(o.getBasePath(),s))})}))}}async migrateSettings(){this.settings.mergeOnPull!=null&&(this.settings.syncMethod=this.settings.mergeOnPull?"merge":"rebase",this.settings.mergeOnPull=void 0,await this.saveSettings()),this.settings.autoCommitMessage===void 0&&(this.settings.autoCommitMessage=this.settings.commitMessage,await this.saveSettings()),this.settings.gitPath!=null&&(this.localStorage.setGitPath(this.settings.gitPath),this.settings.gitPath=void 0,await this.saveSettings()),this.settings.username!=null&&(this.localStorage.setPassword(this.settings.username),this.settings.username=void 0,await this.saveSettings())}unloadPlugin(){var r,n;this.gitReady=!1,this.editorIntegration.onUnloadPlugin(),this.automaticsManager.unload(),(r=this.branchBar)==null||r.remove(),(n=this.statusBar)==null||n.remove(),this.statusBar=void 0,this.branchBar=void 0,this.gitManager.unload(),this.promiseQueue.clear();for(let i of this.intervalsToClear)window.clearInterval(i);this.intervalsToClear=[],this.debRefresh.cancel()}onunload(){this.unloadPlugin(),console.log("unloading "+this.manifest.name+" plugin")}async loadSettings(){let r=await this.loadData();r==null&&(r={showedMobileNotice:!0}),this.settings=LA(et,r)}async saveSettings(){var r;(r=this.settingsTab)==null||r.beforeSaveSettings(),await this.saveData(this.settings)}get useSimpleGit(){return xe.Platform.isDesktopApp}async init({fromReload:r=!1}){var n;if(this.settings.showStatusBar&&!this.statusBar){let i=this.addStatusBarItem();this.statusBar=new Xh(i,this),this.intervalsToClear.push(window.setInterval(()=>{var a;return(a=this.statusBar)==null?void 0:a.display()},1e3))}try{this.useSimpleGit?(this.gitManager=new Ee(this),await this.gitManager.setGitInstance()):this.gitManager=new Ln(this);let i=await this.gitManager.checkRequirements(),a=this.localStorage.getPausedAutomatics();switch(i){case"missing-git":this.displayError(`Cannot run git command. Trying to run: '${this.localStorage.getGitPath()||"git"}' .`);break;case"missing-repo":new xe.Notice("Can't find a valid git repository. Please create one via the given command or clone an existing repo.",1e4);break;case"valid":if(this.gitReady=!0,this.setPluginState({gitAction:0}),xe.Platform.isDesktop&&this.settings.showBranchStatusBar&&!this.branchBar){let s=this.addStatusBarItem();this.branchBar=new om(s,this),this.intervalsToClear.push(window.setInterval(()=>{var o;return void((o=this.branchBar)==null?void 0:o.display().catch(console.error))},6e4))}await((n=this.branchBar)==null?void 0:n.display()),this.editorIntegration.onReady(),this.app.workspace.trigger("obsidian-git:refresh"),this.app.workspace.trigger("obsidian-git:head-change"),!r&&this.settings.autoPullOnBoot&&!a&&this.promiseQueue.addTask(()=>this.pullChangesFromRemote()),a||await this.automaticsManager.init(),a&&new xe.Notice("Automatic routines are currently paused.");break;default:this.log("Something weird happened. The 'checkRequirements' result is "+i)}}catch(i){this.displayError(i),console.error(i)}}async createNewRepo(){try{await this.gitManager.init(),new xe.Notice("Initialized new repo"),await this.init({fromReload:!0})}catch(r){this.displayError(r)}}async cloneNewRepo(){let n=await new Ke(this,{placeholder:"Enter remote URL"}).openAndGetResult();if(n){let i="Vault Root",a=await new Ke(this,{options:this.gitManager instanceof Ln?[i]:[],placeholder:"Enter directory for clone. It needs to be empty or not existent.",allowEmpty:this.gitManager instanceof Ln}).openAndGetResult();if(a==null)return;if(a===i&&(a="."),a=(0,xe.normalizePath)(a),a==="/"&&(a="."),a==="."){let f=await new Ke(this,{options:["NO","YES"],placeholder:`Does your remote repo contain a ${this.app.vault.configDir} directory at the root?`,onlySelection:!0}).openAndGetResult();if(f===void 0){new xe.Notice("Aborted clone");return}else if(f==="YES"){let d="DELETE ALL YOUR LOCAL CONFIG AND PLUGINS";if(await new Ke(this,{options:["Abort clone",d],placeholder:`To avoid conflicts, the local ${this.app.vault.configDir} directory needs to be deleted.`,onlySelection:!0}).openAndGetResult()===d)await this.app.vault.adapter.rmdir(this.app.vault.configDir,!0);else{new xe.Notice("Aborted clone");return}}}let s=await new Ke(this,{placeholder:"Specify depth of clone. Leave empty for full clone.",allowEmpty:!0}).openAndGetResult(),o;if(s===void 0){new xe.Notice("Aborted clone");return}if(s!==""&&(o=parseInt(s),isNaN(o))){new xe.Notice("Invalid depth. Aborting clone.");return}new xe.Notice(`Cloning new repo into "${a}"`);let l=this.settings.basePath,c=a&&a!==".";c&&(this.settings.basePath=a);try{await this.gitManager.clone(Rw(n),a,o),new xe.Notice("Cloned new repo."),new xe.Notice("Please restart Obsidian"),c&&await this.saveSettings()}catch(u){this.displayError(u),this.settings.basePath=l,await this.saveSettings()}}}async isAllInitialized(){return this.gitReady||await this.init({fromReload:!0}),this.gitReady}async pullChangesFromRemote(){if(!await this.isAllInitialized())return;let r=await this.pull();if(r!==!1){if(r||this.displayMessage("Pull: Everything is up-to-date"),this.gitManager instanceof Ee){let n=await this.updateCachedStatus();n.conflicted.length>0&&(this.displayError(`You have conflicts in ${n.conflicted.length} ${n.conflicted.length==1?"file":"files"}`),await this.handleConflict(n.conflicted))}this.app.workspace.trigger("obsidian-git:refresh"),this.setPluginState({gitAction:0})}}async commitAndSync({fromAutoBackup:r,requestCustomMessage:n=!1,commitMessage:i,onlyStaged:a=!1}){!await this.isAllInitialized()||(this.settings.syncMethod=="reset"&&this.settings.pullBeforePush&&await this.pull(),!await this.commit({fromAuto:r,requestCustomMessage:n,commitMessage:i,onlyStaged:a}))||(this.settings.syncMethod!="reset"&&this.settings.pullBeforePush&&await this.pull(),this.settings.disablePush||(await this.remotesAreSet()&&await this.gitManager.canPush()?await this.push():this.displayMessage("No commits to push")),this.setPluginState({gitAction:0}))}async commit({fromAuto:r,requestCustomMessage:n=!1,onlyStaged:i=!1,commitMessage:a,amend:s=!1}){if(!await this.isAllInitialized())return!1;try{let o=this.localStorage.getConflict(),l,c=[],u=[];if(this.gitManager instanceof Ee){if(await this.mayDeleteConflictFile(),l=await this.updateCachedStatus(),l.conflicted.length==0&&(o=!1),r&&l.conflicted.length>0)return this.displayError(`Did not commit, because you have conflicts in ${l.conflicted.length} ${l.conflicted.length==1?"file":"files"}. Please resolve them and commit per command.`),await this.handleConflict(l.conflicted),!1;c=l.staged,u=l.changed}else{if(r&&o)return this.displayError("Did not commit, because you have conflicts. Please resolve them and commit per command."),!1;{o&&await this.mayDeleteConflictFile();let f=this.gitManager;i?c=await f.getStagedFiles():u=(await f.getUnstagedFiles()).map(({path:h,type:m})=>({vaultPath:this.gitManager.getRelativeVaultPath(h),path:h,type:m}))}}if(await this.tools.hasTooBigFiles(i?c:[...c,...u]))return this.setPluginState({gitAction:0}),!1;if(u.length+c.length!==0||o){let f=a!=null?a:a=r?this.settings.autoCommitMessage:this.settings.commitMessage;if(r&&this.settings.customMessageOnAutoBackup||n){!this.settings.disablePopups&&r&&new xe.Notice("Auto backup: Please enter a custom commit message. Leave empty to abort");let m=await new Zh(this).openAndGetResult();if(m!=null&&m!=""&&m!="...")f=m;else return this.setPluginState({gitAction:0}),!1}else if(this.gitManager instanceof Ee&&this.settings.commitMessageScript){let m=this.settings.commitMessageScript,g=this.localStorage.getHostname()||"",v=m.replace("{{hostname}}",g);v=v.replace("{{date}}",(0,xe.moment)().format(this.settings.commitDateFormat));let w=await wu("sh",["-c",v],{cwd:this.gitManager.absoluteRepoPath});w.code!=0?this.displayError(w.stderr):w.stdout.trim().length==0?this.displayMessage("Stdout from commit message script is empty. Using default message."):f=w.stdout}let d;i?d=await this.gitManager.commit({message:f,amend:s}):d=await this.gitManager.commitAll({message:f,status:l,unstagedFiles:u,amend:s}),this.gitManager instanceof Ee&&await this.updateCachedStatus();let h=!1;d===void 0&&(h=!0,d=u.length+c.length||0),this.displayMessage(`Committed${h?" approx.":""} ${d} ${d==1?"file":"files"}`)}else this.displayMessage("No changes to commit");return this.app.workspace.trigger("obsidian-git:refresh"),!0}catch(o){return this.displayError(o),!1}}async push(){if(!await this.isAllInitialized()||!await this.remotesAreSet())return!1;let r=this.localStorage.getConflict();try{this.gitManager instanceof Ee&&await this.mayDeleteConflictFile();let n;if(this.gitManager instanceof Ee&&(n=await this.updateCachedStatus()).conflicted.length>0)return this.displayError(`Cannot push. You have conflicts in ${n.conflicted.length} ${n.conflicted.length==1?"file":"files"}`),await this.handleConflict(n.conflicted),!1;if(this.gitManager instanceof Ln&&r)return this.displayError("Cannot push. You have conflicts"),!1;this.log("Pushing....");let i=await this.gitManager.push();return i!==void 0&&(i>0?this.displayMessage(`Pushed ${i} ${i==1?"file":"files"} to remote`):this.displayMessage("No commits to push")),this.setPluginState({offlineMode:!1}),this.app.workspace.trigger("obsidian-git:refresh"),!0}catch(n){return n instanceof rl?this.handleNoNetworkError(n):this.displayError(n),!1}}async pull(){if(!await this.remotesAreSet())return!1;try{this.log("Pulling....");let r=await this.gitManager.pull()||[];return this.setPluginState({offlineMode:!1}),r.length>0&&(this.displayMessage(`Pulled ${r.length} ${r.length==1?"file":"files"} from remote`),this.lastPulledFiles=r),r.length}catch(r){return this.displayError(r),!1}}async fetch(){if(await this.remotesAreSet())try{await this.gitManager.fetch(),this.displayMessage("Fetched from remote"),this.setPluginState({offlineMode:!1}),this.app.workspace.trigger("obsidian-git:refresh")}catch(r){this.displayError(r)}}async mayDeleteConflictFile(){let r=this.app.vault.getAbstractFileByPath(tl);r&&(this.app.workspace.iterateAllLeaves(n=>{var i;n.view instanceof xe.MarkdownView&&((i=n.view.file)==null?void 0:i.path)==r.path&&n.detach()}),await this.app.vault.delete(r))}async stageFile(r){return await this.isAllInitialized()?(await this.gitManager.stage(r.path,!0),this.app.workspace.trigger("obsidian-git:refresh"),this.setPluginState({gitAction:0}),!0):!1}async unstageFile(r){return await this.isAllInitialized()?(await this.gitManager.unstage(r.path,!0),this.app.workspace.trigger("obsidian-git:refresh"),this.setPluginState({gitAction:0}),!0):!1}async switchBranch(){var i;if(!await this.isAllInitialized())return;let r=await this.gitManager.branchInfo(),n=await new am(this,r.branches).openAndGetReslt();if(n!=null)return await this.gitManager.checkout(n),this.displayMessage(`Switched to ${n}`),this.app.workspace.trigger("obsidian-git:refresh"),await((i=this.branchBar)==null?void 0:i.display()),n}async switchRemoteBranch(){var a;if(!await this.isAllInitialized())return;let r=await this.selectRemoteBranch()||"",[n,i]=Yi(r);if(i!=null&&n!=null)return await this.gitManager.checkout(i,n),this.displayMessage(`Switched to ${r}`),await((a=this.branchBar)==null?void 0:a.display()),r}async createBranch(){var n;if(!await this.isAllInitialized())return;let r=await new Ke(this,{placeholder:"Create new branch"}).openAndGetResult();if(r!=null)return await this.gitManager.createBranch(r),this.displayMessage(`Created new branch ${r}`),await((n=this.branchBar)==null?void 0:n.display()),r}async deleteBranch(){var i;if(!await this.isAllInitialized())return;let r=await this.gitManager.branchInfo();r.current&&r.branches.remove(r.current);let n=await new Ke(this,{options:r.branches,placeholder:"Delete branch",onlySelection:!0}).openAndGetResult();if(n!=null){let a=!1;if(!await this.gitManager.branchIsMerged(n)){let o=await new Ke(this,{options:["YES","NO"],placeholder:"This branch isn't merged into HEAD. Force delete?",onlySelection:!0}).openAndGetResult();if(o!=="YES")return;a=o==="YES"}return await this.gitManager.deleteBranch(n,a),this.displayMessage(`Deleted branch ${n}`),await((i=this.branchBar)==null?void 0:i.display()),n}}async remotesAreSet(){return this.settings.updateSubmodules||(await this.gitManager.branchInfo()).tracking?!0:(new xe.Notice("No upstream branch is set. Please select one."),await this.setUpstreamBranch())}async setUpstreamBranch(){let r=await this.selectRemoteBranch();return r==null?(this.displayError("Aborted. No upstream-branch is set!",1e4),this.setPluginState({gitAction:0}),!1):(await this.gitManager.updateUpstreamBranch(r),this.displayMessage(`Set upstream branch to ${r}`),this.setPluginState({gitAction:0}),!0)}async discardAll(r){if(!await this.isAllInitialized())return!1;let n=await this.gitManager.status({path:r}),i=0,a=0;for(let o of n.changed)o.workingDir=="U"?i++:a++;if(i+a==0)return!1;let s=await new ic({app:this.app,filesToDeleteCount:i,filesToDiscardCount:a,path:r!=null?r:""}).openAndGetResult();switch(s){case!1:return s;case"discard":await this.gitManager.discardAll({dir:r,status:this.cachedStatus});break;case"delete":{await this.gitManager.discardAll({dir:r,status:this.cachedStatus});let o=await this.gitManager.getUntrackedPaths({path:r,status:this.cachedStatus});for(let l of o){let c=this.gitManager.getRelativeVaultPath(l),u=this.app.vault.getAbstractFileByPath(c);u?await this.app.fileManager.trashFile(u):l.endsWith("/")?await this.app.vault.adapter.rmdir(c,!0):await this.app.vault.adapter.remove(c)}break}default:uh(s)}return this.app.workspace.trigger("obsidian-git:refresh"),s}async handleConflict(r){this.localStorage.setConflict(!0);let n;r!==void 0&&(n=["# Conflicts","Please resolve them and commit them using the commands `Git: Commit all changes` followed by `Git: Push`","(This file will automatically be deleted before commit)","[[#Additional Instructions]] available below file list","",...r.map(i=>{let a=this.app.vault.getAbstractFileByPath(i);return a instanceof xe.TFile?`- [[${this.app.metadataCache.fileToLinktext(a,"/")}]]`:`- Not a file: ${i}`}),`
# Additional Instructions
I strongly recommend to use "Source mode" for viewing the conflicted files. For simple conflicts, in each file listed above replace every occurrence of the following text blocks with the desired text.

\`\`\`diff
<<<<<<< HEAD
    File changes in local repository
=======
    File changes in remote repository
>>>>>>> origin/main
\`\`\``]),await this.tools.writeAndOpenFile(n==null?void 0:n.join(`
`))}async editRemotes(){if(!await this.isAllInitialized())return;let r=await this.gitManager.getRemotes(),i=await new Ke(this,{options:r,placeholder:"Select or create a new remote by typing its name and selecting it"}).openAndGetResult();if(i){let a=await this.gitManager.getRemoteUrl(i),o=await new Ke(this,{initialValue:a,placeholder:"Enter remote URL"}).openAndGetResult();if(o)return await this.gitManager.setRemote(i,Rw(o)),i}}async selectRemoteBranch(){let r=await this.gitManager.getRemotes(),n;r.length===0&&(n=await this.editRemotes(),n==null&&(r=await this.gitManager.getRemotes()));let i=new Ke(this,{options:r,placeholder:"Select or create a new remote by typing its name and selecting it"}),a=n!=null?n:await i.openAndGetResult();if(a){this.displayMessage("Fetching remote branches"),await this.gitManager.fetch(a);let s=await this.gitManager.getRemoteBranches(a),l=await new Ke(this,{options:s,placeholder:"Select or create a new remote branch by typing its name and selecting it"}).openAndGetResult();return l==null?void 0:l.startsWith(a+"/")?l:`${a}/${l}`}}async removeRemote(){if(!await this.isAllInitialized())return;let r=await this.gitManager.getRemotes(),i=await new Ke(this,{options:r,placeholder:"Select a remote"}).openAndGetResult();i&&await this.gitManager.removeRemote(i)}onActiveLeafChange(r){var s,o;let n=r==null?void 0:r.view;if(!(n!=null&&n.getState().file)&&!(n instanceof Us||n instanceof Gs))return;let i=this.app.workspace.getLeavesOfType(jt.type).first(),a=this.app.workspace.getLeavesOfType(gn.type).first();if((s=i==null?void 0:i.view.containerEl.querySelector("div.tree-item-self.is-active"))==null||s.removeClass("is-active"),(o=a==null?void 0:a.view.containerEl.querySelector("div.tree-item-self.is-active"))==null||o.removeClass("is-active"),(r==null?void 0:r.view)instanceof Us||(r==null?void 0:r.view)instanceof Gs){let c=r.view.state.bFile.replace(/["\\]/g,"\\$&");this.lastDiffViewState=r.view.getState();let u;i&&r.view.state.aRef=="HEAD"?u=i.view.containerEl.querySelector(`div.staged div.tree-item-self[data-path="${c}"]`):i&&r.view.state.aRef==""?u=i.view.containerEl.querySelector(`div.changes div.tree-item-self[data-path="${c}"]`):a&&(u=a.view.containerEl.querySelector(`div.tree-item-self[data-path='${c}']`)),u==null||u.addClass("is-active")}else this.lastDiffViewState=void 0}handleNoNetworkError(r){this.state.offlineMode?this.log("Encountered network error, but already in offline mode"):this.displayError("Git: Going into offline mode. Future network errors will no longer be displayed.",2e3),this.setPluginState({gitAction:0,offlineMode:!0})}displayMessage(r,n=4*1e3){var i;(i=this.statusBar)==null||i.displayMessage(r.toLowerCase(),n),this.settings.disablePopups||(!this.settings.disablePopupsForNoChanges||!r.startsWith("No changes"))&&new xe.Notice(r,5*1e3),this.log(r)}displayError(r,n=10*1e3){var a;if(r instanceof dD.Errors.UserCanceledError){new xe.Notice("Aborted");return}let i;r instanceof Error?i=r:i=new Error(String(r)),this.setPluginState({gitAction:0}),this.settings.showErrorNotices&&new xe.Notice(i.message,n),console.error(`${this.manifest.id}:`,i.stack),(a=this.statusBar)==null||a.displayMessage(i.message.toLowerCase(),n)}log(...r){console.log(`${this.manifest.id}:`,...r)}};
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

crc-32/crc32.js:
  (*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com *)

isomorphic-git/index.cjs:
  (*!
   * This code for `path.join` is directly copied from @zenfs/core/path for bundle size improvements.
   * SPDX-License-Identifier: LGPL-3.0-or-later
   * Copyright (c) James Prevett and other ZenFS contributors.
   *)

js-sha256/src/sha256.js:
  (**
   * [js-sha256]{@link https://github.com/emn178/js-sha256}
   *
   * @version 0.9.0
   * @author Chen, Yi-Cyuan [emn178@gmail.com]
   * @copyright Chen, Yi-Cyuan 2014-2017
   * @license MIT
   *)
*/
